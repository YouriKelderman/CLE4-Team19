var sl=Object.defineProperty;var nl=(w,M,d)=>M in w?sl(w,M,{enumerable:!0,configurable:!0,writable:!0,value:d}):w[M]=d;var T=(w,M,d)=>(nl(w,typeof M!="symbol"?M+"":M,d),d),Ba=(w,M,d)=>{if(!M.has(w))throw TypeError("Cannot "+d)};var Ko=(w,M,d)=>(Ba(w,M,"read from private field"),d?d.call(w):M.get(w)),qo=(w,M,d)=>{if(M.has(w))throw TypeError("Cannot add the same private member more than once");M instanceof WeakSet?M.add(w):M.set(w,d)},Ma=(w,M,d,m)=>(Ba(w,M,"write to private field"),m?m.call(w,d):M.set(w,d),d);var Ya=(w,M,d)=>(Ba(w,M,"access private method"),d);(function(){const M=document.createElement("link").relList;if(M&&M.supports&&M.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))m(v);new MutationObserver(v=>{for(const x of v)if(x.type==="childList")for(const b of x.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&m(b)}).observe(document,{childList:!0,subtree:!0});function d(v){const x={};return v.integrity&&(x.integrity=v.integrity),v.referrerPolicy&&(x.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?x.credentials="include":v.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function m(v){if(v.ep)return;v.ep=!0;const x=d(v);fetch(v.href,x)}})();/*!
 * excalibur - 0.27.0 - 2022-7-8
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2022 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var rl={4662:(w,M,d)=>{d(3430);var m=d(8791);w.exports=m("Array","sort")},8343:(w,M,d)=>{d(4769);var m=d(9276);w.exports=m.Object.keys},7111:(w,M,d)=>{var m=d(6733),v=d(9821),x=TypeError;w.exports=function(b){if(m(b))return b;throw x(v(b)+" is not a function")}},1176:(w,M,d)=>{var m=d(5052),v=String,x=TypeError;w.exports=function(b){if(m(b))return b;throw x(v(b)+" is not an object")}},9540:(w,M,d)=>{var m=d(905),v=d(3231),x=d(9646),b=function(R){return function(G,z,Q){var et=m(G),S=x(et),P=v(Q,S),Y;if(R&&z!=z){for(;S>P;)if(Y=et[P++],Y!=Y)return!0}else for(;S>P;P++)if((R||P in et)&&et[P]===z)return R||P||0;return!R&&-1}};w.exports={includes:b(!0),indexOf:b(!1)}},6038:(w,M,d)=>{var m=d(4229);w.exports=function(v,x){var b=[][v];return!!b&&m(function(){b.call(null,x||function(){return 1},1)})}},9794:(w,M,d)=>{var m=d(3231),v=d(9646),x=d(2324),b=Array,R=Math.max;w.exports=function(G,z,Q){for(var et=v(G),S=m(z,et),P=m(Q===void 0?et:Q,et),Y=b(R(P-S,0)),Z=0;S<P;S++,Z++)x(Y,Z,G[S]);return Y.length=Z,Y}},3867:(w,M,d)=>{var m=d(9794),v=Math.floor,x=function(G,z){var Q=G.length,et=v(Q/2);return Q<8?b(G,z):R(G,x(m(G,0,et),z),x(m(G,et),z),z)},b=function(G,z){for(var Q=G.length,et=1,S,P;et<Q;){for(P=et,S=G[et];P&&z(G[P-1],S)>0;)G[P]=G[--P];P!==et++&&(G[P]=S)}return G},R=function(G,z,Q,et){for(var S=z.length,P=Q.length,Y=0,Z=0;Y<S||Z<P;)G[Y+Z]=Y<S&&Z<P?et(z[Y],Q[Z])<=0?z[Y++]:Q[Z++]:Y<S?z[Y++]:Q[Z++];return G};w.exports=x},7079:(w,M,d)=>{var m=d(5968),v=m({}.toString),x=m("".slice);w.exports=function(b){return x(v(b),8,-1)}},1589:(w,M,d)=>{var m=d(1601),v=d(6733),x=d(7079),b=d(95),R=b("toStringTag"),G=Object,z=x(function(){return arguments}())=="Arguments",Q=function(et,S){try{return et[S]}catch{}};w.exports=m?x:function(et){var S,P,Y;return et===void 0?"Undefined":et===null?"Null":typeof(P=Q(S=G(et),R))=="string"?P:z?x(S):(Y=x(S))=="Object"&&v(S.callee)?"Arguments":Y}},7081:(w,M,d)=>{var m=d(8270),v=d(4826),x=d(7933),b=d(1787);w.exports=function(R,G,z){for(var Q=v(G),et=b.f,S=x.f,P=0;P<Q.length;P++){var Y=Q[P];!m(R,Y)&&!(z&&m(z,Y))&&et(R,Y,S(G,Y))}}},5762:(w,M,d)=>{var m=d(7400),v=d(1787),x=d(5358);w.exports=m?function(b,R,G){return v.f(b,R,x(1,G))}:function(b,R,G){return b[R]=G,b}},5358:w=>{w.exports=function(M,d){return{enumerable:!(M&1),configurable:!(M&2),writable:!(M&4),value:d}}},2324:(w,M,d)=>{var m=d(9310),v=d(1787),x=d(5358);w.exports=function(b,R,G){var z=m(R);z in b?v.f(b,z,x(0,G)):b[z]=G}},4768:(w,M,d)=>{var m=d(6733),v=d(1787),x=d(6039),b=d(8400);w.exports=function(R,G,z,Q){Q||(Q={});var et=Q.enumerable,S=Q.name!==void 0?Q.name:G;if(m(z)&&x(z,S,Q),Q.global)et?R[G]=z:b(G,z);else{try{Q.unsafe?R[G]&&(et=!0):delete R[G]}catch{}et?R[G]=z:v.f(R,G,{value:z,enumerable:!1,configurable:!Q.nonConfigurable,writable:!Q.nonWritable})}return R}},8400:(w,M,d)=>{var m=d(9859),v=Object.defineProperty;w.exports=function(x,b){try{v(m,x,{value:b,configurable:!0,writable:!0})}catch{m[x]=b}return b}},9563:(w,M,d)=>{var m=d(9821),v=TypeError;w.exports=function(x,b){if(!delete x[b])throw v("Cannot delete property "+m(b)+" of "+m(x))}},7400:(w,M,d)=>{var m=d(4229);w.exports=!m(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},2635:(w,M,d)=>{var m=d(9859),v=d(5052),x=m.document,b=v(x)&&v(x.createElement);w.exports=function(R){return b?x.createElement(R):{}}},2671:(w,M,d)=>{var m=d(598),v=m.match(/firefox\/(\d+)/i);w.exports=!!v&&+v[1]},8506:(w,M,d)=>{var m=d(598);w.exports=/MSIE|Trident/.test(m)},598:(w,M,d)=>{var m=d(1333);w.exports=m("navigator","userAgent")||""},6358:(w,M,d)=>{var m=d(9859),v=d(598),x=m.process,b=m.Deno,R=x&&x.versions||b&&b.version,G=R&&R.v8,z,Q;G&&(z=G.split("."),Q=z[0]>0&&z[0]<4?1:+(z[0]+z[1])),!Q&&v&&(z=v.match(/Edge\/(\d+)/),(!z||z[1]>=74)&&(z=v.match(/Chrome\/(\d+)/),z&&(Q=+z[1]))),w.exports=Q},9811:(w,M,d)=>{var m=d(598),v=m.match(/AppleWebKit\/(\d+)\./);w.exports=!!v&&+v[1]},8791:(w,M,d)=>{var m=d(9859),v=d(5968);w.exports=function(x,b){return v(m[x].prototype[b])}},3837:w=>{w.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(w,M,d)=>{var m=d(9859),v=d(7933).f,x=d(5762),b=d(4768),R=d(8400),G=d(7081),z=d(6541);w.exports=function(Q,et){var S=Q.target,P=Q.global,Y=Q.stat,Z,K,q,ct,dt,B;if(P?K=m:Y?K=m[S]||R(S,{}):K=(m[S]||{}).prototype,K)for(q in et){if(dt=et[q],Q.dontCallGetSet?(B=v(K,q),ct=B&&B.value):ct=K[q],Z=z(P?q:S+(Y?".":"#")+q,Q.forced),!Z&&ct!==void 0){if(typeof dt==typeof ct)continue;G(dt,ct)}(Q.sham||ct&&ct.sham)&&x(dt,"sham",!0),b(K,q,dt,Q)}}},4229:w=>{w.exports=function(M){try{return!!M()}catch{return!0}}},7188:(w,M,d)=>{var m=d(4229);w.exports=!m(function(){var v=function(){}.bind();return typeof v!="function"||v.hasOwnProperty("prototype")})},266:(w,M,d)=>{var m=d(7188),v=Function.prototype.call;w.exports=m?v.bind(v):function(){return v.apply(v,arguments)}},1805:(w,M,d)=>{var m=d(7400),v=d(8270),x=Function.prototype,b=m&&Object.getOwnPropertyDescriptor,R=v(x,"name"),G=R&&function(){}.name==="something",z=R&&(!m||m&&b(x,"name").configurable);w.exports={EXISTS:R,PROPER:G,CONFIGURABLE:z}},5968:(w,M,d)=>{var m=d(7188),v=Function.prototype,x=v.bind,b=v.call,R=m&&x.bind(b,b);w.exports=m?function(G){return G&&R(G)}:function(G){return G&&function(){return b.apply(G,arguments)}}},1333:(w,M,d)=>{var m=d(9859),v=d(6733),x=function(b){return v(b)?b:void 0};w.exports=function(b,R){return arguments.length<2?x(m[b]):m[b]&&m[b][R]}},5300:(w,M,d)=>{var m=d(7111);w.exports=function(v,x){var b=v[x];return b==null?void 0:m(b)}},9859:(w,M,d)=>{var m=function(v){return v&&v.Math==Math&&v};w.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof d.g=="object"&&d.g)||function(){return this}()||Function("return this")()},8270:(w,M,d)=>{var m=d(5968),v=d(2991),x=m({}.hasOwnProperty);w.exports=Object.hasOwn||function(R,G){return x(v(R),G)}},5977:w=>{w.exports={}},4394:(w,M,d)=>{var m=d(7400),v=d(4229),x=d(2635);w.exports=!m&&!v(function(){return Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a!=7})},9337:(w,M,d)=>{var m=d(5968),v=d(4229),x=d(7079),b=Object,R=m("".split);w.exports=v(function(){return!b("z").propertyIsEnumerable(0)})?function(G){return x(G)=="String"?R(G,""):b(G)}:b},8511:(w,M,d)=>{var m=d(5968),v=d(6733),x=d(5353),b=m(Function.toString);v(x.inspectSource)||(x.inspectSource=function(R){return b(R)}),w.exports=x.inspectSource},6407:(w,M,d)=>{var m=d(8694),v=d(9859),x=d(5968),b=d(5052),R=d(5762),G=d(8270),z=d(5353),Q=d(4399),et=d(5977),S="Object already initialized",P=v.TypeError,Y=v.WeakMap,Z,K,q,ct=function(Gt){return q(Gt)?K(Gt):Z(Gt,{})},dt=function(Gt){return function(W){var Et;if(!b(W)||(Et=K(W)).type!==Gt)throw P("Incompatible receiver, "+Gt+" required");return Et}};if(m||z.state){var B=z.state||(z.state=new Y),L=x(B.get),Pt=x(B.has),gt=x(B.set);Z=function(Gt,W){if(Pt(B,Gt))throw new P(S);return W.facade=Gt,gt(B,Gt,W),W},K=function(Gt){return L(B,Gt)||{}},q=function(Gt){return Pt(B,Gt)}}else{var bt=Q("state");et[bt]=!0,Z=function(Gt,W){if(G(Gt,bt))throw new P(S);return W.facade=Gt,R(Gt,bt,W),W},K=function(Gt){return G(Gt,bt)?Gt[bt]:{}},q=function(Gt){return G(Gt,bt)}}w.exports={set:Z,get:K,has:q,enforce:ct,getterFor:dt}},6733:w=>{w.exports=function(M){return typeof M=="function"}},6541:(w,M,d)=>{var m=d(4229),v=d(6733),x=/#|\.prototype\./,b=function(et,S){var P=G[R(et)];return P==Q?!0:P==z?!1:v(S)?m(S):!!S},R=b.normalize=function(et){return String(et).replace(x,".").toLowerCase()},G=b.data={},z=b.NATIVE="N",Q=b.POLYFILL="P";w.exports=b},5052:(w,M,d)=>{var m=d(6733);w.exports=function(v){return typeof v=="object"?v!==null:m(v)}},4231:w=>{w.exports=!1},9395:(w,M,d)=>{var m=d(1333),v=d(6733),x=d(1321),b=d(6969),R=Object;w.exports=b?function(G){return typeof G=="symbol"}:function(G){var z=m("Symbol");return v(z)&&x(z.prototype,R(G))}},9646:(w,M,d)=>{var m=d(4237);w.exports=function(v){return m(v.length)}},6039:(w,M,d)=>{var m=d(4229),v=d(6733),x=d(8270),b=d(7400),R=d(1805).CONFIGURABLE,G=d(8511),z=d(6407),Q=z.enforce,et=z.get,S=Object.defineProperty,P=b&&!m(function(){return S(function(){},"length",{value:8}).length!==8}),Y=String(String).split("String"),Z=w.exports=function(K,q,ct){String(q).slice(0,7)==="Symbol("&&(q="["+String(q).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),ct&&ct.getter&&(q="get "+q),ct&&ct.setter&&(q="set "+q),(!x(K,"name")||R&&K.name!==q)&&(b?S(K,"name",{value:q,configurable:!0}):K.name=q),P&&ct&&x(ct,"arity")&&K.length!==ct.arity&&S(K,"length",{value:ct.arity});try{ct&&x(ct,"constructor")&&ct.constructor?b&&S(K,"prototype",{writable:!1}):K.prototype&&(K.prototype=void 0)}catch{}var dt=Q(K);return x(dt,"source")||(dt.source=Y.join(typeof q=="string"?q:"")),K};Function.prototype.toString=Z(function(){return v(this)&&et(this).source||G(this)},"toString")},917:w=>{var M=Math.ceil,d=Math.floor;w.exports=Math.trunc||function(v){var x=+v;return(x>0?d:M)(x)}},3839:(w,M,d)=>{var m=d(6358),v=d(4229);w.exports=!!Object.getOwnPropertySymbols&&!v(function(){var x=Symbol();return!String(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&m&&m<41})},8694:(w,M,d)=>{var m=d(9859),v=d(6733),x=d(8511),b=m.WeakMap;w.exports=v(b)&&/native code/.test(x(b))},1787:(w,M,d)=>{var m=d(7400),v=d(4394),x=d(7137),b=d(1176),R=d(9310),G=TypeError,z=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,et="enumerable",S="configurable",P="writable";M.f=m?x?function(Z,K,q){if(b(Z),K=R(K),b(q),typeof Z=="function"&&K==="prototype"&&"value"in q&&P in q&&!q[P]){var ct=Q(Z,K);ct&&ct[P]&&(Z[K]=q.value,q={configurable:S in q?q[S]:ct[S],enumerable:et in q?q[et]:ct[et],writable:!1})}return z(Z,K,q)}:z:function(Z,K,q){if(b(Z),K=R(K),b(q),v)try{return z(Z,K,q)}catch{}if("get"in q||"set"in q)throw G("Accessors not supported");return"value"in q&&(Z[K]=q.value),Z}},7933:(w,M,d)=>{var m=d(7400),v=d(266),x=d(9195),b=d(5358),R=d(905),G=d(9310),z=d(8270),Q=d(4394),et=Object.getOwnPropertyDescriptor;M.f=m?et:function(P,Y){if(P=R(P),Y=G(Y),Q)try{return et(P,Y)}catch{}if(z(P,Y))return b(!v(x.f,P,Y),P[Y])}},8151:(w,M,d)=>{var m=d(140),v=d(3837),x=v.concat("length","prototype");M.f=Object.getOwnPropertyNames||function(R){return m(R,x)}},894:(w,M)=>{M.f=Object.getOwnPropertySymbols},1321:(w,M,d)=>{var m=d(5968);w.exports=m({}.isPrototypeOf)},140:(w,M,d)=>{var m=d(5968),v=d(8270),x=d(905),b=d(9540).indexOf,R=d(5977),G=m([].push);w.exports=function(z,Q){var et=x(z),S=0,P=[],Y;for(Y in et)!v(R,Y)&&v(et,Y)&&G(P,Y);for(;Q.length>S;)v(et,Y=Q[S++])&&(~b(P,Y)||G(P,Y));return P}},5632:(w,M,d)=>{var m=d(140),v=d(3837);w.exports=Object.keys||function(b){return m(b,v)}},9195:(w,M)=>{var d={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,v=m&&!d.call({1:2},1);M.f=v?function(b){var R=m(this,b);return!!R&&R.enumerable}:d},2914:(w,M,d)=>{var m=d(266),v=d(6733),x=d(5052),b=TypeError;w.exports=function(R,G){var z,Q;if(G==="string"&&v(z=R.toString)&&!x(Q=m(z,R))||v(z=R.valueOf)&&!x(Q=m(z,R))||G!=="string"&&v(z=R.toString)&&!x(Q=m(z,R)))return Q;throw b("Can't convert object to primitive value")}},4826:(w,M,d)=>{var m=d(1333),v=d(5968),x=d(8151),b=d(894),R=d(1176),G=v([].concat);w.exports=m("Reflect","ownKeys")||function(Q){var et=x.f(R(Q)),S=b.f;return S?G(et,S(Q)):et}},9276:(w,M,d)=>{var m=d(9859);w.exports=m},8885:w=>{var M=TypeError;w.exports=function(d){if(d==null)throw M("Can't call method on "+d);return d}},4399:(w,M,d)=>{var m=d(3036),v=d(1441),x=m("keys");w.exports=function(b){return x[b]||(x[b]=v(b))}},5353:(w,M,d)=>{var m=d(9859),v=d(8400),x="__core-js_shared__",b=m[x]||v(x,{});w.exports=b},3036:(w,M,d)=>{var m=d(4231),v=d(5353);(w.exports=function(x,b){return v[x]||(v[x]=b!==void 0?b:{})})("versions",[]).push({version:"3.23.3",mode:m?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},3231:(w,M,d)=>{var m=d(3329),v=Math.max,x=Math.min;w.exports=function(b,R){var G=m(b);return G<0?v(G+R,0):x(G,R)}},905:(w,M,d)=>{var m=d(9337),v=d(8885);w.exports=function(x){return m(v(x))}},3329:(w,M,d)=>{var m=d(917);w.exports=function(v){var x=+v;return x!==x||x===0?0:m(x)}},4237:(w,M,d)=>{var m=d(3329),v=Math.min;w.exports=function(x){return x>0?v(m(x),9007199254740991):0}},2991:(w,M,d)=>{var m=d(8885),v=Object;w.exports=function(x){return v(m(x))}},2066:(w,M,d)=>{var m=d(266),v=d(5052),x=d(9395),b=d(5300),R=d(2914),G=d(95),z=TypeError,Q=G("toPrimitive");w.exports=function(et,S){if(!v(et)||x(et))return et;var P=b(et,Q),Y;if(P){if(S===void 0&&(S="default"),Y=m(P,et,S),!v(Y)||x(Y))return Y;throw z("Can't convert object to primitive value")}return S===void 0&&(S="number"),R(et,S)}},9310:(w,M,d)=>{var m=d(2066),v=d(9395);w.exports=function(x){var b=m(x,"string");return v(b)?b:b+""}},1601:(w,M,d)=>{var m=d(95),v=m("toStringTag"),x={};x[v]="z",w.exports=String(x)==="[object z]"},3326:(w,M,d)=>{var m=d(1589),v=String;w.exports=function(x){if(m(x)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(x)}},9821:w=>{var M=String;w.exports=function(d){try{return M(d)}catch{return"Object"}}},1441:(w,M,d)=>{var m=d(5968),v=0,x=Math.random(),b=m(1 .toString);w.exports=function(R){return"Symbol("+(R===void 0?"":R)+")_"+b(++v+x,36)}},6969:(w,M,d)=>{var m=d(3839);w.exports=m&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7137:(w,M,d)=>{var m=d(7400),v=d(4229);w.exports=m&&v(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},95:(w,M,d)=>{var m=d(9859),v=d(3036),x=d(8270),b=d(1441),R=d(3839),G=d(6969),z=v("wks"),Q=m.Symbol,et=Q&&Q.for,S=G?Q:Q&&Q.withoutSetter||b;w.exports=function(P){if(!x(z,P)||!(R||typeof z[P]=="string")){var Y="Symbol."+P;R&&x(Q,P)?z[P]=Q[P]:G&&et?z[P]=et(Y):z[P]=S(Y)}return z[P]}},3430:(w,M,d)=>{var m=d(3103),v=d(5968),x=d(7111),b=d(2991),R=d(9646),G=d(9563),z=d(3326),Q=d(4229),et=d(3867),S=d(6038),P=d(2671),Y=d(8506),Z=d(6358),K=d(9811),q=[],ct=v(q.sort),dt=v(q.push),B=Q(function(){q.sort(void 0)}),L=Q(function(){q.sort(null)}),Pt=S("sort"),gt=!Q(function(){if(Z)return Z<70;if(!(P&&P>3)){if(Y)return!0;if(K)return K<603;var W="",Et,wt,ut,$t;for(Et=65;Et<76;Et++){switch(wt=String.fromCharCode(Et),Et){case 66:case 69:case 70:case 72:ut=3;break;case 68:case 71:ut=4;break;default:ut=2}for($t=0;$t<47;$t++)q.push({k:wt+$t,v:ut})}for(q.sort(function(ei,de){return de.v-ei.v}),$t=0;$t<q.length;$t++)wt=q[$t].k.charAt(0),W.charAt(W.length-1)!==wt&&(W+=wt);return W!=="DGBEFHACIJK"}}),bt=B||!L||!Pt||!gt,Gt=function(W){return function(Et,wt){return wt===void 0?-1:Et===void 0?1:W!==void 0?+W(Et,wt)||0:z(Et)>z(wt)?1:-1}};m({target:"Array",proto:!0,forced:bt},{sort:function(Et){Et!==void 0&&x(Et);var wt=b(this);if(gt)return Et===void 0?ct(wt):ct(wt,Et);var ut=[],$t=R(wt),ei,de;for(de=0;de<$t;de++)de in wt&&dt(ut,wt[de]);for(et(ut,Gt(Et)),ei=ut.length,de=0;de<ei;)wt[de]=ut[de++];for(;de<$t;)G(wt,de++);return wt}})},4769:(w,M,d)=>{var m=d(3103),v=d(2991),x=d(5632),b=d(4229),R=b(function(){x(1)});m({target:"Object",stat:!0,forced:R},{keys:function(z){return x(v(z))}})},1388:(w,M,d)=>{d.d(M,{Z:()=>G});var m=d(272),v=d.n(m),x=d(2609),b=d.n(x),R=b()(v());R.push([w.id,`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`,"",{version:3,sources:["webpack://./Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const G=R},7379:(w,M,d)=>{d.d(M,{Z:()=>G});var m=d(272),v=d.n(m),x=d(2609),b=d.n(x),R=b()(v());R.push([w.id,`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const G=R},2609:w=>{w.exports=function(M){var d=[];return d.toString=function(){return this.map(function(v){var x="",b=typeof v[5]<"u";return v[4]&&(x+="@supports (".concat(v[4],") {")),v[2]&&(x+="@media ".concat(v[2]," {")),b&&(x+="@layer".concat(v[5].length>0?" ".concat(v[5]):""," {")),x+=M(v),b&&(x+="}"),v[2]&&(x+="}"),v[4]&&(x+="}"),x}).join("")},d.i=function(v,x,b,R,G){typeof v=="string"&&(v=[[null,v,void 0]]);var z={};if(b)for(var Q=0;Q<this.length;Q++){var et=this[Q][0];et!=null&&(z[et]=!0)}for(var S=0;S<v.length;S++){var P=[].concat(v[S]);b&&z[P[0]]||(typeof G<"u"&&(typeof P[5]>"u"||(P[1]="@layer".concat(P[5].length>0?" ".concat(P[5]):""," {").concat(P[1],"}")),P[5]=G),x&&(P[2]&&(P[1]="@media ".concat(P[2]," {").concat(P[1],"}")),P[2]=x),R&&(P[4]?(P[1]="@supports (".concat(P[4],") {").concat(P[1],"}"),P[4]=R):P[4]="".concat(R)),d.push(P))}},d}},272:w=>{w.exports=function(M){var d=M[1],m=M[3];if(!m)return d;if(typeof btoa=="function"){var v=btoa(unescape(encodeURIComponent(JSON.stringify(m)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(v),b="/*# ".concat(x," */"),R=m.sources.map(function(G){return"/*# sourceURL=".concat(m.sourceRoot||"").concat(G," */")});return[d].concat(R).concat([b]).join(`
`)}return[d].join(`
`)}}},Va={};function Kt(w){var M=Va[w];if(M!==void 0)return M.exports;var d=Va[w]={id:w,exports:{}};return rl[w](d,d.exports,Kt),d.exports}Kt.n=w=>{var M=w&&w.__esModule?()=>w.default:()=>w;return Kt.d(M,{a:M}),M};Kt.d=(w,M)=>{for(var d in M)Kt.o(M,d)&&!Kt.o(w,d)&&Object.defineProperty(w,d,{enumerable:!0,get:M[d]})};Kt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Kt.o=(w,M)=>Object.prototype.hasOwnProperty.call(w,M);Kt.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var C={};(()=>{Kt.d(C,{fWn:()=>xs,Ia8:()=>Br,rqv:()=>r,hLI:()=>Cs,yyv:()=>Yo,tX5:()=>gs,vtX:()=>Ai,r7K:()=>Di,lCh:()=>Go,cE4:()=>yt,fwF:()=>ji,sce:()=>on,_c7:()=>ne,KUs:()=>Fo,Ajp:()=>Hi,RDh:()=>$n,_H9:()=>Gi,mxs:()=>Lr,OmD:()=>Mt,kBf:()=>ut,C4F:()=>Ti,NQt:()=>Vr,JjN:()=>vi,V1s:()=>Do,Xz7:()=>Gn,Cdc:()=>en,FKn:()=>ie,wTW:()=>Ge,SUY:()=>ar,ab2:()=>$s,GfZ:()=>me,YMS:()=>ki,oyv:()=>te,aUb:()=>qi,SdD:()=>pi,JUv:()=>Ze,jEj:()=>g,TFq:()=>Ne,HDU:()=>Ye,R_y:()=>ps,ydN:()=>Ji,t50:()=>js,s$$:()=>Ni,v2G:()=>_t,Ilk:()=>W,s9i:()=>Yr,dxL:()=>es,LLX:()=>is,wA2:()=>pe,R_p:()=>Jt,IQ$:()=>Qo,I5F:()=>bt,X8$:()=>fi,FR6:()=>Se,U8o:()=>us,kbG:()=>Te,iS_:()=>Us,cGG:()=>Zo,RPN:()=>Kn,skb:()=>Oo,SLU:()=>fr,RdJ:()=>xe,cNu:()=>sn,gU7:()=>xr,LSk:()=>Mo,Nmp:()=>Hn,d1Y:()=>Ft,xrL:()=>bs,sRW:()=>Er,cmV:()=>Qa,qWz:()=>Yn,N0Q:()=>Dr,q8b:()=>Ut,ynB:()=>he,jT9:()=>Ro,wAz:()=>Bs,D4V:()=>rs,N6H:()=>Qs,W1A:()=>mr,JHW:()=>se,v2K:()=>No,pBf:()=>Ei,GMl:()=>Gs,zW2:()=>w,B0K:()=>vs,Nv7:()=>fs,C_p:()=>Ws,iqw:()=>we,MUA:()=>Ar,xqU:()=>Fs,pTp:()=>Bo,vUK:()=>b,j9l:()=>Vn,Zxw:()=>We,Hdx:()=>Wn,Z$d:()=>Zn,iqV:()=>Wr,o$7:()=>hn,olM:()=>$t,Zm$:()=>Bt,$QH:()=>ur,i78:()=>pr,h6u:()=>Oi,hts:()=>Qi,j88:()=>gr,VME:()=>Ci,nt:()=>Me,Ukr:()=>pn,zsu:()=>ue,oA6:()=>Ae,TVh:()=>Is,TwZ:()=>Fn,GTT:()=>Ir,xxj:()=>Fr,XdK:()=>Ns,Jmb:()=>ae,cXo:()=>Rn,Dm5:()=>Yi,IIB:()=>m,zI0:()=>ws,LYD:()=>nr,cEG:()=>ts,SEl:()=>s,t9V:()=>l,SKZ:()=>De,__J:()=>Ca,RI$:()=>ko,x12:()=>Rs,ccz:()=>ye,aNw:()=>_s,xwn:()=>To,dNK:()=>tr,ini:()=>Pt,YdH:()=>gt,y3G:()=>_e,l57:()=>Qe,xn0:()=>Nn,t2V:()=>Gr,uxB:()=>Nt,cpd:()=>Uo,fiy:()=>Sr,$XZ:()=>Tr,uqK:()=>Pi,STE:()=>yo,y$z:()=>le,mAD:()=>Qr,sOq:()=>ge,hUw:()=>Jn,_0G:()=>c,Sqs:()=>An,hpZ:()=>sr,Vol:()=>ai,wIZ:()=>lt,cBi:()=>rr,RFv:()=>$i,kfC:()=>an,mgq:()=>Jr,YVA:()=>mt,Kgp:()=>br,HH$:()=>ui,M_d:()=>Pn,rgh:()=>cs,Ra6:()=>ds,KhR:()=>zs,BS5:()=>Oe,xhz:()=>di,xOq:()=>Mn,a9j:()=>xi,bHk:()=>Sn,CgK:()=>hs,cuY:()=>ii,kvE:()=>oi,SBu:()=>Zi,AE_:()=>Nr,ctO:()=>jo,OLH:()=>er,kky:()=>z,nSF:()=>Ht,zHn:()=>mi,zwx:()=>Ur,AeJ:()=>tn,hLz:()=>Re,D9g:()=>zo,wA:()=>Mr,jhr:()=>Pr,GVs:()=>Wi,_zO:()=>Ii,w6$:()=>Qn,mhV:()=>Io,MOD:()=>Be,kwd:()=>On,Lmr:()=>Rr,xsS:()=>ln,lLr:()=>Hs,Z$r:()=>Gt,IXb:()=>zr,SGH:()=>Vo,SMj:()=>Fi,L34:()=>Ia,exe:()=>Le,bnF:()=>jt,MFA:()=>wt,$uU:()=>be,jyi:()=>Vi,E03:()=>Os,V6q:()=>ms,rg2:()=>Hr,DVW:()=>Xs,nVo:()=>So,F6N:()=>lr,xP7:()=>He,Odq:()=>ir,Zif:()=>fe,ZGJ:()=>jn,MJk:()=>Ho,xvT:()=>nn,PHM:()=>Es,dpR:()=>Rt,n9L:()=>Po,KwO:()=>qn,B7y:()=>zi,x7r:()=>Xo,wx7:()=>Ki,Uvn:()=>st,OFT:()=>Ri,xzN:()=>Lo,M5Z:()=>Q,ZrN:()=>v,OWs:()=>B,dF9:()=>Ks,oZy:()=>Ve,rD2:()=>Mi,VHo:()=>Tn,ohE:()=>Xi,R$E:()=>zn,q3I:()=>jr,Pab:()=>Y,uZ5:()=>P,McK:()=>R,F9c:()=>et,k0b:()=>Un,hnT:()=>E,RSJ:()=>Tt,Mku:()=>J,h90:()=>je,rms:()=>ee,ErP:()=>y,aVg:()=>ot,lPc:()=>N,Z8E:()=>Li,_N2:()=>rn,yFn:()=>_a,lNv:()=>Eo,cu9:()=>Xn,MZQ:()=>Si,FUM:()=>Cr,BxR:()=>St,vdf:()=>ct,iaL:()=>dt,w6H:()=>q,Q4c:()=>xo,Xxe:()=>S,Uxb:()=>Z,Yr5:()=>K,Bhw:()=>L,yOA:()=>M});var w={};Kt.r(w),Kt.d(w,{ActivateEvent:()=>gs,CollisionEndEvent:()=>pi,CollisionPostSolveEvent:()=>Ye,CollisionPreSolveEvent:()=>ps,CollisionStartEvent:()=>js,ContactEndEvent:()=>Se,ContactStartEvent:()=>us,DeactivateEvent:()=>Us,EnterTriggerEvent:()=>Qs,EnterViewPortEvent:()=>mr,EventTypes:()=>Gs,ExitTriggerEvent:()=>Ar,ExitViewPortEvent:()=>Fs,GameEvent:()=>Bt,GameStartEvent:()=>ur,GameStopEvent:()=>pr,GamepadAxisEvent:()=>Oi,GamepadButtonEvent:()=>Qi,GamepadConnectEvent:()=>gr,GamepadDisconnectEvent:()=>Ci,HiddenEvent:()=>Ns,InitializeEvent:()=>Yi,KillEvent:()=>De,PostCollisionEvent:()=>ui,PostDebugDrawEvent:()=>Pn,PostDrawEvent:()=>cs,PostFrameEvent:()=>ds,PostKillEvent:()=>zs,PostUpdateEvent:()=>Oe,PreCollisionEvent:()=>di,PreDebugDrawEvent:()=>Mn,PreDrawEvent:()=>xi,PreFrameEvent:()=>Sn,PreKillEvent:()=>hs,PreUpdateEvent:()=>ii,VisibleEvent:()=>Tn});var M={};Kt.r(M),Kt.d(M,{getAttributeComponentSize:()=>vr,getAttributePointerType:()=>_r,getGlTypeSizeBytes:()=>kn});var d={};Kt.r(d),Kt.d(d,{circle:()=>gi,line:()=>yr,point:()=>ma,roundRect:()=>Ln,vector:()=>Aa});var m={};Kt.r(m),Kt.d(m,{Axes:()=>ns,Buttons:()=>un,Gamepad:()=>dn,Gamepads:()=>Ps,KeyEvent:()=>cn,Keyboard:()=>Wo,Keys:()=>ss,NativePointerButton:()=>Ui,PointerButton:()=>_i,PointerComponent:()=>$i,PointerEvent:()=>gn,PointerEventReceiver:()=>mn,PointerScope:()=>Ms,PointerSystem:()=>an,PointerType:()=>wi,WheelDeltaMode:()=>Ss,WheelEvent:()=>or});var v={};Kt.r(v),Kt.d(v,{ConsoleAppender:()=>bt,DrawUtil:()=>d,EasingFunctions:()=>Ut,LogLevel:()=>Pt,Logger:()=>gt,Observable:()=>le,ScreenAppender:()=>Gt,addItemToArray:()=>de,contains:()=>cr,delay:()=>It,fail:()=>re,getPosition:()=>ei,removeItemFromArray:()=>ci}),Kt(4662),Kt(8343);function x(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setInterval(a,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const t=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(e){return new Promise((i,n)=>{t.call(this,e,i,n)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class b{static useCanvasGraphicsContext(){b.enable("use-canvas-context")}static freeze(){b._FROZEN=!0}static _reset(){b._FROZEN=!1,b._FLAGS={}}static enable(t){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");b._FLAGS[t]=!0}static disable(t){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");b._FLAGS[t]=!1}static isEnabled(t){return!!b._FLAGS[t]}static show(){return Object.keys(b._FLAGS)}}b._FROZEN=!1,b._FLAGS={};function R(a,t){return{type:a,value:t}}const G=4294967295;class z{constructor(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(let e=1;e<this._n;e++){const i=this._mt[e-1]^this._mt[e-1]>>>this._w-2;this._mt[e]=(this._f*((i&4294901760)>>>16)<<16)+this._f*(i&65535)+e>>>0}this._index=this._n}_twist(){const t=[0,this._a];let e=0,i=0;for(;i<this._n-this._m;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+this._m]^e>>>1^t[e&1]&G;for(;i<this._n-1;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+(this._m-this._n)]^e>>>1^t[e&1]&G;e=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^e>>>1^t[e&1]&G,this._index=0}nextInt(){this._index>=this._n&&this._twist();let t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,t^=t>>>this._l,t>>>0}next(){return this.nextInt()*(1/4294967296)}floating(t,e){return(e-t)*this.next()+t}integer(t,e){return Math.floor((e-t+1)*this.next()+t)}bool(t=.5){return this.next()<=t}pickOne(t){return t[this.integer(0,t.length-1)]}pickSet(t,e,i=!1){return i?this._pickSetWithDuplicates(t,e):this._pickSetWithoutDuplicates(t,e)}_pickSetWithoutDuplicates(t,e){if(e>t.length||e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(e===t.length)return t;const i=new Array(e);let n=0;const o=t.slice(0);for(;n<e;){const h=this.integer(0,o.length-1);i[n++]=o[h],o.splice(h,1)}return i}_pickSetWithDuplicates(t,e){if(e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const i=new Array(e);for(let n=0;n<e;n++)i[n]=this.pickOne(t);return i}shuffle(t){const e=t.slice(0);let i=null;for(let n=0;n<e.length-2;n++){const o=this.integer(n,e.length-1);i=e[n],e[n]=e[o],e[o]=i}return e}range(t,e,i){const n=new Array(t);for(let o=0;o<t;o++)n[o]=this.integer(e,i);return n}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const Q=Math.PI*2;function et(a){return a>=0?a-Math.floor(a):a-Math.ceil(a)}function S(a){return a===0?0:a<0?-1:1}function P(a,t,e){return Math.min(Math.max(t,a),e)}function Y(a){let t=a;if(a>Q)for(;t>Q;)t-=Q;if(a<0)for(;t<0;)t+=Q;return t}function Z(a){return 180/Math.PI*a}function K(a){return a/180*Math.PI}const q=(a,t)=>Array.from(new Array(t-a+1),(e,i)=>i+a);function ct(a,t,e=new z){return e?e.floating(a,t):a+Math.random()*(t-a)}function dt(a,t,e=new z){return e?e.integer(a,t):Math.round(ct(a,t))}class B{constructor(t,e){this._x=0,this._y=0,this._x=t,this._y=e}static get Zero(){return new B(0,0)}static get One(){return new B(1,1)}static get Half(){return new B(.5,.5)}static get Up(){return new B(0,-1)}static get Down(){return new B(0,1)}static get Left(){return new B(-1,0)}static get Right(){return new B(1,0)}static fromAngle(t){return new B(Math.cos(t),Math.sin(t))}static isValid(t){return!(t==null||isNaN(t.x)||isNaN(t.y)||t.x===1/0||t.y===1/0||t.x===-1/0||t.y===-1/0)}static distance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static min(t,e){return new B(Math.min(t.x,e.x),Math.min(t.y,e.y))}static max(t,e){return new B(Math.max(t.x,e.x),Math.max(t.y,e.y))}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}setTo(t,e){this.x=t,this.y=e}equals(t,e=.001){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}distance(t){if(!t)return Math.sqrt(this.x*this.x+this.y*this.y);const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}squareDistance(t){t||(t=B.Zero);const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}clampMagnitude(t){const e=this.size,i=P(e,0,t);return this.size=i,this}get size(){return this.distance()}set size(t){const e=this.normalize().scale(t);this.setTo(e.x,e.y)}normalize(){const t=this.distance();return t>0?new B(this.x/t,this.y/t):new B(0,1)}average(t){return this.add(t).scale(.5)}scale(t,e){const i=e||new B(0,0);return t instanceof B?(i.x=this.x*t.x,i.y=this.y*t.y):(i.x=this.x*t,i.y=this.y*t),i}add(t,e){return e?(e.x=this.x+t.x,e.y=this.y+t.y,e):new B(this.x+t.x,this.y+t.y)}sub(t){return new B(this.x-t.x,this.y-t.y)}addEqual(t){return this.setTo(this.x+t.x,this.y+t.y),this}subEqual(t){return this.setTo(this.x-t.x,this.y-t.y),this}scaleEqual(t){return this.setTo(this.x*t,this.y*t),this}dot(t){return this.x*t.x+this.y*t.y}cross(t){if(t instanceof B)return this.x*t.y-this.y*t.x;if(typeof t=="number")return new B(t*this.y,-t*this.x)}static cross(t,e){return new B(-t*e.y,t*e.x)}perpendicular(){return new B(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return Math.atan2(this.y,this.x)}rotate(t,e){e||(e=new B(0,0));const i=Math.sin(t),n=Math.cos(t),o=n*(this.x-e.x)-i*(this.y-e.y)+e.x,h=i*(this.x-e.x)+n*(this.y-e.y)+e.y;return new B(o,h)}clone(t){const e=t??new B(0,0);return e.x=this.x,e.y=this.y,e}toString(t){return t?`(${this.x.toFixed(t)}, ${this.y.toFixed(t)})`:`(${this.x}, ${this.y})`}}function L(a,t){return new B(a,t)}var Pt;(function(a){a[a.Debug=0]="Debug",a[a.Info=1]="Info",a[a.Warn=2]="Warn",a[a.Error=3]="Error",a[a.Fatal=4]="Fatal"})(Pt||(Pt={}));class gt{constructor(){if(this._appenders=[],this.defaultLevel=Pt.Info,gt._INSTANCE)throw new Error("Logger is a singleton");return gt._INSTANCE=this,gt._INSTANCE.addAppender(new bt),gt._INSTANCE}static getInstance(){return gt._INSTANCE==null&&(gt._INSTANCE=new gt),gt._INSTANCE}addAppender(t){this._appenders.push(t)}clearAppenders(){this._appenders.length=0}_log(t,e){t==null&&(t=this.defaultLevel);const i=this._appenders.length;for(let n=0;n<i;n++)t>=this.defaultLevel&&this._appenders[n].log(t,e)}debug(...t){this._log(Pt.Debug,t)}info(...t){this._log(Pt.Info,t)}warn(...t){this._log(Pt.Warn,t)}error(...t){this._log(Pt.Error,t)}fatal(...t){this._log(Pt.Fatal,t)}}gt._INSTANCE=null;class bt{log(t,e){if(!console&&!console.log&&console.warn&&console.error)return;const i=[];i.unshift.apply(i,e),i.unshift("["+Pt[t]+"] : "),t<Pt.Warn?console.log.apply?console.log.apply(console,i):console.log(i.join(" ")):t<Pt.Error?console.warn.apply?console.warn.apply(console,i):console.warn(i.join(" ")):console.error.apply?console.error.apply(console,i):console.error(i.join(" "))}}class Gt{constructor(t,e){this._messages=[],this._canvas=document.createElement("canvas"),this._canvas.width=t||window.innerWidth,this._canvas.height=e||window.innerHeight,this._canvas.style.position="absolute",this._ctx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)}log(t,e){const i=e.join(",");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift("["+Pt[t]+"] : "+i);let n=10,o=1;for(let h=0;h<this._messages.length;h++)this._ctx.fillStyle="rgba(255,255,255,"+o.toFixed(2)+")",this._ctx.fillText(this._messages[h],200,n),n+=10,o=o>0?o-.05:0}}class W{constructor(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=n??1}static fromRGB(t,e,i,n){return new W(t,e,i,n)}static fromRGBString(t){const e=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let i=null;if(i=t.match(e)){const n=parseInt(i[1],10),o=parseInt(i[2],10),h=parseInt(i[3],10);let u=1;return i[4]&&(u=parseFloat(i[4])),new W(n,o,h,u)}else throw new Error("Invalid rgb/a string: "+t)}static fromHex(t){const e=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let i=null;if(i=t.match(e)){const n=parseInt(i[1],16),o=parseInt(i[2],16),h=parseInt(i[3],16);let u=1;return i[4]&&(u=parseInt(i[4],16)/255),new W(n,o,h,u)}else throw new Error("Invalid hex string: "+t)}static fromHSL(t,e,i,n=1){return new Et(t,e,i,n).toRGBA()}lighten(t=.1){const e=Et.fromRGBA(this.r,this.g,this.b,this.a);return e.l+=(1-e.l)*t,e.toRGBA()}darken(t=.1){const e=Et.fromRGBA(this.r,this.g,this.b,this.a);return e.l-=e.l*t,e.toRGBA()}saturate(t=.1){const e=Et.fromRGBA(this.r,this.g,this.b,this.a);return e.s+=e.s*t,e.toRGBA()}desaturate(t=.1){const e=Et.fromRGBA(this.r,this.g,this.b,this.a);return e.s-=e.s*t,e.toRGBA()}multiply(t){const e=t.r/255*this.r/255*255,i=t.g/255*this.g/255*255,n=t.b/255*this.b/255*255,o=t.a*this.a;return new W(e,i,n,o)}screen(t){const e=t.invert(),i=t.invert();return e.multiply(i).invert()}invert(){return new W(255-this.r,255-this.g,255-this.b,1-this.a)}average(t){const e=(t.r+this.r)/2,i=(t.g+this.g)/2,n=(t.b+this.b)/2,o=(t.a+this.a)/2;return new W(e,i,n,o)}equal(t){return this.toString()===t.toString()}toString(t="rgb"){switch(t){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(t){const e=t.toString(16);return e.length===1?"0"+e:e}toHex(){return"#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)}toRGBA(){const t=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+t+", "+String(this.a)+")":"rgb("+t+")"}toHSLA(){return Et.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new W(this.r,this.g,this.b,this.a)}static get Black(){return W.fromHex("#000000")}static get White(){return W.fromHex("#FFFFFF")}static get Gray(){return W.fromHex("#808080")}static get LightGray(){return W.fromHex("#D3D3D3")}static get DarkGray(){return W.fromHex("#A9A9A9")}static get Yellow(){return W.fromHex("#FFFF00")}static get Orange(){return W.fromHex("#FFA500")}static get Red(){return W.fromHex("#FF0000")}static get Vermilion(){return W.fromHex("#FF5B31")}static get Rose(){return W.fromHex("#FF007F")}static get Magenta(){return W.fromHex("#FF00FF")}static get Violet(){return W.fromHex("#7F00FF")}static get Blue(){return W.fromHex("#0000FF")}static get Azure(){return W.fromHex("#007FFF")}static get Cyan(){return W.fromHex("#00FFFF")}static get Viridian(){return W.fromHex("#59978F")}static get Green(){return W.fromHex("#00FF00")}static get Chartreuse(){return W.fromHex("#7FFF00")}static get Transparent(){return W.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return W.fromHex("#176BAA")}}class Et{constructor(t,e,i,n){this.h=t,this.s=e,this.l=i,this.a=n}static hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}static fromRGBA(t,e,i,n){t/=255,e/=255,i/=255;const o=Math.max(t,e,i),h=Math.min(t,e,i);let u,p;const f=(o+h)/2;if(o===h)u=p=0;else{const _=o-h;switch(p=f>.5?_/(2-o-h):_/(o+h),o){case t:u=(e-i)/_+(e<i?6:0);break;case e:u=(i-t)/_+2;break;case i:u=(t-e)/_+4;break}u/=6}return new Et(u,p,f,n)}toRGBA(){let t,e,i;if(this.s===0)t=e=i=this.l;else{const n=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,o=2*this.l-n;t=Et.hue2rgb(o,n,this.h+1/3),e=Et.hue2rgb(o,n,this.h),i=Et.hue2rgb(o,n,this.h-1/3)}return new W(t*255,e*255,i*255,this.a)}toString(){const t=this.h.toFixed(0),e=this.s.toFixed(0),i=this.l.toFixed(0),n=this.a.toFixed(0);return`hsla(${t}, ${e}, ${i}, ${n})`}}var wt;(function(a){a.None="None",a.Top="Top",a.Bottom="Bottom",a.Left="Left",a.Right="Right"})(wt||(wt={})),function(a){function t(i){return i===a.Top?a.Bottom:i===a.Bottom?a.Top:i===a.Left?a.Right:i===a.Right?a.Left:a.None}a.getOpposite=t;function e(i){const n=[B.Left,B.Right,B.Up,B.Down],o=[a.Left,a.Right,a.Top,a.Bottom];let h=-Number.MAX_VALUE,u=-1;for(let p=0;p<n.length;p++)n[p].dot(i)>h&&(h=n[p].dot(i),u=p);return o[u]}a.fromDirection=e}(wt||(wt={}));class ut{constructor(t=0,e=0,i=0,n=0){typeof t=="object"?(this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):typeof t=="number"&&(this.left=t,this.top=e,this.right=i,this.bottom=n)}clone(){return new ut(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(t){return t&&t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?wt.Right:wt.Left:t.y<0?wt.Bottom:wt.Top:wt.None}static fromPoints(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;for(let h=0;h<t.length;h++)t[h].x<e&&(e=t[h].x),t[h].x>n&&(n=t[h].x),t[h].y<i&&(i=t[h].y),t[h].y>o&&(o=t[h].y);return new ut(e,i,n,o)}static fromDimension(t,e,i=B.Half,n=B.Zero){return new ut(-t*i.x+n.x,-e*i.y+n.y,t-t*i.x+n.x,e-e*i.y+n.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new B((this.left+this.right)/2,(this.top+this.bottom)/2)}translate(t){return new ut(this.left+t.x,this.top+t.y,this.right+t.x,this.bottom+t.y)}rotate(t,e=B.Zero){const i=this.getPoints().map(n=>n.rotate(t,e));return ut.fromPoints(i)}scale(t,e=B.Zero){const i=this.translate(e);return new ut(i.left*t.x,i.top*t.y,i.right*t.x,i.bottom*t.y)}transform(t){const e=t.data[0]*this.left,i=t.data[1]*this.left,n=t.data[0]*this.right,o=t.data[1]*this.right,h=t.data[2]*this.top,u=t.data[3]*this.top,p=t.data[2]*this.bottom,f=t.data[3]*this.bottom,_=t.getPosition(),I=Math.min(e,n)+Math.min(h,p)+_.x,k=Math.min(i,o)+Math.min(u,f)+_.y,j=Math.max(e,n)+Math.max(h,p)+_.x,V=Math.max(i,o)+Math.max(u,f)+_.y;return new ut({left:I,top:k,right:j,bottom:V})}getPerimeter(){const t=this.width,e=this.height;return 2*(t+e)}getPoints(){const t=[];return t.push(new B(this.left,this.top)),t.push(new B(this.right,this.top)),t.push(new B(this.right,this.bottom)),t.push(new B(this.left,this.bottom)),t}rayCast(t,e=1/0){let i=-1/0,n=1/0;const o=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,h=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,u=(this.left-t.pos.x)*o,p=(this.right-t.pos.x)*o;i=Math.min(u,p),n=Math.max(u,p);const f=(this.top-t.pos.y)*h,_=(this.bottom-t.pos.y)*h;return i=Math.max(i,Math.min(f,_)),n=Math.min(n,Math.max(f,_)),n>=Math.max(0,i)&&i<e}rayCastTime(t,e=1/0){let i=-1/0,n=1/0;const o=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,h=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,u=(this.left-t.pos.x)*o,p=(this.right-t.pos.x)*o;i=Math.min(u,p),n=Math.max(u,p);const f=(this.top-t.pos.y)*h,_=(this.bottom-t.pos.y)*h;return i=Math.max(i,Math.min(f,_)),n=Math.min(n,Math.max(f,_)),n>=Math.max(0,i)&&i<e?i:-1}contains(t){return t instanceof B?this.left<=t.x&&this.top<=t.y&&this.bottom>=t.y&&this.right>=t.x:t instanceof ut?this.left<=t.left&&this.top<=t.top&&t.bottom<=this.bottom&&t.right<=this.right:!1}combine(t){return new ut(Math.min(this.left,t.left),Math.min(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom))}get dimensions(){return new B(this.width,this.height)}overlaps(t,e){const i=e||0;if(t.hasZeroDimensions())return this.contains(t);if(this.hasZeroDimensions())return t.contains(this);const n=this.combine(t);return n.width+i<t.width+this.width&&n.height+i<t.height+this.height}intersect(t){const e=this.combine(t);if(e.width<t.width+this.width&&e.height<t.height+this.height&&!e.dimensions.equals(t.dimensions)&&!e.dimensions.equals(this.dimensions)){let i=0;this.right>=t.left&&this.right<=t.right?i=t.left-this.right:i=t.right-this.left;let n=0;return this.top<=t.bottom&&this.top>=t.top?n=t.bottom-this.top:n=t.top-this.bottom,Math.abs(i)<Math.abs(n)?new B(i,0):new B(0,n)}else if(e.dimensions.equals(t.dimensions)||e.dimensions.equals(this.dimensions)){let i=0;this.width-t.width>=0?this.right-t.right<=t.left-this.left?i=t.left-this.right:i=t.right-this.left:t.right-this.right<=this.left-t.left?i=this.left-t.right:i=this.right-t.left;let n=0;return this.height-t.height>=0?this.bottom-t.bottom<=t.top-this.top?n=t.top-this.bottom:n=t.bottom-this.top:t.bottom-this.bottom<=this.top-t.top?n=this.top-t.bottom:n=this.bottom-t.top,Math.abs(i)<Math.abs(n)?new B(i,0):new B(0,n)}else return null}intersectWithSide(t){const e=this.intersect(t);return ut.getSideFromIntersection(e)}draw(t,e=W.Yellow){t.debug.drawRect(this.left,this.top,this.width,this.height,{color:e})}}class $t{constructor(){this._isCompleted=!1,this.promise=new Promise((t,e)=>{this._resolver=t,this._rejecter=e})}get isCompleted(){return this._isCompleted}resolve(t){this._isCompleted||(this._isCompleted=!0,this._resolver(t))}reject(t){this._isCompleted||(this._isCompleted=!0,this._rejecter(t))}}function ei(a){let t=0,e=0;const i=o=>{t+=o.offsetLeft,o.offsetParent&&i(o.offsetParent)},n=o=>{e+=o.offsetTop,o.offsetParent&&n(o.offsetParent)};return i(a),n(a),new B(t,e)}function de(a,t){return t.indexOf(a)===-1?(t.push(a),!0):!1}function ci(a,t){let e=-1;return(e=t.indexOf(a))>-1?(t.splice(e,1),!0):!1}function cr(a,t){for(let e=0;e<a.length;e++)if(a[e]===t)return!0;return!1}function re(a){throw new Error(a)}function It(a,t){var e;const i=new $t;return((e=t==null?void 0:t.schedule.bind(t))!==null&&e!==void 0?e:setTimeout)(()=>{i.resolve()},a),i.promise}var Qe;(function(a){a[a.X=12]="X",a[a.Y=13]="Y"})(Qe||(Qe={}));class _e{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(t,e,i,n,o,h){const u=new _e;return u.data[0]=2/(e-t),u.data[1]=0,u.data[2]=0,u.data[3]=0,u.data[4]=0,u.data[5]=2/(n-i),u.data[6]=0,u.data[7]=0,u.data[8]=0,u.data[9]=0,u.data[10]=-2/(h-o),u.data[11]=0,u.data[12]=-(e+t)/(e-t),u.data[13]=-(n+i)/(n-i),u.data[14]=-(h+o)/(h-o),u.data[15]=1,u}clone(t){const e=t||new _e;return e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=this.data[2],e.data[3]=this.data[3],e.data[4]=this.data[4],e.data[5]=this.data[5],e.data[6]=this.data[6],e.data[7]=this.data[7],e.data[8]=this.data[8],e.data[9]=this.data[9],e.data[10]=this.data[10],e.data[11]=this.data[11],e.data[12]=this.data[12],e.data[13]=this.data[13],e.data[14]=this.data[14],e.data[15]=this.data[15],e}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(t){const e=new _e;return e.data=t,e}static identity(){const t=new _e;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}static translation(t,e){const i=_e.identity();return i.data[12]=t,i.data[13]=e,i}static scale(t,e){const i=_e.identity();return i.data[0]=t,i.data[5]=e,i.data[10]=1,i.data[15]=1,i}static rotation(t){const e=_e.identity();return e.data[0]=Math.cos(t),e.data[4]=-Math.sin(t),e.data[1]=Math.sin(t),e.data[5]=Math.cos(t),e}multiply(t,e){if(t instanceof B){const i=e||new B(0,0),n=t,o=n.x*this.data[0]+n.y*this.data[4]+this.data[12],h=n.x*this.data[1]+n.y*this.data[5]+this.data[13];return i.x=o,i.y=h,i}else{const i=e||new _e,n=t,o=this.data[0],h=this.data[1],u=this.data[2],p=this.data[3],f=this.data[4],_=this.data[5],I=this.data[6],k=this.data[7],j=this.data[8],V=this.data[9],$=this.data[10],tt=this.data[11],U=this.data[12],F=this.data[13],at=this.data[14],rt=this.data[15],xt=n.data[0],pt=n.data[1],X=n.data[2],zt=n.data[3],Qt=n.data[4],Ot=n.data[5],Lt=n.data[6],Ce=n.data[7],bi=n.data[8],yi=n.data[9],fn=n.data[10],vn=n.data[11],_n=n.data[12],wn=n.data[13],Ct=n.data[14],Jo=n.data[15];i.data[0]=o*xt+f*pt+j*X+U*zt,i.data[1]=h*xt+_*pt+V*X+F*zt,i.data[2]=u*xt+I*pt+$*X+at*zt,i.data[3]=p*xt+k*pt+tt*X+rt*zt,i.data[4]=o*Qt+f*Ot+j*Lt+U*Ce,i.data[5]=h*Qt+_*Ot+V*Lt+F*Ce,i.data[6]=u*Qt+I*Ot+$*Lt+at*Ce,i.data[7]=p*Qt+k*Ot+tt*Lt+rt*Ce,i.data[8]=o*bi+f*yi+j*fn+U*vn,i.data[9]=h*bi+_*yi+V*fn+F*vn,i.data[10]=u*bi+I*yi+$*fn+at*vn,i.data[11]=p*bi+k*yi+tt*fn+rt*vn,i.data[12]=o*_n+f*wn+j*Ct+U*Jo,i.data[13]=h*_n+_*wn+V*Ct+F*Jo,i.data[14]=u*_n+I*wn+$*Ct+at*Jo,i.data[15]=p*_n+k*wn+tt*Ct+rt*Jo;const Oa=this.getScale();return i._scaleSignX=S(Oa.x)*S(i._scaleSignX),i._scaleSignY=S(Oa.y)*S(i._scaleSignY),i}}translate(t,e){const i=this.data[0],n=this.data[1],o=this.data[2],h=this.data[3],u=this.data[4],p=this.data[5],f=this.data[6],_=this.data[7],I=this.data[8],k=this.data[9],j=this.data[10],V=this.data[11],$=this.data[12],tt=this.data[13],U=this.data[14],F=this.data[15],at=0,rt=1;return this.data[12]=i*t+u*e+I*at+$*rt,this.data[13]=n*t+p*e+k*at+tt*rt,this.data[14]=o*t+f*e+j*at+U*rt,this.data[15]=h*t+_*e+V*at+F*rt,this}setPosition(t,e){this.data[12]=t,this.data[13]=e}getPosition(){return L(this.data[12],this.data[13])}rotate(t){const e=this.data[0],i=this.data[1],n=this.data[2],o=this.data[3],h=this.data[4],u=this.data[5],p=this.data[6],f=this.data[7],_=Math.sin(t),I=Math.cos(t);return this.data[0]=I*e+_*h,this.data[1]=I*i+_*u,this.data[2]=I*n+_*p,this.data[3]=I*o+_*f,this.data[4]=I*h-_*e,this.data[5]=I*u-_*i,this.data[6]=I*p-_*n,this.data[7]=I*f-_*o,this}scale(t,e){const i=this.data[0],n=this.data[1],o=this.data[2],h=this.data[3],u=this.data[4],p=this.data[5],f=this.data[6],_=this.data[7];return this.data[0]=i*t,this.data[1]=n*t,this.data[2]=o*t,this.data[3]=h*t,this.data[4]=u*e,this.data[5]=p*e,this.data[6]=f*e,this.data[7]=_*e,this}setRotation(t){const e=this.getScale(),i=Math.sin(t),n=Math.cos(t);this.data[0]=n*e.x,this.data[1]=i*e.y,this.data[4]=-i*e.x,this.data[5]=n*e.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return Y(t)}getScaleX(){const t=L(this.data[0],this.data[4]).size;return this._scaleSignX*t}getScaleY(){const t=L(this.data[1],this.data[5]).size;return this._scaleSignY*t}getScale(){return L(this.getScaleX(),this.getScaleY())}setScaleX(t){if(this._scaleX===t)return;this._scaleSignX=S(t);const e=L(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=e.x*t,this.data[4]=e.y*t,this._scaleX=t}setScaleY(t){if(this._scaleY===t)return;this._scaleSignY=S(t);const e=L(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=e.x*t,this.data[5]=e.y*t,this._scaleY=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(t){const i=1/this.getBasisDeterminant(),n=this.data[0],o=this.data[4],h=this.data[1],u=this.data[5],p=t||_e.identity();p.data[0]=u*i,p.data[1]=-h*i,p.data[4]=-o*i,p.data[5]=n*i;const f=this.data[12],_=this.data[13];return p.data[12]=-(f*p.data[0]+_*p.data[4]),p.data[13]=-(f*p.data[1]+_*p.data[5]),p}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class yt{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const t=new yt;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}static translation(t,e){const i=yt.identity();return i.data[4]=t,i.data[5]=e,i}static scale(t,e){const i=yt.identity();return i.data[0]=t,i.data[3]=e,i._scale[0]=t,i._scale[1]=e,i}static rotation(t){const e=yt.identity();return e.data[0]=Math.cos(t),e.data[1]=Math.sin(t),e.data[2]=-Math.sin(t),e.data[3]=Math.cos(t),e}setPosition(t,e){this.data[4]=t,this.data[5]=e}getPosition(){return L(this.data[4],this.data[5])}rotate(t){const e=this.data[0],i=this.data[1],n=this.data[2],o=this.data[3],h=Math.sin(t),u=Math.cos(t);return this.data[0]=u*e+h*n,this.data[1]=u*i+h*o,this.data[2]=u*n-h*e,this.data[3]=u*o-h*i,this}translate(t,e){const i=this.data[0],n=this.data[1],o=this.data[2],h=this.data[3],u=this.data[4],p=this.data[5];return this.data[4]=i*t+o*e+u,this.data[5]=n*t+h*e+p,this}scale(t,e){const i=this.data[0],n=this.data[1],o=this.data[2],h=this.data[3];return this.data[0]=i*t,this.data[1]=n*t,this.data[2]=o*e,this.data[3]=h*e,this._scale[0]=t,this._scale[1]=e,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(t){const i=1/this.determinant(),n=this.data[0],o=this.data[2],h=this.data[1],u=this.data[3],p=t||yt.identity();p.data[0]=u*i,p.data[1]=-h*i,p.data[2]=-o*i,p.data[3]=n*i;const f=this.data[4],_=this.data[5];return p.data[4]=-(f*p.data[0]+_*p.data[2]),p.data[5]=-(f*p.data[1]+_*p.data[3]),p}multiply(t,e){if(t instanceof B){const i=e||new B(0,0),n=t,o=n.x*this.data[0]+n.y*this.data[2]+this.data[4],h=n.x*this.data[1]+n.y*this.data[3]+this.data[5];return i.x=o,i.y=h,i}else{const i=e||new yt,n=t,o=this.data[0],h=this.data[1],u=this.data[2],p=this.data[3],f=this.data[4],_=this.data[5],I=n.data[0],k=n.data[1],j=n.data[2],V=n.data[3],$=n.data[4],tt=n.data[5];i.data[0]=o*I+u*k,i.data[1]=h*I+p*k,i.data[2]=o*j+u*V,i.data[3]=h*j+p*V,i.data[4]=o*$+u*tt+f,i.data[5]=h*$+p*tt+_;const U=this.getScale();return i._scaleSignX=S(U.x)*S(i._scaleSignX),i._scaleSignY=S(U.y)*S(i._scaleSignY),i}}to4x4(){const t=new _e;return t.data[0]=this.data[0],t.data[1]=this.data[1],t.data[2]=0,t.data[3]=0,t.data[4]=this.data[2],t.data[5]=this.data[3],t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=this.data[4],t.data[13]=this.data[5],t.data[14]=0,t.data[15]=1,t}setRotation(t){const e=this.getScale(),i=Math.sin(t),n=Math.cos(t);this.data[0]=n*e.x,this.data[1]=i*e.y,this.data[2]=-i*e.x,this.data[3]=n*e.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return Y(t)}getScaleX(){const t=L(this.data[0],this.data[2]).distance();return this._scaleSignX*t}getScaleY(){const t=L(this.data[1],this.data[3]).distance();return this._scaleSignY*t}getScale(){return L(this.getScaleX(),this.getScaleY())}setScaleX(t){if(t===this._scale[0])return;this._scaleSignX=S(t);const e=L(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=e.x*t,this.data[2]=e.y*t,this._scale[0]=t}setScaleY(t){if(t===this._scale[1])return;this._scaleSignY=S(t);const e=L(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=e.x*t,this.data[3]=e.y*t,this._scale[1]=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}clone(t){const e=t||new yt;return e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=this.data[2],e.data[3]=this.data[3],e.data[4]=this.data[4],e.data[5]=this.data[5],e}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class oe{constructor(){this._transforms=[],this._currentTransform=yt.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(t,e){return this._currentTransform.translate(t,e)}rotate(t){return this._currentTransform.rotate(t)}scale(t,e){return this._currentTransform.scale(t,e)}set current(t){this._currentTransform=t}get current(){return this._currentTransform}}class dr{constructor(){this._states=[],this._currentState=this._getDefaultState()}_getDefaultState(){return{opacity:1,z:0,tint:W.White}}_cloneState(){return{opacity:this._currentState.opacity,z:this._currentState.z,tint:this._currentState.tint.clone()}}save(){this._states.push(this._currentState),this._currentState=this._cloneState()}restore(){this._currentState=this._states.pop()}get current(){return this._currentState}set current(t){this._currentState=t}}var Gs;(function(a){a.Kill="kill",a.PreKill="prekill",a.PostKill="postkill",a.PreDraw="predraw",a.PostDraw="postdraw",a.PreDebugDraw="predebugdraw",a.PostDebugDraw="postdebugdraw",a.PreUpdate="preupdate",a.PostUpdate="postupdate",a.PreFrame="preframe",a.PostFrame="postframe",a.PreCollision="precollision",a.CollisionStart="collisionstart",a.CollisionEnd="collisionend",a.PostCollision="postcollision",a.Initialize="initialize",a.Activate="activate",a.Deactivate="deactivate",a.ExitViewport="exitviewport",a.EnterViewport="enterviewport",a.ExitTrigger="exit",a.EnterTrigger="enter",a.Connect="connect",a.Disconnect="disconnect",a.Button="button",a.Axis="axis",a.Visible="visible",a.Hidden="hidden",a.Start="start",a.Stop="stop",a.PointerUp="pointerup",a.PointerDown="pointerdown",a.PointerMove="pointermove",a.PointerEnter="pointerenter",a.PointerLeave="pointerleave",a.PointerCancel="pointercancel",a.PointerWheel="pointerwheel",a.Up="up",a.Down="down",a.Move="move",a.Enter="enter",a.Leave="leave",a.Cancel="cancel",a.Wheel="wheel",a.Press="press",a.Release="release",a.Hold="hold",a.PointerDragStart="pointerdragstart",a.PointerDragEnd="pointerdragend",a.PointerDragEnter="pointerdragenter",a.PointerDragLeave="pointerdragleave",a.PointerDragMove="pointerdragmove"})(Gs||(Gs={}));class Bt{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(t){this._bubbles=t}stopPropagation(){this.bubbles=!1}}class De extends Bt{constructor(t){super(),this.target=t}}class hs extends Bt{constructor(t){super(),this.target=t}}class zs extends Bt{constructor(t){super(),this.target=t}}class ur extends Bt{constructor(t){super(),this.target=t}}class pr extends Bt{constructor(t){super(),this.target=t}}class xi extends Bt{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class cs extends Bt{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class Mn extends Bt{constructor(t,e){super(),this.ctx=t,this.target=e}}class Pn extends Bt{constructor(t,e){super(),this.ctx=t,this.target=e}}class ii extends Bt{constructor(t,e,i){super(),this.engine=t,this.delta=e,this.target=i}}class Oe extends Bt{constructor(t,e,i){super(),this.engine=t,this.delta=e,this.target=i}}class Sn extends Bt{constructor(t,e){super(),this.engine=t,this.prevStats=e,this.target=t}}class ds extends Bt{constructor(t,e){super(),this.engine=t,this.stats=e,this.target=t}}class gr extends Bt{constructor(t,e){super(),this.index=t,this.gamepad=e,this.target=e}}class Ci extends Bt{constructor(t,e){super(),this.index=t,this.gamepad=e,this.target=e}}class Qi extends Bt{constructor(t,e,i){super(),this.button=t,this.value=e,this.target=i}}class Oi extends Bt{constructor(t,e,i){super(),this.axis=t,this.value=e,this.target=i}}class Tn extends Bt{constructor(t){super(),this.target=t}}class Ns extends Bt{constructor(t){super(),this.target=t}}class di extends Bt{constructor(t,e,i,n){super(),this.other=e,this.side=i,this.intersection=n,this.target=t}}class ui extends Bt{constructor(t,e,i,n){super(),this.other=e,this.side=i,this.intersection=n,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class us{constructor(t,e,i){this.target=t,this.other=e,this.contact=i}}class Se{constructor(t,e){this.target=t,this.other=e}}class ps{constructor(t,e,i,n,o){this.target=t,this.other=e,this.side=i,this.intersection=n,this.contact=o}}class Ye{constructor(t,e,i,n,o){this.target=t,this.other=e,this.side=i,this.intersection=n,this.contact=o}}class js extends Bt{constructor(t,e,i){super(),this.other=e,this.contact=i,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class pi extends Bt{constructor(t,e){super(),this.other=e,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class Yi extends Bt{constructor(t,e){super(),this.engine=t,this.target=e}}class gs extends Bt{constructor(t,e){super(),this.context=t,this.target=e}}class Us extends Bt{constructor(t,e){super(),this.context=t,this.target=e}}class Fs extends Bt{constructor(t){super(),this.target=t}}class mr extends Bt{constructor(t){super(),this.target=t}}class Qs extends Bt{constructor(t,e){super(),this.target=t,this.actor=e}}class Ar extends Bt{constructor(t,e){super(),this.target=t,this.actor=e}}class Ei{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const t of this._deferedHandlerRemovals)this._removeHandler(t.name,t.handler);this._deferedHandlerRemovals.length=0}emit(t,e){if(this._processDeferredHandlerRemovals(),!t)return;t=t.toLowerCase(),e||(e=new Bt);let i,n;if(this._handlers[t])for(i=0,n=this._handlers[t].length,i;i<n;i++)this._handlers[t][i](e);for(i=0,n=this._wiredEventDispatchers.length,i;i<n;i++)this._wiredEventDispatchers[i].emit(t,e)}on(t,e){this._processDeferredHandlerRemovals(),t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e)}off(t,e){this._deferedHandlerRemovals.push({name:t,handler:e})}_removeHandler(t,e){t=t.toLowerCase();const i=this._handlers[t];if(i)if(!e)this._handlers[t].length=0;else{const n=i.indexOf(e);n>-1&&this._handlers[t].splice(n,1)}}once(t,e){this._processDeferredHandlerRemovals();const i=n=>{const o=n||new Bt;this.off(t,i),e(o)};this.on(t,i)}wire(t){t._wiredEventDispatchers.push(this)}unwire(t){const e=t._wiredEventDispatchers.indexOf(this);e>-1&&t._wiredEventDispatchers.splice(e,1)}}class Ii{constructor(t,e,i=!0){this.path=t,this.responseType=e,this.bustCache=i,this.data=null,this.logger=gt.getInstance(),this.events=new Ei}isLoaded(){return this.data!==null}_cacheBust(t){return/\?\w*=\w*/.test(t)?t+="&__="+Date.now():t+="?__="+Date.now(),t}load(){return new Promise((t,e)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),t(this.data);return}const i=new XMLHttpRequest;i.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),i.responseType=this.responseType,i.addEventListener("loadstart",n=>this.events.emit("loadstart",n)),i.addEventListener("progress",n=>this.events.emit("progress",n)),i.addEventListener("error",n=>this.events.emit("error",n)),i.addEventListener("load",n=>this.events.emit("load",n)),i.addEventListener("load",()=>{if(i.status!==0&&i.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",i.status),this.events.emit("error",i.response),e(new Error(i.statusText));return}this.data=i.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),t(this.data)}),i.send()})}}function Bi(a,t){return a&&(a.__isProxy===void 0?new Proxy(a,{set:(e,i,n)=>(e[i]!==n&&(e[i]=n,typeof i=="string"&&i[0]!=="_"&&t(e)),!0),get:(e,i)=>i!=="__isProxy"?e[i]:!0}):a)}function go(a,t){return a&&(a.__isProxy===void 0?new Proxy(a,{set:(e,i,n)=>(e[i]=n,typeof i=="string"&&i[0]!=="_"&&t(e),!0),get:(e,i)=>i!=="__isProxy"?e[i]:!0}):a)}class ue{constructor(t){var e,i,n,o,h,u;this.id=ue._ID++,this.transform=yt.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=B.One,this._origin=null,this._width=0,this._height=0,t&&(this.origin=(e=t.origin)!==null&&e!==void 0?e:this.origin,this.flipHorizontal=(i=t.flipHorizontal)!==null&&i!==void 0?i:this.flipHorizontal,this.flipVertical=(n=t.flipVertical)!==null&&n!==void 0?n:this.flipVertical,this.rotation=(o=t.rotation)!==null&&o!==void 0?o:this.rotation,this.opacity=(h=t.opacity)!==null&&h!==void 0?h:this.opacity,this.scale=(u=t.scale)!==null&&u!==void 0?u:this.scale)}isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(t){this._flipHorizontal=t,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(t){this._flipVertical=t,this._transformStale=!0}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this._transformStale=!0}get scale(){return this._scale}set scale(t){this._scale=Bi(t,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(t){this._origin=Bi(t,()=>{this._transformStale=!0}),this._transformStale=!0}cloneGraphicOptions(){return{origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(t){this._width=t,this._transformStale=!0}set height(t){this._height=t,this._transformStale=!0}get localBounds(){return ut.fromDimension(this.width,this.height,B.Zero)}draw(t,e,i){this._preDraw(t,e,i),this._drawImage(t,0,0),this._postDraw(t)}_preDraw(t,e,i){t.save(),t.translate(e,i),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),t.multiply(this.transform),t.opacity=t.opacity*this.opacity,this.tint&&(t.tint=this.tint)}_rotate(t){var e;const i=this.scale.x>0?1:-1,n=this.scale.y>0?1:-1,o=(e=this.origin)!==null&&e!==void 0?e:L(this.width/2,this.height/2);t.translate(o.x,o.y),t.rotate(this.rotation),t.scale(i,n),t.translate(-o.x,-o.y)}_flip(t){this.flipHorizontal&&(t.translate(this.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.height/this.scale.y),t.scale(1,-1))}_postDraw(t){this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}ue._ID=0;class Vi extends ue{constructor(t){var e,i;super(t),this._logger=gt.getInstance(),this._dirty=!0,this._logNotLoadedWarning=!1,this.image=t.image;const{width:n,height:o}=t;this.sourceView=(e=t.sourceView)!==null&&e!==void 0?e:{x:0,y:0,width:n??0,height:o??0},this.destSize=(i=t.destSize)!==null&&i!==void 0?i:{width:n??0,height:o??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}static from(t){return new Vi({image:t})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(t){t/=Math.abs(this.scale.x),this.destSize.width=t,super.width=Math.ceil(this.destSize.width)}set height(t){t/=Math.abs(this.scale.y),this.destSize.height=t,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var t,e,i,n,o,h;const{width:u,height:p}=this.image;this.sourceView.width=((t=this.sourceView)===null||t===void 0?void 0:t.width)||u,this.sourceView.height=((e=this.sourceView)===null||e===void 0?void 0:e.height)||p,this.destSize.width=((i=this.destSize)===null||i===void 0?void 0:i.width)||((n=this.sourceView)===null||n===void 0?void 0:n.width)||u,this.destSize.height=((o=this.destSize)===null||o===void 0?void 0:o.height)||((h=this.sourceView)===null||h===void 0?void 0:h.height)||p,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(t,e,i){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(t,e,i)}_drawImage(t,e,i){this.image.isLoaded()?t.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,e,i,this.destSize.width,this.destSize.height):(this._logNotLoadedWarning||this._logger.warn(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`),this._logNotLoadedWarning=!0)}clone(){return new Vi({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var ae;(function(a){a.Pixel="Pixel",a.Blended="Blended"})(ae||(ae={}));class Rt{static register(t){Rt._GL=t,Rt._MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE)}static get(t){return Rt._TEXTURE_MAP.get(t)}static has(t){return Rt._TEXTURE_MAP.has(t)}static load(t,e,i=!1){const n=Rt._GL;if(!n)return null;let o=null;if(Rt.has(t)&&(o=Rt.get(t)),o)return i&&(n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),o;o=n.createTexture(),Rt.checkImageSizeSupportedAndLog(t),n.bindTexture(n.TEXTURE_2D,o),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const h=e??Rt.filtering;return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,h===ae.Pixel?n.NEAREST:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,h===ae.Pixel?n.NEAREST:n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),Rt._TEXTURE_MAP.set(t,o),o}static delete(t){const e=Rt._GL;if(!e)return null;let i=null;Rt.has(t)&&(i=Rt.get(t),e.deleteTexture(i))}static checkImageSizeSupportedAndLog(t){var e;const i=(e=t.dataset.originalSrc)!==null&&e!==void 0?e:"internal canvas bitmap";return t.width>Rt._MAX_TEXTURE_SIZE||t.height>Rt._MAX_TEXTURE_SIZE?(Rt._LOGGER.error(`The image [${i}] provided to Excalibur is too large for the device's maximum texture size of (${Rt._MAX_TEXTURE_SIZE}x${Rt._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((t.width>4096||t.height>4096)&&Rt._LOGGER.warn(`The image [${i}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}Rt._LOGGER=gt.getInstance(),Rt.filtering=ae.Blended,Rt._TEXTURE_MAP=new Map,Rt._MAX_TEXTURE_SIZE=0;class Rn{constructor(t,e=!1,i){this.path=t,this._logger=gt.getInstance(),this.data=new Image,this._readyFuture=new $t,this.ready=this._readyFuture.promise,this._resource=new Ii(t,"blob",e),this._filtering=i,(t.endsWith(".svg")||t.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${t}. Fully supported: jpg, bmp, and png`)}get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}async load(){if(this.isLoaded())return this.data;try{let t;if(this.path.includes("data:image/"))t=this.path;else{const n=await this._resource.load();t=URL.createObjectURL(n)}const e=new Image,i=new $t;e.onload=()=>i.resolve(),e.src=t,e.setAttribute("data-original-src",this.path),await i.promise,this.data=e}catch(t){throw`Error loading ImageSource from path '${this.path}' with error [${t.message}]`}return Rt.load(this.data,this._filtering),this._readyFuture.resolve(this.data),this.data}toSprite(){return Vi.from(this)}unload(){this.data=new Image}}class ms{constructor(t){this._logger=gt.getInstance(),this.sprites=[];const{sprites:e,rows:i,columns:n}=t;this.sprites=e,this.rows=i??1,this.columns=n??this.sprites.length}getSprite(t,e){if(t>=this.columns||t<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${e}), x: ${t} should be between 0 and ${this.columns-1}`),null;if(e>=this.rows||e<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${e}), y: ${e} should be between 0 and ${this.rows-1}`),null;const i=t+e*this.columns;return this.sprites[i]}static fromImageSourceWithSourceViews(t){const e=t.sourceViews.map(i=>new Vi({image:t.image,sourceView:i}));return new ms({sprites:e})}static fromImageSource(t){var e;const i=[];t.spacing=(e=t.spacing)!==null&&e!==void 0?e:{};const{image:n,grid:{rows:o,columns:h,spriteWidth:u,spriteHeight:p},spacing:{originOffset:f,margin:_}}=t,I={x:0,y:0,...f},k={x:0,y:0,..._};for(let j=0;j<h;j++)for(let V=0;V<o;V++)i[j+V*h]=new Vi({image:n,sourceView:{x:j*u+k.x*j+I.x,y:V*p+k.y*V+I.y,width:u,height:p},destSize:{height:p,width:u}});return new ms({sprites:i,rows:o,columns:h})}}class Os extends ue{constructor(t){super(t),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this._logger=gt.getInstance(),this._alreadyWarnedAlphabet=!1,this._alreadyWarnedSpriteSheet=!1;const{alphabet:e,spriteSheet:i,caseInsensitive:n,spacing:o,shadow:h}=t;this.alphabet=e,this.spriteSheet=i,this.caseInsensitive=n??this.caseInsensitive,this.spacing=o??this.spacing,this.shadow=h??this.shadow}_getCharacterSprites(t){const e=[],i=this.caseInsensitive?t.toLocaleLowerCase():t,n=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let o=0;o<i.length;o++){const h=i[o];let u=n.indexOf(h);u===-1&&(u=0,this._alreadyWarnedAlphabet||(this._logger.warn(`SpriteFont - Cannot find letter '${h}' in configured alphabet '${n}'.`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedAlphabet=!0));const p=this.spriteSheet.sprites[u];p?e.push(p):this._alreadyWarnedSpriteSheet||(this._logger.warn(`SpriteFont - Cannot find sprite for '${h}' at index '${u}' in configured SpriteSheet`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedSpriteSheet=!0)}return e}measureText(t){const e=t.split(`
`),i=e.reduce((u,p)=>u.length>p.length?u:p),n=this._getCharacterSprites(i);let o=0,h=0;for(const u of n)o+=u.width+this.spacing,h=Math.max(h,u.height);return ut.fromDimension(o,h*e.length,B.Zero)}_drawImage(t,e,i){let n=0,o=0,h=0;const u=this._text.split(`
`);for(const p of u){for(const f of this._getCharacterSprites(p))f.draw(t,e+n,i+o),n+=f.width+this.spacing,h=Math.max(h,f.height);n=0,o+=h}}render(t,e,i,n,o){this._text=e;const h=this.measureText(e);this.width=h.width,this.height=h.height,this.shadow&&(t.save(),t.translate(this.shadow.offset.x,this.shadow.offset.y),this.draw(t,n,o),t.restore()),this.draw(t,n,o)}clone(){return new Os({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}}const na="data:image/png;base64,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";class fr{constructor(){this.fontSheet=na,this.size=16,this.load()}load(){return this._imageSource=new Rn(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=ms.fromImageSource({image:this._imageSource,grid:{rows:3,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new Os({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+ `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(t,e,i){this._imageSource.isLoaded()&&this._spriteFont.render(t,e,null,i.x,i.y)}}class mo{constructor(t,e){this._gl=t,this._texture=e}use(){const t=this._gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture)}disable(){const t=this._gl;t.bindTexture(t.TEXTURE_2D,null)}}class si{constructor(t){this.width=t.width,this.height=t.height,this._gl=t.gl,this._setupFramebuffer()}setResolution(t,e){const i=this._gl;this.width=t,this.height=e,i.bindTexture(i.TEXTURE_2D,this._frameTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null)}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupFramebuffer(){const t=this._gl;this._frameTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._frameTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const e=t.COLOR_ATTACHMENT0;this._frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return new mo(this._gl,this._frameTexture)}use(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height)}disable(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null)}}class we{static clear(){we._GL=null}static register(t){we._GL=t}static get gl(){if(!we._GL)throw Error("Attempted gl access before init");return we._GL}}const ra=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,oa=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function kn(a,t){switch(t){case a.FLOAT:return 4;case a.SHORT:return 2;case a.UNSIGNED_SHORT:return 2;case a.BYTE:return 1;case a.UNSIGNED_BYTE:return 1;default:return 1}}function vr(a,t){switch(t){case a.LOW_FLOAT:case a.HIGH_FLOAT:case a.FLOAT:return 1;case a.FLOAT_VEC2:return 2;case a.FLOAT_VEC3:return 3;case a.FLOAT_VEC4:return 4;case a.BYTE:return 1;case a.UNSIGNED_BYTE:return 1;case a.UNSIGNED_SHORT:case a.SHORT:return 1;default:return 1}}function _r(a,t){switch(t){case a.LOW_FLOAT:case a.HIGH_FLOAT:case a.FLOAT:case a.FLOAT_VEC2:case a.FLOAT_VEC3:case a.FLOAT_VEC4:return a.FLOAT;case a.BYTE:return a.BYTE;case a.UNSIGNED_BYTE:return a.UNSIGNED_BYTE;case a.SHORT:return a.SHORT;case a.UNSIGNED_SHORT:return a.UNSIGNED_SHORT;default:return a.FLOAT}}class Le{constructor(t){this._gl=we.gl,this.uniforms={},this.attributes={},this._compiled=!1;const{vertexSource:e,fragmentSource:i}=t;this.vertexSource=e,this.fragmentSource=i}get compiled(){return this._compiled}use(){this._gl.useProgram(this.program),Le._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return Le._ACTIVE_SHADER_INSTANCE===this}compile(){const t=this._gl,e=this._compileShader(t,this.vertexSource,t.VERTEX_SHADER),i=this._compileShader(t,this.fragmentSource,t.FRAGMENT_SHADER);this.program=this._createProgram(t,e,i);const n=this.getAttributes();for(const h of n)this.attributes[h.name]=h;const o=this.getUniforms();for(const h of o)this.uniforms[h.name]=h;return this._compiled=!0,this.program}getUniforms(){const t=this._gl,e=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),i=[];for(let n=0;n<e;n++){const o=t.getActiveUniform(this.program,n),h=t.getUniformLocation(this.program,o.name);i.push({name:o.name,glType:o.type,location:h})}return i}getAttributes(){const t=this._gl,e=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),i=[];for(let n=0;n<e;n++){const o=t.getActiveAttrib(this.program,n),h=t.getAttribLocation(this.program,o.name);i.push({name:o.name,glType:_r(t,o.type),size:vr(t,o.type),location:h,normalized:!1})}return i}setTexture(t,e){const i=this._gl;i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e)}setUniformInt(t,e){this.setUniform("uniform1i",t,~~e)}setUniformIntArray(t,e){this.setUniform("uniform1iv",t,e)}setUniformBoolean(t,e){this.setUniform("uniform1i",t,e?1:0)}setUniformFloat(t,e){this.setUniform("uniform1f",t,e)}setUniformFloatArray(t,e){this.setUniform("uniform1fv",t,e)}setUniformFloatVector(t,e){this.setUniform("uniform2f",t,e.x,e.y)}setUniformMatrix(t,e){this.setUniform("uniformMatrix4fv",t,!1,e.data)}setUniform(t,e,...i){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${t}:${e}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const o=this._gl.getUniformLocation(this.program,e);if(o){const h=[o,...i];this._gl[t].apply(this._gl,h)}else throw Error(`Uniform ${t}:${e} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}_createProgram(t,e,i){const n=t.createProgram();if(n===null)throw Error("Could not create graphics shader program");if(t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw Error(`Could not link the program: [${t.getProgramInfoLog(n)}]`);return n}_compileShader(t,e,i){const n=t.VERTEX_SHADER===i?"vertex":"fragment",o=t.createShader(i);if(o===null)throw Error(`Could not build shader: [${e}]`);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){const u=t.getShaderInfoLog(o);throw Error(`Could not compile ${n} shader:

${u}${this._processSourceForError(e,u)}`)}return o}_processSourceForError(t,e){const i=t.split(`
`),n=e.search(/\d:\d/),o=e.indexOf(" ",n),[h,u]=e.slice(n,o).split(":").map(p=>Number(p));for(let p=0;p<i.length;p++)i[p]=`${p+1}: ${i[p]}${u===p+1?" <----- ERROR!":""}`;return`

Source:
`+i.join(`
`)}}Le._ACTIVE_SHADER_INSTANCE=null;class Ve{constructor(t){this._gl=we.gl,this.type="dynamic";const{size:e,type:i,data:n}=t;if(this.buffer=this._gl.createBuffer(),!n&&!e)throw Error("Must either provide data or a size to the VertexBuffer");n?this.bufferData=n:this.bufferData=new Float32Array(e),this.type=i??this.type;const o=this._gl;o.bindBuffer(o.ARRAY_BUFFER,this.buffer),o.bufferData(o.ARRAY_BUFFER,this.bufferData,this.type==="static"?o.STATIC_DRAW:o.DYNAMIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer)}upload(t){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),t?e.bufferSubData(e.ARRAY_BUFFER,0,this.bufferData,0,t):e.bufferData(e.ARRAY_BUFFER,this.bufferData,this.type==="static"?e.STATIC_DRAW:e.DYNAMIC_DRAW)}}class Mi{constructor(t){this._gl=we.gl,this._logger=gt.getInstance(),this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0;const{shader:e,vertexBuffer:i,attributes:n}=t;this._vertexBuffer=i,this._attributes=n,this._shader=e,this.initialize()}get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}initialize(){if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._layout.length=0;const t=this._shader.attributes;for(const i of this._attributes){const n=t[i[0]];if(!n)throw Error(`The attribute named: ${i[0]} size ${i[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);if(n.size!==i[1])throw Error(`VertexLayout size definition for attribute: [${i[0]}, ${i[1]}], doesnt match shader source size ${n.size}:
 ${this._shader.vertexSource}`);this._layout.push(n)}let e=0;for(const i of this._layout){const n=kn(this._gl,i.glType);this._vertexTotalSizeBytes+=n*i.size,e+=i.size}this._vertexBuffer.bufferData.length%e!==0&&this._logger.warn(`The vertex component size (${e})  does divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`)}use(t=!1,e){const i=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),t&&this._vertexBuffer.upload(e);let n=0;for(const o of this._layout)i.vertexAttribPointer(o.location,o.size,o.glType,o.normalized,this.totalVertexSizeBytes,n),i.enableVertexAttribArray(o.location),n+=kn(i,o.glType)*o.size}}class Zt{static clear(){Zt.DrawCallCount=0,Zt.DrawnImagesCount=0}}Zt.DrawCallCount=0,Zt.DrawnImagesCount=0;class Ao{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new Le({vertexSource:ra,fragmentSource:oa}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new Ve({size:6*2*this._maxLines,type:"dynamic"}),this._layout=new Mi({vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}draw(t,e,i){this._isFull()&&this.flush(),this._lineCount++;const n=this._context.getTransform(),o=n.multiply(t),h=n.multiply(e),u=this._vertexBuffer.bufferData;u[this._vertexIndex++]=o.x,u[this._vertexIndex++]=o.y,u[this._vertexIndex++]=i.r/255,u[this._vertexIndex++]=i.g/255,u[this._vertexIndex++]=i.b/255,u[this._vertexIndex++]=i.a,u[this._vertexIndex++]=h.x,u[this._vertexIndex++]=h.y,u[this._vertexIndex++]=i.r/255,u[this._vertexIndex++]=i.g/255,u[this._vertexIndex++]=i.b/255,u[this._vertexIndex++]=i.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.LINES,0,this._lineCount*2),Zt.DrawnImagesCount+=this._lineCount,Zt.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const aa=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,la=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class Ys{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new Le({vertexSource:aa,fragmentSource:la}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new Ve({size:7*this._maxPoints,type:"dynamic"}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}draw(t,e,i){this._isFull()&&this.flush(),this._pointCount++;const n=this._context.getTransform(),o=this._context.opacity,h=this._context.snapToPixel,u=n.multiply(t);h&&(u.x=~~(u.x+St),u.y=~~(u.y+St));const p=this._buffer.bufferData;p[this._vertexIndex++]=u.x,p[this._vertexIndex++]=u.y,p[this._vertexIndex++]=e.r/255,p[this._vertexIndex++]=e.g/255,p[this._vertexIndex++]=e.b/255,p[this._vertexIndex++]=e.a*o,p[this._vertexIndex++]=i*Math.max(n.getScaleX(),n.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.POINTS,0,this._pointCount),Zt.DrawnImagesCount+=this._pointCount,Zt.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const ni=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,Vs=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class As{constructor(t){this._gl=t,this._shader=new Le({vertexSource:ni,fragmentSource:Vs}),this._shader.compile(),this._buffer=new Ve({type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(t){const e=this._gl;t.getShader().use(),t.getLayout().use(),e.drawArrays(e.TRIANGLES,0,6)}renderToScreen(){const t=this._gl;this._shader.use(),this._layout.use(),t.drawArrays(t.TRIANGLES,0,6)}}class Zi{constructor(t,e){this._gl=we.gl,this._logger=gt.getInstance();const i=this._gl;this.buffer=i.createBuffer(),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.buffer);const n=t*6;if(!e)this.bufferData=new Uint32Array(n);else{const u=Math.floor(16383.5);this.bufferGlType=i.UNSIGNED_SHORT,this.bufferData=new Uint16Array(n),t>u&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${u}) requested quads(${t})`)}let o=0;for(let h=0;h<n;h+=6)this.bufferData[h+0]=o+0,this.bufferData[h+1]=o+1,this.bufferData[h+2]=o+2,this.bufferData[h+3]=o+2,this.bufferData[h+4]=o+1,this.bufferData[h+5]=o+3,o+=4;i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.bufferData,i.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer)}}const wr=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   // In order to support the most efficient sprite batching, we have multiple\r
   // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
   // that do not apply to a particular sprite.\r
\r
   vec4 color = vec4(1.0, 0, 0, 1.0);\r
\r
   // GLSL is templated out to pick the right texture and set the vec4 color\r
   %%texture_picker%%\r
\r
   color.rgb = color.rgb * v_opacity;\r
   color.a = color.a * v_opacity;\r
   fragColor = color * v_tint;\r
}`,ha=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the UV coord to the fragment shader\r
   v_texcoord = a_texcoord;\r
   // Pass through the texture number to the fragment shader\r
   v_textureIndex = a_textureIndex;\r
   // Pass through the tint\r
   v_tint = a_tint;\r
}`;class Zs{constructor(){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),125);const i=this._transformFragmentSource(wr,this._maxTextures);this._shader=new Le({fragmentSource:i,vertexSource:ha}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((n,o)=>o)),this._buffer=new Ve({size:10*4*this._maxImages,type:"dynamic"}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new Zi(this._maxImages,!0)}_transformFragmentSource(t,e){let i=t.replace("%%count%%",e.toString()),n="";for(let o=0;o<e;o++)o===0?n+=`if (v_textureIndex <= ${o}.5) {
`:n+=`   else if (v_textureIndex <= ${o}.5) {
`,n+=`      color = texture(u_textures[${o}], v_texcoord);
`,n+=`   }
`;return i=i.replace("%%texture_picker%%",n),i}_addImageAsTexture(t){const e=Rt.load(t);this._textures.indexOf(e)===-1&&this._textures.push(e)}_bindTextures(t){for(let e=0;e<this._maxTextures;e++)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this._textures[e]||this._textures[0])}_getTextureIdForImage(t){return t?this._textures.indexOf(Rt.get(t)):-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}draw(t,e,i,n,o,h,u,p,f){var _,I,k,j;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(t);let V=(t==null?void 0:t.width)||n||0,$=(t==null?void 0:t.height)||o||0,tt=[0,0,(_=n??(t==null?void 0:t.width))!==null&&_!==void 0?_:0,(I=o??(t==null?void 0:t.height))!==null&&I!==void 0?I:0],U=[e??1,i??1];h!==void 0&&u!==void 0&&p!==void 0&&f!==void 0&&(tt=[e??1,i??1,(k=n??(t==null?void 0:t.width))!==null&&k!==void 0?k:0,(j=o??(t==null?void 0:t.height))!==null&&j!==void 0?j:0],U=[h,u],V=p,$=f),e=tt[0],i=tt[1];const F=tt[2],at=tt[3],rt=this._context.getTransform(),xt=this._context.opacity,pt=this._context.snapToPixel;let X=L(U[0],U[1]),zt=L(U[0]+V,U[1]),Qt=L(U[0],U[1]+$),Ot=L(U[0]+V,U[1]+$);X=rt.multiply(X),zt=rt.multiply(zt),Qt=rt.multiply(Qt),Ot=rt.multiply(Ot),pt&&(X.x=~~(X.x+St),X.y=~~(X.y+St),zt.x=~~(zt.x+St),zt.y=~~(zt.y+St),Qt.x=~~(Qt.x+St),Qt.y=~~(Qt.y+St),Ot.x=~~(Ot.x+St),Ot.y=~~(Ot.y+St));const Lt=this._context.tint,Ce=this._getTextureIdForImage(t),bi=t.width||V,yi=t.height||$,fn=e/bi,vn=i/yi,_n=(e+F-.01)/bi,wn=(i+at-.01)/yi,Ct=this._layout.vertexBuffer.bufferData;Ct[this._vertexIndex++]=X.x,Ct[this._vertexIndex++]=X.y,Ct[this._vertexIndex++]=xt,Ct[this._vertexIndex++]=fn,Ct[this._vertexIndex++]=vn,Ct[this._vertexIndex++]=Ce,Ct[this._vertexIndex++]=Lt.r/255,Ct[this._vertexIndex++]=Lt.g/255,Ct[this._vertexIndex++]=Lt.b/255,Ct[this._vertexIndex++]=Lt.a,Ct[this._vertexIndex++]=Qt.x,Ct[this._vertexIndex++]=Qt.y,Ct[this._vertexIndex++]=xt,Ct[this._vertexIndex++]=fn,Ct[this._vertexIndex++]=wn,Ct[this._vertexIndex++]=Ce,Ct[this._vertexIndex++]=Lt.r/255,Ct[this._vertexIndex++]=Lt.g/255,Ct[this._vertexIndex++]=Lt.b/255,Ct[this._vertexIndex++]=Lt.a,Ct[this._vertexIndex++]=zt.x,Ct[this._vertexIndex++]=zt.y,Ct[this._vertexIndex++]=xt,Ct[this._vertexIndex++]=_n,Ct[this._vertexIndex++]=vn,Ct[this._vertexIndex++]=Ce,Ct[this._vertexIndex++]=Lt.r/255,Ct[this._vertexIndex++]=Lt.g/255,Ct[this._vertexIndex++]=Lt.b/255,Ct[this._vertexIndex++]=Lt.a,Ct[this._vertexIndex++]=Ot.x,Ct[this._vertexIndex++]=Ot.y,Ct[this._vertexIndex++]=xt,Ct[this._vertexIndex++]=_n,Ct[this._vertexIndex++]=wn,Ct[this._vertexIndex++]=Ce,Ct[this._vertexIndex++]=Lt.r/255,Ct[this._vertexIndex++]=Lt.g/255,Ct[this._vertexIndex++]=Lt.b/255,Ct[this._vertexIndex++]=Lt.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0,4*10*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._bindTextures(t),this._quads.bind(),t.drawElements(t.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),Zt.DrawnImagesCount+=this._imageCount,Zt.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0}}const fo=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,ca=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class vo{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new Le({fragmentSource:fo,vertexSource:ca}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._buffer=new Ve({size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Zi(this._maxRectangles,!0)}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...t){t[0]instanceof B&&t[1]instanceof B?this.drawLine.apply(this,t):this.drawRectangle.apply(this,t)}drawLine(t,e,i,n=1){this._isFull()&&this.flush(),this._rectangleCount++;const o=this._context.getTransform(),h=this._context.opacity,u=this._context.snapToPixel,p=e.sub(t),f=p.size,_=p.normalize().perpendicular(),I=n/2,k=o.multiply(_.scale(I).add(t)),j=o.multiply(_.scale(-I).add(t)),V=o.multiply(_.scale(I).add(e)),$=o.multiply(_.scale(-I).add(e));u&&(k.x=~~(k.x+St),k.y=~~(k.y+St),V.x=~~(V.x+St),V.y=~~(V.y+St),j.x=~~(j.x+St),j.y=~~(j.y+St),$.x=~~($.x+St),$.y=~~($.y+St));const tt=0,U=0,F=1,at=1,rt=W.Transparent,xt=0,pt=1,X=this._layout.vertexBuffer.bufferData;X[this._vertexIndex++]=k.x,X[this._vertexIndex++]=k.y,X[this._vertexIndex++]=tt,X[this._vertexIndex++]=U,X[this._vertexIndex++]=f,X[this._vertexIndex++]=n,X[this._vertexIndex++]=h,X[this._vertexIndex++]=i.r/255,X[this._vertexIndex++]=i.g/255,X[this._vertexIndex++]=i.b/255,X[this._vertexIndex++]=i.a,X[this._vertexIndex++]=rt.r/255,X[this._vertexIndex++]=rt.g/255,X[this._vertexIndex++]=rt.b/255,X[this._vertexIndex++]=rt.a,X[this._vertexIndex++]=xt/pt,X[this._vertexIndex++]=j.x,X[this._vertexIndex++]=j.y,X[this._vertexIndex++]=tt,X[this._vertexIndex++]=at,X[this._vertexIndex++]=f,X[this._vertexIndex++]=n,X[this._vertexIndex++]=h,X[this._vertexIndex++]=i.r/255,X[this._vertexIndex++]=i.g/255,X[this._vertexIndex++]=i.b/255,X[this._vertexIndex++]=i.a,X[this._vertexIndex++]=rt.r/255,X[this._vertexIndex++]=rt.g/255,X[this._vertexIndex++]=rt.b/255,X[this._vertexIndex++]=rt.a,X[this._vertexIndex++]=xt/pt,X[this._vertexIndex++]=V.x,X[this._vertexIndex++]=V.y,X[this._vertexIndex++]=F,X[this._vertexIndex++]=U,X[this._vertexIndex++]=f,X[this._vertexIndex++]=n,X[this._vertexIndex++]=h,X[this._vertexIndex++]=i.r/255,X[this._vertexIndex++]=i.g/255,X[this._vertexIndex++]=i.b/255,X[this._vertexIndex++]=i.a,X[this._vertexIndex++]=rt.r/255,X[this._vertexIndex++]=rt.g/255,X[this._vertexIndex++]=rt.b/255,X[this._vertexIndex++]=rt.a,X[this._vertexIndex++]=xt/pt,X[this._vertexIndex++]=$.x,X[this._vertexIndex++]=$.y,X[this._vertexIndex++]=F,X[this._vertexIndex++]=at,X[this._vertexIndex++]=f,X[this._vertexIndex++]=n,X[this._vertexIndex++]=h,X[this._vertexIndex++]=i.r/255,X[this._vertexIndex++]=i.g/255,X[this._vertexIndex++]=i.b/255,X[this._vertexIndex++]=i.a,X[this._vertexIndex++]=rt.r/255,X[this._vertexIndex++]=rt.g/255,X[this._vertexIndex++]=rt.b/255,X[this._vertexIndex++]=rt.a,X[this._vertexIndex++]=xt/pt}drawRectangle(t,e,i,n,o=W.Transparent,h=0){this._isFull()&&this.flush(),this._rectangleCount++;const u=this._context.getTransform(),p=this._context.opacity,f=this._context.snapToPixel,_=u.multiply(t.add(L(0,0))),I=u.multiply(t.add(L(e,0))),k=u.multiply(t.add(L(e,i))),j=u.multiply(t.add(L(0,i)));f&&(_.x=~~(_.x+St),_.y=~~(_.y+St),I.x=~~(I.x+St),I.y=~~(I.y+St),j.x=~~(j.x+St),j.y=~~(j.y+St),k.x=~~(k.x+St),k.y=~~(k.y+St));const V=0,$=0,tt=1,U=1,F=this._layout.vertexBuffer.bufferData;F[this._vertexIndex++]=_.x,F[this._vertexIndex++]=_.y,F[this._vertexIndex++]=V,F[this._vertexIndex++]=$,F[this._vertexIndex++]=e,F[this._vertexIndex++]=i,F[this._vertexIndex++]=p,F[this._vertexIndex++]=n.r/255,F[this._vertexIndex++]=n.g/255,F[this._vertexIndex++]=n.b/255,F[this._vertexIndex++]=n.a,F[this._vertexIndex++]=o.r/255,F[this._vertexIndex++]=o.g/255,F[this._vertexIndex++]=o.b/255,F[this._vertexIndex++]=o.a,F[this._vertexIndex++]=h,F[this._vertexIndex++]=j.x,F[this._vertexIndex++]=j.y,F[this._vertexIndex++]=V,F[this._vertexIndex++]=U,F[this._vertexIndex++]=e,F[this._vertexIndex++]=i,F[this._vertexIndex++]=p,F[this._vertexIndex++]=n.r/255,F[this._vertexIndex++]=n.g/255,F[this._vertexIndex++]=n.b/255,F[this._vertexIndex++]=n.a,F[this._vertexIndex++]=o.r/255,F[this._vertexIndex++]=o.g/255,F[this._vertexIndex++]=o.b/255,F[this._vertexIndex++]=o.a,F[this._vertexIndex++]=h,F[this._vertexIndex++]=I.x,F[this._vertexIndex++]=I.y,F[this._vertexIndex++]=tt,F[this._vertexIndex++]=$,F[this._vertexIndex++]=e,F[this._vertexIndex++]=i,F[this._vertexIndex++]=p,F[this._vertexIndex++]=n.r/255,F[this._vertexIndex++]=n.g/255,F[this._vertexIndex++]=n.b/255,F[this._vertexIndex++]=n.a,F[this._vertexIndex++]=o.r/255,F[this._vertexIndex++]=o.g/255,F[this._vertexIndex++]=o.b/255,F[this._vertexIndex++]=o.a,F[this._vertexIndex++]=h,F[this._vertexIndex++]=k.x,F[this._vertexIndex++]=k.y,F[this._vertexIndex++]=tt,F[this._vertexIndex++]=U,F[this._vertexIndex++]=e,F[this._vertexIndex++]=i,F[this._vertexIndex++]=p,F[this._vertexIndex++]=n.r/255,F[this._vertexIndex++]=n.g/255,F[this._vertexIndex++]=n.b/255,F[this._vertexIndex++]=n.a,F[this._vertexIndex++]=o.r/255,F[this._vertexIndex++]=o.g/255,F[this._vertexIndex++]=o.b/255,F[this._vertexIndex++]=o.a,F[this._vertexIndex++]=h}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),Zt.DrawnImagesCount+=this._rectangleCount,Zt.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const _o=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,da=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class Dn{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new Le({fragmentSource:_o,vertexSource:da}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._buffer=new Ve({size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Zi(this._maxCircles,!0)}_isFull(){return this._circleCount>=this._maxCircles}draw(t,e,i,n=W.Transparent,o=0){this._isFull()&&this.flush(),this._circleCount++;const h=this._context.getTransform(),u=this._context.opacity,p=this._context.snapToPixel,f=h.multiply(t.add(L(-e,-e))),_=h.multiply(t.add(L(e,-e))),I=h.multiply(t.add(L(e,e))),k=h.multiply(t.add(L(-e,e)));p&&(f.x=~~(f.x+St),f.y=~~(f.y+St),_.x=~~(_.x+St),_.y=~~(_.y+St),k.x=~~(k.x+St),k.y=~~(k.y+St),I.x=~~(I.x+St),I.y=~~(I.y+St));const j=0,V=0,$=1,tt=1,U=this._layout.vertexBuffer.bufferData;U[this._vertexIndex++]=f.x,U[this._vertexIndex++]=f.y,U[this._vertexIndex++]=j,U[this._vertexIndex++]=V,U[this._vertexIndex++]=u,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a,U[this._vertexIndex++]=n.r/255,U[this._vertexIndex++]=n.g/255,U[this._vertexIndex++]=n.b/255,U[this._vertexIndex++]=n.a,U[this._vertexIndex++]=o/e,U[this._vertexIndex++]=k.x,U[this._vertexIndex++]=k.y,U[this._vertexIndex++]=j,U[this._vertexIndex++]=tt,U[this._vertexIndex++]=u,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a,U[this._vertexIndex++]=n.r/255,U[this._vertexIndex++]=n.g/255,U[this._vertexIndex++]=n.b/255,U[this._vertexIndex++]=n.a,U[this._vertexIndex++]=o/e,U[this._vertexIndex++]=_.x,U[this._vertexIndex++]=_.y,U[this._vertexIndex++]=$,U[this._vertexIndex++]=V,U[this._vertexIndex++]=u,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a,U[this._vertexIndex++]=n.r/255,U[this._vertexIndex++]=n.g/255,U[this._vertexIndex++]=n.b/255,U[this._vertexIndex++]=n.a,U[this._vertexIndex++]=o/e,U[this._vertexIndex++]=I.x,U[this._vertexIndex++]=I.y,U[this._vertexIndex++]=$,U[this._vertexIndex++]=tt,U[this._vertexIndex++]=u,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a,U[this._vertexIndex++]=n.r/255,U[this._vertexIndex++]=n.g/255,U[this._vertexIndex++]=n.b/255,U[this._vertexIndex++]=n.a,U[this._vertexIndex++]=o/e}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),Zt.DrawnImagesCount+=this._circleCount,Zt.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class br{constructor(t,e,i=100){this.builder=t,this.recycler=e,this.maxObjects=i,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=gt.getInstance()}preallocate(){for(let t=0;t<this.maxObjects;t++)this.objects[t]=this.builder()}using(t){const e=t(this);return e?this.done(...e):this.done()}borrow(t){const e=this.get();t(e),this.index--}get(...t){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++],...t):(this.totalAllocations++,this.objects[this.index++]=this.builder(...t))}done(...t){this.index=0;for(const e of t){const i=this.objects.indexOf(e);this.objects[i]=this.builder(),this.totalAllocations++}return t}}class wo{constructor(){this.z=0,this.priority=0,this.transform=yt.identity(),this.state={z:0,opacity:1,tint:W.White}}}const St=1e-4;class ua{constructor(t){this._webglCtx=t,this._debugText=new fr}drawRect(t,e,i,n,o={color:W.Black}){this.drawLine(L(t,e),L(t+i,e),{...o}),this.drawLine(L(t+i,e),L(t+i,e+n),{...o}),this.drawLine(L(t+i,e+n),L(t,e+n),{...o}),this.drawLine(L(t,e+n),L(t,e),{...o})}drawLine(t,e,i={color:W.Black}){this._webglCtx.draw("ex.line",t,e,i.color)}drawPoint(t,e={color:W.Black,size:5}){this._webglCtx.draw("ex.point",t,e.color,e.size)}drawText(t,e){this._debugText.write(this._webglCtx,t,e)}}class Ws{constructor(t){this._logger=gt.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new br(()=>new wo,p=>(p.priority=0,p.z=0,p.renderer=void 0,p.args=void 0,p),4e3),this._drawCalls=[],this._postProcessTargets=[],this._postprocessors=[],this._transform=new oe,this._state=new dr,this.snapToPixel=!1,this.smoothing=!1,this.backgroundColor=W.ExcaliburBlue,this._alreadyWarnedDrawLifecycle=!1,this.debug=new ua(this);const{canvasElement:e,enableTransparency:i,smoothing:n,snapToPixel:o,backgroundColor:h,useDrawSorting:u}=t;if(this.__gl=e.getContext("webgl2",{antialias:n??this.smoothing,premultipliedAlpha:!1,alpha:i??!0,depth:!0,powerPreference:"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");we.register(this.__gl),Rt.register(this.__gl),this.snapToPixel=o??this.snapToPixel,this.smoothing=n??this.smoothing,this.backgroundColor=h??this.backgroundColor,this.useDrawSorting=u??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}get z(){return this._state.current.z}set z(t){this._state.current.z=t}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(t){let e=!0;return(t.width>4096||t.height>4096)&&(e=!1),e}_init(){const t=this.__gl;this._ortho=_e.ortho(0,t.canvas.width,t.canvas.height,0,400,-400),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.register(new Zs),this.register(new vo),this.register(new Dn),this.register(new Ys),this.register(new Ao),this._screenRenderer=new As(t),this._renderTarget=new si({gl:t,width:t.canvas.width,height:t.canvas.height}),this._postProcessTargets=[new si({gl:t,width:t.canvas.width,height:t.canvas.height}),new si({gl:t,width:t.canvas.width,height:t.canvas.height})]}register(t){this._renderers.set(t.type,t),t.initialize(this.__gl,this)}get(t){return this._renderers.get(t)}_isCurrentRenderer(t){return!this._currentRenderer||this._currentRenderer===t}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(t,...e){!this._isDrawLifecycle&&!this._alreadyWarnedDrawLifecycle&&(this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._alreadyWarnedDrawLifecycle=!0);const i=this._renderers.get(t);if(i)if(this.useDrawSorting){const n=this._drawCallPool.get();n.z=this._state.current.z,n.priority=i.priority,n.renderer=t,this.getTransform().clone(n.transform),n.state.z=this._state.current.z,n.state.opacity=this._state.current.opacity,n.state.tint=this._state.current.tint,n.args=e,this._drawCalls.push(n)}else this._currentRenderer||(this._currentRenderer=i),this._isCurrentRenderer(i)||this._currentRenderer.flush(),i.draw(...e),this._currentRenderer=i;else throw Error(`No renderer with name ${t} has been registered`)}resetTransform(){this._transform.current=yt.identity()}updateViewport(t){const e=this.__gl;this._ortho=this._ortho=_e.ortho(0,t.width,t.height,0,400,-400),this._renderTarget.setResolution(e.canvas.width,e.canvas.height),this._postProcessTargets[0].setResolution(e.canvas.width,e.canvas.height),this._postProcessTargets[1].setResolution(e.canvas.width,e.canvas.height)}drawImage(t,e,i,n,o,h,u,p,f){if(!(n===0||o===0)){{if(p===0||f===0)return;if(t.width===0||t.height===0)return}if(!t){gt.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this.draw("ex.image",t,e,i,n,o,h,u,p,f)}}drawLine(t,e,i,n=1){this.draw("ex.rectangle",t,e,i,n)}drawRectangle(t,e,i,n,o,h){this.draw("ex.rectangle",t,e,i,n,o,h)}drawCircle(t,e,i,n,o){this.draw("ex.circle",t,e,i,n,o)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(t,e){this._transform.translate(this.snapToPixel?~~(t+St):t,this.snapToPixel?~~(e+St):e)}rotate(t){this._transform.rotate(t)}scale(t,e){this._transform.scale(t,e)}transform(t){this._transform.current=t}getTransform(){return this._transform.current}multiply(t){this._transform.current.multiply(t,this._transform.current)}addPostProcessor(t){this._postprocessors.push(t),t.initialize(this.__gl)}removePostProcessor(t){const e=this._postprocessors.indexOf(t);e!==-1&&this._postprocessors.splice(e,1)}clearPostProcessors(){this._postprocessors.length=0}clear(){const t=this.__gl;this._renderTarget.use(),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT)}flush(){const t=this.__gl;if(this._renderTarget.use(),this.useDrawSorting){const i=new Map;for(const[h]of this._renderers){const u=this._drawCalls.findIndex(p=>p.renderer===h);i.set(h,u)}this._drawCalls.sort((h,u)=>{const p=h.z-u.z,f=i.get(h.renderer)-i.get(u.renderer),_=h.priority-u.priority;return p===0?_===0?f:_:p});const n=this._transform.current,o=this._state.current;if(this._drawCalls.length){let h=this._drawCalls[0].renderer,u=this._renderers.get(h);for(let p=0;p<this._drawCalls.length;p++)this._transform.current=this._drawCalls[p].transform,this._state.current=this._drawCalls[p].state,this._drawCalls[p].renderer!==h&&(u.flush(),h=this._drawCalls[p].renderer,u=this._renderers.get(h)),u.draw(...this._drawCalls[p].args);u.hasPendingDraws()&&u.flush()}this._transform.current=n,this._state.current=o,this._drawCallPool.done(),this._drawCalls.length=0}else for(const i of this._renderers.values())i.hasPendingDraws()&&i.flush();this._renderTarget.disable(),this._renderTarget.toRenderSource().use();for(let i=0;i<this._postprocessors.length;i++)this._postProcessTargets[i%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[i]),this._postProcessTargets[i%2].toRenderSource().use();t.bindFramebuffer(t.FRAMEBUFFER,null),this._screenRenderer.renderToScreen()}}const Wt=1e-4;class pa{constructor(t){this._ex=t,this._debugText=new fr}drawRect(t,e,i,n){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(t+Wt):t,this._ex.snapToPixel?~~(e+Wt):e,this._ex.snapToPixel?~~(i+Wt):i,this._ex.snapToPixel?~~(n+Wt):n),this._ex.__ctx.restore()}drawLine(t,e,i={color:W.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=i.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(t.x+Wt):t.x,this._ex.snapToPixel?~~(t.y+Wt):t.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(e.x+Wt):e.x,this._ex.snapToPixel?~~(e.y+Wt):e.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(t,e={color:W.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=e.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(t.x+Wt):t.x,this._ex.snapToPixel?~~(t.y+Wt):t.y,e.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(t,e){this._debugText.write(this._ex,t,e)}}class fs{constructor(t){this.useDrawSorting=!1,this.z=0,this.backgroundColor=W.ExcaliburBlue,this._state=new dr,this.snapToPixel=!1,this.debug=new pa(this);const{canvasElement:e,enableTransparency:i,snapToPixel:n,smoothing:o,backgroundColor:h}=t;this.__ctx=e.getContext("2d",{alpha:i??!0}),this.backgroundColor=h??this.backgroundColor,this.snapToPixel=n??this.snapToPixel,this.smoothing=o??this.smoothing}get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(t){this.__ctx.imageSmoothingEnabled=t}resetTransform(){this.__ctx.resetTransform()}updateViewport(t){}drawImage(t,e,i,n,o,h,u,p,f){if(n===0||o===0)return;if(p===0||f===0)return;if(t.width===0||t.height===0)return;this.__ctx.globalAlpha=this.opacity;const _=[t,e,i,n,o,h,u,p,f].filter(I=>I!==void 0).map(I=>typeof I=="number"&&this.snapToPixel?~~I:I);this.__ctx.drawImage.apply(this.__ctx,_),Zt.DrawCallCount++,Zt.DrawnImagesCount=1}drawLine(t,e,i,n=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=i.toString(),this.__ctx.moveTo(this.snapToPixel?~~(t.x+Wt):t.x,this.snapToPixel?~~(t.y+Wt):t.y),this.__ctx.lineTo(this.snapToPixel?~~(e.x+Wt):e.x,this.snapToPixel?~~(e.y+Wt):e.y),this.__ctx.lineWidth=n,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(t,e,i,n){this.__ctx.save(),this.__ctx.fillStyle=n.toString(),this.__ctx.fillRect(this.snapToPixel?~~(t.x+Wt):t.x,this.snapToPixel?~~(t.y+Wt):t.y,this.snapToPixel?~~(e+Wt):e,this.snapToPixel?~~(i+Wt):i),this.__ctx.restore()}drawCircle(t,e,i,n,o){this.__ctx.save(),this.__ctx.beginPath(),n&&(this.__ctx.strokeStyle=n.toString()),o&&(this.__ctx.lineWidth=o),this.__ctx.fillStyle=i.toString(),this.__ctx.arc(this.snapToPixel?~~(t.x+Wt):t.x,this.snapToPixel?~~(t.y+Wt):t.y,e,0,Math.PI*2),this.__ctx.fill(),n&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save()}restore(){this.__ctx.restore()}translate(t,e){this.__ctx.translate(this.snapToPixel?~~(t+Wt):t,this.snapToPixel?~~(e+Wt):e)}rotate(t){this.__ctx.rotate(t)}scale(t,e){this.__ctx.scale(t,e)}getTransform(){throw new Error("Not implemented")}multiply(t){this.__ctx.setTransform(this.__ctx.getTransform().multiply(t.toDOMMatrix()))}addPostProcessor(t){}removePostProcessor(t){}clearPostProcessors(){}beginDrawLifecycle(){}endDrawLifecycle(){}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),Zt.clear()}flush(){}}var Ft;(function(a){a.Fixed="Fixed",a.FitContainerAndFill="FitContainerAndFill",a.FitScreenAndFill="FitScreenAndFill",a.FitContainerAndZoom="FitContainerAndZoom",a.FitScreenAndZoom="FitScreenAndZoom",a.FitScreen="FitScreen",a.FillScreen="FillScreen",a.FitContainer="FitContainer",a.FillContainer="FillContainer"})(Ft||(Ft={}));class Wi{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}class Hs{constructor(t){var e,i,n;this._antialiasing=!0,this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=gt.getInstance(),this._fullscreenChangeHandler=()=>{this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen)},this._pixelRatioChangeHandler=()=>{this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport()},this._resizeHandler=()=>{const o=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(o),this.applyResolutionAndViewport()},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._alreadyWarned=!1,this._contentArea=new ut,this.viewport=t.viewport,this.resolution=(e=t.resolution)!==null&&e!==void 0?e:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(i=t.displayMode)!==null&&i!==void 0?i:Ft.Fixed,this._canvas=t.canvas,this.graphicsContext=t.context,this._antialiasing=(n=t.antialiasing)!==null&&n!==void 0?n:this._antialiasing,this._browser=t.browser,this._pixelRatioOverride=t.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this._browser.window.off("resize",this._resizeHandler),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler))}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case Ft.FillContainer:case Ft.FitContainer:case Ft.FitContainerAndFill:case Ft.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(t){this._resolution=t}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(t){this._viewport=t}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(t){this._camera=t}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop()}applyResolutionAndViewport(){this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this.graphicsContext instanceof Ws&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&!this._alreadyWarned&&(this._alreadyWarned=!0,this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)),this._antialiasing?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges")),this._canvas.style.width=this.viewport.width+"px",this._canvas.style.height=this.viewport.height+"px",this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof fs&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(t){this._antialiasing=t,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(t){if(t){const e=document.getElementById(t);if(e)return e.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}pageToScreenCoordinates(t){let e=t.x,i=t.y;if(this._isFullScreen||(e-=ei(this._canvas).x,i-=ei(this._canvas).y),this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const n=window.innerWidth/this.aspectRatio,o=(window.innerHeight-n)/2;i=(i-o)/n*this.viewport.height,e=e/window.innerWidth*this.viewport.width}else{const n=window.innerHeight*this.aspectRatio,o=(window.innerWidth-n)/2;e=(e-o)/n*this.viewport.width,i=i/window.innerHeight*this.viewport.height}return e=e/this.viewport.width*this.resolution.width,i=i/this.viewport.height*this.resolution.height,new B(e,i)}screenToPageCoordinates(t){let e=t.x,i=t.y;if(e=e/this.resolution.width*this.viewport.width,i=i/this.resolution.height*this.viewport.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const n=window.innerWidth/this.aspectRatio,o=(window.innerHeight-n)/2;i=i/this.viewport.height*n+o,e=e/this.viewport.width*window.innerWidth}else{const n=window.innerHeight*this.aspectRatio,o=(window.innerWidth-n)/2;e=e/this.viewport.width*n+o,i=i/this.viewport.height*window.innerHeight}return this._isFullScreen||(e+=ei(this._canvas).x,i+=ei(this._canvas).y),new B(e,i)}screenToWorldCoordinates(t){return this._camera?this._camera.inverse.multiply(t):t.sub(L(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(t){return this._camera?this._camera.transform.multiply(t):t.add(L(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(t){const e=this.pageToScreenCoordinates(t);return this.screenToWorldCoordinates(e)}worldToPageCoordinates(t){const e=this.worldToScreenCoordinates(t);return this.screenToPageCoordinates(e)}getWorldBounds(){const t=this.screenToWorldCoordinates(B.Zero),e=t.x+this.drawWidth,i=t.y+this.drawHeight;return new ut(t.x,t.y,e,i)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return L(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.aspectRatio;let e=0,i=0;window.innerWidth/t<window.innerHeight?(e=window.innerWidth,i=window.innerWidth/t):(e=window.innerHeight*t,i=window.innerHeight),this.viewport={width:e,height:i},this._contentArea=ut.fromDimension(this.resolution.width,this.resolution.height,B.Zero)}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=window.innerWidth,e=window.innerHeight;this._computeFitAndFill(t,e)}_computeFitContainerAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.canvas.parentElement,e=t.clientWidth,i=t.clientHeight;this._computeFitAndFill(e,i)}_computeFitAndFill(t,e){if(this.viewport={width:t,height:e},t/e<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:t*this._contentResolution.width/t,height:t*this._contentResolution.width/t*e/t};const i=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new ut({top:i,left:0,right:this._contentResolution.width,bottom:this.resolution.height-i})}else{this.resolution={width:e*this._contentResolution.height/e*t/e,height:e*this._contentResolution.height/e};const i=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new ut({top:0,left:i,right:this.resolution.width-i,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=window.innerWidth,e=window.innerHeight;this._computeFitAndZoom(t,e)}_computeFitContainerAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=this.canvas.parentElement;t.style.position="relative",t.style.overflow="hidden";const e=t.clientWidth,i=t.clientHeight;this._computeFitAndZoom(e,i)}_computeFitAndZoom(t,e){const i=this.aspectRatio;let n=0,o=0;t/i<e?(n=t,o=t/i):(n=e*i,o=e);const h=t/n,u=e/o,p=Math.max(h,u),f=n*p,_=o*p;f>t?this.canvas.style.left=-(f-t)/2+"px":this.canvas.style.left="",_>e?this.canvas.style.top=-(_-e)/2+"px":this.canvas.style.top="",this.viewport={width:f,height:_};const I=ut.fromDimension(this.viewport.width,this.viewport.height,B.Zero);if(this.viewport.width>t){const k=(this.viewport.width-t)/this.viewport.width*this.resolution.width;I.top=0,I.left=k/2,I.right=this.resolution.width-k/2,I.bottom=this.resolution.height}if(this.viewport.height>e){const k=(this.viewport.height-e)/this.viewport.height*this.resolution.height;I.top=k/2,I.left=0,I.bottom=this.resolution.height-k/2,I.right=this.resolution.width}this._contentArea=I}_computeFitContainer(){const t=this.aspectRatio;let e=0,i=0;const n=this.canvas.parentElement;n.clientWidth/t<n.clientHeight?(e=n.clientWidth,i=n.clientWidth/t):(e=n.clientHeight*t,i=n.clientHeight),this.viewport={width:e,height:i},this._contentArea=ut.fromDimension(this.resolution.width,this.resolution.height,B.Zero)}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(t){this.displayMode===Ft.FillContainer&&(this.resolution={width:t.clientWidth,height:t.clientHeight},this.viewport=this.resolution),this.displayMode===Ft.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:t.innerWidth,height:t.innerHeight},this.viewport=this.resolution),this.displayMode===Ft.FitScreen&&this._computeFit(),this.displayMode===Ft.FitContainer&&this._computeFitContainer(),this.displayMode===Ft.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===Ft.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===Ft.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===Ft.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class Hi{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}Hi._INSTANCE=null;function ga(a){return!!a.playbackState}class Xi{static unlock(){return new Promise((e,i)=>{if(Xi._UNLOCKED||!Hi.create())return e(!0);const n=setTimeout(()=>{gt.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),e(!1)},200),o=Hi.create();o.resume().then(()=>{const h=o.createBuffer(1,1,22050),u=o.createBufferSource();let p=!1;u.buffer=h,u.connect(o.destination),u.onended=()=>p=!0,u.start(0),setTimeout(()=>{ga(u)?(u.playbackState===u.PLAYING_STATE||u.playbackState===u.FINISHED_STATE)&&(Xi._UNLOCKED=!0):(o.currentTime>0||p)&&(Xi._UNLOCKED=!0)},0),clearTimeout(n),e(!0)},()=>{i()})})}static isUnlocked(){return this._UNLOCKED}}Xi._UNLOCKED=!1;class Ge{constructor(){this.eventDispatcher=new Ei}on(t,e){this.eventDispatcher.on(t,e)}off(t,e){this.eventDispatcher.off(t,e)}emit(t,e){this.eventDispatcher.emit(t,e)}once(t,e){this.eventDispatcher.once(t,e)}}function yr(a,t=W.Red,e,i,n,o,h=1,u="butt"){a.save(),a.beginPath(),a.lineWidth=h,a.lineCap=u,a.strokeStyle=t.toString(),a.moveTo(e,i),a.lineTo(n,o),a.closePath(),a.stroke(),a.restore()}function ma(a,t=W.Red,e){a.beginPath(),a.strokeStyle=t.toString(),a.arc(e.x,e.y,5,0,Math.PI*2),a.closePath(),a.stroke()}function Aa(a,t,e,i,n=1){const o=t?t.toString():"blue",h=i.scale(n);a.beginPath(),a.strokeStyle=o,a.moveTo(e.x,e.y),a.lineTo(e.x+h.x,e.y+h.y),a.closePath(),a.stroke()}function Ln(a,t,e,i,n,o=5,h=W.White,u=null){let p;if(typeof o=="number")p={tl:o,tr:o,br:o,bl:o};else{const f={tl:0,tr:0,br:0,bl:0};for(const _ in f)if(f.hasOwnProperty(_)){const I=_;p[I]=o[I]||f[I]}}a.beginPath(),a.moveTo(t+p.tl,e),a.lineTo(t+i-p.tr,e),a.quadraticCurveTo(t+i,e,t+i,e+p.tr),a.lineTo(t+i,e+n-p.br),a.quadraticCurveTo(t+i,e+n,t+i-p.br,e+n),a.lineTo(t+p.bl,e+n),a.quadraticCurveTo(t,e+n,t,e+n-p.bl),a.lineTo(t,e+p.tl),a.quadraticCurveTo(t,e,t+p.tl,e),a.closePath(),u&&(a.fillStyle=u.toString(),a.fill()),h&&(a.strokeStyle=h.toString(),a.stroke())}function gi(a,t,e,i,n=W.White,o=null){a.beginPath(),a.arc(t,e,i,0,Math.PI*2),a.closePath(),o&&(a.fillStyle=o.toString(),a.fill()),n&&(a.strokeStyle=n.toString(),a.stroke())}const bo="data:image/png;base64,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";var fa=Kt(1388);class Ht extends ue{constructor(t){var e,i,n,o,h,u,p,f,_,I;super(t),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=Bi(W.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,t&&(this.quality=(e=t.quality)!==null&&e!==void 0?e:this.quality,this.color=(i=t.color)!==null&&i!==void 0?i:W.Black,this.strokeColor=t==null?void 0:t.strokeColor,this.smoothing=(n=t.smoothing)!==null&&n!==void 0?n:this.smoothing,this.lineWidth=(o=t.lineWidth)!==null&&o!==void 0?o:this.lineWidth,this.lineDash=(h=t.lineDash)!==null&&h!==void 0?h:this.lineDash,this.lineCap=(u=t.lineCap)!==null&&u!==void 0?u:this.lineCap,this.padding=(p=t.padding)!==null&&p!==void 0?p:this.padding,this.filtering=(f=t.filtering)!==null&&f!==void 0?f:this.filtering),this._bitmap=document.createElement("canvas");const k=(_=t==null?void 0:t.width)!==null&&_!==void 0?_:this._bitmap.width,j=(I=t==null?void 0:t.height)!==null&&I!==void 0?I:this._bitmap.height;this.width=k,this.height=j;const V=this._bitmap.getContext("2d");if(V)this._ctx=V;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(t){t/=Math.abs(this.scale.x),this._bitmap.width=t,this._originalWidth=t,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(t){t/=Math.abs(this.scale.y),this._bitmap.height=t,this._originalHeight=t,this.flagDirty()}_getTotalWidth(){var t;return(((t=this._originalWidth)!==null&&t!==void 0?t:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var t;return(((t=this._originalHeight)!==null&&t!==void 0?t:this._bitmap.height)+this.padding*2)*1}get localBounds(){return ut.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,B.Zero)}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this.flagDirty()}get color(){return this._color}set color(t){this.flagDirty(),this._color=Bi(t,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.flagDirty(),this._strokeColor=Bi(t,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(t){this._lineDash=t,this.flagDirty()}get padding(){return this._padding}set padding(t){this._padding=t,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore(),Rt.load(this._bitmap,this.filtering,!0)}_applyRasterProperties(t){var e,i,n;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,t.scale(this.quality,this.quality),t.translate(this.padding,this.padding),t.imageSmoothingEnabled=this.smoothing,t.lineWidth=this.lineWidth,t.setLineDash((e=this.lineDash)!==null&&e!==void 0?e:t.getLineDash()),t.lineCap=this.lineCap,t.strokeStyle=(i=this.strokeColor)===null||i===void 0?void 0:i.toString(),t.fillStyle=(n=this.color)===null||n===void 0?void 0:n.toString()}_drawImage(t,e,i){this._dirty&&this.rasterize(),t.scale(1/this.quality,1/this.quality),t.drawImage(this._bitmap,e,i)}}class Gn extends Ht{constructor(t){super(t),this._options=t}get ctx(){return this._ctx}clone(){return new Gn({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){var e,i;!((e=this._options)===null||e===void 0)&&e.draw&&((i=this._options)===null||i===void 0||i.draw(t)),this._options.cache||this.flagDirty()}}class vs{}vs.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class Xs{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(t){this._currentState=t}static create(t,e){const i=new Xs;i.data=e;for(const n in t.states)i.states.set(n,{name:n,...t.states[n]});for(const n of i.states.values())for(const o of n.transitions)if(o!=="*"&&!i.states.has(o))throw Error(`Invalid state machine, state [${n.name}] has a transition to another state that doesn't exist [${o}]`);return i.currentState=i.startState=i.states.get(t.start),i}in(t){return this.currentState.name===t}go(t,e){var i,n;if(this.currentState.transitions.includes(t)||this.currentState.transitions.includes("*")){const o=this.states.get(t);return this.currentState.onExit&&((i=this.currentState)===null||i===void 0?void 0:i.onExit({to:o.name,data:this.data}))===!1||o!=null&&o.onEnter&&(o==null?void 0:o.onEnter({from:this.currentState.name,eventData:e,data:this.data}))===!1?!1:(this.currentState=o,!((n=this.currentState)===null||n===void 0)&&n.onState&&this.currentState.onState(),!0)}return!1}update(t){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,t)}save(t){localStorage.setItem(t,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(t){const e=JSON.parse(localStorage.getItem(t));this.currentState=this.states.get(e.currentState),this.data=e.data}}class zn{constructor(t){this._src=t,this._audioContext=Hi.create(),this._volumeNode=this._audioContext.createGain(),this._playingPromise=new Promise(e=>{this._playingResolve=e}),this._stateMachine=Xs.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:e})=>{this._createNewBufferSource(),this._handleEnd(),this._instance.start(0,e.pausedAt*this._playbackRate,this.duration),e.startedAt=this._audioContext.currentTime-e.pausedAt,e.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:e})=>{e==="STOPPED"&&this._playingResolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:e,data:i})=>{i.pausedAt=(e??0)/this._playbackRate,i.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:e})=>{e.pausedAt=0,e.startedAt=0,this._playingResolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:e})=>{e.pausedAt=this._audioContext.currentTime-e.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingResolve(!0)})}set loop(t){this._loop=t,this._instance&&(this._instance.loop=t,this.loop||(this._instance.onended=()=>{this._playingResolve(!0)}))}get loop(){return this._loop}set volume(t){t=P(t,0,1),this._volume=t,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(t,this._audioContext.currentTime,.1):this._volumeNode.gain.value=t}get volume(){return this._volume}get duration(){var t;return(t=this._duration)!==null&&t!==void 0?t:this.getTotalPlaybackDuration()}set duration(t){this._duration=t}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}play(t=()=>{}){return this._playStarted=t,this._stateMachine.go("PLAYING"),this._playingPromise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(t){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",t)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:t,startedAt:e}=this._stateMachine.data;return t?t*this._playbackRate:e?(this._audioContext.currentTime-e)*this._playbackRate:0}set playbackRate(t){this._instance.playbackRate.value=this._playbackRate=t}get playbackRate(){return this._instance.playbackRate.value}}class Nn extends Bt{constructor(t,e="MediaEvent"){super(),this.target=t,this._name=e}set bubbles(t){}get bubbles(){return!1}get _path(){return null}set _path(t){}stopPropagation(){}action(){}propagate(){}layPath(t){}}class Pi extends Nn{constructor(t,e){super(t,"NativeSoundEvent"),this.track=e}}class yo extends Nn{constructor(t,e){super(t,"NativeSoundProcessedEvent"),this._processedData=e,this.data=this._processedData}}function Js(a){try{const t=new Audio,e=/.*\.([A-Za-z0-9]+)$/,i=a.match(e)[1];return!!t.canPlayType("audio/"+i)}catch(t){return gt.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",t),!1}}class be extends Ge{constructor(...t){super(),this.logger=gt.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=Hi.create(),this._resource=new Ii("",vs.type.arraybuffer);for(const e of t)if(Js(e)){this.path=e;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",t.join(", ")),this.logger.warn("Attempting to use",t[0]),this.path=t[0])}set loop(t){this._loop=t;for(const e of this._tracks)e.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(t){this._volume=t;for(const e of this._tracks)e.volume=this._volume;this.emit("volumechange",new Pi(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(t){this._duration=t}get instances(){return this._tracks}get path(){return this._resource.path}set path(t){this._resource.path=t}isLoaded(){return!!this.data}async load(){var t,e;if(this.data)return this.data;const i=await this._resource.load(),n=await this.decodeAudio(i.slice(0));return this._duration=(e=(t=this._duration)!==null&&t!==void 0?t:n==null?void 0:n.duration)!==null&&e!==void 0?e:void 0,this.emit("processed",new yo(this,n)),this.data=n}async decodeAudio(t){try{return await this._audioContext.decodeAudioData(t.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(t){t&&(this._engine=t,this._engine.on("hidden",()=>{t.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{t.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(t=>t.isPlaying())}isPaused(){return this._tracks.some(t=>t.isPaused())}play(t){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=t||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const t of this._tracks)t.pause();this.emit("pause",new Pi(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const t of this._tracks)t.stop();this.emit("stop",new Pi(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._tracks.forEach(e=>{e.playbackRate=this._playbackRate})}seek(t,e=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[e].seek(t)}getTotalPlaybackDuration(){return this.data.duration}getPlaybackPosition(t=0){return this._tracks.length?this._tracks[t].getPlaybackPosition():0}getTrackId(t){return this._tracks.indexOf(t)}async _resumePlayback(){if(this.isPaused){const t=[];for(const e of this._tracks)t.push(e.play().then(()=>(this.emit("playbackend",new Pi(this,e)),this._tracks.splice(this.getTrackId(e),1),!0)));this.emit("resume",new Pi(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(t)}return!0}async _startPlayback(){const t=await this._getTrackInstance(this.data),e=await t.play(()=>{this.emit("playbackstart",new Pi(this,t)),this.logger.debug("Playing new instance for sound",this.path)});return this.emit("playbackend",new Pi(this,t)),this._tracks.splice(this.getTrackId(t),1),e}_getTrackInstance(t){const e=new zn(t);return e.loop=this.loop,e.volume=this.volume,e.duration=this.duration,e.playbackRate=this._playbackRate,this._tracks.push(e),e}}class _s extends Ge{constructor(t){super(),this.canvas=new Gn({filtering:ae.Blended,smoothing:!0,cache:!0,draw:this.draw.bind(this)}),this._resourceList=[],this._index=0,this._playButtonShown=!1,this._resourceCount=0,this._numLoaded=0,this._progressCounts={},this._totalCounts={},this.logo=bo,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=W.White,this.backgroundColor="#176BAA",this.suppressPlayButton=!1,this._playButtonStyles=fa.Z.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let e=document.getElementById("excalibur-play");return e||(e=document.createElement("button")),e.id="excalibur-play",e.textContent=this.playButtonText,e.style.display="none",e},this._loadingFuture=new $t,t&&this.addResources(t)}get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const t=document.getElementById("excalibur-play-root");return t&&(this._playButtonRootElement=t),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}wireEngine(t){this._engine=t,this.canvas.width=this._engine.canvas.width,this.canvas.height=this._engine.canvas.height}addResource(t){const e=this._index++;this._resourceList.push(t),this._progressCounts[e]=0,this._totalCounts[e]=1,this._resourceCount++}addResources(t){let e=0;const i=t.length;for(e;e<i;e++)this.addResource(t[e])}isLoaded(){return this._numLoaded===this._resourceCount}async showPlayButton(){var t,e;if(this.suppressPlayButton)this.hidePlayButton(),await It(500,(t=this._engine)===null||t===void 0?void 0:t.clock);else{const i=()=>{this._positionPlayButton()};return!((e=this._engine)===null||e===void 0)&&e.browser&&this._engine.browser.window.on("resize",i),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",o=>{o.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(o=>{const h=u=>{var p;u.stopPropagation(),this.hidePlayButton(),!((p=this._engine)===null||p===void 0)&&p.browser&&this._engine.browser.window.off("resize",i),o()};this._playButton.addEventListener("click",h),this._playButton.addEventListener("touchend",h),this._playButton.addEventListener("pointerup",h)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}update(t,e){}areResourcesLoaded(){return this._loadingFuture.promise}async load(){var t,e;await((t=this._image)===null||t===void 0?void 0:t.decode()),this.canvas.flagDirty(),await Promise.all(this._resourceList.map(async i=>{await i.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty()})}));for(const i of this._resourceList)i instanceof be&&i.wireEngine(this._engine);return this._loadingFuture.resolve(),await It(200,(e=this._engine)===null||e===void 0?void 0:e.clock),this.canvas.flagDirty(),await this.showPlayButton(),await Xi.unlock(),this.data=this._resourceList}markResourceComplete(){this._numLoaded++}get progress(){return this._resourceCount>0?P(this._numLoaded,0,this._resourceCount)/this._resourceCount:1}_positionPlayButton(){if(this._engine){const t=this._engine.screen.viewport.height,e=this._engine.screen.viewport.width;if(this._playButtonRootElement){const i=this._engine.canvas.offsetLeft,n=this._engine.canvas.offsetTop,o=this._playButton.clientWidth,h=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${i+e/2-o/2}px`,this._playButtonRootElement.style.top=`${n+t/2-h/2+100}px`)}}}draw(t){const e=this._engine.canvasHeight/this._engine.pixelRatio,i=this._engine.canvasWidth/this._engine.pixelRatio;this._positionPlayButton(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,i,e);let n=e/2;const o=Math.min(this.logoWidth,i*.75);let h=i/2-o/2;this.logoPosition&&(h=this.logoPosition.x,n=this.logoPosition.y);const u=Math.floor(o*(this.logoHeight/this.logoWidth)),p=this._engine.getAntialiasing();if(this._engine.setAntialiasing(!0),this.logoPosition?t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,h,n,o,u):t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,h,n-u-20,o,u),!this.suppressPlayButton&&this._playButtonShown){this._engine.setAntialiasing(p);return}let f=h,_=n;this.loadingBarPosition&&(f=this.loadingBarPosition.x,_=this.loadingBarPosition.y),t.lineWidth=2,Ln(t,f,_,o,20,10,this.loadingBarColor);const I=o*this.progress,k=5,j=I-k*2,V=20-k*2;Ln(t,f+k,_+k,j>10?j:10,V,5,null,this.loadingBarColor),this._engine.setAntialiasing(p)}}const ri={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class xr{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("2d"))},arrayBufferSupport:function(){const t=new XMLHttpRequest;t.open("GET","/");try{t.responseType="arraybuffer"}catch{return!1}return t.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const t=document.createElement("a").style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let t=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const e=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],i=this.getBrowserFeatures();for(const n of Object.keys(ri))i[n]?(t+="(%c✓%c)",e.push("font-weight: bold; color: green"),e.push("font-weight: normal; color: inherit")):(t+="(%c✗%c)",e.push("font-weight: bold; color: red"),e.push("font-weight: normal; color: inherit")),t+=" "+ri[n]+`
`;e.unshift(t),console.log.apply(console,e)}_loadBrowserFeatures(){return{canvas:(()=>this._criticalTests.canvasSupport())(),arraybuffer:(()=>this._criticalTests.arrayBufferSupport())(),dataurl:(()=>this._criticalTests.dataUrlSupport())(),objecturl:(()=>this._criticalTests.objectUrlSupport())(),rgba:(()=>this._criticalTests.rgbaSupport())(),webaudio:(()=>this._warningTest.webAudioSupport())(),webgl:(()=>this._warningTest.webglSupport())(),gamepadapi:(()=>!!navigator.getGamepads)()}}test(){let t=!1;for(const e in this._criticalTests)this._criticalTests[e].call(this)||(this.failedTests.push(e),gt.getInstance().error("Critical browser feature missing, Excalibur requires:",e),t=!0);if(t)return!1;for(const e in this._warningTest)this._warningTest[e]()||gt.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",e);return!0}}var _t;(function(a){a.PreventCollision="PreventCollision",a.Passive="Passive",a.Active="Active",a.Fixed="Fixed"})(_t||(_t={}));const Si=5,Dt={},xo=()=>{for(const a in Dt)Dt[a]=0},Xt=(a,t)=>{const e=b.isEnabled("suppress-obsolete-message");Dt[a]<Si&&!e&&(gt.getInstance().warn(a),console.trace&&t.showStackTrace&&console.trace()),Dt[a]++};function Cr(a){return a={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...a},function(t,e,i){if(i&&!(typeof i.value=="function"||typeof i.get=="function"||typeof i.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const o=`${`${t.name||""}${t.name&&e?".":""}${e||""}`} is marked obsolete: ${a.message}`+(a.alternateMethod?` Use ${a.alternateMethod} instead`:"");Dt[o]||(Dt[o]=0);const h=i?{...i}:t;if(!i){class u extends h{constructor(...f){Xt(o,a),super(...f)}}return u}return i&&i.value?(h.value=function(){return Xt(o,a),i.value.apply(this,arguments)},h):(i&&i.get&&(h.get=function(){return Xt(o,a),i.get.apply(this,arguments)}),i&&i.set&&(h.set=function(){return Xt(o,a),i.set.apply(this,arguments)}),h)}}var ze=function(a,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,t,e,i);else for(var u=a.length-1;u>=0;u--)(h=a[u])&&(o=(n<3?h(o):n>3?h(t,e,o):h(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ji;(function(a){a.Arcade="arcade",a.Realistic="realistic"})(Ji||(Ji={}));var Ti;(function(a){a[a.DynamicAABBTree=0]="DynamicAABBTree"})(Ti||(Ti={}));var ws;(function(a){a[a.Euler=0]="Euler"})(ws||(ws={}));class lt{static get gravity(){return lt.acc}static set gravity(t){lt.acc=t}static useArcadePhysics(){lt.collisionResolutionStrategy=Ji.Arcade}static useRealisticPhysics(){lt.collisionResolutionStrategy=Ji.Realistic}static get dynamicTreeVelocityMultiplyer(){return lt.dynamicTreeVelocityMultiplier}static set dynamicTreeVelocityMultiplyer(t){lt.dynamicTreeVelocityMultiplier=t}}lt.acc=new B(0,0),lt.enabled=!0,lt.broadphaseStrategy=Ti.DynamicAABBTree,lt.collisionResolutionStrategy=Ji.Arcade,lt.defaultMass=10,lt.integrator=ws.Euler,lt.dynamicTreeVelocityMultiplier=2,lt.boundsPadding=5,lt.positionIterations=3,lt.velocityIterations=8,lt.slop=1,lt.steeringFactor=.2,lt.warmStart=!0,lt.bodiesCanSleepByDefault=!1,lt.surfaceEpsilon=.1,lt.sleepEpsilon=.07,lt.wakeThreshold=lt.sleepEpsilon*3,lt.sleepBias=.9,lt.checkForFastBodies=!0,lt.disableMinimumSpeedForFastBody=!1,ze([Cr({message:"Alias for incorrect spelling used in older versions, will be removed in v0.25.0",alternateMethod:"dynamicTreeVelocityMultiplier"})],lt,"dynamicTreeVelocityMultiplyer",null);var Te;(function(a){a.World="world",a.Screen="screen"})(Te||(Te={}));class Ks extends B{constructor(t){super(0,0),this._getX=t.getX,this._getY=t.getY,this._setX=t.setX,this._setY=t.setY}get x(){return this._x=this._getX()}set x(t){this._setX(t),this._x=t}get y(){return this._y=this._getY()}set y(t){this._setY(t),this._y=t}}class Co extends B{constructor(t,e){super(t.x,t.y),this.original=t,this.change=e}get x(){return this._x=this.original.x}set x(t){this.change(t,this._y),this._x=this.original.x=t}get y(){return this._y=this.original.y}set y(t){this.change(this._x,t),this._y=this.original.y=t}}class Ki{constructor(){this._parent=null,this._children=[],this._pos=L(0,0),this._rotation=0,this._scale=L(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=yt.identity(),this._inverse=yt.identity()}get parent(){return this._parent}set parent(t){if(this._parent){const e=this._parent._children.indexOf(this);e>-1&&this._parent._children.splice(e,1)}this._parent=t,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(t){t.equals(this._pos)||(this._pos.x=t.x,this._pos.y=t.y,this.flagDirty())}get pos(){return new Co(this._pos,(t,e)=>{(t!==this._pos.x||e!==this._pos.y)&&this.flagDirty()})}set globalPos(t){let e=t.clone();this.parent&&(e=this.parent.inverse.multiply(t)),e.equals(this._pos)||(this._pos=e,this.flagDirty())}get globalPos(){return new Ks({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:t=>{if(this.parent){const{x:e}=this.parent.inverse.multiply(L(t,this.pos.y));this.pos.x=e}else this.pos.x=t;t!==this.matrix.data[4]&&this.flagDirty()},setY:t=>{if(this.parent){const{y:e}=this.parent.inverse.multiply(L(this.pos.x,t));this.pos.y=e}else this.pos.y=t;t!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(t){const e=Y(t);e!==this._rotation&&this.flagDirty(),this._rotation=e}get rotation(){return this._rotation}set globalRotation(t){let e=0;this.parent&&(e=this.parent.globalRotation);const i=Y(t+e);i!==this._rotation&&this.flagDirty(),this._rotation=i}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(t){t.equals(this._scale)||(this._scale.x=t.x,this._scale.y=t.y,this.flagDirty())}get scale(){return new Co(this._scale,(t,e)=>{(t!==this._scale.x||e!==this._scale.y)&&this.flagDirty()})}set globalScale(t){let e=L(1,1);this.parent&&(e=this.parent.globalScale),this.scale=t.scale(L(1/e.x,1/e.y))}get globalScale(){return new Ks({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:t=>{if(this.parent){const e=this.parent.globalScale.x;this.scale.x=t/e}else this.scale.x=t},setY:t=>{if(this.parent){const e=this.parent.globalScale.y;this.scale.y=t/e}else this.scale.y=t}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return yt.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let t=0;t<this._children.length;t++)this._children[t].flagDirty()}apply(t){return this.matrix.multiply(t)}applyInverse(t){return this.inverse.multiply(t)}setTransform(t,e,i){this._pos.x=t.x,this._pos.y=t.y,this._rotation=Y(e),this._scale.x=i.x,this._scale.y=i.y,this.flagDirty()}clone(t){const e=t??new Ki;this._pos.clone(e._pos),e._rotation=this._rotation,this._scale.clone(e._scale),e.flagDirty()}}function qs(a){return!!(a!=null&&a.clone)}class pe{constructor(){this.owner=null}clone(){const t=new this.constructor;for(const e in this)if(this.hasOwnProperty(e)){const i=this[e];qs(i)&&e!=="owner"&&e!=="clone"?t[e]=i.clone():t[e]=i}return t}}class jn extends pe{constructor(t,e){super(),this.type=t,this.value=e}}class le{constructor(){this.observers=[],this.subscriptions=[]}register(t){this.observers.push(t)}subscribe(t){this.subscriptions.push(t)}unregister(t){const e=this.observers.indexOf(t);e!==-1&&this.observers.splice(e,1)}unsubscribe(t){const e=this.subscriptions.indexOf(t);e!==-1&&this.subscriptions.splice(e,1)}notifyAll(t){const e=this.observers.length;for(let n=0;n<e;n++)this.observers[n].notify(t);const i=this.subscriptions.length;for(let n=0;n<i;n++)this.subscriptions[n](t)}clear(){this.observers.length=0,this.subscriptions.length=0}}class st extends pe{constructor(){super(...arguments),this.type="ex.transform",this._transform=new Ki,this._addChildTransform=t=>{const e=t.get(st);e&&(e._transform.parent=this._transform)},this.zIndexChanged$=new le,this._z=0,this.coordPlane=Te.World}get(){return this._transform}onAdd(t){for(const e of t.children)this._addChildTransform(e);t.childrenAdded$.subscribe(e=>this._addChildTransform(e)),t.childrenRemoved$.subscribe(e=>{const i=e.get(st);i&&(i._transform.parent=null)})}onRemove(t){this._transform.parent=null}get z(){return this._z}set z(t){const e=this._z;this._z=t,e!==t&&this.zIndexChanged$.notifyAll(t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get globalPos(){return this._transform.globalPos}set globalPos(t){this._transform.globalPos=t}get rotation(){return this._transform.rotation}set rotation(t){this._transform.rotation=t}get globalRotation(){return this._transform.globalRotation}set globalRotation(t){this._transform.globalRotation=t}get scale(){return this._transform.scale}set scale(t){this._transform.scale=t}get globalScale(){return this._transform.globalScale}set globalScale(t){this._transform.globalScale=t}applyInverse(t){return this._transform.applyInverse(t)}apply(t){return this._transform.apply(t)}}class Nt extends pe{constructor(){super(...arguments),this.type="ex.motion",this.vel=B.Zero,this.acc=B.Zero,this.scaleFactor=B.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class Ze{constructor(t,e,i){this._name=t,this._category=e,this._mask=i}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(t){return(this.category&t.mask)!==0&&(t.category&this.mask)!==0}invert(){return new Ze("~("+this.name+")",~this.category,~this.mask)}static combine(t){const e=t.map(o=>o.name).join("+"),i=t.reduce((o,h)=>h.category|o,0),n=~i;return new Ze(e,i,n)}static collidesWith(t){return Ze.combine(t).invert()}}Ze.All=new Ze("Collide with all groups",-1,-1);class ge{constructor(t,e){this.colliderA=t,this.colliderB=e,this.id=null,this.id=ge.calculatePairHash(t.id,e.id)}static canCollide(t,e){var i,n;const o=(i=t==null?void 0:t.owner)===null||i===void 0?void 0:i.get(Mt),h=(n=e==null?void 0:e.owner)===null||n===void 0?void 0:n.get(Mt);return!(t.id===e.id||t.owner&&e.owner&&t.owner.id===e.owner.id||t.localBounds.hasZeroDimensions()||e.localBounds.hasZeroDimensions()||!o||!h||!o.group.canCollide(h.group)||o.collisionType===_t.Fixed&&h.collisionType===_t.Fixed||h.collisionType===_t.PreventCollision||o.collisionType===_t.PreventCollision||!o.active||!h.active)}get canCollide(){const t=this.colliderA,e=this.colliderB;return ge.canCollide(t,e)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(t){return t===this.colliderA||t===this.colliderB}static calculatePairHash(t,e){return t.value<e.value?`#${t.value}+${e.value}`:`#${e.value}+${t.value}`}}class oi{constructor(t,e){this.min=t,this.max=e}overlaps(t){return this.max>t.min&&t.max>this.min}getOverlap(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0}}class Ri{constructor(t){this.parent=t,this.parent=t||null,this.data=null,this.bounds=new ut,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class bs{constructor(t=new ut(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this.worldBounds=t,this.root=null,this.nodes={}}_insert(t){if(this.root===null){this.root=t,this.root.parent=null;return}const e=t.bounds;let i=this.root;for(;!i.isLeaf();){const u=i.left,p=i.right,f=i.bounds.getPerimeter(),I=i.bounds.combine(e).getPerimeter(),k=2*I,j=2*(I-f);let V=0;const $=e.combine(u.bounds);let tt,U;u.isLeaf()?V=$.getPerimeter()+j:(U=u.bounds.getPerimeter(),tt=$.getPerimeter(),V=tt-U+j);let F=0;const at=e.combine(p.bounds);if(p.isLeaf()?F=at.getPerimeter()+j:(U=p.bounds.getPerimeter(),tt=at.getPerimeter(),F=tt-U+j),k<V&&k<F)break;V<F?i=u:i=p}const n=i.parent,o=new Ri(n);o.bounds=e.combine(i.bounds),o.height=i.height+1,n!==null?(n.left===i?n.left=o:n.right=o,o.left=i,o.right=t,i.parent=o,t.parent=o):(o.left=i,o.right=t,i.parent=o,t.parent=o,this.root=o);let h=t.parent;for(;h;){if(h=this._balance(h),!h.left)throw new Error("Parent of current leaf cannot have a null left child"+h);if(!h.right)throw new Error("Parent of current leaf cannot have a null right child"+h);h.height=1+Math.max(h.left.height,h.right.height),h.bounds=h.left.bounds.combine(h.right.bounds),h=h.parent}}_remove(t){if(t===this.root){this.root=null;return}const e=t.parent,i=e.parent;let n;if(e.left===t?n=e.right:n=e.left,i){i.left===e?i.left=n:i.right=n,n.parent=i;let o=i;for(;o;)o=this._balance(o),o.bounds=o.left.bounds.combine(o.right.bounds),o.height=1+Math.max(o.left.height,o.right.height),o=o.parent}else this.root=n,n.parent=null}trackCollider(t){const e=new Ri;e.data=t,e.bounds=t.bounds,e.bounds.left-=2,e.bounds.top-=2,e.bounds.right+=2,e.bounds.bottom+=2,this.nodes[t.id.value]=e,this._insert(e)}updateCollider(t){var e;const i=this.nodes[t.id.value];if(!i)return!1;const n=t.bounds;if(!this.worldBounds.contains(n))return gt.getInstance().warn("Collider with id "+t.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(t),!1;if(i.bounds.contains(n))return!1;if(this._remove(i),n.left-=lt.boundsPadding,n.top-=lt.boundsPadding,n.right+=lt.boundsPadding,n.bottom+=lt.boundsPadding,t.owner){const o=(e=t.owner)===null||e===void 0?void 0:e.get(Mt);if(o){const h=o.vel.x*32/1e3*lt.dynamicTreeVelocityMultiplier,u=o.vel.y*32/1e3*lt.dynamicTreeVelocityMultiplier;h<0?n.left+=h:n.right+=h,u<0?n.top+=u:n.bottom+=u}}return i.bounds=n,this._insert(i),!0}untrackCollider(t){const e=this.nodes[t.id.value];e&&(this._remove(e),this.nodes[t.id.value]=null,delete this.nodes[t.id.value])}_balance(t){if(t===null)throw new Error("Cannot balance at null node");if(t.isLeaf()||t.height<2)return t;const e=t.left,i=t.right,n=t,o=e,h=i,u=e.left,p=e.right,f=i.left,_=i.right,I=h.height-o.height;if(I>1)return h.left=n,h.parent=n.parent,n.parent=h,h.parent?h.parent.left===n?h.parent.left=h:h.parent.right=h:this.root=h,f.height>_.height?(h.right=f,n.right=_,_.parent=n,n.bounds=o.bounds.combine(_.bounds),h.bounds=n.bounds.combine(f.bounds),n.height=1+Math.max(o.height,_.height),h.height=1+Math.max(n.height,f.height)):(h.right=_,n.right=f,f.parent=n,n.bounds=o.bounds.combine(f.bounds),h.bounds=n.bounds.combine(_.bounds),n.height=1+Math.max(o.height,f.height),h.height=1+Math.max(n.height,_.height)),h;if(I<-1){if(o.left=n,o.parent=n.parent,n.parent=o,o.parent)if(o.parent.left===n)o.parent.left=o;else{if(o.parent.right!==n)throw"Error rotating Dynamic Tree";o.parent.right=o}else this.root=o;return u.height>p.height?(o.right=u,n.left=p,p.parent=n,n.bounds=h.bounds.combine(p.bounds),o.bounds=n.bounds.combine(u.bounds),n.height=1+Math.max(h.height,p.height),o.height=1+Math.max(n.height,u.height)):(o.right=p,n.left=u,u.parent=n,n.bounds=h.bounds.combine(u.bounds),o.bounds=n.bounds.combine(p.bounds),n.height=1+Math.max(h.height,u.height),o.height=1+Math.max(n.height,p.height)),o}return t}getHeight(){return this.root===null?0:this.root.height}query(t,e){const i=t.bounds,n=o=>{if(o&&o.bounds.overlaps(i))if(o.isLeaf()&&o.data!==t){if(e.call(t,o.data))return!0}else return n(o.left)||n(o.right);return!1};n(this.root)}rayCastQuery(t,e=1/0,i){const n=o=>{if(o&&o.bounds.rayCast(t,e))if(o.isLeaf()){if(i.call(t,o.data))return!0}else return n(o.left)||n(o.right);return!1};n(this.root)}getNodes(){const t=e=>e?[e].concat(t(e.left),t(e.right)):[];return t(this.root)}debug(t){const e=i=>{i&&(i.isLeaf()?i.bounds.draw(t,W.Green):i.bounds.draw(t,W.White),i.left&&e(i.left),i.right&&e(i.right))};e(this.root)}}class mi{constructor(t,e){this.pos=t,this.dir=e.normalize()}intersect(t){const e=t.begin.sub(this.pos);if(this.dir.cross(t.getSlope())===0&&e.cross(this.dir)!==0)return-1;const i=this.dir.cross(t.getSlope());if(i===0)return-1;const n=e.cross(t.getSlope())/i;if(n>=0){const o=e.cross(this.dir)/i/t.getLength();if(o>=0&&o<=1)return n}return-1}intersectPoint(t){const e=this.intersect(t);return e<0?null:this.getPoint(e)}getPoint(t){return this.pos.add(this.dir.scale(t))}}class Er{constructor(){this._dynamicCollisionTree=new bs,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[]}getColliders(){return this._colliders}track(t){if(!t){gt.getInstance().warn("Cannot track null collider");return}if(t instanceof Jt){const e=t.getColliders();for(const i of e)i.owner=t.owner,this._colliders.push(i),this._dynamicCollisionTree.trackCollider(i)}else this._colliders.push(t),this._dynamicCollisionTree.trackCollider(t)}untrack(t){if(!t){gt.getInstance().warn("Cannot untrack a null collider");return}if(t instanceof Jt){const e=t.getColliders();for(const i of e){const n=this._colliders.indexOf(i);n!==-1&&this._colliders.splice(n,1),this._dynamicCollisionTree.untrackCollider(i)}}else{const e=this._colliders.indexOf(t);e!==-1&&this._colliders.splice(e,1),this._dynamicCollisionTree.untrackCollider(t)}}_pairExists(t,e){const i=ge.calculatePairHash(t.id,e.id);return this._pairs.has(i)}broadphase(t,e,i){const n=e/1e3,o=t.filter(u=>{var p,f;const _=(p=u.owner)===null||p===void 0?void 0:p.get(Mt);return((f=u.owner)===null||f===void 0?void 0:f.active)&&_.collisionType!==_t.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let h;for(let u=0,p=o.length;u<p;u++)h=o[u],this._dynamicCollisionTree.query(h,f=>{if(!this._pairExists(h,f)&&ge.canCollide(h,f)){const _=new ge(h,f);this._pairs.add(_.id),this._collisionPairCache.push(_)}return!1});if(i&&(i.physics.pairs=this._collisionPairCache.length),lt.checkForFastBodies)for(const u of o){const p=u.owner.get(Mt);if(p.collisionType!==_t.Active)continue;const f=p.vel.size*n+p.acc.size*.5*n*n,_=Math.min(u.bounds.height,u.bounds.width);if(lt.disableMinimumSpeedForFastBody||f>_/2){i&&i.physics.fastBodies++;const I=p.globalPos.sub(p.oldPos),k=u.center,j=u.getFurthestPoint(p.vel),V=j.sub(I),$=new mi(V,p.vel);$.pos=$.pos.add($.dir.scale(-2*lt.surfaceEpsilon));let tt,U=new B(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery($,f+lt.surfaceEpsilon*2,F=>{if(!this._pairExists(u,F)&&ge.canCollide(u,F)){const at=F.rayCast($,f+lt.surfaceEpsilon*10);if(at){const rt=at.sub(V);rt.size<U.size&&(U=rt,tt=F)}}return!1}),tt&&B.isValid(U)){const F=new ge(u,tt);this._pairs.has(F.id)||(this._pairs.add(F.id),this._collisionPairCache.push(F));const at=k.sub(j);p.globalPos=V.add(at).add(U).add($.dir.scale(10*lt.surfaceEpsilon)),u.update(p.transform.get()),i&&i.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(t,e){let i=[];for(let n=0;n<t.length;n++){const o=t[n].collide();if(i=i.concat(o),e&&o.length>0)for(const h of o)e.physics.contacts.set(h.id,h)}return e&&(e.physics.collisions+=i.length),i}update(t){let e=0;const i=t.length;for(let n=0;n<i;n++)this._dynamicCollisionTree.updateCollider(t[n])&&e++;return e}debug(t){this._dynamicCollisionTree.debug(t)}}class ki{constructor(){this.id=R("collider",ki._ID++),this.__compositeColliderId=null,this.events=new Ei}touching(t){return!!this.collide(t)}}ki._ID=0;class Jt extends ki{constructor(t){super(),this._collisionProcessor=new Er,this._dynamicAABBTree=new bs,this._colliders=[];for(const e of t)this.addCollider(e)}clearColliders(){this._colliders=[]}addCollider(t){this.events.wire(t.events),t.__compositeColliderId=this.id,this._colliders.push(t),this._collisionProcessor.track(t),this._dynamicAABBTree.trackCollider(t)}removeCollider(t){this.events.unwire(t.events),t.__compositeColliderId=null,ci(t,this._colliders),this._collisionProcessor.untrack(t),this._dynamicAABBTree.untrackCollider(t)}getColliders(){return this._colliders}get worldPos(){var t,e;return(e=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&e!==void 0?e:B.Zero}get center(){var t,e;return(e=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&e!==void 0?e:B.Zero}get bounds(){var t,e;const i=this.getColliders();return i.reduce((o,h)=>o.combine(h.bounds),(e=(t=i[0])===null||t===void 0?void 0:t.bounds)!==null&&e!==void 0?e:new ut().translate(this.worldPos))}get localBounds(){var t,e;const i=this.getColliders();return i.reduce((o,h)=>o.combine(h.localBounds),(e=(t=i[0])===null||t===void 0?void 0:t.localBounds)!==null&&e!==void 0?e:new ut)}get axes(){const t=this.getColliders();let e=[];for(const i of t)e=e.concat(i.axes);return e}getFurthestPoint(t){const e=this.getColliders(),i=[];for(const h of e)i.push(h.getFurthestPoint(t));let n=i[0],o=-Number.MAX_VALUE;for(const h of i){const u=h.dot(t);u>o&&(n=h,o=u)}return n}getInertia(t){const e=this.getColliders();let i=0;for(const n of e)i+=n.getInertia(t);return i}collide(t){let e=[t];t instanceof Jt&&(e=t.getColliders());const i=[];for(const o of e)this._dynamicAABBTree.query(o,h=>(i.push(new ge(o,h)),!1));let n=[];for(const o of i)n=n.concat(o.collide());return n}getClosestLineBetween(t){const e=this.getColliders(),i=[];if(t instanceof Jt){const n=t.getColliders();for(const o of e)for(const h of n){const u=o.getClosestLineBetween(h);u&&i.push(u)}}else for(const n of e){const o=t.getClosestLineBetween(n);o&&i.push(o)}if(i.length){let n=i[0].getLength(),o=i[0];for(const h of i){const u=h.getLength();u<n&&(n=u,o=h)}return o}return null}contains(t){const e=this.getColliders();for(const i of e)if(i.contains(t))return!0;return!1}rayCast(t,e){const i=this.getColliders(),n=[];for(const o of i){const h=o.rayCast(t,e);h&&n.push(h)}if(n.length){let o=n[0],h=o.dot(t.dir);for(const u of n){const p=t.dir.dot(u);p<h&&(o=u,h=p)}return o}return null}project(t){const e=this.getColliders(),i=[];for(const n of e){const o=n.project(t);o&&i.push(o)}if(i.length){const n=new oi(i[0].min,i[0].max);for(const o of i)n.min=Math.min(o.min,n.min),n.max=Math.max(o.max,n.max);return n}return null}update(t){if(t){const e=this.getColliders();for(const i of e)i.owner=this.owner,i.update(t)}}debug(t,e){const i=this.getColliders();for(const n of i)n.debug(t,e)}clone(){return new Jt(this._colliders.map(t=>t.clone()))}}class ye{constructor(t,e){this.begin=t,this.end=e}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const t=this.begin,e=this.end,i=t.distance(e);return this._slope=e.sub(t).scale(1/i)}getEdge(){const t=this.begin;return this.end.sub(t)}getLength(){if(this._length)return this._length;const t=this.begin,e=this.end,i=t.distance(e);return this._length=i}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new ye(this.end,this.begin)}below(t){return(this.end.x-this.begin.x)*(t.y-this.begin.y)-(this.end.y-this.begin.y)*(t.x-this.begin.x)>=0}clip(t,e){let i=t;i=i.normalize();const n=i.dot(this.begin)-e,o=i.dot(this.end)-e,h=[];if(n<=0&&h.push(this.begin),o<=0&&h.push(this.end),n*o<0){const u=n/(n-o);h.push(this.begin.add(this.end.sub(this.begin).scale(u)))}return h.length!==2?null:new ye(h[0],h[1])}distanceToPoint(t,e=!1){const i=t.x,n=t.y,o=this.getLength(),h=this.end.y-this.begin.y,u=this.end.x-this.begin.x,p=(h*i-u*n+this.end.x*this.begin.y-this.end.y*this.begin.x)/o;return e?p:Math.abs(p)}findVectorToPoint(t){const e=this.begin.sub(t),i=this.getSlope();return e.sub(i.scale(e.dot(i)))}findPoint(t=null,e=null){const i=this.slope,n=this.intercept;if(t!==null)return new B(t,i*t+n);if(e!==null)return new B((e-n)/i,e);throw new Error("You must provide an X or a Y value")}hasPoint(){let t,e=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t=new B(arguments[0],arguments[1]),e=arguments[2]||0;else if(arguments[0]instanceof B)t=arguments[0],e=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const i=t.x-this.begin.x,n=t.y-this.begin.y,o=this.end.x-this.begin.x,h=this.end.y-this.begin.y,u=i*h-n*o;return Math.abs(u)>e?!1:Math.abs(o)>=Math.abs(h)?o>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:h>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y}}function $s(a,t,e,i){const n=a.sub(e),o=t.dot(t),h=t.dot(i),u=i.dot(i),p=t.dot(n),f=i.dot(n),_=o*u-h*h;let I=_,k=_;if(_===0||_<=.01){const $=p/h;return new ye(a,e.add(i.scale($)))}let j=h*f-u*p,V=o*f-h*p;return j<0?(j=0,V=f,k=u):j>I&&(j=I,V=f+h,k=u),V<0?(V=0,-p<0?j=0:-p>o?j=I:(j=-p,I=o)):V>k&&(V=k,-p+h<0?j=0:-p+h>o?j=I:(j=-p+h,I=o)),j=Math.abs(j)<.001?0:j/I,V=Math.abs(V)<.001?0:V/k,new ye(a.add(t.scale(j)),e.add(i.scale(V)))}const me={PolygonPolygonClosestLine(a,t){const e=t.worldPos,i=e.sub(a.worldPos),n=i.negate(),o=new mi(a.worldPos,i),h=new mi(e,n),u=a.rayCast(o).add(o.dir.scale(.1)),p=t.rayCast(h).add(h.dir.scale(.1)),f=a.getClosestFace(u),_=t.getClosestFace(p),I=f.face.begin,k=f.face.getEdge(),j=_.face.begin,V=_.face.getEdge();return $s(I,k,j,V)},PolygonEdgeClosestLine(a,t){const i=t.worldPos.sub(a.worldPos),n=new mi(a.worldPos,i),o=a.rayCast(n).add(n.dir.scale(.1)),h=a.getClosestFace(o),u=h.face.begin,p=h.face.getEdge(),f=t.asLine(),_=f.begin,I=f.getEdge();return $s(u,p,_,I)},PolygonCircleClosestLine(a,t){const e=t.worldPos,i=e.sub(a.worldPos),n=new mi(a.worldPos,i.normalize()),o=a.rayCast(n).add(n.dir.scale(.1)),h=a.getClosestFace(o),u=h.face.begin,p=h.face.getEdge();let f=(p.x*(e.x-u.x)+p.y*(e.y-u.y))/(p.x*p.x+p.y*p.y);f>1?f=1:f<0&&(f=0);const _=Math.sqrt(Math.pow(u.x+p.x*f-e.x,2)+Math.pow(u.y+p.y*f-e.y,2))-t.radius,I=(u.x+p.x*f-e.x)*t.radius/(t.radius+_),k=(u.y+p.y*f-e.y)*t.radius/(t.radius+_);return new ye(p.scale(f).add(u),new B(e.x+I,e.y+k))},CircleCircleClosestLine(a,t){const i=t.worldPos.sub(a.worldPos),o=a.worldPos.sub(t.worldPos),h=new mi(a.worldPos,i),u=new mi(t.worldPos,o),p=a.rayCast(h),f=t.rayCast(u);return new ye(p,f)},CircleEdgeClosestLine(a,t){const e=a.worldPos,i=t.asLine(),n=i.begin,o=i.getEdge(),h=n,u=o;let p=(u.x*(e.x-h.x)+u.y*(e.y-h.y))/(u.x*u.x+u.y*u.y);p>1?p=1:p<0&&(p=0);const f=Math.sqrt(Math.pow(h.x+u.x*p-e.x,2)+Math.pow(h.y+u.y*p-e.y,2))-a.radius,_=(h.x+u.x*p-e.x)*a.radius/(a.radius+f),I=(h.y+u.y*p-e.y)*a.radius/(a.radius+f);return new ye(u.scale(p).add(h),new B(e.x+_,e.y+I))},EdgeEdgeClosestLine(a,t){const e=a.asLine(),i=e.begin,n=e.getEdge(),o=i,h=n,u=t.asLine(),p=u.begin,f=u.getEdge();return $s(o,h,p,f)}};class ie extends ki{constructor(t){super(),this.offset=B.Zero,this._globalMatrix=yt.identity(),this.offset=t.offset||B.Zero,this.radius=t.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}get worldPos(){return this._globalMatrix.getPosition()}get radius(){var t;const e=this._transform,i=(t=e==null?void 0:e.globalScale)!==null&&t!==void 0?t:B.One;return this._naturalRadius*Math.min(i.x,i.y)}set radius(t){var e;const i=this._transform,n=(e=i==null?void 0:i.globalScale)!==null&&e!==void 0?e:B.One;this._naturalRadius=t/Math.min(n.x,n.y)}clone(){return new ie({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(t){var e,i;return((i=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&i!==void 0?i:this.offset).distance(t)<=this.radius}rayCast(t,e=1/0){const i=this.center,n=t.dir,o=t.pos,h=Math.sqrt(Math.pow(n.dot(o.sub(i)),2)-Math.pow(o.sub(i).distance(),2)+Math.pow(this.radius,2));if(h<0)return null;{let u=0;if(h===0)return u=-n.dot(o.sub(i)),u>0&&u<e?t.getPoint(u):null;{const p=-n.dot(o.sub(i))+h,f=-n.dot(o.sub(i))-h,_=[];p>=0&&_.push(p),f>=0&&_.push(f);const I=Math.min(..._);return I<=e?t.getPoint(I):null}}}getClosestLineBetween(t){if(t instanceof ie)return me.CircleCircleClosestLine(this,t);if(t instanceof mt)return me.PolygonCircleClosestLine(t,this).flip();if(t instanceof he)return me.CircleEdgeClosestLine(this,t).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ie)return Ne.CollideCircleCircle(this,t);if(t instanceof mt)return Ne.CollideCirclePolygon(this,t);if(t instanceof he)return Ne.CollideCircleEdge(this,t);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){return this.center.add(t.normalize().scale(this.radius))}getFurthestLocalPoint(t){return t.normalize().scale(this.radius)}get bounds(){var t,e,i;const n=this._transform,o=(t=n==null?void 0:n.globalScale)!==null&&t!==void 0?t:B.One,h=(e=n==null?void 0:n.globalRotation)!==null&&e!==void 0?e:0,u=(i=n==null?void 0:n.globalPos)!==null&&i!==void 0?i:B.Zero;return new ut(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(h).scale(o).translate(u)}get localBounds(){return new ut(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(t){return t*this.radius*this.radius/2}update(t){var e;this._transform=t,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const e=[],n=this.center.dot(t);return e.push(n),e.push(n+this.radius),e.push(n-this.radius),new oi(Math.min.apply(Math,e),Math.max.apply(Math,e))}debug(t,e){var i,n,o,h;const u=this._transform,p=(i=u==null?void 0:u.globalScale)!==null&&i!==void 0?i:B.One,f=(n=u==null?void 0:u.globalRotation)!==null&&n!==void 0?n:0,_=(o=u==null?void 0:u.globalPos)!==null&&o!==void 0?o:B.Zero;t.save(),t.translate(_.x,_.y),t.rotate(f),t.scale(p.x,p.y),t.drawCircle((h=this.offset)!==null&&h!==void 0?h:B.Zero,this._naturalRadius,W.Transparent,e,2),t.restore()}}class qi{constructor(t,e,i,n,o,h,u,p){var f,_;this._canceled=!1,this.colliderA=t,this.colliderB=e,this.mtv=i,this.normal=n,this.tangent=o,this.points=h,this.localPoints=u,this.info=p,this.id=ge.calculatePairHash(t.id,e.id),(t.__compositeColliderId||e.__compositeColliderId)&&(this.id+="|"+ge.calculatePairHash((f=t.__compositeColliderId)!==null&&f!==void 0?f:t.id,(_=e.__compositeColliderId)!==null&&_!==void 0?_:e.id))}matchAwake(){const t=this.colliderA.owner.get(Mt),e=this.colliderB.owner.get(Mt);t&&e&&t.sleeping!==e.sleeping&&(t.sleeping&&t.collisionType!==_t.Fixed&&e.sleepMotion>=lt.wakeThreshold&&t.setSleeping(!1),e.sleeping&&e.collisionType!==_t.Fixed&&t.sleepMotion>=lt.wakeThreshold&&e.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class ys{static findPolygonPolygonSeparation(t,e){let i=-Number.MAX_VALUE,n=null,o=null,h=-1,u=null;const p=t.getSides(),f=t.getLocalSides();for(let _=0;_<p.length;_++){const I=p[_],k=I.normal(),j=e.getFurthestPoint(k.negate()),V=I.distanceToPoint(j,!0);V>i&&(i=V,n=I,o=k,h=_,u=j)}return{collider:t,separation:o?i:99,axis:o,side:n,localSide:f[h],sideId:h,point:u,localPoint:o?e.getFurthestLocalPoint(o.negate()):null}}static findCirclePolygonSeparation(t,e){const i=e.axes,o=e.center.sub(t.worldPos),h=e.getFurthestPoint(o.negate());i.push(h.sub(t.worldPos).normalize());let u=Number.MAX_VALUE,p=null,f=-1;for(let _=0;_<i.length;_++){const I=e.project(i[_]),k=t.project(i[_]),j=I.getOverlap(k);if(j<=0)return null;j<u&&(u=j,p=i[_],f=_)}return f<0?null:p.normalize().scale(u)}}const Ne={CollideCircleCircle(a,t){const e=a.worldPos,i=t.worldPos,n=a.radius+t.radius,o=e.distance(i);if(o>n)return[];const h=n-o,u=i.sub(e).normalize(),p=u.perpendicular(),f=u.scale(h),_=a.getFurthestPoint(u),I=a.getFurthestLocalPoint(u),k={collider:a,separation:h,axis:u,point:_};return[new qi(a,t,f,u,p,[_],[I],k)]},CollideCirclePolygon(a,t){var e,i;let n=ys.findCirclePolygonSeparation(a,t);if(!n)return[];n=n.dot(t.center.sub(a.center))<0?n.negate():n;const h=a.getFurthestPoint(n),p=((i=(e=a.owner)===null||e===void 0?void 0:e.get(st))!==null&&i!==void 0?i:new st).applyInverse(h),f=n.normalize(),_={collider:a,separation:-n.size,axis:f,point:h,localPoint:p,side:t.findSide(f.negate()),localSide:t.findLocalSide(f.negate())};return[new qi(a,t,n,f,f.perpendicular(),[h],[p],_)]},CollideCircleEdge(a,t){const e=a.center,i=t.asLine(),n=i.end.sub(i.begin),o=n.dot(i.end.sub(e)),h=n.dot(e.sub(i.begin)),u=t.asLine(),p=t.asLocalLine();if(h<=0){const U=i.begin.sub(e),F=U.dot(U);if(F>a.radius*a.radius)return[];const at=U.normalize(),rt=a.radius-Math.sqrt(F),xt={collider:a,separation:rt,axis:at,point:u.begin,side:u,localSide:p};return[new qi(a,t,at.scale(rt),at,at.perpendicular(),[u.begin],[p.begin],xt)]}if(o<=0){const U=i.end.sub(e),F=U.dot(U);if(F>a.radius*a.radius)return[];const at=U.normalize(),rt=a.radius-Math.sqrt(F),xt={collider:a,separation:rt,axis:at,point:u.end,side:u,localSide:p};return[new qi(a,t,at.scale(rt),at,at.perpendicular(),[u.end],[p.end],xt)]}const f=n.dot(n),_=i.begin.scale(o).add(i.end.scale(h)).scale(1/f),I=e.sub(_),k=I.dot(I);if(k>a.radius*a.radius)return[];let j=n.perpendicular();j.dot(e.sub(i.begin))<0&&(j.x=-j.x,j.y=-j.y),j=j.normalize();const V=a.radius-Math.sqrt(k),$=j.scale(V),tt={collider:a,separation:V,axis:j,point:_,side:u,localSide:p};return[new qi(a,t,$,j.negate(),j.negate().perpendicular(),[_],[_.sub(t.worldPos)],tt)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(a,t){var e;const i=a.center,o=t.center.sub(i).normalize(),h=new mt({points:[t.begin,t.end,t.end.add(o.scale(100)),t.begin.add(o.scale(100))],offset:t.offset});h.owner=t.owner,((e=t.owner)===null||e===void 0?void 0:e.get(st))&&h.update(t.owner.get(st).get());const p=this.CollidePolygonPolygon(a,h);return p.length&&(p[0].colliderB=t,p[0].id=ge.calculatePairHash(a.id,t.id)),p},CollidePolygonPolygon(a,t){var e,i,n,o;const h=ys.findPolygonPolygonSeparation(a,t);if(h.separation>0)return[];const u=ys.findPolygonPolygonSeparation(t,a);if(u.separation>0)return[];const p=h.separation>u.separation?h:u,_=(p.collider===a?t:a).findSide(p.axis.negate()),I=p.side,k=I.dir().normalize(),j=_.clip(k.negate(),-k.dot(I.begin));let V=null;if(j&&(V=j.clip(k,k.dot(I.end))),V){const $=V.getPoints().filter(at=>I.below(at));let tt=p.axis,U=tt.perpendicular();t.center.sub(a.center).dot(tt)<0&&(tt=tt.negate(),U=tt.perpendicular());let F=[];if(p.collider===a){const at=(i=(e=t.owner)===null||e===void 0?void 0:e.get(st))!==null&&i!==void 0?i:new st;F=$.map(rt=>at.applyInverse(rt))}else{const at=(o=(n=a.owner)===null||n===void 0?void 0:n.get(st))!==null&&o!==void 0?o:new st;F=$.map(rt=>at.applyInverse(rt))}return[new qi(a,t,tt.scale(-p.separation),tt,U,$,F,p)]}return[]},FindContactSeparation(a,t){var e,i,n,o;const h=a.colliderA,u=(i=(e=a.colliderA.owner)===null||e===void 0?void 0:e.get(st))!==null&&i!==void 0?i:new st,p=a.colliderB,f=(o=(n=a.colliderB.owner)===null||n===void 0?void 0:n.get(st))!==null&&o!==void 0?o:new st;if(h instanceof ie&&p instanceof ie){const _=h.radius+p.radius,I=u.pos.distance(f.pos);return-(_-I)}if(h instanceof mt&&p instanceof mt&&a.info.localSide){let _,I;return a.info.collider===h?(_=new ye(u.apply(a.info.localSide.begin),u.apply(a.info.localSide.end)),I=f.apply(t)):(_=new ye(f.apply(a.info.localSide.begin),f.apply(a.info.localSide.end)),I=u.apply(t)),_.distanceToPoint(I,!0)}if(h instanceof mt&&p instanceof ie||p instanceof mt&&h instanceof ie){const _=u.apply(t);if(a.info.side)return a.info.side.distanceToPoint(_,!0)}if(h instanceof he&&p instanceof mt||p instanceof he&&h instanceof mt){let _;if(a.info.collider===h?_=f.apply(t):_=u.apply(t),a.info.side)return a.info.side.distanceToPoint(_,!0)}if(h instanceof ie&&p instanceof he||p instanceof ie&&h instanceof he){const _=f.apply(t);let I;h instanceof ie&&(I=h.getFurthestPoint(a.normal));const k=_.distance(I);if(a.info.side)return k>0?-k:0}return 0}};class he extends ki{constructor(t){var e;super(),this._globalMatrix=yt.identity(),this.begin=t.begin||B.Zero,this.end=t.end||B.Zero,this.offset=(e=t.offset)!==null&&e!==void 0?e:B.Zero}clone(){return new he({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var t;const e=this._transform;return(t=e==null?void 0:e.globalPos.add(this.offset))!==null&&t!==void 0?t:this.offset}get center(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.average(e)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const t=this._getTransformedBegin(),e=this._getTransformedEnd(),i=t.distance(e);return e.sub(t).scale(1/i)}getLength(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.distance(e)}contains(){return!1}rayCast(t,e=1/0){const i=this._getTransformedBegin().sub(t.pos);if(t.dir.cross(this.getSlope())===0&&i.cross(t.dir)!==0)return null;const n=t.dir.cross(this.getSlope());if(n===0)return null;const o=i.cross(this.getSlope())/n;if(o>=0&&o<=e){const h=i.cross(t.dir)/n/this.getLength();if(h>=0&&h<=1)return t.getPoint(o)}return null}getClosestLineBetween(t){if(t instanceof ie)return me.CircleEdgeClosestLine(t,this);if(t instanceof mt)return me.PolygonEdgeClosestLine(t,this).flip();if(t instanceof he)return me.EdgeEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ie)return Ne.CollideCircleEdge(t,this);if(t instanceof mt)return Ne.CollidePolygonEdge(t,this);if(t instanceof he)return Ne.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const e=this._getTransformedBegin(),i=this._getTransformedEnd();return t.dot(e)>0?e:i}_boundsFromBeginEnd(t,e,i=10){return new ut(Math.min(t.x,e.x)-i,Math.min(t.y,e.y)-i,Math.max(t.x,e.x)+i,Math.max(t.y,e.y)+i)}get bounds(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return this._boundsFromBeginEnd(t,e)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new ye(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new ye(this.begin,this.end)}get axes(){const e=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),i=[];return i.push(e),i.push(e.negate()),i.push(e.normal()),i.push(e.normal().negate()),i}getInertia(t){const e=this.end.sub(this.begin).distance()/2;return t*e*e}update(t){var e;this._transform=t,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const e=[],i=[this._getTransformedBegin(),this._getTransformedEnd()],n=i.length;for(let o=0;o<n;o++)e.push(i[o].dot(t));return new oi(Math.min.apply(Math,e),Math.max.apply(Math,e))}debug(t,e){const i=this._getTransformedBegin(),n=this._getTransformedEnd();t.drawLine(i,n,e,2),t.drawCircle(i,2,e),t.drawCircle(n,2,e)}}class mt extends ki{constructor(t){var e,i;super(),this._logger=gt.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=yt.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(e=t.offset)!==null&&e!==void 0?e:B.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(i=t.points)!==null&&i!==void 0?i:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}set points(t){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._sidesDirty=!0,this._points=t}get points(){return this._points}_isCounterClockwiseWinding(t){let e=0;for(let i=0;i<t.length;i++)e+=(t[(i+1)%t.length].x-t[i].x)*(t[(i+1)%t.length].y+t[i].y);return e<0}isConvex(){if(this.points.length<3)return!1;let t=this.points[this.points.length-2],e=this.points[this.points.length-1],i=Math.atan2(e.y-t.y,e.x-t.x),n=0,o=0,h=0;for(const[u,p]of this.points.entries()){if(t=e,n=i,e=p,i=Math.atan2(e.y-t.y,e.x-t.x),t.equals(e))return!1;let f=i-n;if(f<=-Math.PI?f+=Math.PI*2:f>Math.PI&&(f-=Math.PI*2),u===0){if(f===0)return!1;o=f>0?1:-1}else if(o*f<=0)return!1;h+=f}return Math.abs(Math.round(h/(Math.PI*2)))===1}tessellate(){const t=[];for(let e=1;e<this.points.length-2;e++)t.push([this.points[0],this.points[e+1],this.points[e+2]]);return t.push([this.points[0],this.points[1],this.points[2]]),new Jt(t.map(e=>jt.Polygon(e)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");function t(h,u){return h>=u.length?u[h%u.length]:h<0?u[h%u.length+u.length]:u[h]}function e(h,u,p,f){const _=p.sub(u),I=f.sub(p),k=u.sub(f),j=h.sub(u),V=h.sub(p),$=h.sub(f),tt=_.cross(j),U=I.cross(V),F=k.cross($);return!(tt>0||U>0||F>0)}const i=[],n=[...this.points],o=q(0,this.points.length-1);for(;o.length>3;)for(let h=0;h<o.length;h++){const u=o[h],p=t(h-1,o),f=t(h+1,o),_=n[u],I=n[p],k=n[f],j=I.sub(_);if(!(k.sub(_).cross(j)>0))continue;let tt=!0;for(let U=0;U<o.length;U++){const F=o[U];if(F===u||F===p||F===f)continue;const at=n[F];if(e(at,I,_,k)){tt=!1;break}}if(tt){i.push([I,_,k]),o.splice(h,1);break}}return i.push([n[o[0]],n[o[1]],n[o[2]]]),new Jt(i.map(h=>jt.Polygon(h)))}clone(){return new mt({offset:this.offset.clone(),points:this.points.map(t=>t.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const t=this.points,e=t.length;this._transformedPoints.length=0;for(let i=0;i<e;i++)this._transformedPoints[i]=this._globalMatrix.multiply(t[i].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const t=[],e=this.getTransformedPoints(),i=e.length;for(let n=0;n<i;n++)t.push(new ye(e[n],e[(n+1)%i]));this._sides=t,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const t=[],e=this.points,i=e.length;for(let n=0;n<i;n++)t.push(new ye(e[n],e[(n+1)%i]));this._localSides=t,this._localSidesDirty=!1}return this._localSides}findSide(t){const e=this.getSides();let i=e[0],n=-Number.MAX_VALUE;for(let o=0;o<e.length;o++){const h=e[o],p=h.normal().dot(t);p>n&&(i=h,n=p)}return i}findLocalSide(t){const e=this.getLocalSides();let i=e[0],n=-Number.MAX_VALUE;for(let o=0;o<e.length;o++){const h=e[o],p=h.normal().dot(t);p>n&&(i=h,n=p)}return i}get axes(){const t=[],e=this.getSides();for(let i=0;i<e.length;i++)t.push(e[i].normal());return t}update(t){var e;this._transform=t,this._transformedPointsDirty=!0,this._sidesDirty=!0,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}contains(t){const e=new mi(t,new B(1,0));return this.getSides().reduce(function(n,o){return e.intersect(o)>=0?n+1:n},0)%2!==0}getClosestLineBetween(t){if(t instanceof ie)return me.PolygonCircleClosestLine(this,t);if(t instanceof mt)return me.PolygonPolygonClosestLine(this,t);if(t instanceof he)return me.PolygonEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ie)return Ne.CollideCirclePolygon(t,this);if(t instanceof mt)return Ne.CollidePolygonPolygon(this,t);if(t instanceof he)return Ne.CollidePolygonEdge(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const e=this.getTransformedPoints();let i=null,n=-Number.MAX_VALUE;for(let o=0;o<e.length;o++){const h=t.dot(e[o]);h>n&&(n=h,i=e[o])}return i}getFurthestLocalPoint(t){const e=this.points;let i=e[0],n=-Number.MAX_VALUE;for(let o=0;o<e.length;o++){const h=t.dot(e[o]);h>n&&(n=h,i=e[o])}return i}getClosestFace(t){const e=this.getSides();let i=Number.POSITIVE_INFINITY,n=-1,o=-1;for(let h=0;h<e.length;h++){const u=e[h].distanceToPoint(t);u<i&&(i=u,n=h,o=u)}return n!==-1?{distance:e[n].normal().scale(o),face:e[n]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=ut.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(t){if(this._cachedMass===t&&this._cachedInertia)return this._cachedInertia;let e=0,i=0;const n=this.points;for(let o=0;o<n.length;o++){const h=(o+1)%n.length,u=n[h].cross(n[o]);e+=u*(n[o].dot(n[o])+n[o].dot(n[h])+n[h].dot(n[h])),i+=u}return this._cachedMass=t,this._cachedInertia=t/6*(e/i)}rayCast(t,e=1/0){const i=this.getSides(),n=i.length;let o=Number.MAX_VALUE,h=-1;for(let u=0;u<n;u++){const p=t.intersect(i[u]);p>=0&&p<o&&p<=e&&(o=p,h=u)}return h>=0?t.getPoint(o):null}project(t){const e=this.getTransformedPoints(),i=e.length;let n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let h=0;h<i;h++){const u=e[h].dot(t);n=Math.min(n,u),o=Math.max(o,u)}return new oi(n,o)}debug(t,e){const i=this.getTransformedPoints()[0],n=[i,...this.getTransformedPoints(),i];for(let o=0;o<n.length-1;o++)t.drawLine(n[o],n[o+1],e,2),t.drawCircle(n[o],2,e),t.drawCircle(n[o+1],2,e)}}class jt{static Box(t,e,i=B.Half,n=B.Zero){return new mt({points:new ut(-t*i.x,-e*i.y,t-t*i.x,e-e*i.y).getPoints(),offset:n})}static Polygon(t,e=B.Zero){return new mt({points:t,offset:e})}static Circle(t,e=B.Zero){return new ie({radius:t,offset:e})}static Edge(t,e){return new he({begin:t,end:e})}static Capsule(t,e,i=B.Zero){const n=gt.getInstance();return t===e&&n.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),e>=t?new Jt([jt.Circle(t/2,L(0,-e/2+t/2).add(i)),jt.Box(t,e-t,B.Half,i),jt.Circle(t/2,L(0,e/2-t/2).add(i))]):new Jt([jt.Circle(e/2,L(-t/2+e/2,0).add(i)),jt.Box(t-e,e,B.Half,i),jt.Circle(e/2,L(t/2-e/2,0).add(i))])}}class te extends pe{constructor(t){super(),this.type="ex.collider",this.events=new Ei,this.$colliderAdded=new le,this.$colliderRemoved=new le,this.set(t)}get(){return this._collider}set(t){return this.clear(),t&&(this._collider=t,this._collider.owner=this.owner,this.events.wire(t.events),this.$colliderAdded.notifyAll(t),this.update()),t}clear(){this._collider&&(this.events.unwire(this._collider.events),this.$colliderRemoved.notifyAll(this._collider),this._collider.owner=null,this._collider=null)}get bounds(){var t,e;return(e=(t=this._collider)===null||t===void 0?void 0:t.bounds)!==null&&e!==void 0?e:new ut}get localBounds(){var t,e;return(e=(t=this._collider)===null||t===void 0?void 0:t.localBounds)!==null&&e!==void 0?e:new ut}update(){var t;const e=(t=this.owner)===null||t===void 0?void 0:t.get(st);this._collider&&(this._collider.owner=this.owner,e&&this._collider.update(e.get()))}collide(t){let e=this._collider,i=t._collider;if(!e||!i)return[];let n=!1;if(i instanceof Jt&&(e=i,i=this._collider,n=!0),this._collider){const o=e.collide(i);return o?(n&&o.forEach(h=>{h.mtv=h.mtv.negate(),h.normal=h.normal.negate(),h.tangent=h.normal.perpendicular(),h.colliderA=this._collider,h.colliderB=t._collider}),o):[]}return[]}onAdd(t){this._collider&&this.update(),this.events.on("precollision",e=>{const i=e;t.events.emit("precollision",new di(i.target.owner,i.other.owner,i.side,i.intersection))}),this.events.on("postcollision",e=>{const i=e;t.events.emit("postcollision",new ui(i.target.owner,i.other.owner,i.side,i.intersection))}),this.events.on("collisionstart",e=>{const i=e;t.events.emit("collisionstart",new js(i.target.owner,i.other.owner,i.contact))}),this.events.on("collisionend",e=>{const i=e;t.events.emit("collisionend",new pi(i.target.owner,i.other.owner))})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(t,e,i=B.Half,n=B.Zero){const o=jt.Box(t,e,i,n);return this.set(o)}usePolygonCollider(t,e=B.Zero){const i=jt.Polygon(t,e);return this.set(i)}useCircleCollider(t,e=B.Zero){const i=jt.Circle(t,e);return this.set(i)}useEdgeCollider(t,e){const i=jt.Edge(t,e);return this.set(i)}useCompositeCollider(t){return this.set(new Jt(t))}}var xe;(function(a){a.Rotation="rotation",a.X="x",a.Y="y"})(xe||(xe={}));class Mt extends pe{constructor(t){var e,i,n;super(),this.type="ex.body",this.dependencies=[st,Nt],this.id=R("body",Mt._ID++),this.events=new Ei,this._oldTransform=new Ki,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=_t.PreventCollision,this.group=Ze.All,this._mass=lt.defaultMass,this.sleepMotion=lt.sleepEpsilon*5,this.canSleep=lt.bodiesCanSleepByDefault,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new B(0,0),this.oldAcc=B.Zero,t&&(this.collisionType=(e=t.type)!==null&&e!==void 0?e:this.collisionType,this.group=(i=t.group)!==null&&i!==void 0?i:this.group,this.useGravity=(n=t.useGravity)!==null&&n!==void 0?n:this.useGravity)}get matrix(){return this.transform.get().matrix}get mass(){return this._mass}set mass(t){this._mass=t,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===_t.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(t){this._sleeping=t,t?(this.vel=B.Zero,this.acc=B.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=lt.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const t=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),e=lt.sleepBias;this.sleepMotion=e*this.sleepMotion+(1-e)*t,this.sleepMotion=P(this.sleepMotion,0,10*lt.sleepEpsilon),this.canSleep&&this.sleepMotion<lt.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const t=this.owner.get(te);if(t){t.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),t.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const e=t.get();if(e)return this._cachedInertia=e.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===_t.Fixed?0:1/this.inertia}get active(){var t;return!!(!((t=this.owner)===null||t===void 0)&&t.active)}get center(){return this.globalPos}get transform(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(st)}get motion(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(Nt)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t}get globalPos(){return this.transform.globalPos}set globalPos(t){this.transform.globalPos=t}get oldPos(){return this._oldTransform.pos}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t}get torque(){return this.motion.torque}set torque(t){this.motion.torque=t}get oldRotation(){return this._oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(t){this.transform.globalRotation=t}get scale(){return this.transform.globalScale}set scale(t){this.transform.globalScale=t}get oldScale(){return this._oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(t){this.motion.scaleFactor=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}applyImpulse(t,e){if(this.collisionType!==_t.Active)return;const i=e.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(xe.X)&&(i.x=0),this.limitDegreeOfFreedom.includes(xe.Y)&&(i.y=0),this.vel.addEqual(i),!this.limitDegreeOfFreedom.includes(xe.Rotation)){const n=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*n.cross(e)}}applyLinearImpulse(t){if(this.collisionType!==_t.Active)return;const e=t.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(xe.X)&&(e.x=0),this.limitDegreeOfFreedom.includes(xe.Y)&&(e.y=0),this.vel=this.vel.add(e)}applyAngularImpulse(t,e){if(this.collisionType===_t.Active&&!this.limitDegreeOfFreedom.includes(xe.Rotation)){const i=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*i.cross(e)}}captureOldTransform(){this.__oldTransformCaptured=!0,this.transform.get().clone(this._oldTransform),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}}Mt._ID=0;class Di{constructor(t){this.data=t,this.type="Component Added"}}function Li(a){return!!a&&a.type==="Component Added"}class Re{constructor(t){this.data=t,this.type="Component Removed"}}function Eo(a){return!!a&&a.type==="Component Removed"}class se extends Ge{constructor(t,e){if(super(),this.id=se._ID++,this._name="anonymous",this.active=!0,this._componentsToRemove=[],this._componentTypeToInstance=new Map,this._componentStringToInstance=new Map,this._tagsMemo=[],this._typesMemo=[],this.componentAdded$=new le,this.componentRemoved$=new le,this._parent=null,this.childrenAdded$=new le,this.childrenRemoved$=new le,this._children=[],this._isInitialized=!1,this._setName(e),t)for(const i of t)this.addComponent(i)}_setName(t){t&&(this._name=t)}get name(){return this._name}get events(){return this.eventDispatcher}kill(){this.active=!1}isKilled(){return!this.active}get tags(){return this._tagsMemo}hasTag(t){return this.tags.includes(t)}addTag(t){return this.addComponent(new jn(t))}removeTag(t,e=!1){return this.removeComponent(t,e)}get types(){return this._typesMemo}_rebuildMemos(){this._tagsMemo=Array.from(this._componentStringToInstance.values()).filter(t=>t instanceof jn).map(t=>t.type),this._typesMemo=Array.from(this._componentStringToInstance.keys())}getComponents(){return Array.from(this._componentStringToInstance.values())}_notifyAddComponent(t){this._rebuildMemos();const e=new Di({component:t,entity:this});this.componentAdded$.notifyAll(e)}_notifyRemoveComponent(t){const e=new Re({component:t,entity:this});this.componentRemoved$.notifyAll(e),this._rebuildMemos()}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(t){if(t.parent===null){if(this.getAncestors().includes(t))throw new Error("Cycle detected, cannot add entity");this._children.push(t),t._parent=this,this.childrenAdded$.notifyAll(t)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(t){return t.parent===this&&(ci(t,this._children),t._parent=null,this.childrenRemoved$.notifyAll(t)),this}removeAllChildren(){return this.children.forEach(t=>{this.removeChild(t)}),this}getAncestors(){const t=[this];let e=this.parent;for(;e;)t.push(e),e=e.parent;return t.reverse()}getDescendants(){let t=[this],e=[this];for(;e.length>0;){const i=e.pop();e=e.concat(i.children),t=t.concat(i.children)}return t}clone(){const t=new se;for(const e of this.types)t.addComponent(this.get(e).clone());for(const e of this.children)t.addChild(e.clone());return t}addTemplate(t,e=!1){for(const i of t.getComponents())this.addComponent(i.clone(),e);for(const i of t.children)this.addChild(i.clone().addTemplate(i));return this}addComponent(t,e=!1){if(this.has(t.type))if(e)this.removeComponent(t);else return this;if(t.dependencies&&t.dependencies.length)for(const n of t.dependencies)this.addComponent(new n);t.owner=this;const i=t.constructor;return this._componentTypeToInstance.set(i,t),this._componentStringToInstance.set(t.type,t),t.onAdd&&t.onAdd(this),this._notifyAddComponent(t),this}removeComponent(t,e=!1){return e?typeof t=="string"?this._removeComponentByType(t):t instanceof pe&&this._removeComponentByType(t.type):this._componentsToRemove.push(t),this}_removeComponentByType(t){if(this.has(t)){const e=this.get(t);e.owner=null,e.onRemove&&e.onRemove(this);const i=e.constructor;this._componentTypeToInstance.delete(i),this._componentStringToInstance.delete(e.type),this._notifyRemoveComponent(e)}}processComponentRemoval(){for(const t of this._componentsToRemove){const e=typeof t=="string"?t:t.type;this._removeComponentByType(e)}this._componentsToRemove.length=0}has(t){return typeof t=="string"?this._componentStringToInstance.has(t):this._componentTypeToInstance.has(t)}get(t){return typeof t=="string"?this._componentStringToInstance.get(t):this._componentTypeToInstance.get(t)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.onInitialize(t),super.emit("initialize",new Yi(t,this)),this._isInitialized=!0)}_preupdate(t,e){this.emit("preupdate",new ii(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.emit("postupdate",new Oe(t,e,this)),this.onPostUpdate(t,e)}onInitialize(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}update(t,e){this._initialize(t),this._preupdate(t,e);for(const i of this.children)i.update(t,e);this._postupdate(t,e)}}se._ID=0;function Un(a){return!!a.tick}class Fn{constructor(t,e){this._options=t,this._graphics=e,this.graphics=[]}get name(){return this._options.name}hide(t){if(!t)this.graphics.length=0;else{let e=null;t instanceof ue?e=t:e=this._graphics.getGraphic(t),this.graphics=this.graphics.filter(i=>i.graphic!==e),this._graphics.recalculateBounds()}}show(t,e){e={...e};let i;return t instanceof ue?i=this._graphics.copyGraphics?t.clone():t:(i=this._graphics.getGraphic(t),i||gt.getInstance().error(`No such graphic added to component named ${t}. These named graphics are available: `,this._graphics.getNames())),i?(this.graphics.push({graphic:i,options:e}),this._graphics.recalculateBounds(),i):null}use(t,e){return e={...e},this.hide(),this.show(t,e)}get order(){return this._options.order}set order(t){this._options.order=t}get offset(){var t;return(t=this._options.offset)!==null&&t!==void 0?t:B.Zero}set offset(t){this._options.offset=t}get currentKeys(){var t;return(t=this.name)!==null&&t!==void 0?t:"anonymous"}}class Ir{constructor(t){this._component=t,this._layers=[],this._layerMap={},this.default=new Fn({name:"default",order:0},t),this._maybeAddLayer(this.default)}create(t){const e=new Fn(t,this._component);return this._maybeAddLayer(e)}get(t){return t?this._getLayer(t):this._layers}currentKeys(){const t=[];for(const e of this._layers)t.push(e.currentKeys);return t}has(t){return t in this._layerMap}_maybeAddLayer(t){return this._layerMap[t.name]?this._layerMap[t.name]:(this._layerMap[t.name]=t,this._layers.push(t),this._layers.sort((e,i)=>e.order-i.order),t)}_getLayer(t){return this._layerMap[t]}}class Ae extends pe{constructor(t){super(),this.type="ex.graphics",this._graphics={},this.visible=!0,this.opacity=1,this.offset=B.Zero,this.anchor=B.Half,this.copyGraphics=!1,this._localBounds=null,t={visible:this.visible,...t};const{current:e,anchor:i,opacity:n,visible:o,graphics:h,offset:u,copyGraphics:p,onPreDraw:f,onPostDraw:_}=t;this._graphics=h||{},this.offset=u??this.offset,this.opacity=n??this.opacity,this.anchor=i??this.anchor,this.copyGraphics=p??this.copyGraphics,this.onPreDraw=f??this.onPreDraw,this.onPostDraw=_??this.onPostDraw,this.visible=!!o,this.layers=new Ir(this),e&&this._graphics[e]&&this.show(this._graphics[e])}getGraphic(t){return this._graphics[t]}getNames(){return Object.keys(this._graphics)}get current(){return this.layers.default.graphics}get graphics(){return this._graphics}add(t,e){let i="default",n=null;return typeof t=="string"?(i=t,n=e):n=t,this._graphics[i]=this.copyGraphics?n.clone():n,i==="default"&&this.show("default"),n}show(t,e){const i=this.layers.default.show(t,e);return this.recalculateBounds(),i}use(t,e){const i=this.layers.default.use(t,e);return this.recalculateBounds(),i}hide(t){this.layers.default.hide(t)}set localBounds(t){this._localBounds=t}recalculateBounds(){let t=new ut;for(const e of this.layers.get())for(const{graphic:i,options:n}of e.graphics){let o=this.anchor,h=this.offset;n!=null&&n.anchor&&(o=n.anchor),n!=null&&n.offset&&(h=n.offset);const u=i.localBounds,p=-u.width*o.x+h.x,f=-u.height*o.y+h.y;t=i==null?void 0:i.localBounds.translate(L(p+e.offset.x,f+e.offset.y)).combine(t)}this._localBounds=t}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}update(t,e=0){for(const i of this.layers.get())for(const{graphic:n}of i.graphics)Un(n)&&(n==null||n.tick(t,e))}}class tn extends Ht{constructor(t){super(t),this.width=t.width,this.height=t.height,this.rasterize()}clone(){return new tn({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.color&&t.fillRect(0,0,this.width,this.height),this.strokeColor&&t.strokeRect(0,0,this.width,this.height)}}class en extends Ht{constructor(t){var e,i;super(t),this._radius=0,this.padding=(e=t.padding)!==null&&e!==void 0?e:2,this.radius=t.radius,this.filtering=(i=t.filtering)!==null&&i!==void 0?i:ae.Blended,this.rasterize()}get radius(){return this._radius}set radius(t){this._radius=t,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}clone(){return new en({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.radius>0&&(t.beginPath(),t.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&t.fill(),this.strokeColor&&t.stroke())}}class $i extends pe{constructor(){super(...arguments),this.type="ex.pointer",this.useColliderShape=!0,this.useGraphicsBounds=!1}}class Ut{static CreateReversibleEasingFunction(t){return(e,i,n,o)=>n<i?i-(t(e,n,i,o)-n):t(e,i,n,o)}static CreateVectorEasingFunction(t){return(e,i,n,o)=>new B(t(e,i.x,n.x,o),t(e,i.y,n.y,o))}}Ut.Linear=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,e*a/i+t)),Ut.EaseInQuad=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i,e*a*a+t)),Ut.EaseOutQuad=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i,-e*a*(a-2)+t)),Ut.EaseInOutQuad=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i/2,a<1?e/2*a*a+t:(a--,-e/2*(a*(a-2)-1)+t))),Ut.EaseInCubic=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i,e*a*a*a+t)),Ut.EaseOutCubic=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i,a--,e*(a*a*a+1)+t)),Ut.EaseInOutCubic=Ut.CreateReversibleEasingFunction((a,t,e,i)=>(e=e-t,a/=i/2,a<1?e/2*a*a*a+t:(a-=2,e/2*(a*a*a+2)+t)));class Br{constructor(t){this._actions=[],this._completedActions=[],this._entity=t}add(t){this._actions.push(t)}remove(t){const e=this._actions.indexOf(t);this._actions.splice(e,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const t=this._actions.length;for(let e=0;e<t;e++)this._actions[e].reset();this._completedActions=[]}update(t){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(t),this._currentAction.isComplete(this._entity)&&this._completedActions.push(this._actions.shift()))}}class Mr{constructor(t,e,i){this._stopped=!1,this._repeatBuilder=e,this._repeatContext=new xs(t),this._actionQueue=this._repeatContext.getQueue(),this._repeat=i,this._originalRepeat=i,this._repeatBuilder(this._repeatContext),this._repeat--}update(t){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(t)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class Pr{constructor(t,e){this._stopped=!1,this._repeatBuilder=e,this._repeatContext=new xs(t),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(t){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(t))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class Sr{constructor(t,e,i,n){if(this._started=!1,this._stopped=!1,this._entity=t,this._tx=t.get(st),this._motion=t.get(Nt),this._speed=n,this._offset=new B(e,i),n<=0)throw gt.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+n),new Error("Speed must be greater than 0 pixels per second")}update(t){this._started||(this._started=!0,this._start=new B(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=L(this._end.x,this._end.y),this._motion.vel=L(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(t){const e=t.get(st);return this._stopped||e.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=L(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Tr{constructor(t,e,i,n){this.entity=t,this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._end=new B(e,i),this._speed=n}update(t){this._started||(this._started=!0,this._start=new B(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const e=this._dir.scale(this._speed);this._motion.vel=L(e.x,e.y),this.isComplete(this.entity)&&(this._tx.pos=L(this._end.x,this._end.y),this._motion.vel=L(0,0))}isComplete(t){const e=t.get(st);return this._stopped||new B(e.pos.x,e.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=L(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var Be;(function(a){a[a.ShortestPath=0]="ShortestPath",a[a.LongestPath=1]="LongestPath",a[a.Clockwise=2]="Clockwise",a[a.CounterClockwise=3]="CounterClockwise"})(Be||(Be={}));class Io{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._end=e,this._speed=i,this._rotationType=n||Be.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const e=Math.abs(this._end-this._start),i=Q-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+Q)%Q>=Math.PI,this._rotationType){case Be.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Be.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Be.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Be.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Qn{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._speed=i,this._offset=e,this._rotationType=n||Be.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const e=Math.abs(this._end-this._start),i=Q-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+Q)%Q>=Math.PI,this._rotationType){case Be.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Be.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Be.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Be.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class Rr{constructor(t,e,i,n,o){this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._endX=e,this._endY=i,this._speedX=n,this._speedY=o}update(t){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const e=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*e}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const e=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*e}this.isComplete()&&(this._tx.scale=L(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.y-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class On{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._offset=new B(e,i),this._speedX=this._speedY=n}update(t){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class kr{constructor(t){this._method=null,this._hasBeenCalled=!1,this._method=t}update(t){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class Dr{constructor(t,e,i,n,o){this.easingFcn=o,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new B(0,0),this._lerpEnd=new B(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._lerpDuration=n,this._lerpEnd=new B(e,i)}_initialize(){this._lerpStart=new B(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let e=this._tx.pos.x,i=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?e=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):e=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?i=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):i=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=L((e-this._tx.pos.x)/(t/1e3),(i-this._tx.pos.y)/(t/1e3))):(this._tx.pos=L(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=B.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=L(0,0),this._stopped=!0}}class Yn{constructor(t,e,i,n,o){this.easingFcn=o,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new B(0,0),this._lerpEnd=new B(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._lerpDuration=n,this._offset=new B(e,i)}_initialize(){this._lerpStart=new B(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let e=this._tx.pos.x,i=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?e=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):e=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?i=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):i=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=L((e-this._tx.pos.x)/(t/1e3),(i-this._tx.pos.y)/(t/1e3))):(this._tx.pos=L(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=B.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=L(0,0),this._stopped=!0}}class Lr{constructor(t,e,i,n=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=t.get(Ae),this._timeVisible=e,this._timeNotVisible=i,this._duration=(e+i)*n}update(t){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=t,this._totalTime+=t,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class Bo{constructor(t,e,i){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=t.get(Ae),this._endOpacity=e,this._speed=this._ogspeed=i}update(t){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._graphics.opacity=this._endOpacity),gt.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class sn{constructor(t){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=t}update(t){this._started||(this._started=!0),this._elapsedTime+=t}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Mo{constructor(t){this._stopped=!1,this._entity=t}update(t){this._entity.get(Cs).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class Vn{constructor(t,e,i){this._started=!1,this._stopped=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._followTx=e.get(st),this._followMotion=e.get(Nt),this._current=new B(this._tx.pos.x,this._tx.pos.y),this._end=new B(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=i!==void 0?i:this._current.distance(this._end),this._speed=0}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const e=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(e!==0&&(this._speed=e),this._current=L(this._tx.pos.x,this._tx.pos.y),this._end=L(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const i=this._dir.scale(this._speed);this._motion.vel=L(i.x,i.y)}else this._motion.vel=L(0,0);this.isComplete()&&(this._tx.pos=L(this._end.x,this._end.y),this._motion.vel=L(0,0))}stop(){this._motion.vel=L(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class Gr{constructor(t,e,i){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=t.get(st),this._motion=t.get(Nt),this._meetTx=e.get(st),this._meetMotion=e.get(Nt),this._current=new B(this._tx.pos.x,this._tx.pos.y),this._end=new B(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=i||0,i!==void 0&&(this._speedWasSpecified=!0)}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const e=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));e!==0&&!this._speedWasSpecified&&(this._speed=e),this._current=L(this._tx.pos.x,this._tx.pos.y),this._end=L(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const i=this._dir.scale(this._speed);this._motion.vel=L(i.x,i.y),this.isComplete()&&(this._tx.pos=L(this._end.x,this._end.y),this._motion.vel=L(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=L(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class xs{constructor(t){this._entity=t,this._queue=new Br(t)}getQueue(){return this._queue}update(t){this._queue.update(t)}clearActions(){this._queue.clearActions()}runAction(t){return t.reset(),this._queue.add(t),this}easeTo(...t){var e,i;let n=0,o=0,h=0,u=Ut.Linear;return t[0]instanceof B?(n=t[0].x,o=t[0].y,h=t[1],u=(e=t[2])!==null&&e!==void 0?e:u):(n=t[0],o=t[1],h=t[2],u=(i=t[3])!==null&&i!==void 0?i:u),this._queue.add(new Dr(this._entity,n,o,h,u)),this}easeBy(...t){var e,i;let n=0,o=0,h=0,u=Ut.Linear;return t[0]instanceof B?(n=t[0].x,o=t[0].y,h=t[1],u=(e=t[2])!==null&&e!==void 0?e:u):(n=t[0],o=t[1],h=t[2],u=(i=t[3])!==null&&i!==void 0?i:u),this._queue.add(new Yn(this._entity,n,o,h,u)),this}moveTo(t,e,i){let n=0,o=0,h=0;return t instanceof B?(n=t.x,o=t.y,h=e):(n=t,o=e,h=i),this._queue.add(new Tr(this._entity,n,o,h)),this}moveBy(t,e,i){let n=0,o=0,h=0;return t instanceof B?(n=t.x,o=t.y,h=e):(n=t,o=e,h=i),this._queue.add(new Sr(this._entity,n,o,h)),this}rotateTo(t,e,i){return this._queue.add(new Io(this._entity,t,e,i)),this}rotateBy(t,e,i){return this._queue.add(new Qn(this._entity,t,e,i)),this}scaleTo(t,e,i,n){let o=1,h=1,u=0,p=0;return t instanceof B&&e instanceof B&&(o=t.x,h=t.y,u=e.x,p=e.y),typeof t=="number"&&typeof e=="number"&&(o=t,h=e,u=i,p=n),this._queue.add(new Rr(this._entity,o,h,u,p)),this}scaleBy(t,e,i){let n=1,o=1;return t instanceof B&&(n=t.x,o=t.y,i=e),typeof t=="number"&&typeof e=="number"&&(n=t,o=e),this._queue.add(new On(this._entity,n,o,i)),this}blink(t,e,i=1){return this._queue.add(new Lr(this._entity,t,e,i)),this}fade(t,e){return this._queue.add(new Bo(this._entity,t,e)),this}delay(t){return this._queue.add(new sn(t)),this}die(){return this._queue.add(new Mo(this._entity)),this}callMethod(t){return this._queue.add(new kr(t)),this}repeat(t,e){return e?(this._queue.add(new Mr(this._entity,t,e)),this):(this.repeatForever(t),this)}repeatForever(t){return this._queue.add(new Pr(this._entity,t)),this}follow(t,e){return e===void 0?this._queue.add(new Vn(this._entity,t)):this._queue.add(new Vn(this._entity,t,e)),this}meet(t,e){return e===void 0?this._queue.add(new Gr(this._entity,t)):this._queue.add(new Gr(this._entity,t,e)),this}toPromise(){return new Promise(e=>{this._queue.add(new kr(()=>{e()}))})}}class Cs extends pe{constructor(){super(...arguments),this.type="ex.actions",this.dependencies=[st,Nt]}onAdd(t){this._ctx=new xs(t)}onRemove(){this._ctx=null}getQueue(){var t;return(t=this._ctx)===null||t===void 0?void 0:t.getQueue()}runAction(t){var e;return(e=this._ctx)===null||e===void 0?void 0:e.runAction(t)}update(t){var e;return(e=this._ctx)===null||e===void 0?void 0:e.update(t)}clearActions(){var t;(t=this._ctx)===null||t===void 0||t.clearActions()}easeTo(...t){return this._ctx.easeTo.apply(this._ctx,t)}easeBy(...t){return this._ctx.easeBy.apply(this._ctx,t)}moveTo(t,e,i){return this._ctx.moveTo.apply(this._ctx,[t,e,i])}moveBy(t,e,i){return this._ctx.moveBy.apply(this._ctx,[t,e,i])}rotateTo(t,e,i){return this._ctx.rotateTo(t,e,i)}rotateBy(t,e,i){return this._ctx.rotateBy(t,e,i)}scaleTo(t,e,i,n){return this._ctx.scaleTo.apply(this._ctx,[t,e,i,n])}scaleBy(t,e,i){return this._ctx.scaleBy.apply(this._ctx,[t,e,i])}blink(t,e,i){return this._ctx.blink(t,e,i)}fade(t,e){return this._ctx.fade(t,e)}delay(t){return this._ctx.delay(t)}die(){return this._ctx.die()}callMethod(t){return this._ctx.callMethod(t)}repeat(t,e){return this._ctx.repeat(t,e)}repeatForever(t){return this._ctx.repeatForever(t)}follow(t,e){return this._ctx.follow(t,e)}meet(t,e){return this._ctx.meet(t,e)}toPromise(){return this._ctx.toPromise()}}var Zn;(function(a){a.Em="em",a.Rem="rem",a.Px="px",a.Pt="pt",a.Percent="%"})(Zn||(Zn={}));var Es;(function(a){a.Left="left",a.Right="right",a.Center="center",a.Start="start",a.End="end"})(Es||(Es={}));var Gi;(function(a){a.Top="top",a.Hanging="hanging",a.Middle="middle",a.Alphabetic="alphabetic",a.Ideographic="ideographic",a.Bottom="bottom"})(Gi||(Gi={}));var Wn;(function(a){a.Normal="normal",a.Italic="italic",a.Oblique="oblique"})(Wn||(Wn={}));var Hn;(function(a){a.LeftToRight="ltr",a.RightToLeft="rtl"})(Hn||(Hn={}));class We extends ue{constructor(t={}){var e,i,n,o,h,u,p,f,_,I,k,j,V,$,tt,U,F,at,rt;super(t),this.filtering=ae.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=W.Black,this.family="sans-serif",this.style=Wn.Normal,this.bold=!1,this.unit=Zn.Px,this.textAlign=Es.Left,this.baseAlign=Gi.Alphabetic,this.direction=Hn.LeftToRight,this.size=10,this.shadow=null,this._textBounds=new ut,this._cachedTextMeasurement=new Map,this._bitmapToTextMeasurement=new Map,this._textToBitmap=new Map,this._bitmapUsage=new Map,this._textFragments=[],this.smoothing=(e=t==null?void 0:t.smoothing)!==null&&e!==void 0?e:this.smoothing,this.padding=(i=t==null?void 0:t.padding)!==null&&i!==void 0?i:this.padding,this.color=(n=t==null?void 0:t.color)!==null&&n!==void 0?n:this.color,this.strokeColor=(o=t==null?void 0:t.strokeColor)!==null&&o!==void 0?o:this.strokeColor,this.lineDash=(h=t==null?void 0:t.lineDash)!==null&&h!==void 0?h:this.lineDash,this.lineWidth=(u=t==null?void 0:t.lineWidth)!==null&&u!==void 0?u:this.lineWidth,this.filtering=(p=t==null?void 0:t.filtering)!==null&&p!==void 0?p:this.filtering,this.family=(f=t==null?void 0:t.family)!==null&&f!==void 0?f:this.family,this.style=(_=t==null?void 0:t.style)!==null&&_!==void 0?_:this.style,this.bold=(I=t==null?void 0:t.bold)!==null&&I!==void 0?I:this.bold,this.size=(k=t==null?void 0:t.size)!==null&&k!==void 0?k:this.size,this.unit=(j=t==null?void 0:t.unit)!==null&&j!==void 0?j:this.unit,this.textAlign=(V=t==null?void 0:t.textAlign)!==null&&V!==void 0?V:this.textAlign,this.baseAlign=($=t==null?void 0:t.baseAlign)!==null&&$!==void 0?$:this.baseAlign,this.direction=(tt=t==null?void 0:t.direction)!==null&&tt!==void 0?tt:this.direction,this.quality=(U=t==null?void 0:t.quality)!==null&&U!==void 0?U:this.quality,t!=null&&t.shadow&&(this.shadow={},this.shadow.blur=(F=t.shadow.blur)!==null&&F!==void 0?F:this.shadow.blur,this.shadow.offset=(at=t.shadow.offset)!==null&&at!==void 0?at:this.shadow.offset,this.shadow.color=(rt=t.shadow.color)!==null&&rt!==void 0?rt:this.shadow.color)}clone(){return new We({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(t,e,i){}_rotate(t){var e;const i=(e=this.origin)!==null&&e!==void 0?e:this._textBounds.center;t.translate(i.x,i.y),t.rotate(this.rotation),t.translate(-i.x,-i.y)}_flip(t){this.flipHorizontal&&(t.translate(this._textBounds.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,-this._textBounds.height/2/this.scale.y),t.scale(1,-1))}measureText(t){let e=!1,i=this._cachedTextMeasurement.get(t);i||(e=!0);const n=this._getRasterPropertiesHash();if((!i||n!==i.rasterProps)&&(e=!0),e){const o=t.split(`
`),h=o.reduce(($,tt)=>$.length>tt.length?$:tt),u=this._getTextBitmap(t);this._applyFont(u);const p=u.measureText(h);let f=Math.abs(p.actualBoundingBoxAscent)+Math.abs(p.actualBoundingBoxDescent);const _=f*o.length;f=_;const I=_-Math.abs(p.actualBoundingBoxAscent),k=0,j=0,V=new ut({left:k-Math.abs(p.actualBoundingBoxLeft)-this.padding,top:j-Math.abs(p.actualBoundingBoxAscent)-this.padding,bottom:j+I+this.padding,right:k+Math.abs(p.actualBoundingBoxRight)+this.padding});return i={text:t,rasterProps:n,measurement:V},this._cachedTextMeasurement.set(t,i),this._bitmapToTextMeasurement.set(u,i),i.measurement}else return i.measurement}_setDimension(t,e){e.canvas.width=(t.width+this.padding*2)*2*this.quality,e.canvas.height=(t.height+this.padding*2)*2*this.quality}_postDraw(t){t.restore()}_getRasterPropertiesHash(t){var e,i;return"__hashcode__"+this.fontString+this.showDebug+this.textAlign+this.baseAlign+this.direction+JSON.stringify(this.shadow)+(this.padding.toString()+this.smoothing.toString()+this.lineWidth.toString()+this.lineDash.toString()+((e=this.strokeColor)===null||e===void 0?void 0:e.toString())+(t?t.toString():(i=this.color)===null||i===void 0?void 0:i.toString()).toString())}_applyRasterProperties(t,e){var i,n,o;t.translate(this.padding,this.padding),t.imageSmoothingEnabled=this.smoothing,t.lineWidth=this.lineWidth,t.setLineDash((i=this.lineDash)!==null&&i!==void 0?i:t.getLineDash()),t.strokeStyle=(n=this.strokeColor)===null||n===void 0?void 0:n.toString(),t.fillStyle=e?e.toString():(o=this.color)===null||o===void 0?void 0:o.toString()}_applyFont(t){t.translate(this.padding+t.canvas.width/2,this.padding+t.canvas.height/2),t.scale(this.quality,this.quality),t.textAlign=this.textAlign,t.textBaseline=this.baseAlign,t.font=this.fontString,t.direction=this.direction,this.shadow&&(t.shadowColor=this.shadow.color.toString(),t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offset.x,t.shadowOffsetY=this.shadow.offset.y)}_drawText(t,e,i,n){const o=e.split(`
`);this._applyRasterProperties(t,i),this._applyFont(t);for(let h=0;h<o.length;h++){const u=o[h];this.color&&t.fillText(u,0,h*n),this.strokeColor&&t.strokeText(u,0,h*n)}this.showDebug&&(yr(t,W.Red,-t.canvas.width/2,0,t.canvas.width/2,0,2),yr(t,W.Red,0,-t.canvas.height/2,0,t.canvas.height/2,2))}_getTextBitmap(t,e){const i=t+this._getRasterPropertiesHash(e),n=this._textToBitmap.get(i);if(n)return n;const h=document.createElement("canvas").getContext("2d");return this._textToBitmap.set(i,h),h}_splitTextBitmap(t){const e=[];let i=0,n=0;const o=Math.min(4096,t.canvas.width),h=Math.min(4096,t.canvas.height);for(;i<t.canvas.width;){for(;n<t.canvas.height;){const u=document.createElement("canvas");u.width=o,u.height=h,u.getContext("2d").drawImage(t.canvas,i,n,o,h,0,0,o,h),e.push({x:i,y:n,canvas:u}),n+=h}i+=o,n=0}return e}render(t,e,i,n,o){this.showDebug&&this.clearCache(),this.checkAndClearCache();const h=this._getTextBitmap(e,i),u=!this._bitmapUsage.get(h);this._textBounds=this.measureText(e),u&&this._setDimension(this._textBounds,h),this._preDraw(t,n,o);const p=e.split(`
`),f=this._textBounds.height/p.length;if(u){this._drawText(h,e,i,f);for(const _ of this._textFragments)Rt.delete(_.canvas);this._textFragments=this._splitTextBitmap(h);for(const _ of this._textFragments)Rt.load(_.canvas,this.filtering,!0)}for(const _ of this._textFragments)t.drawImage(_.canvas,0,0,_.canvas.width,_.canvas.height,_.x/this.quality+n-h.canvas.width/this.quality/2,_.y/this.quality+o-h.canvas.height/this.quality/2,_.canvas.width/this.quality,_.canvas.height/this.quality);this._postDraw(t),this._bitmapUsage.set(h,performance.now())}get cacheSize(){return this._bitmapUsage.size}clearCache(){this._bitmapUsage.clear()}checkAndClearCache(){for(const[t,e]of this._bitmapUsage.entries())if(e+1e3<performance.now()){this._bitmapUsage.delete(t);const i=this._bitmapToTextMeasurement.get(t);i&&(this._cachedTextMeasurement.delete(i.text),this._bitmapToTextMeasurement.delete(t)),Rt.delete(t.canvas)}}}class nn extends ue{constructor(t){var e,i;super(t),this._text="",this._textWidth=0,this._textHeight=0,this.font=(e=t.font)!==null&&e!==void 0?e:new We,this.color=(i=t.color)!==null&&i!==void 0?i:this.color,this.text=t.text}clone(){var t,e;return new nn({text:this.text.slice(),color:(e=(t=this.color)===null||t===void 0?void 0:t.clone())!==null&&e!==void 0?e:W.Black,font:this.font.clone()})}get text(){return this._text}set text(t){this._text=t;const e=this.font.measureText(this._text);this._textWidth=e.width,this._textHeight=e.height}get font(){return this._font}set font(t){this._font=t}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:t,height:e}=this.font.measureText(this._text);this._textWidth=t,this._textHeight=e}get localBounds(){return this.font.measureText(this._text).scale(this.scale)}_rotate(t){}_flip(t){}_drawImage(t,e,i){var n;let o=W.Black;this.font instanceof We&&(o=(n=this.color)!==null&&n!==void 0?n:this.font.color),(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint;const{width:h,height:u}=this.font.measureText(this._text);this._textWidth=h,this._textHeight=u,this.font.render(t,this._text,o,e,i),this.font.showDebug&&t.debug.drawRect(e-h,i-u,h*2,u*2)}}class Ai extends se{constructor(t){super(),this._anchor=Bi(B.Half,X=>this._handleAnchorChange(X)),this.logger=gt.getInstance(),this.scene=null,this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=X=>{this._dragging&&(this.pos=X.worldPos)},this._pointerDragLeaveHandler=X=>{this._dragging&&(this.pos=X.worldPos)};const{name:e,x:i,y:n,pos:o,coordPlane:h,scale:u,width:p,height:f,radius:_,collider:I,vel:k,acc:j,rotation:V,angularVelocity:$,z:tt,color:U,visible:F,anchor:at,collisionType:rt,collisionGroup:xt}={...t};this._setName(e),this.anchor=at??Ai.defaults.anchor.clone();const pt=new st;this.addComponent(pt),this.pos=o??L(i??0,n??0),this.rotation=V??0,this.scale=u??L(1,1),this.z=tt??0,pt.coordPlane=h??Te.World,this.addComponent(new $i),this.addComponent(new Ae({anchor:this.anchor})),this.addComponent(new Nt),this.vel=k??B.Zero,this.acc=j??B.Zero,this.angularVelocity=$??0,this.addComponent(new Cs),this.addComponent(new Mt),this.body.collisionType=rt??_t.Passive,xt&&(this.body.group=xt),I?this.addComponent(new te(I)):_?this.addComponent(new te(jt.Circle(_))):p>0&&f>0?this.addComponent(new te(jt.Box(p,f,this.anchor))):this.addComponent(new te),this.graphics.visible=F??!0,U&&(this.color=U,p&&f?this.graphics.add(new tn({color:U,width:p,height:f})):_&&this.graphics.add(new en({color:U,radius:_})))}get body(){return this.get(Mt)}get transform(){return this.get(st)}get motion(){return this.get(Nt)}get graphics(){return this.get(Ae)}get collider(){return this.get(te)}get pointer(){return this.get($i)}get actions(){return this.get(Cs)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t.clone()}get oldPos(){return this.body.oldPos}set oldPos(t){this.body.oldPos.setTo(t.x,t.y)}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t.clone()}get oldVel(){return this.body.oldVel}set oldVel(t){this.body.oldVel.setTo(t.x,t.y)}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t.clone()}set oldAcc(t){this.body.oldAcc.setTo(t.x,t.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}get scale(){return this.get(st).scale}set scale(t){this.get(st).scale=t}get anchor(){return this._anchor}set anchor(t){this._anchor=Bi(t,e=>this._handleAnchorChange(e)),this._handleAnchorChange(t)}_handleAnchorChange(t){this.graphics&&(this.graphics.anchor=t)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(t){t&&(t&&!this._draggable?(this.on("pointerdragstart",this._pointerDragStartHandler),this.on("pointerdragend",this._pointerDragEndHandler),this.on("pointerdragmove",this._pointerDragMoveHandler),this.on("pointerdragleave",this._pointerDragLeaveHandler)):!t&&this._draggable&&(this.off("pointerdragstart",this._pointerDragStartHandler),this.off("pointerdragend",this._pointerDragEndHandler),this.off("pointerdragmove",this._pointerDragMoveHandler),this.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=t)}get color(){return this._color}set color(t){var e;this._color=t.clone();const n=(e=this.graphics.layers.default.graphics[0])===null||e===void 0?void 0:e.graphic;(n instanceof Ht||n instanceof nn)&&(n.color=this._color)}onInitialize(t){}_initialize(t){super._initialize(t);for(const e of this.children)e._initialize(t)}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}off(t,e){super.off(t,e)}_prekill(t){super.emit("prekill",new hs(this)),this.onPreKill(t)}onPreKill(t){}_postkill(t){super.emit("postkill",new zs(this)),this.onPostKill(t)}onPostKill(t){}kill(){this.scene?(this._prekill(this.scene),this.emit("kill",new De(this)),super.kill(),this._postkill(this.scene)):this.logger.warn("Cannot kill actor, it was never added to the Scene")}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(st).z}set z(t){this.get(st).z=t}get center(){const t=this.getGlobalPos();return new B(t.x+this.width/2-this.anchor.x*this.width,t.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new B(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(st).globalRotation}getGlobalPos(){return this.get(st).globalPos}getGlobalScale(){return this.get(st).globalScale}contains(t,e,i=!1){const n=L(t,e),o=this.get(te);o.update();const h=o.get();if(!h)return!1;const u=h.contains(n);return i?u||this.children.some(p=>p.contains(t,e,!0)):u}within(t,e){const i=this.get(te),n=t.get(te),o=i.get(),h=n.get();return o&&h?o.getClosestLineBetween(h).getLength()<=e:!1}update(t,e){this._initialize(t),this._preupdate(t,e),this._postupdate(t,e)}onPreUpdate(t,e){}onPostUpdate(t,e){}_preupdate(t,e){this.emit("preupdate",new ii(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.emit("postupdate",new ii(t,e,this)),this.onPostUpdate(t,e)}}Ai.defaults={anchor:B.Half};function Xn(a){return a instanceof zr}class zr extends Ai{constructor(t){super({...t}),this.get(st).coordPlane=Te.Screen,this.anchor=L(0,0),this.body.collisionType=_t.PreventCollision,this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(t){this._engine=t,super._initialize(t)}contains(t,e,i=!0){if(i)return super.contains(t,e);const n=this._engine.worldToScreenCoordinates(new B(t,e));return super.contains(n.x,n.y)}}class zi{constructor(t,e,i,n,o,h){if(this._logger=gt.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof t!="function"){const u=t;t=u.fcn,e=u.interval,i=u.repeats,n=u.numberOfRepeats,o=u.randomRange,h=u.random}if(n&&n>=0&&(this.maxNumberOfRepeats=n,!i))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=zi._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=e,o){if(o[0]>o[1])throw new Error("min value must be lower than max value for range");this.random=h??new z,this.randomRange=o,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=i||this.repeats,t&&this.on(t)}get complete(){return this._complete}on(t){this._callbacks.push(t)}off(t){const e=this._callbacks.indexOf(t);this._callbacks.splice(e,1)}update(t){this._running&&(this._totalTimeAlive+=t,this._elapsedTime+=t,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(e=>{e.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(t,e){if(t&&t>=0&&(this._baseInterval=this.interval=t),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=e,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}zi._MAX_ID=0;class Jn extends pe{constructor(t){super(),this.type="ex.parallax",this.parallaxFactor=L(1,1),this.parallaxFactor=t??this.parallaxFactor}}class Kn extends pe{constructor(t,e=!0){super(),this.draw=t,this.useTransform=e,this.type="ex.debuggraphics"}}class qn extends se{constructor(t){var e,i;super(null,t.name),this._token=0,this._onScreenXStart=0,this._onScreenXEnd=Number.MAX_VALUE,this._onScreenYStart=0,this._onScreenYEnd=Number.MAX_VALUE,this.logger=gt.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this._collidersDirty=!0,this._originalOffsets=new WeakMap,this.addComponent(new st),this.addComponent(new Nt),this.addComponent(new Mt({type:_t.Fixed})),this.addComponent(new Ae({onPostDraw:(o,h)=>this.draw(o,h)})),this.addComponent(new Kn(o=>this.debug(o))),this.addComponent(new te),this._graphics=this.get(Ae),this._transform=this.get(st),this._motion=this.get(Nt),this._collider=this.get(te),this._composite=this._collider.useCompositeCollider([]),this._transform.pos=(e=t.pos)!==null&&e!==void 0?e:B.Zero,this._oldPos=this._transform.pos,this.renderFromTopOfGraphic=(i=t.renderFromTopOfGraphic)!==null&&i!==void 0?i:this.renderFromTopOfGraphic,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.rows=t.rows,this.columns=t.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let n=[];for(let o=0;o<this.columns;o++){for(let h=0;h<this.rows;h++){const u=new Po({x:o,y:h,map:this});u.map=this,this.tiles[o+h*this.columns]=u,n.push(u),this._rows[h]||(this._rows[h]=[]),this._rows[h].push(u)}this._cols[o]=n,n=[]}this._graphics.localBounds=new ut({left:0,top:0,right:this.columns*this.tileWidth,bottom:this.rows*this.tileHeight})}flagCollidersDirty(){this._collidersDirty=!0}get x(){var t;return(t=this._transform.pos.x)!==null&&t!==void 0?t:0}set x(t){var e;!((e=this._transform)===null||e===void 0)&&e.pos&&(this.get(st).pos=L(t,this.y))}get y(){var t,e;return(e=(t=this._transform)===null||t===void 0?void 0:t.pos.y)!==null&&e!==void 0?e:0}set y(t){var e;!((e=this._transform)===null||e===void 0)&&e.pos&&(this._transform.pos=L(this.x,t))}get z(){var t;return(t=this._transform.z)!==null&&t!==void 0?t:0}set z(t){this._transform&&(this._transform.z=t)}get rotation(){var t,e;return(e=(t=this._transform)===null||t===void 0?void 0:t.rotation)!==null&&e!==void 0?e:0}set rotation(t){var e;!((e=this._transform)===null||e===void 0)&&e.rotation&&(this._transform.rotation=t)}get scale(){var t,e;return(e=(t=this._transform)===null||t===void 0?void 0:t.scale)!==null&&e!==void 0?e:B.One}set scale(t){var e;!((e=this._transform)===null||e===void 0)&&e.scale&&(this._transform.scale=t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get vel(){return this._motion.vel}set vel(t){this._motion.vel=t}on(t,e){super.on(t,e)}_initialize(t){super._initialize(t)}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const e=t.offset;return this._originalOffsets.set(t,e),e}}_updateColliders(){this._composite.clearColliders();const t=[];this._composite=this._collider.useCompositeCollider([]);let e;for(let i=0;i<this.columns;i++){for(let n=0;n<this.rows;n++){n===0&&(e=null);const o=this.tiles[i+n*this.columns];if(o.solid)if(o.getColliders().length>0){for(const h of o.getColliders()){const u=this._getOrSetColliderOriginalOffset(h);h.offset=L(o.x*this.tileWidth,o.y*this.tileHeight).add(u),h.owner=this,this._composite.addCollider(h)}e=null}else e?e=e.combine(o.bounds):e=o.bounds;else e&&t.push(e),e=null}if(e){const n=t[t.length-1];n&&n.top===e.top&&n.bottom===e.bottom?t[t.length-1]=n.combine(e):t.push(e)}}for(const i of t){const n=jt.Box(i.width,i.height,B.Zero,L(i.left-this.pos.x,i.top-this.pos.y));n.owner=this,this._composite.addCollider(n)}this._collider.update()}getTileByIndex(t){return this.tiles[t]}getTile(t,e){return t<0||e<0||t>=this.columns||e>=this.rows?null:this.tiles[t+e*this.columns]}getTileByPoint(t){const e=Math.floor((t.x-this.pos.x)/this.tileWidth),i=Math.floor((t.y-this.pos.y)/this.tileHeight),n=this.getTile(e,i);return e>=0&&i>=0&&e<this.columns&&i<this.rows&&n?n:null}getRows(){return this._rows}getColumns(){return this._cols}update(t,e){if(this.onPreUpdate(t,e),this.emit("preupdate",new ii(t,e,this)),!this._oldPos.equals(this.pos)){this.flagCollidersDirty();for(let f=0;f<this.tiles.length;f++)this.tiles[f]&&this.tiles[f].flagDirty()}this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++;const i=t.getWorldBounds(),n=L(i.left,i.top),o=L(i.right,i.bottom);let h=this.pos;const u=this.get(Jn);let p=B.One;if(u){const f=B.One.sub(u.parallaxFactor);p=t.currentScene.camera.pos.scale(f),h=h.add(p)}this._onScreenXStart=Math.max(Math.floor((n.x-h.x)/this.tileWidth)-2,0),this._onScreenYStart=Math.max(Math.floor((n.y-h.y)/this.tileHeight)-2,0),this._onScreenXEnd=Math.max(Math.floor((o.x-h.x)/this.tileWidth)+2,0),this._onScreenYEnd=Math.max(Math.floor((o.y-h.y)/this.tileHeight)+2,0),this._transform.pos=L(this.x,this.y),this.onPostUpdate(t,e),this.emit("postupdate",new Oe(t,e,this))}draw(t,e){this.emit("predraw",new xi(t,e,this));let i=this._onScreenXStart;const n=Math.min(this._onScreenXEnd,this.columns);let o=this._onScreenYStart;const h=Math.min(this._onScreenYEnd,this.rows);let u,p,f;for(i;i<n;i++){for(o;o<h;o++)for(u=this.getTile(i,o).getGraphics(),p=0,f=u.length;p<f;p++){const _=u[p];if(_){Un(_)&&(_==null||_.tick(e,this._token));const I=this.renderFromTopOfGraphic?0:_.height-this.tileHeight;_.draw(t,i*this.tileWidth,o*this.tileHeight-I)}}o=this._onScreenYStart}this.emit("postdraw",new cs(t,e,this))}debug(t){const e=this.tileWidth*this.columns,i=this.tileHeight*this.rows,n=B.Zero;for(let h=0;h<this.rows+1;h++){const u=L(0,h*this.tileHeight);t.drawLine(n.add(u),n.add(L(e,u.y)),W.Red,2)}for(let h=0;h<this.columns+1;h++){const u=L(h*this.tileWidth,0);t.drawLine(n.add(u),n.add(L(u.x,i)),W.Red,2)}const o=this._composite.getColliders();for(const h of o){const u=W.Gray;u.a=.5;const p=h.localBounds,f=h.worldPos.sub(this.pos);t.drawRectangle(f,p.width,p.height,u)}}}class Po extends se{constructor(t){var e,i;super(),this._posDirty=!1,this._solid=!1,this._graphics=[],this._colliders=[],this.data=new Map,this.x=t.x,this.y=t.y,this.map=t.map,this.width=t.map.tileWidth,this.height=t.map.tileHeight,this.solid=(e=t.solid)!==null&&e!==void 0?e:this.solid,this._graphics=(i=t.graphics)!==null&&i!==void 0?i:[],this._recalculate()}get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get solid(){return this._solid}set solid(t){var e;(e=this.map)===null||e===void 0||e.flagCollidersDirty(),this._solid=t}getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t)}removeGraphic(t){ci(t,this._graphics)}clearGraphics(){this._graphics.length=0}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const e=this._colliders.indexOf(t);e>-1&&this._colliders.splice(e,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}flagDirty(){return this._posDirty=!0}_recalculate(){this._pos=this.map.pos.add(L(this.x*this.map.tileWidth,this.y*this.map.tileHeight)),this._bounds=new ut(this._pos.x,this._pos.y,this._pos.x+this.width,this._pos.y+this.height),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get center(){return this._posDirty&&this._recalculate(),new B(this._pos.x+this.width/2,this._pos.y+this.height/2)}}class So{constructor(t){this.camera=t}lockToActor(t){this.camera.addStrategy(new tr(t))}lockToActorAxis(t,e){this.camera.addStrategy(new To(t,e))}elasticToActor(t,e,i){this.camera.addStrategy(new Ro(t,e,i))}radiusAroundActor(t,e){this.camera.addStrategy(new er(t,e))}limitCameraBounds(t){this.camera.addStrategy(new ko(t))}}var $n;(function(a){a[a.X=0]="X",a[a.Y=1]="Y"})($n||($n={}));class tr{constructor(t){this.target=t,this.action=(e,i,n,o)=>e.center}}class To{constructor(t,e){this.target=t,this.axis=e,this.action=(i,n,o,h)=>{const u=i.center,p=n.getFocus();return this.axis===$n.X?new B(u.x,p.y):new B(p.x,u.y)}}}class Ro{constructor(t,e,i){this.target=t,this.cameraElasticity=e,this.cameraFriction=i,this.action=(n,o,h,u)=>{const p=n.center;let f=o.getFocus(),_=o.vel.clone();const I=p.sub(f).scale(this.cameraElasticity);_=_.add(I);const k=_.scale(-1).scale(this.cameraFriction);return _=_.add(k),f=f.add(_),f}}}class er{constructor(t,e){this.target=t,this.radius=e,this.action=(i,n,o,h)=>{const u=i.center,p=n.getFocus(),f=u.sub(p),_=f.size;if(_>=this.radius){const I=_-this.radius;return p.add(f.normalize().scale(I))}return p}}}class ko{constructor(t){this.target=t,this.boundSizeChecked=!1,this.action=(e,i,n,o)=>{const h=i.getFocus();this.boundSizeChecked||((e.bottom-e.top<n.drawHeight||e.right-e.left<n.drawWidth)&&gt.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let u=h.x,p=h.y;return h.x<e.left+n.halfDrawWidth?u=e.left+n.halfDrawWidth:h.x>e.right-n.halfDrawWidth&&(u=e.right-n.halfDrawWidth),h.y<e.top+n.halfDrawHeight?p=e.top+n.halfDrawHeight:h.y>e.bottom-n.halfDrawHeight&&(p=e.bottom-n.halfDrawHeight),L(u,p)}}}class Do extends Ge{constructor(){super(...arguments),this.transform=yt.identity(),this.inverse=yt.identity(),this._cameraStrategies=[],this.strategy=new So(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=go(B.Zero,()=>this._posChanged=!0),this.vel=B.Zero,this.acc=B.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=Ut.EaseInOutCubic,this._easing=Ut.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1}get zoom(){return this._z}set zoom(t){this._z=t,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(t){this._angularVelocity=t}get pos(){return this._pos}set pos(t){this._pos=go(t,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(t){!this._follow&&!this._cameraMoving&&(this.pos=L(t,this.pos.y))}get y(){return this.pos.y}set y(t){!this._follow&&!this._cameraMoving&&(this.pos=L(this.pos.x,t))}get dx(){return this.vel.x}set dx(t){this.vel=L(t,this.vel.y)}get dy(){return this.vel.y}set dy(t){this.vel=L(this.vel.x,t)}get ax(){return this.acc.x}set ax(t){this.acc=L(t,this.acc.y)}get ay(){return this.acc.y}set ay(t){this.acc=L(this.acc.x,t)}getFocus(){return this.pos}move(t,e,i=Ut.EaseInOutCubic){if(typeof i!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(t):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(t),this._lerpPromise=new Promise(n=>{this._lerpResolve=n}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=e,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=i,this._lerpPromise)}shake(t,e,i){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=e,this._shakeDuration=i}zoomOverTime(t,e=0,i=Ut.EaseInOutCubic){if(this._zoomPromise=new Promise(n=>{this._zoomResolve=n}),e)this._isZooming=!0,this._zoomEasing=i,this._currentZoomTime=0,this._zoomDuration=e,this._zoomStart=this.zoom,this._zoomEnd=t;else return this._isZooming=!1,this.zoom=t,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new ut(0,0,0,0)}addStrategy(t){this._cameraStrategies.push(t)}removeStrategy(t){ci(t,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(t,e){this.emit("preupdate",new ii(t,e,this)),this.onPreUpdate(t,e)}onPreUpdate(t,e){}_postupdate(t,e){this.emit("postupdate",new Oe(t,e,this)),this.onPostUpdate(t,e)}onPostUpdate(t,e){}get isInitialized(){return this._isInitialized}_initialize(t){if(!this.isInitialized){this._engine=t,this._screen=t.screen;const e=this._screen.resolution;let i=L(e.width/2,e.height/2);if(!this._engine.loadingComplete){const n=this._screen.peekResolution();n&&(i=L(n.width/2,n.height/2))}this._halfWidth=i.x,this._halfHeight=i.y,this._posChanged||(this.pos=i),this.updateTransform(),this.runStrategies(t,t.clock.elapsed()),this.updateViewport(),this.updateTransform(),this.onInitialize(t),super.emit("initialize",new Yi(t,this)),this._isInitialized=!0}}onInitialize(t){}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}once(t,e){super.once(t,e)}runStrategies(t,e){for(const i of this._cameraStrategies)this.pos=i.action.call(i,i.target,this,t,e)}updateViewport(){this._viewport=new ut(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(t,e){if(this._initialize(t),this._preupdate(t,e),this.pos=this.pos.add(this.vel.scale(e/1e3)),this.zoom+=this.dz*e/1e3,this.vel=this.vel.add(this.acc.scale(e/1e3)),this.dz+=this.az*e/1e3,this.rotation+=this.angularVelocity*e/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const i=this._zoomEasing,n=i(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=n,this._currentZoomTime+=e}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const n=Ut.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=n,this._currentLerpTime+=e}else{this.pos=this._lerpEnd;const i=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(i)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=e,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(t,e),this.updateViewport(),this.updateTransform(),this._postupdate(t,e)}draw(t){t.multiply(this.transform)}updateTransform(){const t=this._screen.resolution.width/this.zoom,e=this._screen.resolution.height/this.zoom,i=L(-this.x+t/2+this._xShake,-this.y+e/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(i.x,i.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const va={pos:B.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class Lo extends Ai{constructor(t){super({x:t.pos.x,y:t.pos.y,width:t.width,height:t.height}),this.action=()=>{},this.filter=()=>!0,this.repeat=-1,t={...va,...t},this.filter=t.filter||this.filter,this.repeat=t.repeat||this.repeat,this.action=t.action||this.action,t.target&&(this.target=t.target),this.graphics.visible=t.visible,this.body.collisionType=_t.Passive,this.eventDispatcher=new Ei,this.events.on("collisionstart",e=>{this.filter(e.other)&&(this.emit("enter",new Qs(this,e.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",e=>{this.filter(e.other)&&this.emit("exit",new Ar(this,e.other))})}set target(t){this._target=t,this.filter=e=>e===t}get target(){return this._target}_initialize(t){super._initialize(t)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}var fe;(function(a){a.Update="update",a.Draw="draw"})(fe||(fe={}));class He{constructor(){this.priority=0}notify(t){}}class Go{constructor(t){this.data=t,this.type="Entity Added"}}function rn(a){return!!a&&a.type==="Entity Added"}class zo{constructor(t){this.data=t,this.type="Entity Removed"}}function _a(a){return!!a&&a.type==="Entity Removed"}class No{constructor(t){this._world=t,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(t,e){for(const i of this.entities)i.update(t.engine,e),i.active||this.removeEntity(i)}findEntitiesForRemoval(){for(const t of this.entities)t.active||this.removeEntity(t)}notify(t){Li(t)&&this._world.queryManager.addEntity(t.data.entity),Eo(t)&&this._world.queryManager.removeComponent(t.data.entity,t.data.component)}addEntity(t){t.active=!0,t&&!this._entityIndex[t.id]&&(this._entityIndex[t.id]=t,this.entities.push(t),this._world.queryManager.addEntity(t),t.componentAdded$.register(this),t.componentRemoved$.register(this),t.children.forEach(e=>this.addEntity(e)),t.childrenAdded$.register({notify:e=>{this.addEntity(e)}}),t.childrenRemoved$.register({notify:e=>{this.removeEntity(e,!1)}}))}removeEntity(t,e=!0){var i;let n=0;t instanceof se?n=t.id:n=t;const o=this._entityIndex[n];if(o&&o.active&&o.kill(),o&&e){this._entitiesToRemove.push(o);return}delete this._entityIndex[n],o&&(ci(o,this.entities),this._world.queryManager.removeEntity(o),o.componentAdded$.unregister(this),o.componentRemoved$.unregister(this),o.children.forEach(h=>this.removeEntity(h,e)),o.childrenAdded$.clear(),o.childrenRemoved$.clear(),!((i=this._world.context)===null||i===void 0)&&i.engine&&this._world.context.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const t of this._entitiesToRemove)t.active||this.removeEntity(t,!1)}processComponentRemovals(){for(const t of this.entities)t.processComponentRemoval()}getById(t){return this._entityIndex[t]}getByName(t){return this.entities.filter(e=>e.name===t)}clear(){for(const t of this.entities)this.removeEntity(t)}}const Xe=a=>[...a].sort((e,i)=>e.localeCompare(i)).join("+");class Nr extends le{constructor(t){super(),this._entities=[],t[0]instanceof Function?this.types=t.map(e=>new e().type):this.types=t}get key(){return this._key?this._key:this._key=Xe(this.types)}getEntities(t){return t&&this._entities.sort(t),this._entities}addEntity(t){!cr(this._entities,t)&&this.matches(t)&&(this._entities.push(t),this.notifyAll(new Go(t)))}removeEntity(t){ci(t,this._entities)&&this.notifyAll(new zo(t))}clear(){this._entities.length=0;for(const t of this.observers)this.unregister(t)}matches(t){let e=[];t instanceof se?e=t.types:e=t;let i=!0;for(const n of this.types)if(i=i&&e.indexOf(n)>-1,!i)return!1;return i}contain(t){return this.types.indexOf(t)>-1}}class jo{constructor(t){this._world=t,this._queries={}}_addQuery(t){this._queries[Xe(t.types)]=t;for(const e of this._world.entityManager.entities)t.addEntity(e)}maybeRemoveQuery(t){t.observers.length===0&&(t.clear(),delete this._queries[Xe(t.types)])}addEntity(t){for(const e in this._queries)this._queries[e]&&this._queries[e].addEntity(t)}removeComponent(t,e){for(const i in this._queries)this._queries[i].contain(e.type)&&this._queries[i].removeEntity(t)}removeEntity(t){for(const e in this._queries)this._queries[e].removeEntity(t)}createQuery(t){const e=this.getQuery(t);if(e)return e;const i=new Nr(t);return this._addQuery(i),i}getQuery(t){const e=Xe(t);return this._queries[e]?this._queries[e]:null}}class ir{constructor(t){this._world=t,this.systems=[],this.initialized=!1}get(t){return this.systems.find(e=>e instanceof t)}addSystem(t){if(!t.types||t.types.length===0)throw new Error("Attempted to add a System without any types");const e=this._world.queryManager.createQuery(t.types);this.systems.push(t),this.systems.sort((i,n)=>i.priority-n.priority),e.register(t),this.initialized&&t.initialize&&t.initialize(this._world.context)}removeSystem(t){ci(t,this.systems);const e=this._world.queryManager.getQuery(t.types);e&&(e.unregister(t),this._world.queryManager.maybeRemoveQuery(e))}initialize(){if(!this.initialized){this.initialized=!0;for(const t of this.systems)t.initialize&&t.initialize(this._world.context)}}updateSystems(t,e,i){const n=this.systems.filter(o=>o.systemType===t);for(const o of n)o.preupdate&&o.preupdate(e,i);for(const o of n){const h=this._world.queryManager.getQuery(o.types).getEntities(o.sort);if(e instanceof ln)for(const u of h)u._initialize(e==null?void 0:e.engine);o.update(h,i)}for(const o of n)o.postupdate&&o.postupdate(e,i)}clear(){for(const t of this.systems)this.removeSystem(t)}}class jr{constructor(t){this.context=t,this.queryManager=new jo(this),this.entityManager=new No(this),this.systemManager=new ir(this)}update(t,e){t===fe.Update&&this.entityManager.updateEntities(this.context,e),this.systemManager.updateSystems(t,this.context,e),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(t){t instanceof se&&this.entityManager.addEntity(t),t instanceof He&&this.systemManager.addSystem(t)}remove(t,e=!0){t instanceof se&&this.entityManager.removeEntity(t,e),t instanceof He&&this.systemManager.removeSystem(t)}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class ve{static integrate(t,e,i,n){const o=n/1e3;e.vel.addEqual(i.scale(o,ve._ACC)),t.pos.add(e.vel.scale(o,ve._VEL),ve._POS).addEqual(i.scale(.5*o*o,ve._VEL_ACC)),e.angularVelocity+=e.torque*(1/e.inertia)*o;const h=t.rotation+e.angularVelocity*o;t.scale.add(e.scaleFactor.scale(o,this._SCALE_FACTOR),ve._SCALE),t.get().setTransform(ve._POS,h,ve._SCALE)}}ve._POS=new B(0,0),ve._SCALE=new B(1,1),ve._ACC=new B(0,0),ve._VEL=new B(0,0),ve._VEL_ACC=new B(0,0),ve._SCALE_FACTOR=new B(0,0);class Uo extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.motion"],this.systemType=fe.Update,this.priority=-1}update(t,e){let i,n;for(let o=0;o<t.length;o++){i=t[o].get(st),n=t[o].get(Nt);const h=t[o].get(Mt);if(h!=null&&h.sleeping)continue;const u=n.acc.clone();(h==null?void 0:h.collisionType)===_t.Active&&(h!=null&&h.useGravity)&&u.addEqual(lt.gravity),h==null||h.captureOldTransform(),ve.integrate(i,n,u,e)}}}class Fo{constructor(){this.directionMap=new Map,this.distanceMap=new Map}solve(t){this.preSolve(t),t=t.filter(e=>!e.isCanceled()),t.sort((e,i)=>{const n=this.distanceMap.get(e.id),o=this.distanceMap.get(i.id);return n-o});for(const e of t)this.solvePosition(e),this.solveVelocity(e);return this.postSolve(t),t}preSolve(t){for(const e of t){const i=wt.fromDirection(e.mtv),n=e.mtv.negate(),o=e.colliderA.worldPos.squareDistance(e.colliderB.worldPos);this.distanceMap.set(e.id,o),e.colliderA.events.emit("precollision",new di(e.colliderA,e.colliderB,i,n)),e.colliderB.events.emit("precollision",new di(e.colliderB,e.colliderA,wt.getOpposite(i),n.negate()))}}postSolve(t){var e,i;for(const n of t){if(n.isCanceled())continue;const o=n.colliderA,h=n.colliderB,u=(e=o.owner)===null||e===void 0?void 0:e.get(Mt),p=(i=h.owner)===null||i===void 0?void 0:i.get(Mt);if(u&&p&&(u.collisionType===_t.Passive||p.collisionType===_t.Passive))continue;const f=wt.fromDirection(n.mtv),_=n.mtv.negate();n.colliderA.events.emit("postcollision",new ui(n.colliderA,n.colliderB,f,_)),n.colliderB.events.emit("postcollision",new ui(n.colliderB,n.colliderA,wt.getOpposite(f),_.negate()))}}solvePosition(t){var e,i;if(!t.colliderA.bounds.overlaps(t.colliderB.bounds,1e-4)){t.cancel();return}if(Math.abs(t.mtv.x)<1e-4&&Math.abs(t.mtv.y)<1e-4){t.cancel();return}let o=t.mtv;const h=t.colliderA,u=t.colliderB,p=(e=h.owner)===null||e===void 0?void 0:e.get(Mt),f=(i=u.owner)===null||i===void 0?void 0:i.get(Mt);if(p&&f){if(p.collisionType===_t.Passive||f.collisionType===_t.Passive)return;p.collisionType===_t.Active&&f.collisionType===_t.Active&&(o=o.scale(.5)),p.collisionType===_t.Active&&(p.globalPos.x-=o.x,p.globalPos.y-=o.y,h.update(p.transform.get())),f.collisionType===_t.Active&&(f.globalPos.x+=o.x,f.globalPos.y+=o.y,u.update(f.transform.get()))}}solveVelocity(t){var e,i;if(t.isCanceled())return;const n=t.colliderA,o=t.colliderB,h=(e=n.owner)===null||e===void 0?void 0:e.get(Mt),u=(i=o.owner)===null||i===void 0?void 0:i.get(Mt);if(h&&u){if(h.collisionType===_t.Passive||u.collisionType===_t.Passive)return;const p=t.normal,f=p.negate();if(h.collisionType===_t.Active&&h.vel.normalize().dot(f)<0){const _=p.scale(p.dot(h.vel.negate()));h.vel=h.vel.add(_)}if(u.collisionType===_t.Active&&u.vel.normalize().dot(p)<0){const _=f.scale(f.dot(u.vel.negate()));u.vel=u.vel.add(_)}}}}class fi{constructor(t,e,i){this.point=t,this.local=e,this.contact=i,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new B(0,0),this.bToContact=new B(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var t,e;const i=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(Mt),n=(e=this.contact.colliderB.owner)===null||e===void 0?void 0:e.get(Mt);if(i&&n){const o=this.contact.normal,h=this.contact.tangent;this.aToContact=this.point.sub(i.globalPos),this.bToContact=this.point.sub(n.globalPos);const u=this.aToContact.cross(o),p=this.bToContact.cross(o);this.normalMass=i.inverseMass+n.inverseMass+i.inverseInertia*u*u+n.inverseInertia*p*p;const f=this.aToContact.cross(h),_=this.bToContact.cross(h);this.tangentMass=i.inverseMass+n.inverseMass+i.inverseInertia*f*f+n.inverseInertia*_*_}return this}getRelativeVelocity(){var t,e;const i=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(Mt),n=(e=this.contact.colliderB.owner)===null||e===void 0?void 0:e.get(Mt);if(i&&n){const o=i.vel.add(B.cross(i.angularVelocity,this.aToContact));return n.vel.add(B.cross(n.angularVelocity,this.bToContact)).sub(o)}return B.Zero}}class Ur{constructor(){this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(t){var e;return(e=this.idToContactConstraint.get(t))!==null&&e!==void 0?e:[]}solve(t){return this.preSolve(t),t=t.filter(e=>!e.isCanceled()),this.solveVelocity(t),this.solvePosition(t),this.postSolve(t),t}preSolve(t){var e,i,n;for(const h of t){const u=wt.fromDirection(h.mtv);h.colliderA.events.emit("precollision",new di(h.colliderA,h.colliderB,u,h.mtv)),h.colliderA.events.emit("beforecollisionresolve",new ps(h.colliderA,h.colliderB,u,h.mtv,h)),h.colliderB.events.emit("precollision",new di(h.colliderB,h.colliderA,wt.getOpposite(u),h.mtv.negate())),h.colliderB.events.emit("beforecollisionresolve",new ps(h.colliderB,h.colliderA,wt.getOpposite(u),h.mtv.negate(),h)),h.matchAwake()}const o=Array.from(this.idToContactConstraint.keys());for(const h of t){const u=o.indexOf(h.id);u>-1&&o.splice(u,1);const p=(e=this.idToContactConstraint.get(h.id))!==null&&e!==void 0?e:[];let f=0;const _=h.colliderA.owner.get(Mt),I=h.colliderB.owner.get(Mt);if(_&&I)for(const k of h.points){const j=h.normal,V=h.tangent,$=k.sub(_.globalPos),tt=k.sub(I.globalPos),U=$.cross(j),F=tt.cross(j),at=_.inverseMass+I.inverseMass+_.inverseInertia*U*U+I.inverseInertia*F*F,rt=$.cross(V),xt=tt.cross(V),pt=_.inverseMass+I.inverseMass+_.inverseInertia*rt*rt+I.inverseInertia*xt*xt;p[f]&&((n=(i=p[f])===null||i===void 0?void 0:i.point)===null||n===void 0?void 0:n.squareDistance(k))<4?(p[f].point=k,p[f].local=h.localPoints[f]):p[f]=new fi(k,h.localPoints[f],h),p[f].aToContact=$,p[f].bToContact=tt,p[f].normalMass=1/at,p[f].tangentMass=1/pt;const X=_.bounciness>I.bounciness?_.bounciness:I.bounciness,zt=h.normal.dot(p[f].getRelativeVelocity());p[f].originalVelocityAndRestitution=0,zt<-.1&&(p[f].originalVelocityAndRestitution=-X*zt),f++}this.idToContactConstraint.set(h.id,p)}for(const h of o)this.idToContactConstraint.delete(h);if(lt.warmStart)this.warmStart(t);else for(const h of t){const u=this.getContactConstraints(h.id);for(const p of u)p.normalImpulse=0,p.tangentImpulse=0}}postSolve(t){for(const e of t){const i=e.colliderA.owner.get(Mt),n=e.colliderB.owner.get(Mt);if(i&&n){if(i.collisionType===_t.Passive||n.collisionType===_t.Passive)continue;i.updateMotion(),n.updateMotion()}const o=wt.fromDirection(e.mtv);e.colliderA.events.emit("postcollision",new ui(e.colliderA,e.colliderB,o,e.mtv)),e.colliderA.events.emit("aftercollisionresolve",new Ye(e.colliderA,e.colliderB,o,e.mtv,e)),e.colliderB.events.emit("postcollision",new ui(e.colliderB,e.colliderA,wt.getOpposite(o),e.mtv.negate())),e.colliderB.events.emit("aftercollisionresolve",new Ye(e.colliderB,e.colliderA,wt.getOpposite(o),e.mtv.negate(),e))}this.lastFrameContacts.clear();for(const e of t)this.lastFrameContacts.set(e.id,e)}warmStart(t){var e,i,n;for(const o of t){const h=(e=o.colliderA.owner)===null||e===void 0?void 0:e.get(Mt),u=(i=o.colliderB.owner)===null||i===void 0?void 0:i.get(Mt);if(h&&u){const p=(n=this.idToContactConstraint.get(o.id))!==null&&n!==void 0?n:[];for(const f of p)if(lt.warmStart){const _=o.normal.scale(f.normalImpulse),I=o.tangent.scale(f.tangentImpulse),k=_.add(I);h.applyImpulse(f.point,k.negate()),u.applyImpulse(f.point,k)}else f.normalImpulse=0,f.tangentImpulse=0}}}solvePosition(t){var e,i,n;for(let o=0;o<lt.positionIterations;o++)for(const h of t){const u=(e=h.colliderA.owner)===null||e===void 0?void 0:e.get(Mt),p=(i=h.colliderB.owner)===null||i===void 0?void 0:i.get(Mt);if(u&&p){if(u.collisionType===_t.Passive||p.collisionType===_t.Passive)continue;const f=(n=this.idToContactConstraint.get(h.id))!==null&&n!==void 0?n:[];for(const _ of f){const I=h.normal,k=Ne.FindContactSeparation(h,_.local),j=lt.steeringFactor,V=-5,$=lt.slop,tt=P(j*(k+$),V,0),U=I.scale(-tt*_.normalMass);if(u.collisionType===_t.Active){const F=U.negate().scale(u.inverseMass);u.limitDegreeOfFreedom.includes(xe.X)&&(F.x=0),u.limitDegreeOfFreedom.includes(xe.Y)&&(F.y=0),u.globalPos=u.globalPos.add(F),u.limitDegreeOfFreedom.includes(xe.Rotation)||(u.rotation-=_.aToContact.cross(U)*u.inverseInertia)}if(p.collisionType===_t.Active){const F=U.scale(p.inverseMass);p.limitDegreeOfFreedom.includes(xe.X)&&(F.x=0),p.limitDegreeOfFreedom.includes(xe.Y)&&(F.y=0),p.globalPos=p.globalPos.add(F),p.limitDegreeOfFreedom.includes(xe.Rotation)||(p.rotation+=_.bToContact.cross(U)*p.inverseInertia)}}}}}solveVelocity(t){var e,i,n;for(let o=0;o<lt.velocityIterations;o++)for(const h of t){const u=(e=h.colliderA.owner)===null||e===void 0?void 0:e.get(Mt),p=(i=h.colliderB.owner)===null||i===void 0?void 0:i.get(Mt);if(u&&p){if(u.collisionType===_t.Passive||p.collisionType===_t.Passive)continue;const f=Math.min(u.friction,p.friction),_=(n=this.idToContactConstraint.get(h.id))!==null&&n!==void 0?n:[];for(const I of _){let V=-I.getRelativeVelocity().dot(h.tangent)*I.tangentMass;const $=f*I.normalImpulse,tt=P(I.tangentImpulse+V,-$,$);V=tt-I.tangentImpulse,I.tangentImpulse=tt;const U=h.tangent.scale(V);u.applyImpulse(I.point,U.negate()),p.applyImpulse(I.point,U)}for(const I of _){const j=I.getRelativeVelocity().dot(h.normal);let V=-I.normalMass*(j-I.originalVelocityAndRestitution);const $=Math.max(I.normalImpulse+V,0);V=$-I.normalImpulse,I.normalImpulse=$;const tt=h.normal.scale(V);u.applyImpulse(I.point,tt.negate()),p.applyImpulse(I.point,tt)}}}}}class Ni extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.motion","ex.collider"],this.systemType=fe.Update,this.priority=-1,this._realisticSolver=new Ur,this._arcadeSolver=new Fo,this._processor=new Er,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._trackCollider=t=>this._processor.track(t),this._untrackCollider=t=>this._processor.untrack(t)}notify(t){if(rn(t)){const e=t.data.get(te);e.$colliderAdded.subscribe(this._trackCollider),e.$colliderRemoved.subscribe(this._untrackCollider);const i=e.get();i&&this._processor.track(i)}else{const e=t.data.get(te),i=e.get();e&&i&&this._processor.untrack(i)}}initialize(t){this._engine=t.engine}update(t,e){var i,n,o,h;if(!lt.enabled)return;let u=[];for(const I of t){const k=I.get(te),j=k==null?void 0:k.get();if(k&&(!((i=k.owner)===null||i===void 0)&&i.active)&&j)if(k.update(),j instanceof Jt){const V=j.getColliders();u=u.concat(V)}else u.push(j)}this._processor.update(u);const p=this._processor.broadphase(u,e);this._currentFrameContacts.clear();let f=this._processor.narrowphase(p,(h=(o=(n=this._engine)===null||n===void 0?void 0:n.debug)===null||o===void 0?void 0:o.stats)===null||h===void 0?void 0:h.currFrame);f=this.getSolver().solve(f);for(const I of f){const k=I.id.indexOf("|");if(k>0){const j=I.id.substring(k+1);this._currentFrameContacts.set(j,I)}else this._currentFrameContacts.set(I.id,I)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts)}getSolver(){return lt.collisionResolutionStrategy===Ji.Realistic?this._realisticSolver:this._arcadeSolver}debug(t){this._processor.debug(t)}runContactStartEnd(){for(const[t,e]of this._currentFrameContacts)if(!this._lastFrameContacts.has(t)){const i=e.colliderA,n=e.colliderB;i.events.emit("collisionstart",new js(i,n,e)),i.events.emit("contactstart",new us(i,n,e)),n.events.emit("collisionstart",new js(n,i,e)),n.events.emit("contactstart",new us(n,i,e))}for(const[t,e]of this._lastFrameContacts)if(!this._currentFrameContacts.has(t)){const i=e.colliderA,n=e.colliderB;i.events.emit("collisionend",new pi(i,n)),i.events.emit("contactend",new Se(i,n)),n.events.emit("collisionend",new pi(n,i)),n.events.emit("contactend",new Se(n,i))}}}var on;(function(a){a.Forward="forward",a.Backward="backward"})(on||(on={}));var ne;(function(a){a.End="end",a.Loop="loop",a.PingPong="pingpong",a.Freeze="freeze"})(ne||(ne={}));class ji extends ue{constructor(t){var e,i;super(t),this.events=new Ei,this.frames=[],this.strategy=ne.Loop,this.frameDuration=100,this.timeScale=1,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._direction=1,this._done=!1,this._playing=!0,this._reversed=!1,this.frames=t.frames,this.strategy=(e=t.strategy)!==null&&e!==void 0?e:this.strategy,this.frameDuration=t.totalDuration?t.totalDuration/this.frames.length:(i=t.frameDuration)!==null&&i!==void 0?i:this.frameDuration,t.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new ji({frames:this.frames.map(t=>({...t})),frameDuration:this.frameDuration,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const t=this.currentFrame;return t?Math.abs(t.graphic.width*this.scale.x):0}get height(){const t=this.currentFrame;return t?Math.abs(t.graphic.height*this.scale.y):0}static fromSpriteSheet(t,e,i,n=ne.Loop){const o=t.sprites.length-1,h=e.filter(u=>u<0||u>o);return h.length&&ji._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${h.join(",")} no frame will be shown`),new ji({frames:t.sprites.filter((u,p)=>e.indexOf(p)>-1).map(u=>({graphic:u,duration:i})),strategy:n})}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._direction===1)?on.Backward:on.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0}get canFinish(){switch(this.strategy){case ne.End:case ne.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(t){this._currentFrame=t,this._timeLeftInFrame=this.frameDuration;const e=this.frames[this._currentFrame];e&&!this._done&&(this._timeLeftInFrame=(e==null?void 0:e.duration)||this.frameDuration,this.events.emit("frame",e))}_nextFrame(){const t=this._currentFrame;if(this._done)return t;let e=-1;switch(this.strategy){case ne.Loop:{e=(t+1)%this.frames.length,e===0&&this.events.emit("loop",this);break}case ne.End:{e=t+1,e>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case ne.Freeze:{e=P(t+1,0,this.frames.length-1),e>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case ne.PingPong:{t+this._direction>=this.frames.length&&(this._direction=-1,this.events.emit("loop",this)),t+this._direction<0&&(this._direction=1,this.events.emit("loop",this)),e=t+this._direction%this.frames.length;break}}return e}tick(t,e=0){this._idempotencyToken!==e&&(this._idempotencyToken=e,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",this.currentFrame)),this._timeLeftInFrame-=t*this.timeScale,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(t,e,i){this.currentFrame&&this.currentFrame.graphic.draw(t,e,i)}}ji._LOGGER=gt.getInstance();class Is extends ue{constructor(t){super(t),this.members=[],this.members=t.members,this._updateDimensions()}clone(){return new Is({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){let t=new ut;for(const{graphic:e,pos:i}of this.members)t=e.localBounds.translate(i).combine(t);return this.width=t.width,this.height=t.height,t}get localBounds(){let t=new ut;for(const{graphic:e,pos:i}of this.members)t=e.localBounds.translate(i).combine(t);return t}_isAnimationOrGroup(t){return t instanceof ji||t instanceof Is}tick(t,e){for(const i of this.members){const n=i.graphic;this._isAnimationOrGroup(n)&&n.tick(t,e)}}reset(){for(const t of this.members){const e=t.graphic;this._isAnimationOrGroup(e)&&e.reset()}}_preDraw(t,e,i){this._updateDimensions(),super._preDraw(t,e,i)}_drawImage(t,e,i){for(const n of this.members)t.save(),t.translate(e,i),n.graphic.draw(t,n.pos.x,n.pos.y),this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}function Qo(a){return class extends a{assign(t){for(const e in t)typeof this[e]!="function"&&(this[e]=t[e])}constructor(...t){super(...t),t.filter(function(i){return i!==void 0}).length===1&&t[0]&&typeof t[0]=="object"&&!(t[0]instanceof Array)&&this.assign(t[0])}}}var Bs;(function(a){a[a.Circle=0]="Circle",a[a.Rectangle=1]="Rectangle"})(Bs||(Bs={}));class wa extends se{constructor(t,e,i,n,o,h,u,p,f,_){super(),this.position=new B(0,0),this.velocity=new B(0,0),this.acceleration=new B(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=W.White,this.endColor=W.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=W.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let I=t;if(I&&!(t instanceof ai)){const k=t;I=k.emitter,e=k.life,i=k.opacity,o=k.endColor,n=k.beginColor,h=k.position,u=k.velocity,p=k.acceleration,f=k.startSize,_=k.endSize}this.emitter=I,this.life=e||this.life,this.opacity=i||this.opacity,this.endColor=o||this.endColor.clone(),this.beginColor=n||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.position=(h||this.position).add(this.emitter.pos),this.velocity=u||this.velocity,this.acceleration=p||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=f||0,this.endSize=_||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new st),this.addComponent(this.graphics=new Ae),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=L(1,1),this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=ut.fromDimension(this.particleSize,this.particleSize,B.Half),this.graphics.onPostDraw=k=>{k.save(),this.graphics.opacity=this.opacity;const j=this._currentColor.clone();j.a=1,k.debug.drawPoint(L(0,0),{color:j,size:this.particleSize}),k.restore()})}kill(){this.emitter.removeParticle(this)}update(t,e){if(this.life=this.life-e,this.elapsedMultiplier=this.elapsedMultiplier+e,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=P(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=P(this.sizeRate*e+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=P(this._currentColor.r+this._rRate*e,0,255),this._currentColor.g=P(this._currentColor.g+this._gRate*e,0,255),this._currentColor.b=P(this._currentColor.b+this._bRate*e,0,255),this._currentColor.a=P(this.opacity,1e-4,1),this.focus){const i=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(e/1e3);this.velocity=this.velocity.add(i)}else this.velocity=this.velocity.add(this.acceleration.scale(e/1e3));this.position=this.position.add(this.velocity.scale(e/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*e/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=L(1,1),this.graphics.opacity=this.opacity}}class sr extends Qo(wa){constructor(t,e,i,n,o,h,u,p,f,_){super(t,e,i,n,o,h,u,p,f,_)}}class ai extends Ai{constructor(t){var e,i;super({width:(e=t.width)!==null&&e!==void 0?e:0,height:(i=t.height)!==null&&i!==void 0?i:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new B(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=W.White,this.endColor=W.White,this._sprite=null,this.emitterType=Bs.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1;const{x:n,y:o,pos:h,isEmitting:u,minVel:p,maxVel:f,acceleration:_,minAngle:I,maxAngle:k,emitRate:j,particleLife:V,opacity:$,fadeFlag:tt,focus:U,focusAccel:F,startSize:at,endSize:rt,minSize:xt,maxSize:pt,beginColor:X,endColor:zt,particleSprite:Qt,emitterType:Ot,radius:Lt,particleRotationalVelocity:Ce,randomRotation:bi,random:yi}={...t};this.pos=h??L(n??0,o??0),this.isEmitting=u??this.isEmitting,this.minVel=p??this.minVel,this.maxVel=f??this.maxVel,this.acceleration=_??this.acceleration,this.minAngle=I??this.minAngle,this.maxAngle=k??this.maxAngle,this.emitRate=j??this.emitRate,this.particleLife=V??this.particleLife,this.opacity=$??this.opacity,this.fadeFlag=tt??this.fadeFlag,this.focus=U??this.focus,this.focusAccel=F??this.focusAccel,this.startSize=at??this.startSize,this.endSize=rt??this.endSize,this.minSize=xt??this.minSize,this.maxSize=pt??this.maxSize,this.beginColor=X??this.beginColor,this.endColor=zt??this.endColor,this.particleSprite=Qt??this.particleSprite,this.emitterType=Ot??this.emitterType,this.radius=Lt??this.radius,this.particleRotationalVelocity=Ce??this.particleRotationalVelocity,this.randomRotation=bi??this.randomRotation,this.body.collisionType=_t.PreventCollision,this.random=yi??new z}get opacity(){return super.graphics.opacity}set opacity(t){super.graphics.opacity=t}get particleSprite(){return this._sprite}set particleSprite(t){t&&(this._sprite=t)}removeParticle(t){this.deadParticles.push(t)}emitParticles(t){var e;for(let i=0;i<t;i++){const n=this._createParticle();this.particles.push(n),!((e=this===null||this===void 0?void 0:this.scene)===null||e===void 0)&&e.world&&this.scene.world.add(n)}}clearParticles(){this.particles.length=0}_createParticle(){let t=0,e=0;const i=ct(this.minAngle,this.maxAngle,this.random),n=ct(this.minVel,this.maxVel,this.random),o=this.startSize||ct(this.minSize,this.maxSize,this.random),h=n*Math.cos(i),u=n*Math.sin(i);if(this.emitterType===Bs.Rectangle)t=ct(0,this.width,this.random),e=ct(0,this.height,this.random);else if(this.emitterType===Bs.Circle){const f=ct(0,this.radius,this.random);t=f*Math.cos(i),e=f*Math.sin(i)}const p=new sr(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new B(t,e),new B(h,u),this.acceleration,this.startSize,this.endSize);return p.fadeFlag=this.fadeFlag,p.particleSize=o,this.particleSprite&&(p.particleSprite=this.particleSprite,p.graphics.opacity=this.opacity,p.graphics.use(this._sprite)),p.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(p.currentRotation=ct(0,Math.PI*2,this.random)),this.focus&&(p.focus=this.focus.add(new B(this.pos.x,this.pos.y)),p.focusAccel=this.focusAccel),p}update(t,e){var i;super.update(t,e),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(e/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let n=0;n<this.deadParticles.length;n++)ci(this.deadParticles[n],this.particles),!((i=this===null||this===void 0?void 0:this.scene)===null||i===void 0)&&i.world&&this.scene.world.remove(this.deadParticles[n],!1);this.deadParticles.length=0}}class Fr extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=fe.Draw,this.priority=0,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}get sortedTransforms(){return this._sortedTransforms}initialize(t){this._camera=t.camera,this._engine=t.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((t,e)=>t.z-e.z),this._zHasChanged=!1)}notify(t){if(rn(t)){const e=t.data.get(st);this._sortedTransforms.push(e),e.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const e=t.data.get(st);e.zIndexChanged$.unsubscribe(this._zIndexUpdate);const i=this._sortedTransforms.indexOf(e);i>-1&&this._sortedTransforms.splice(i,1)}}update(t,e){this._token++;let i;this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const n of this._sortedTransforms){const o=n.owner;if(o.hasTag("ex.offscreen")||(i=o.get(Ae),!i.visible))continue;n.coordPlane===Te.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),i.update(e,this._token);const h=o.get(Jn);if(h){const p=B.One.sub(h.parallaxFactor),f=this._camera.pos.scale(p);this._graphicsContext.translate(f.x,f.y)}this._applyTransform(o),i.onPreDraw&&i.onPreDraw(this._graphicsContext,e);const u=o instanceof sr?o.opacity:1;this._graphicsContext.opacity=i.opacity*u,this._drawGraphicsComponent(i),i.onPostDraw&&i.onPostDraw(this._graphicsContext,e),this._graphicsContext.restore(),n.coordPlane===Te.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}this._graphicsContext.restore()}_drawGraphicsComponent(t){var e,i;if(t.visible)for(const n of t.layers.get())for(const{graphic:o,options:h}of n.graphics){let u=t.anchor,p=t.offset;h!=null&&h.anchor&&(u=h.anchor),h!=null&&h.offset&&(p=h.offset);const f=-o.width*u.x+p.x,_=-o.height*u.y+p.y;if(o==null||o.draw(this._graphicsContext,f+n.offset.x,_+n.offset.y),!((e=this._engine)===null||e===void 0)&&e.isDebug&&this._engine.debug.graphics.showBounds){const I=L(f+n.offset.x,_+n.offset.y);if(o instanceof Is)for(const k of o.members)(i=k.graphic)===null||i===void 0||i.localBounds.translate(I.add(k.pos)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor);else o==null||o.localBounds.translate(I).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}_applyTransform(t){const e=t.getAncestors();for(const i of e){const n=i==null?void 0:i.get(st),o=i==null?void 0:i.get(Mt);let h=n.pos,u=n.scale,p=n.rotation;if(o&&this._engine.fixedUpdateFps&&o.__oldTransformCaptured&&o.enableFixedUpdateInterpolate){const f=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);h=n.pos.scale(f).add(o.oldPos.scale(1-f)),u=n.scale.scale(f).add(o.oldScale.scale(1-f));const _=(1-f)*Math.cos(o.oldRotation)+f*Math.cos(n.rotation),I=(1-f)*Math.sin(o.oldRotation)+f*Math.sin(n.rotation);p=Math.atan2(I,_)}n&&(this._graphicsContext.z=n.z,this._graphicsContext.translate(h.x,h.y),this._graphicsContext.scale(u.x,u.y),this._graphicsContext.rotate(p))}}}class Oo extends He{constructor(){super(...arguments),this.types=["ex.transform"],this.systemType=fe.Draw,this.priority=999}initialize(t){this._graphicsContext=t.engine.graphicsContext,this._camera=t.camera,this._engine=t.engine,this._collisionSystem=t.world.systemManager.get(Ni)}update(t,e){var i;if(!this._engine.isDebug)return;const n=this._engine.debug.filter;let o,h;const u=this._engine.debug.entity;let p;const f=this._engine.debug.transform;let _;const I=this._engine.debug.motion;let k;const j=this._engine.debug.collider,V=this._engine.debug.physics;let $;const tt=this._engine.debug.graphics;let U,F;const at=this._engine.debug.body,rt=this._engine.debug.camera;for(const xt of t){if(xt.hasTag("offscreen")||xt instanceof sr||n.useFilter&&(!(n.ids.length===0||n.ids.includes(xt.id))||!(n.nameQuery===""||xt.name.includes(n.nameQuery))))continue;let pt=B.Zero;const X=L(0,16);if(o=xt.id,h=xt.name,p=xt.get(st),this._pushCameraTransform(p),this._graphicsContext.save(),this._applyTransform(xt),p&&((f.showAll||f.showPosition)&&this._graphicsContext.debug.drawPoint(B.Zero,{size:4,color:f.positionColor}),(f.showAll||f.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${p.pos.toString(2)}`,pt),pt=pt.add(X)),(f.showAll||f.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${p.z.toFixed(1)})`,pt),pt=pt.add(X)),(u.showAll||u.showId)&&(this._graphicsContext.debug.drawText(`id(${o}) ${xt.parent?"child of id("+((i=xt.parent)===null||i===void 0?void 0:i.id)+")":""}`,pt),pt=pt.add(X)),(u.showAll||u.showName)&&(this._graphicsContext.debug.drawText(`name(${h})`,pt),pt=pt.add(X)),(f.showAll||f.showRotation)&&(this._graphicsContext.drawLine(B.Zero,B.fromAngle(p.rotation).scale(50).add(B.Zero),f.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${Z(p.rotation).toFixed(2)})`,pt),pt=pt.add(X)),(f.showAll||f.showScale)&&this._graphicsContext.drawLine(B.Zero,p.scale.add(B.Zero),f.scaleColor,2)),$=xt.get(Ae),$&&(tt.showAll||tt.showBounds)&&$.localBounds.draw(this._graphicsContext,tt.boundsColor),U=xt.get(Kn),U&&(U.useTransform||this._graphicsContext.restore(),U.draw(this._graphicsContext),U.useTransform||(this._graphicsContext.save(),this._applyTransform(xt))),F=xt.get(Mt),F&&((at.showAll||at.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${F.group.name})`,pt),pt=pt.add(X)),(at.showAll||at.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${F.collisionType})`,pt),pt=pt.add(X)),(at.showAll||at.showMass)&&(this._graphicsContext.debug.drawText(`mass(${F.mass})`,pt),pt=pt.add(X)),(at.showAll||at.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${F.sleepMotion})`,pt),pt=pt.add(X)),(at.showAll||at.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${F.canSleep?F.sleeping:"cant sleep"})`,pt),pt=pt.add(X))),this._graphicsContext.restore(),_=xt.get(Nt),_&&((I.showAll||I.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${_.vel.toString(2)}`,pt.add(p.globalPos)),this._graphicsContext.drawLine(p.globalPos,p.globalPos.add(_.vel),I.velocityColor,2),pt=pt.add(X)),(I.showAll||I.showAcceleration)&&this._graphicsContext.drawLine(p.globalPos,p.globalPos.add(_.acc),I.accelerationColor,2)),k=xt.get(te),k){const zt=k.get();if((j.showAll||j.showGeometry)&&zt&&zt.debug(this._graphicsContext,j.geometryColor),j.showAll||j.showBounds){if(zt instanceof Jt){const Qt=zt.getColliders();for(const Ot of Qt){const Lt=Ot.bounds,Ce=L(Lt.left,Lt.top);this._graphicsContext.debug.drawRect(Ce.x,Ce.y,Lt.width,Lt.height,{color:j.boundsColor}),(j.showAll||j.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${Ot.owner.id})`,Ce)}k.bounds.draw(this._graphicsContext,j.boundsColor)}else if(zt){const Qt=k.bounds,Ot=L(Qt.left,Qt.top);this._graphicsContext.debug.drawRect(Ot.x,Ot.y,Qt.width,Qt.height,{color:j.boundsColor}),(j.showAll||j.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${k.owner.id})`,Ot)}}}this._popCameraTransform(p)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(V.showAll||V.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),V.showAll||V.showCollisionContacts||V.showCollisionNormals)for(const[xt,pt]of this._engine.debug.stats.currFrame.physics.contacts){if(V.showAll||V.showCollisionContacts)for(const X of pt.points)this._graphicsContext.debug.drawPoint(X,{size:5,color:V.collisionContactColor});if(V.showAll||V.showCollisionNormals)for(const X of pt.points)this._graphicsContext.debug.drawLine(X,pt.normal.scale(30).add(X),{color:V.collisionNormalColor})}this._graphicsContext.restore(),rt&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(rt.showAll||rt.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,rt.focusColor),(rt.showAll||rt.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}_applyTransform(t){const e=t.getAncestors();for(const i of e){const n=i==null?void 0:i.get(st);n&&(this._graphicsContext.translate(n.pos.x,n.pos.y),this._graphicsContext.scale(n.scale.x,n.scale.y),this._graphicsContext.rotate(n.rotation))}}_pushCameraTransform(t){t.coordPlane===Te.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(t){t.coordPlane===Te.World&&this._graphicsContext.restore()}}class an extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.pointer"],this.systemType=fe.Update,this.priority=-1,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}initialize(t){this._engine=t.engine}preupdate(){this._receiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((t,e)=>e.z-t.z),this._sortedEntities=this._sortedTransforms.map(t=>t.owner),this._zHasChanged=!1)}notify(t){if(rn(t)){const e=t.data.get(st);this._sortedTransforms.push(e),this._sortedEntities.push(e.owner),e.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const e=t.data.get(st);e.zIndexChanged$.unsubscribe(this._zIndexUpdate);const i=this._sortedTransforms.indexOf(e);i>-1&&(this._sortedTransforms.splice(i,1),this._sortedEntities.splice(i,1))}}entityCurrentlyUnderPointer(t,e){return this.currentFrameEntityToPointers.has(t.id)&&this.currentFrameEntityToPointers.get(t.id).includes(e)}entityWasUnderPointer(t,e){return this.lastFrameEntityToPointers.has(t.id)&&this.lastFrameEntityToPointers.get(t.id).includes(e)}entered(t,e){return this.entityCurrentlyUnderPointer(t,e)&&!this.lastFrameEntityToPointers.has(t.id)}left(t,e){return!this.currentFrameEntityToPointers.has(t.id)&&this.entityWasUnderPointer(t,e)}addPointerToEntity(t,e){if(!this.currentFrameEntityToPointers.has(t.id)){this.currentFrameEntityToPointers.set(t.id,[e]);return}const i=this.currentFrameEntityToPointers.get(t.id);this.currentFrameEntityToPointers.set(t.id,i.concat(e))}update(t){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receiver.update(),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receiver.clear()}_processPointerToEntity(t){var e;let i,n,o,h;for(const u of t){if(i=u.get(st),h=(e=u.get($i))!==null&&e!==void 0?e:new $i,n=u.get(te),n&&(h.useColliderShape||this.overrideUseColliderShape)){n.update();const p=n.get();if(p)for(const[f,_]of this._receiver.currentFramePointerCoords.entries())p.contains(i.coordPlane===Te.World?_.worldPos:_.screenPos)&&this.addPointerToEntity(u,f)}if(o=u.get(Ae),o&&(h.useGraphicsBounds||this.overrideUseGraphicsBounds)){const p=o.localBounds.transform(i.get().matrix);for(const[f,_]of this._receiver.currentFramePointerCoords.entries())p.contains(i.coordPlane===Te.World?_.worldPos:_.screenPos)&&this.addPointerToEntity(u,f)}}}_processDownAndEmit(t){const e=new Map;for(const i of this._receiver.currentFrameDown)i.active&&t.active&&this.entityCurrentlyUnderPointer(t,i.pointerId)&&(t.events.emit("pointerdown",i),this._receiver.isDragStart(i.pointerId)&&t.events.emit("pointerdragstart",i)),e.set(i.pointerId,i);return e}_processUpAndEmit(t){const e=new Map;for(const i of this._receiver.currentFrameUp)i.active&&t.active&&this.entityCurrentlyUnderPointer(t,i.pointerId)&&(t.events.emit("pointerup",i),this._receiver.isDragEnd(i.pointerId)&&t.events.emit("pointerdragend",i)),e.set(i.pointerId,i);return e}_processMoveAndEmit(t){const e=new Map;for(const i of this._receiver.currentFrameMove)i.active&&t.active&&this.entityCurrentlyUnderPointer(t,i.pointerId)&&(t.events.emit("pointermove",i),this._receiver.isDragging(i.pointerId)&&t.events.emit("pointerdragmove",i)),e.set(i.pointerId,i);return e}_processEnterLeaveAndEmit(t,e){for(const i of e){if(i.active&&t.active&&this.entered(t,i.pointerId)){t.events.emit("pointerenter",i),this._receiver.isDragging(i.pointerId)&&t.events.emit("pointerdragenter",i);break}if(i.active&&t.active&&(this.left(t,i.pointerId)||this.entityCurrentlyUnderPointer(t,i.pointerId)&&i.type==="up")){t.events.emit("pointerleave",i),this._receiver.isDragging(i.pointerId)&&t.events.emit("pointerdragleave",i);break}}}_processCancelAndEmit(t){for(const e of this._receiver.currentFrameCancel)e.active&&t.active&&this.entityCurrentlyUnderPointer(t,e.pointerId)&&t.events.emit("pointercancel",e)}_processWheelAndEmit(t){for(const e of this._receiver.currentFrameWheel)e.active&&t.active&&this.entityCurrentlyUnderPointer(t,0)&&t.events.emit("pointerwheel",e)}_dispatchEvents(t){const e=new Set(this.lastFrameEntityToPointers.keys()),i=new Set(this.currentFrameEntityToPointers.keys()),n=t.filter(p=>e.has(p.id)||i.has(p.id));let o,h,u;for(const p of n){u=this._processDownAndEmit(p),h=this._processUpAndEmit(p),o=this._processMoveAndEmit(p);const f=[...o.values(),...u.values(),...h.values()];this._processEnterLeaveAndEmit(p,f),this._processCancelAndEmit(p),this._processWheelAndEmit(p)}}}class Yo extends He{constructor(){super(...arguments),this.types=["ex.actions"],this.systemType=fe.Update,this.priority=-1,this._actions=[]}notify(t){if(rn(t)){const e=t.data.get(Cs);this._actions.push(e)}else{const e=t.data.get(Cs),i=this._actions.indexOf(e);i>-1&&this._actions.splice(i,1)}}update(t,e){for(const i of this._actions)i.update(e)}}class nr extends pe{constructor(t){super(),this.type="ex.isometricentity",this.elevation=0,this.map=t}}class ts extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.isometricentity"],this.systemType=fe.Update,this.priority=99}update(t,e){let i,n;for(const o of t){i=o.get(st),n=o.get(nr);const u=Math.max(n.map.columns*n.map.tileWidth,n.map.rows*n.map.tileHeight)*n.elevation+i.pos.y;i.z=u}}}class Qr extends He{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=fe.Draw,this.priority=-1}initialize(t){this._camera=t.camera}update(t){let e,i,n;for(const o of t){i=o.get(Ae),e=o.get(st),n=o.get(Jn);let h;if(n){const p=B.One.sub(n.parallaxFactor);h=this._camera.pos.scale(p)}const u=this._isOffscreen(e,i,h);u&&!o.hasTag("ex.offscreen")&&(o.eventDispatcher.emit("exitviewport",new Fs(o)),o.addTag("ex.offscreen")),!u&&o.hasTag("ex.offscreen")&&(o.eventDispatcher.emit("enterviewport",new mr(o)),o.removeTag("ex.offscreen"))}}_isOffscreen(t,e,i){if(t.coordPlane===Te.World){let n=e.localBounds;i&&(n=n.translate(i));const o=n.transform(t.get().matrix);return!this._camera.viewport.overlaps(o)}else return!1}}class ln extends Ge{constructor(){super(),this._logger=gt.getInstance(),this.camera=new Do,this.world=new jr(this),this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(new Yo),this.world.add(new Uo),this.world.add(new Ni),this.world.add(new an),this.world.add(new ts),this.world.add(new Qr),this.world.add(new Fr),this.world.add(new Oo)}get actors(){return this.world.entityManager.entities.filter(t=>t instanceof Ai)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(t=>t instanceof Lo)}get tileMaps(){return this.world.entityManager.entities.filter(t=>t instanceof qn)}get timers(){return this._timers}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}off(t,e){super.off(t,e)}onInitialize(t){}onActivate(t){}onDeactivate(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreDraw(t,e){}onPostDraw(t,e){}_initializeChildren(){for(const t of this.entities)t._initialize(this.engine)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.engine=t,this.camera._initialize(t),this.world.systemManager.initialize(),this.onInitialize.call(this,t),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,t),this.eventDispatcher.emit("initialize",new Yi(t,this)),this._isInitialized=!0)}_activate(t){this._logger.debug("Scene.onActivate",this),this.onActivate(t)}_deactivate(t){this._logger.debug("Scene.onDeactivate",this),this.onDeactivate(t)}_preupdate(t,e){this.emit("preupdate",new ii(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.emit("postupdate",new Oe(t,e,this)),this.onPostUpdate(t,e)}_predraw(t,e){this.emit("predraw",new xi(t,e,this)),this.onPreDraw(t,e)}_postdraw(t,e){this.emit("postdraw",new cs(t,e,this)),this.onPostDraw(t,e)}update(t,e){this._preupdate(t,e);let i,n;for(i=0,n=this._cancelQueue.length;i<n;i++)this.removeTimer(this._cancelQueue[i]);this._cancelQueue.length=0;for(const o of this._timers)o.update(e);this.world.update(fe.Update,e),this.camera&&this.camera.update(t,e),this._collectActorStats(t),this._postupdate(t,e)}draw(t,e){var i;this._predraw(t,e),this.world.update(fe.Draw,e),!((i=this.engine)===null||i===void 0)&&i.isDebug&&this.debugDraw(t),this._postdraw(t,e)}debugDraw(t){this.emit("predebugdraw",new Mn(t,this)),this.emit("postdebugdraw",new Pn(t,this))}contains(t){return this.actors.indexOf(t)>-1}add(t){if(this.emit("entityadded",{target:t}),this.world.add(t),t.scene=this,t instanceof zi){cr(this._timers,t)||this.addTimer(t);return}}remove(t){t instanceof se&&(this.emit("entityremoved",{target:t}),this.world.remove(t)),t instanceof zi&&this.removeTimer(t)}clear(t=!0){for(const e of this.entities)this.world.remove(e,t);for(const e of this.timers)this.removeTimer(e)}addTimer(t){return this._timers.push(t),t.scene=this,t}removeTimer(t){const e=this._timers.indexOf(t);return e!==-1&&this._timers.splice(e,1),t}cancelTimer(t){return this._cancelQueue.push(t),t}isTimerActive(t){return this._timers.indexOf(t)>-1&&!t.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(t){const e=this.actors.filter(i=>i instanceof zr);for(const i of e)t.stats.currFrame.actors.ui++;for(const i of this.actors){t.stats.currFrame.actors.alive++;for(const n of i.children)Xn(n)?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}}var es;(function(a){a.Protanope="Protanope",a.Deuteranope="Deuteranope",a.Tritanope="Tritanope"})(es||(es={}));const Or=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class Vo{constructor(t){this._shader=new Le({vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:t}),this._shader.compile(),this._buffer=new Ve({type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Mi({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class is{constructor(t,e=!1){this._colorBlindnessMode=t,this._simulate=!1,this._simulate=e}initialize(t){this._shader=new Vo(Or),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(t){if(this._colorBlindnessMode=t,this._shader){const e=this._shader.getShader();e.use(),this._colorBlindnessMode===es.Protanope?e.setUniformInt("u_type",0):this._colorBlindnessMode===es.Deuteranope?e.setUniformInt("u_type",1):this._colorBlindnessMode===es.Tritanope&&e.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(t){if(this._simulate=t,this._shader){const e=this._shader.getShader();e.use(),e.setUniformBoolean("u_simulate",t)}}get simulate(){return this._simulate}}class Yr{constructor(t){this._engine=t,this._colorBlindPostProcessor=new is(es.Protanope)}correct(t){this._engine.graphicsContext instanceof Ws&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(t){this._engine.graphicsContext instanceof Ws&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class Zo{constructor(t){this.stats={currFrame:new hn,prevFrame:new hn},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!0,showName:!1},this.transform={showAll:!1,showPosition:!1,showPositionLabel:!1,positionColor:W.Yellow,showZIndex:!1,showScale:!1,scaleColor:W.Green,showRotation:!1,rotationColor:W.Blue},this.graphics={showAll:!1,showBounds:!0,boundsColor:W.Yellow},this.collider={showAll:!1,showBounds:!0,boundsColor:W.Blue,showOwner:!1,showGeometry:!0,geometryColor:W.Green},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:W.Cyan,showCollisionContacts:!0,collisionContactColor:W.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:W.Yellow,showAcceleration:!1,accelerationColor:W.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:W.Red,showZoom:!1},this._engine=t,this.colorBlindMode=new Yr(this._engine)}useTestClock(){const t=this._engine.clock,e=t.isRunning();t.stop();const i=t.toTestClock();return e&&i.start(),this._engine.clock=i,i}useStandardClock(){const t=this._engine.clock,e=t.isRunning();t.stop();const i=t.toStandardClock();return e&&i.start(),this._engine.clock=i,i}}class hn{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new rr,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics),this.graphics.drawCalls=t.graphics.drawCalls,this.graphics.drawnImages=t.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const t=new hn;return t.reset(this),t}get id(){return this._id}set id(t){this._id=t}get delta(){return this._delta}set delta(t){this._delta=t}get fps(){return this._fps}set fps(t){this._fps=t}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class rr{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.contacts=t.contacts,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const t=new rr;return t.reset(this),t}get pairs(){return this._pairs}set pairs(t){this._pairs=t}get collisions(){return this._collisions}set collisions(t){this._collisions=t}get contacts(){return this._contacts}set contacts(t){this._contacts=t}get fastBodies(){return this._fastBodies}set fastBodies(t){this._fastBodies=t}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(t){this._fastBodyCollisions=t}get broadphase(){return this._broadphase}set broadphase(t){this._broadphase=t}get narrowphase(){return this._narrowphase}set narrowphase(t){this._narrowphase=t}}var Ms;(function(a){a.Canvas="Canvas",a.Document="Document"})(Ms||(Ms={}));var ss;(function(a){a.Num0="Numpad0",a.Num1="Numpad1",a.Num2="Numpad2",a.Num3="Numpad3",a.Num4="Numpad4",a.Num5="Numpad5",a.Num6="Numpad6",a.Num7="Numpad7",a.Num8="Numpad8",a.Num9="Numpad9",a.NumAdd="NumpadAdd",a.NumSubtract="NumpadSubtract",a.NumMultiply="NumpadMultiply",a.NumDivide="NumpadDivide",a.NumDecimal="NumpadDecimal",a.Numpad0="Numpad0",a.Numpad1="Numpad1",a.Numpad2="Numpad2",a.Numpad3="Numpad3",a.Numpad4="Numpad4",a.Numpad5="Numpad5",a.Numpad6="Numpad6",a.Numpad7="Numpad7",a.Numpad8="Numpad8",a.Numpad9="Numpad9",a.NumpadAdd="NumpadAdd",a.NumpadSubtract="NumpadSubtract",a.NumpadMultiply="NumpadMultiply",a.NumpadDivide="NumpadDivide",a.NumpadDecimal="NumpadDecimal",a.NumLock="NumLock",a.ShiftLeft="ShiftLeft",a.ShiftRight="ShiftRight",a.AltLeft="AltLeft",a.AltRight="AltRight",a.ControlLeft="ControlLeft",a.ControlRight="ControlRight",a.MetaLeft="MetaLeft",a.MetaRight="MetaRight",a.Key0="Digit0",a.Key1="Digit1",a.Key2="Digit2",a.Key3="Digit3",a.Key4="Digit4",a.Key5="Digit5",a.Key6="Digit6",a.Key7="Digit7",a.Key8="Digit8",a.Key9="Digit9",a.Digit0="Digit0",a.Digit1="Digit1",a.Digit2="Digit2",a.Digit3="Digit3",a.Digit4="Digit4",a.Digit5="Digit5",a.Digit6="Digit6",a.Digit7="Digit7",a.Digit8="Digit8",a.Digit9="Digit9",a.F1="F1",a.F2="F2",a.F3="F3",a.F4="F4",a.F5="F5",a.F6="F6",a.F7="F7",a.F8="F8",a.F9="F9",a.F10="F10",a.F11="F11",a.F12="F12",a.A="KeyA",a.B="KeyB",a.C="KeyC",a.D="KeyD",a.E="KeyE",a.F="KeyF",a.G="KeyG",a.H="KeyH",a.I="KeyI",a.J="KeyJ",a.K="KeyK",a.L="KeyL",a.M="KeyM",a.N="KeyN",a.O="KeyO",a.P="KeyP",a.Q="KeyQ",a.R="KeyR",a.S="KeyS",a.T="KeyT",a.U="KeyU",a.V="KeyV",a.W="KeyW",a.X="KeyX",a.Y="KeyY",a.Z="KeyZ",a.KeyA="KeyA",a.KeyB="KeyB",a.KeyC="KeyC",a.KeyD="KeyD",a.KeyE="KeyE",a.KeyF="KeyF",a.KeyG="KeyG",a.KeyH="KeyH",a.KeyI="KeyI",a.KeyJ="KeyJ",a.KeyK="KeyK",a.KeyL="KeyL",a.KeyM="KeyM",a.KeyN="KeyN",a.KeyO="KeyO",a.KeyP="KeyP",a.KeyQ="KeyQ",a.KeyR="KeyR",a.KeyS="KeyS",a.KeyT="KeyT",a.KeyU="KeyU",a.KeyV="KeyV",a.KeyW="KeyW",a.KeyX="KeyX",a.KeyY="KeyY",a.KeyZ="KeyZ",a.Semicolon="Semicolon",a.Quote="Quote",a.Comma="Comma",a.Minus="Minus",a.Period="Period",a.Slash="Slash",a.Equal="Equal",a.BracketLeft="BracketLeft",a.Backslash="Backslash",a.BracketRight="BracketRight",a.Backquote="Backquote",a.Up="ArrowUp",a.Down="ArrowDown",a.Left="ArrowLeft",a.Right="ArrowRight",a.ArrowUp="ArrowUp",a.ArrowDown="ArrowDown",a.ArrowLeft="ArrowLeft",a.ArrowRight="ArrowRight",a.Space="Space",a.Backspace="Backspace",a.Delete="Delete",a.Esc="Escape",a.Escape="Escape",a.Enter="Enter",a.NumpadEnter="NumpadEnter",a.ContextMenu="ContextMenu"})(ss||(ss={}));class cn extends Bt{constructor(t,e,i){super(),this.key=t,this.value=e,this.originalEvent=i}}class Wo extends Ge{constructor(){super(),this._keys=[],this._keysUp=[],this._keysDown=[],this._handleKeyDown=t=>{const e=t.code;if(this._keys.indexOf(e)===-1){this._keys.push(e),this._keysDown.push(e);const i=new cn(e,t.key,t);this.eventDispatcher.emit("down",i),this.eventDispatcher.emit("press",i)}},this._handleKeyUp=t=>{const e=t.code,i=this._keys.indexOf(e);this._keys.splice(i,1),this._keysUp.push(e);const n=new cn(e,t.key,t);this.eventDispatcher.emit("up",n),this.eventDispatcher.emit("release",n)}}on(t,e){super.on(t,e)}init(t){if(!t)try{const e=()=>{};window.top.addEventListener("blur",e),window.top.removeEventListener("blur",e),t=window.top}catch{t=window,gt.getInstance().warn("Failed to bind to keyboard events to top frame. If you are trying to embed Excalibur in a cross-origin iframe, keyboard events will not fire.")}t.addEventListener("blur",()=>{this._keys.length=0}),t.addEventListener("keyup",this._handleKeyUp),t.addEventListener("keydown",this._handleKeyDown)}update(){this._keysDown.length=0,this._keysUp.length=0;for(let t=0;t<this._keys.length;t++)this.eventDispatcher.emit("hold",new cn(this._keys[t]))}getKeys(){return this._keys}wasPressed(t){return this._keysDown.indexOf(t)>-1}isHeld(t){return this._keys.indexOf(t)>-1}wasReleased(t){return this._keysUp.indexOf(t)>-1}triggerEvent(t,e,i){t==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:e,key:i??null})),t==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:e,key:i??null}))}}class Ps extends Ge{constructor(){super(),this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}setMinimumGamepadConfiguration(t){this._enableAndUpdate(),this._minimumConfiguration=t}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;const e=t.axes.filter(n=>typeof n!==void 0).length,i=t.buttons.filter(n=>typeof n!==void 0).length;return e>=this._minimumConfiguration.axis&&i>=this._minimumConfiguration.buttons&&t.connected}on(t,e){this._enableAndUpdate(),super.on(t,e)}off(t,e){this._enableAndUpdate(),super.off(t,e)}update(){if(!this.enabled||!this.supported)return;this.init();const t=this._navigator.getGamepads();for(let e=0;e<t.length;e++){if(t[e])!this.at(e).connected&&this._isGamepadValid(t[e])&&this.eventDispatcher.emit("connect",new gr(e,this.at(e))),this.at(e).connected=!0;else{const p=this.at(e);p.connected&&this.eventDispatcher.emit("disconnect",new Ci(e,p)),p.connected=!1;continue}if(t[e].timestamp&&t[e].timestamp===this._gamePadTimeStamps[e])continue;this._gamePadTimeStamps[e]=t[e].timestamp,this.at(e).navigatorGamepad=t[e];let i,n,o,h,u;for(i in un)n=un[i],typeof n=="number"&&t[e].buttons[n]&&(u=t[e].buttons[n].value,u!==this._oldPads[e].getButton(n)&&(t[e].buttons[n].pressed?(this.at(e).updateButton(n,u),this.at(e).eventDispatcher.emit("button",new Qi(n,u,this.at(e)))):this.at(e).updateButton(n,0)));for(o in ns)h=ns[o],typeof h=="number"&&(u=t[e].axes[h],u!==this._oldPads[e].getAxes(h)&&(this.at(e).updateAxes(h,u),this.at(e).eventDispatcher.emit("axis",new Oi(h,u,this.at(e)))));this._oldPads[e]=this._clonePad(t[e])}}at(t){if(this._enableAndUpdate(),t>=this._pads.length)for(let e=this._pads.length-1,i=t;e<i;e++)this._pads.push(new dn),this._oldPads.push(new dn);return this._pads[t]}getValidGamepads(){this._enableAndUpdate();const t=[];for(let e=0;e<this._pads.length;e++)this._isGamepadValid(this.at(e).navigatorGamepad)&&this.at(e).connected&&t.push(this.at(e));return t}count(){return this._pads.filter(t=>t.connected).length}_clonePads(t){const e=[];for(let i=0,n=t.length;i<n;i++)e.push(this._clonePad(t[i]));return e}_clonePad(t){let e,i;const n=new dn;if(!t)return n;for(e=0,i=t.buttons.length;e<i;e++)t.buttons[e]&&n.updateButton(e,t.buttons[e].value);for(e=0,i=t.axes.length;e<i;e++)n.updateAxes(e,t.axes[e]);return n}}Ps.MinAxisMoveThreshold=.05;class dn extends Ge{constructor(){super(),this.connected=!1,this._buttons=new Array(16),this._axes=new Array(4);for(let t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(let t=0;t<this._axes.length;t++)this._axes[t]=0}isButtonPressed(t,e=1){return this._buttons[t]>=e}getButton(t){return this._buttons[t]}getAxes(t){const e=this._axes[t];return Math.abs(e)<Ps.MinAxisMoveThreshold?0:e}updateButton(t,e){this._buttons[t]=e}updateAxes(t,e){this._axes[t]=e}}var un;(function(a){a[a.Face1=0]="Face1",a[a.Face2=1]="Face2",a[a.Face3=2]="Face3",a[a.Face4=3]="Face4",a[a.LeftBumper=4]="LeftBumper",a[a.RightBumper=5]="RightBumper",a[a.LeftTrigger=6]="LeftTrigger",a[a.RightTrigger=7]="RightTrigger",a[a.Select=8]="Select",a[a.Start=9]="Start",a[a.LeftStick=10]="LeftStick",a[a.RightStick=11]="RightStick",a[a.DpadUp=12]="DpadUp",a[a.DpadDown=13]="DpadDown",a[a.DpadLeft=14]="DpadLeft",a[a.DpadRight=15]="DpadRight"})(un||(un={}));var ns;(function(a){a[a.LeftStickX=0]="LeftStickX",a[a.LeftStickY=1]="LeftStickY",a[a.RightStickX=2]="RightStickX",a[a.RightStickY=3]="RightStickY"})(ns||(ns={}));class Vr{constructor(t){this.nativeComponent=t,this._paused=!1,this._nativeHandlers={}}on(t,e){this._nativeHandlers[t]&&this.off(t,this._nativeHandlers[t]),this._nativeHandlers[t]=this._decorate(e),this.nativeComponent.addEventListener(t,this._nativeHandlers[t])}off(t,e){e||(e=this._nativeHandlers[t]),this.nativeComponent.removeEventListener(t,e),this._nativeHandlers[t]=null}_decorate(t){return e=>{this._paused||t(e)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const t in this._nativeHandlers)this.off(t)}}class vi{constructor(t,e){this._windowGlobal=t,this._documentGlobal=e,this._windowComponent=new Vr(this._windowGlobal),this._documentComponent=new Vr(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}class pn{constructor(t,e,i){this.worldPos=t,this.pagePos=e,this.screenPos=i}static fromPagePosition(t,e,i){let n,o,h,u;arguments.length===3?(n=t,o=e,h=new B(n,o),u=i):(h=t,n=h.x,o=h.y,u=e);const p=u.screen.pageToScreenCoordinates(h),f=u.screen.screenToWorldCoordinates(p);return new pn(f,h,p)}}class gn{constructor(t,e,i,n,o,h){this.type=t,this.pointerId=e,this.button=i,this.pointerType=n,this.coordinates=o,this.nativeEvent=h,this.active=!0}cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}}class or{constructor(t,e,i,n,o,h,u,p,f,_,I,k){this.x=t,this.y=e,this.pageX=i,this.pageY=n,this.screenX=o,this.screenY=h,this.index=u,this.deltaX=p,this.deltaY=f,this.deltaZ=_,this.deltaMode=I,this.ev=k,this.active=!0}cancel(){this.active=!1}}class Zr extends Ge{constructor(){super(),this.lastPagePos=B.Zero,this.lastScreenPos=B.Zero,this.lastWorldPos=B.Zero,this._onPointerMove=t=>{this.lastPagePos=new B(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new B(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new B(t.worldPos.x,t.worldPos.y)},this._onPointerDown=t=>{this.lastPagePos=new B(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new B(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new B(t.worldPos.x,t.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}off(t,e){super.off(t,e)}}var Ss;(function(a){a.Pixel="Pixel",a.Line="Line",a.Page="Page"})(Ss||(Ss={}));var Ui;(function(a){a[a.NoButton=-1]="NoButton",a[a.Left=0]="Left",a[a.Middle=1]="Middle",a[a.Right=2]="Right",a[a.Unknown=3]="Unknown"})(Ui||(Ui={}));var _i;(function(a){a.Left="Left",a.Middle="Middle",a.Right="Right",a.Unknown="Unknown",a.NoButton="NoButton"})(_i||(_i={}));var wi;(function(a){a.Touch="Touch",a.Mouse="Mouse",a.Pen="Pen",a.Unknown="Unknown"})(wi||(wi={}));function ba(a){return globalThis.TouchEvent&&a instanceof globalThis.TouchEvent}function ya(a){return globalThis.PointerEvent&&a instanceof globalThis.PointerEvent}class mn extends Ge{constructor(t,e){super(),this.target=t,this.engine=e,this.primary=new Zr,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}recreate(t,e){const i=new mn(t,e);return i.primary=this.primary,i._pointers=this._pointers,i}at(t){if(t>=this._pointers.length)for(let e=this._pointers.length-1,i=t;e<i;e++)this._pointers.push(new Zr);return this._pointers[t]}count(){return this._pointers.length}isDown(t){var e;return(e=this.currentFramePointerDown.get(t))!==null&&e!==void 0?e:!1}wasDown(t){var e;return(e=this.lastFramePointerDown.get(t))!==null&&e!==void 0?e:!1}isDragging(t){return this.isDown(t)}isDragStart(t){return this.isDown(t)&&!this.wasDown(t)}isDragEnd(t){return!this.isDown(t)&&this.wasDown(t)}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}off(t,e){super.off(t,e)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const t of this.currentFrameDown)this.emit("down",t),this.at(t.pointerId).emit("down",t),this.primary.emit("pointerdown",t);for(const t of this.currentFrameUp)this.emit("up",t),this.at(t.pointerId).emit("up",t);for(const t of this.currentFrameMove)this.emit("move",t),this.at(t.pointerId).emit("move",t);for(const t of this.currentFrameCancel)this.emit("cancel",t),this.at(t.pointerId).emit("cancel",t);for(const t of this.currentFrameWheel)this.emit("wheel",t),this.primary.emit("pointerwheel",t)}clear(){for(const t of this.currentFrameUp){this.currentFramePointerCoords.delete(t.pointerId);const e=this._activeNativePointerIdsToNormalized.entries();for(const[i,n]of e)n===t.pointerId&&this._activeNativePointerIdsToNormalized.delete(i)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(){this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const t={passive:!(this.engine.pageScrollPreventionMode===Fi.All||this.engine.pageScrollPreventionMode===Fi.Canvas)};"onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,t):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,t):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,t)}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(t){this._activeNativePointerIdsToNormalized.set(t,-1);const i=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((n,o)=>n-o).findIndex(n=>n===t);return this._activeNativePointerIdsToNormalized.set(t,i),i}_handle(t){t.preventDefault();const e=new Map;let i,n;if(ba(t)){i=_i.Unknown,n=wi.Touch;for(let o=0;o<t.changedTouches.length;o++){const h=t.changedTouches[o],u=pn.fromPagePosition(h.pageX,h.pageY,this.engine),p=o+1,f=this._normalizePointerId(p);this.currentFramePointerCoords.set(f,u),e.set(f,u)}}else{i=this._nativeButtonToPointerButton(t.button),n=wi.Mouse;const o=pn.fromPagePosition(t.pageX,t.pageY,this.engine);let h=1;ya(t)&&(h=t.pointerId,n=this._stringToPointerType(t.pointerType));const u=this._normalizePointerId(h);this.currentFramePointerCoords.set(u,o),e.set(u,o)}for(const[o,h]of e.entries())switch(t.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new gn("down",o,i,n,h,t)),this.currentFramePointerDown.set(o,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new gn("up",o,i,n,h,t)),this.currentFramePointerDown.set(o,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new gn("move",o,i,n,h,t));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new gn("cancel",o,i,n,h,t));break}}_handleWheel(t){(this.engine.pageScrollPreventionMode===Fi.All||this.engine.pageScrollPreventionMode===Fi.Canvas&&t.target===this.engine.canvas)&&t.preventDefault();const e=this.engine.screen.pageToScreenCoordinates(L(t.pageX,t.pageY)),i=this.engine.screen.screenToWorldCoordinates(e),n=-1/40,o=t.deltaX||t.wheelDeltaX*n||0,h=t.deltaY||t.wheelDeltaY*n||t.wheelDelta*n||t.detail||0,u=t.deltaZ||0;let p=Ss.Pixel;t.deltaMode&&(t.deltaMode===1?p=Ss.Line:t.deltaMode===2&&(p=Ss.Page));const f=new or(i.x,i.y,t.pageX,t.pageY,e.x,e.y,0,o,h,u,p,t);this.currentFrameWheel.push(f)}triggerEvent(t,e){const i=this.engine.screen.worldToPageCoordinates(e);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+t,{pointerId:0,clientX:i.x,clientY:i.y})):this._handle(new window.MouseEvent("mouse"+t,{clientX:i.x,clientY:i.y}));const n=this.engine.currentScene.world.systemManager.get(an),o=this.engine.currentScene.world.queryManager.createQuery(n.types);n.preupdate(),n.update(o.getEntities())}_nativeButtonToPointerButton(t){switch(t){case Ui.NoButton:return _i.NoButton;case Ui.Left:return _i.Left;case Ui.Middle:return _i.Middle;case Ui.Right:return _i.Right;case Ui.Unknown:return _i.Unknown;default:return re(t)}}_stringToPointerType(t){switch(t){case"touch":return wi.Touch;case"mouse":return wi.Mouse;case"pen":return wi.Pen;default:return wi.Unknown}}}class Wr{constructor(t){var e;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=t.initialFps,this._samplePeriod=(e=t.samplePeriod)!==null&&e!==void 0?e:this._samplePeriod,this._currentFrameTime=1e3/t.initialFps,this._nowFn=t.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const t=this._nowFn();this._currentFrameTime=t-this._beginFrameTime,t>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(t-this._previousSampleTime),this._previousSampleTime=t,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class ar{constructor(t){var e,i,n;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=t,this.tick=t.tick,this._lastTime=(e=this.now())!==null&&e!==void 0?e:0,this._maxFps=(i=t.maxFps)!==null&&i!==void 0?i:this._maxFps,this._onFatalException=(n=t.onFatalException)!==null&&n!==void 0?n:this._onFatalException,this.fpsSampler=new Wr({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new Ho({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new Hr({...this._options})}setFatalExceptionHandler(t){this._onFatalException=t}schedule(t,e=0){const i=this._totalElapsed+e;this._scheduledCbs.push([t,i])}_runScheduledCbs(){for(let t=this._scheduledCbs.length-1;t>-1;t--)this._scheduledCbs[t][1]<=this._totalElapsed&&(this._scheduledCbs[t][0](),this._scheduledCbs.splice(t,1))}update(t){try{this.fpsSampler.start();const e=this.now();let i=e-this._lastTime||1;const n=1e3/this._maxFps;if(i>=n){let o=0;n!==0&&(o=i%n,i=i-o),i>200&&(i=1),this._elapsed=t||i,this._totalElapsed+=this._elapsed,this._runScheduledCbs(),this.tick(t||i),n!==0?this._lastTime=e-o:this._lastTime=e,this.fpsSampler.end()}}catch(e){this._onFatalException(e),this.stop()}}}class Hr extends ar{constructor(t){super(t),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const t=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(t),this.update()}catch(e){throw window.cancelAnimationFrame(this._requestId),e}};t()}stop(){this._running=!1}}class Ho extends ar{constructor(t){super({...t}),this._logger=gt.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=t.defaultUpdateMs}now(){var t;return(t=this._currentTime)!==null&&t!==void 0?t:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(t){const e=t??this._updateMs;this._running?(this.update(e),this._currentTime+=e):this._logger.warn("The clock is not running, no step will be performed")}run(t,e){for(let i=0;i<t;i++)this.step(e??this._updateMs)}}var xa=Kt(7379);class Xo{constructor(){this._toasterCss=xa.Z.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(t){const e=document.createElement("span");return e.innerText=t,e}toast(t,e,i){this._initialize();const n=document.createElement("div");n.className="ex-toast-message";const o=t.split("[LINK]").map(_=>this._createFragment(_));if(e){const _=document.createElement("a");_.href=e,i?_.innerText=i:_.innerText=e,o.splice(1,0,_)}const h=document.createElement("div");o.forEach(_=>{h.appendChild(_)}),n.appendChild(h);const u=document.createElement("button");u.innerText="x",u.addEventListener("click",()=>{this._container.removeChild(n)}),n.appendChild(u);const p=_=>{if(_.key==="Escape")try{this._container.removeChild(n)}catch{}document.removeEventListener("keydown",p)};document.addEventListener("keydown",p);const f=this._container.firstChild;this._container.insertBefore(n,f)}}x();var Fi;(function(a){a[a.None=0]="None",a[a.Canvas=1]="Canvas",a[a.All=2]="All"})(Fi||(Fi={}));class rs extends Ge{constructor(t){var e,i,n,o,h,u;super(),this.maxFps=Number.POSITIVE_INFINITY,this.scenes={},this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=I=>{gt.getInstance().fatal(I)},this._toaster=new Xo,this._timescale=1,this._isInitialized=!1,this._deferredGoTo=null,this._originalOptions={},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._loadingComplete=!1,this._isReady=!1,this._isReadyPromise=new Promise(I=>{this._isReadyResolve=I}),this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],t={...rs._DEFAULT_ENGINE_OPTIONS,...t},this._originalOptions=t,b.freeze(),this.browser=new vi(window,document);const p=new xr;if(!t.suppressMinimumBrowserFeatureDetection&&!(this._compatible=p.test())){const I=document.createElement("div");if(I.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(I),p.failedTests.forEach(function(k){const j=document.createElement("div");j.innerText="Browser feature missing "+k,document.body.appendChild(j)}),t.canvasElementId){const k=document.getElementById(t.canvasElementId);k&&k.parentElement.removeChild(k)}return}else this._compatible=!0;console.log&&!t.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${Qa})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),t.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=gt.getInstance(),this._logger.defaultLevel===Pt.Debug&&p.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=t.canvasElementId,t.canvasElementId?(this._logger.debug("Using Canvas element specified: "+t.canvasElementId),this.canvas=document.getElementById(t.canvasElementId)):t.canvasElement?(this._logger.debug("Using Canvas element specified:",t.canvasElement),this.canvas=t.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let f=(e=t.displayMode)!==null&&e!==void 0?e:Ft.Fixed;t.width&&t.height||t.viewport?(t.displayMode===void 0&&(f=Ft.Fixed),this._logger.debug("Engine viewport is size "+t.width+" x "+t.height)):t.displayMode||(this._logger.debug("Engine viewport is fit"),f=Ft.FitScreen),this._originalDisplayMode=f;let _=b.isEnabled("use-canvas-context");if(!_)try{this.graphicsContext=new Ws({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})}catch(I){this._logger.warn(`Excalibur could not load webgl for some reason (${I.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/webgl`),_=!0}_&&(this.graphicsContext=new fs({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})),this.screen=new Hs({canvas:this.canvas,context:this.graphicsContext,antialiasing:(i=t.antialiasing)!==null&&i!==void 0?i:!0,browser:this.browser,viewport:(n=t.viewport)!==null&&n!==void 0?n:t.width&&t.height?{width:t.width,height:t.height}:Wi.SVGA,resolution:t.resolution,displayMode:f,pixelRatio:t.suppressHiDPIScaling?1:(o=t.pixelRatio)!==null&&o!==void 0?o:null}),Rt.filtering=t.antialiasing?ae.Blended:ae.Pixel,t.backgroundColor&&(this.backgroundColor=t.backgroundColor.clone()),this.maxFps=(h=t.maxFps)!==null&&h!==void 0?h:this.maxFps,this.fixedUpdateFps=(u=t.fixedUpdateFps)!==null&&u!==void 0?u:this.fixedUpdateFps,this.clock=new Hr({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:I=>this.onFatalException(I)}),this.enableCanvasTransparency=t.enableCanvasTransparency,this._loader=new _s,this._loader.wireEngine(this),this.debug=new Zo(this),this._initialize(t),this.rootScene=this.currentScene=new ln,this.addScene("root",this.rootScene),window.___EXCALIBUR_DEVTOOL=this}get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(t){this.graphicsContext.snapToPixel=t}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}off(t,e){super.off(t,e)}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:t}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:e,showPlayerMessage:i}=this._originalOptions.configurePerformanceCanvas2DFallback;if(e===void 0&&(e=rs._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),i===void 0&&(i=rs._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!b.isEnabled("use-canvas-context")&&t&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===e.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let n=0;for(let h=0;h<this._fpsSamples.length;h++)n+=this._fpsSamples[h];const o=n/this._fpsSamples.length;this._fpsSamples.length===e.numberOfFrames&&o<=e.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),i&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var t,e,i;const n=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(n,this.canvas),this.canvas=n;const o=this._originalOptions,h=this._originalDisplayMode;this.graphicsContext=new fs({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:o.antialiasing,backgroundColor:o.backgroundColor,snapToPixel:o.snapToPixel,useDrawSorting:o.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new Hs({canvas:this.canvas,context:this.graphicsContext,antialiasing:(t=o.antialiasing)!==null&&t!==void 0?t:!0,browser:this.browser,viewport:(e=o.viewport)!==null&&e!==void 0?e:o.width&&o.height?{width:o.width,height:o.height}:Wi.SVGA,resolution:o.resolution,displayMode:h,pixelRatio:o.suppressHiDPIScaling?1:(i=o.pixelRatio)!==null&&i!==void 0?i:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const u=o&&o.pointerScope===Ms.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(u,this),this.input.pointers.init()}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(t){if(t<=0){gt.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=t}addTimer(t){return this.currentScene.addTimer(t)}removeTimer(t){return this.currentScene.removeTimer(t)}addScene(t,e){this.scenes[t]&&this._logger.warn("Scene",t,"already exists overwriting"),this.scenes[t]=e}removeScene(t){if(t instanceof ln)for(const e in this.scenes)this.scenes.hasOwnProperty(e)&&this.scenes[e]===t&&delete this.scenes[e];typeof t=="string"&&delete this.scenes[t]}add(t){if(arguments.length===2){this.addScene(arguments[0],arguments[1]);return}this._deferredGoTo&&this.scenes[this._deferredGoTo]?this.scenes[this._deferredGoTo].add(t):this.currentScene.add(t)}remove(t){t instanceof se&&this.currentScene.remove(t),t instanceof ln&&this.removeScene(t),typeof t=="string"&&this.removeScene(t)}goToScene(t,e){if(!this.isInitialized){this._deferredGoTo=t;return}if(this.scenes[t]){const i=this.currentScene,n=this.scenes[t];if(this._logger.debug("Going to scene:",t),this.currentScene.isInitialized){const h={engine:this,previousScene:i,nextScene:n};this.currentScene._deactivate.apply(this.currentScene,[h,n]),this.currentScene.eventDispatcher.emit("deactivate",new Us(h,this.currentScene))}this.currentScene=n,this.screen.setCurrentCamera(n.camera),this.currentScene._initialize(this);const o={engine:this,previousScene:i,nextScene:n,data:e};this.currentScene._activate.apply(this.currentScene,[o,n]),this.currentScene.eventDispatcher.emit("activate",new gs(o,this.currentScene))}else this._logger.error("Scene",t,"does not exist!")}screenToWorldCoordinates(t){return this.screen.screenToWorldCoordinates(t)}worldToScreenCoordinates(t){return this.screen.worldToScreenCoordinates(t)}_initialize(t){this.pageScrollPreventionMode=t.scrollPreventionMode;const e=t&&t.pointerScope===Ms.Document?document:this.canvas;this.input={keyboard:new Wo,pointers:new mn(e,this),gamepads:new Ps},this.input.keyboard.init(),this.input.pointers.init(),this.input.gamepads.init();let i,n;typeof document.hidden<"u"?(i="hidden",n="visibilitychange"):"msHidden"in document?(i="msHidden",n="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",n="webkitvisibilitychange"),this.browser.document.on(n,()=>{document[i]?(this.eventDispatcher.emit("hidden",new Ns(this)),this._logger.debug("Window hidden")):(this.eventDispatcher.emit("visible",new Tn(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!t.canvasElement&&document.body.appendChild(this.canvas)}onInitialize(t){}setAntialiasing(t){this.screen.antialiasing=t}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}_overrideInitialize(t){if(!this.isInitialized)if(this.onInitialize(t),super.emit("initialize",new Yi(t,this)),this._isInitialized=!0,this._deferredGoTo){const e=this._deferredGoTo;this._deferredGoTo=null,this.goToScene(e)}else this.goToScene("root")}_update(t){if(!this.ready){this._loader.update(this,t),this.input.keyboard.update(),this.input.gamepads.update();return}this._preupdate(t),this.currentScene.update(this,t),this._postupdate(t),this.input.keyboard.update(),this.input.gamepads.update()}_preupdate(t){this.emit("preupdate",new ii(this,t,this)),this.onPreUpdate(this,t)}onPreUpdate(t,e){}_postupdate(t){this.emit("postupdate",new Oe(this,t,this)),this.onPostUpdate(this,t)}onPostUpdate(t,e){}_draw(t){if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this._predraw(this.graphicsContext,t),!this._isReady){this._loader.canvas.draw(this.graphicsContext,0,0),this.graphicsContext.flush();return}this.graphicsContext.backgroundColor=this.backgroundColor,this.currentScene.draw(this.graphicsContext,t),this._postdraw(this.graphicsContext,t),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(t,e){this.emit("predraw",new xi(t,e,this)),this.onPreDraw(t,e)}onPreDraw(t,e){}_postdraw(t,e){this.emit("postdraw",new cs(t,e,this)),this.onPostDraw(t,e)}onPostDraw(t,e){}showDebug(t){this._isDebug=t}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return this._loadingComplete}get ready(){return this._isReady}isReady(){return this._isReadyPromise}async start(t){if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");return t&&(this.screen.pushResolutionAndViewport(),this.screen.resolution=this.screen.viewport,this.screen.applyResolutionAndViewport(),this._loader=t,this._loader.suppressPlayButton=this._suppressPlayButton||this._loader.suppressPlayButton,this._loader.wireEngine(this)),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),t&&(await this.load(this._loader),this._loadingComplete=!0,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport()),this._loadingComplete=!0,this._overrideInitialize(this),this._isReady=!0,this._isReadyResolve(),this.emit("start",new ur(this)),this._isReadyPromise}_mainloop(t){this.emit("preframe",new Sn(this,this.stats.prevFrame));const e=t*this.timescale;this.currentFrameElapsedMs=e;const i=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=i,this.stats.currFrame.delta=e,this.stats.currFrame.fps=this.clock.fpsSampler.fps,Zt.clear();const n=this.clock.now(),o=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=e;this._lagMs>=o;)this._update(o),this._lagMs-=o;else this._update(e);const h=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(e);const u=this.clock.now();this.stats.currFrame.duration.update=h-n,this.stats.currFrame.duration.draw=u-h,this.stats.currFrame.graphics.drawnImages=Zt.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=Zt.DrawCallCount,this.emit("postframe",new ds(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()}stop(){this.clock.isRunning()&&(this.emit("stop",new pr(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(t=!1){return new Promise(i=>{this._screenShotRequests.push({preserveHiDPIResolution:t,resolve:i})})}_checkForScreenShots(){for(const t of this._screenShotRequests){const e=t.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,i=t.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,n=document.createElement("canvas");n.width=e,n.height=i,n.getContext("2d").drawImage(this.canvas,0,0,e,i);const h=new Image,u=n.toDataURL("image/png");h.src=u,t.resolve(h)}this._screenShotRequests.length=0}async load(t){try{await t.load()}catch(e){this._logger.error("Error loading resources, things may not behave properly",e),await Promise.resolve()}}}rs._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!0,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,pointerScope:Ms.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,scrollPreventionMode:Fi.Canvas,backgroundColor:W.fromHex("#2185d0")};class Ca extends Ai{constructor(t){super(t),this._font=new We,this._text=new nn({text:"",font:this._font});const{text:e,pos:i,x:n,y:o,spriteFont:h,font:u,color:p}=t;this.pos=i??(n&&o?L(n,o):this.pos),this.text=e??this.text,this.font=u??this.font,this.spriteFont=h??this.spriteFont,this._text.color=p??this.color;const f=this.get(Ae);f.anchor=B.Zero,f.use(this._text)}get font(){return this._font}set font(t){this._font=t,this._text.font=t}get text(){return this._text.text}set text(t){this._text.text=t}get color(){return this._text.color}set color(t){this._text&&(this._text.color=t)}get opacity(){return this._text.opacity}set opacity(t){this._text.opacity=t}get spriteFont(){return this._spriteFont}set spriteFont(t){t&&(this._spriteFont=t,this._text.font=this._spriteFont)}_initialize(t){super._initialize(t)}getTextWidth(){return this._text.width}}class l extends se{constructor(t,e,i,n){super([new st,new Ae({offset:i??B.Zero,onPostDraw:(k,j)=>this.draw(k,j)}),new nr(n)]),this.solid=!1,this._tileBounds=new ut,this._graphics=[],this._colliders=[],this.x=t,this.y=e,this.map=n,this._transform=this.get(st),this._isometricEntityComponent=this.get(nr);const o=this.map.tileWidth/2,h=this.map.tileHeight/2,u=(this.x-this.y)*o,p=(this.x+this.y)*h;this._transform.pos=L(u,p),this._isometricEntityComponent.elevation=0,this._gfx=this.get(Ae),this._gfx.visible=!1;const f=this.map.tileWidth,_=this.map.tileHeight,I=L(0,this.map.renderFromTopOfGraphic?_:0);this._gfx.localBounds=this._tileBounds=new ut({left:-f/2,top:-_,right:f/2,bottom:_}).translate(I)}getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t),this._gfx.visible=!0,this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let t=this._tileBounds.clone();for(const e of this._graphics){const i=L(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:e.height-this.map.tileHeight));t=t.combine(e.localBounds.translate(i))}return t}removeGraphic(t){const e=this._graphics.indexOf(t);e>-1&&this._graphics.splice(e,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const e=this._colliders.indexOf(t);e>-1&&this._colliders.splice(e,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(L(this.x,this.y))}get center(){return this.pos.add(L(0,this.map.tileHeight/2))}draw(t,e){const i=this.map.tileWidth/2;t.save(),t.translate(-i,0);for(const n of this._graphics)n.draw(t,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:n.height-this.map.tileHeight));t.restore()}}class s extends se{constructor(t){super([new st,new Mt({type:_t.Fixed}),new te,new Kn(f=>this.debug(f),!1)],t.name),this.renderFromTopOfGraphic=!1,this.graphicsOffset=L(0,0),this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:e,tileWidth:i,tileHeight:n,columns:o,rows:h,renderFromTopOfGraphic:u,graphicsOffset:p}=t;this.transform=this.get(st),e&&(this.transform.pos=e),this.collider=this.get(te),this.collider&&this.collider.set(this._composite=new Jt([])),this.renderFromTopOfGraphic=u??this.renderFromTopOfGraphic,this.graphicsOffset=p??this.graphicsOffset,this.tileWidth=i,this.tileHeight=n,this.columns=o,this.rows=h,this.tiles=new Array(o*h);for(let f=0;f<h;f++)for(let _=0;_<o;_++){const I=new l(_,f,this.graphicsOffset,this);this.tiles[_+f*o]=I,this.addChild(I)}}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const e=t.offset;return this._originalOffsets.set(t,e),e}}updateColliders(){this._composite.clearColliders();const t=this.get(st).pos;for(const e of this.tiles)if(e.solid)for(const i of e.getColliders()){const n=this._getOrSetColliderOriginalOffset(i);i.offset=this.tileToWorld(L(e.x,e.y)).sub(t).add(n).sub(L(this.tileWidth/2,this.tileHeight)),i.owner=this,this._composite.addCollider(i)}this.collider.update()}worldToTile(t){t=t.sub(this.transform.globalPos);const e=this.tileWidth/2,i=this.tileHeight/2;return L(~~((t.x/e+t.y/i)/2),~~((t.y/i-t.x/e)/2))}tileToWorld(t){const e=this.tileWidth/2,i=this.tileHeight/2,n=(t.x-t.y)*e,o=(t.x+t.y)*i;return L(n,o).add(this.transform.pos)}getTile(t,e){return t<0||e<0||t>=this.columns||e>=this.rows?null:this.tiles[t+e*this.columns]}getTileByPoint(t){const e=this.worldToTile(t);return this.getTile(e.x,e.y)}_getMaxZIndex(){let t=Number.NEGATIVE_INFINITY;for(const e of this.tiles){const i=e.get(st).z;i>t&&(t=i)}return t}debug(t){t.save(),t.z=this._getMaxZIndex()+.5;for(let e=0;e<this.rows+1;e++){const i=this.tileToWorld(L(0,e)),n=this.tileToWorld(L(this.columns,e));t.drawLine(i,n,W.Red,2)}for(let e=0;e<this.columns+1;e++){const i=this.tileToWorld(L(e,0)),n=this.tileToWorld(L(e,this.rows));t.drawLine(i,n,W.Red,2)}for(const e of this.tiles)t.drawCircle(this.tileToWorld(L(e.x,e.y)),3,W.Yellow);t.restore()}}class r{constructor(t,e){this._stopped=!1,this._sequenceBuilder=e,this._sequenceContext=new xs(t),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(t){this._actionQueue.update(t)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(t){return new r(t,this._sequenceBuilder)}}class c{constructor(t){this._actions=t}update(t){for(let e=0;e<this._actions.length;e++)this._actions[e].update(t)}isComplete(t){return this._actions.every(e=>e.isComplete(t))}reset(){this._actions.forEach(t=>t.reset())}stop(){this._actions.forEach(t=>t.stop())}}class g{static create(t,e){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(t))throw new Error(`Collision group ${t} already exists`);const i=new Ze(t,this._CURRENT_BIT,e!==void 0?e:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(t,i),i}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(t){return this._GROUPS.get(t)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}g._STARTING_BIT=1,g._MAX_GROUPS=32,g._CURRENT_GROUP=1,g._CURRENT_BIT=g._STARTING_BIT,g._GROUPS=new Map;function y(a){return!!a._initialize}function E(a){return!!a.onInitialize}function N(a){return!!a._preupdate}function J(a){return!!a.onPreUpdate}function ot(a){return!!a.onPostUpdate}function Tt(a){return!!a.onPostUpdate}function ee(a){return!!a.onPreDraw}function je(a){return!!a.onPostDraw}class Me{constructor(t,e=W.Magenta,i=!0){this.path=t,this.color=e,this.bustCache=i,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new Ii(t,"arraybuffer",i),this._transparentColor=e}async load(){const t=await this._resource.load();this._stream=new lr(t),this._gif=new An(this._stream,this._transparentColor);const e=this._gif.images.map(i=>new Rn(i.src,!1));return await Promise.all(e.map(i=>i.load())),this.data=this._textures=e}isLoaded(){return!!this.data}toSprite(t=0){return this._textures[t].toSprite()}toSpriteSheet(){const t=this._textures.map(e=>e.toSprite());return new ms({sprites:t})}toAnimation(t){const e=this.toSpriteSheet(),i=e.sprites.length;return this._animation=ji.fromSpriteSheet(e,q(0,i),t),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const Je=a=>a.reduce(function(t,e){return t*2+e},0),Ts=a=>{const t=[];for(let e=7;e>=0;e--)t.push(!!(a&1<<e));return t};class lr{constructor(t){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=e=>{const i=[];for(let n=0;n<e;n++)i.push(this.readByte());return i},this.read=e=>{let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(this.readByte());return i},this.readUnsigned=()=>{const e=this.readBytes(2);return(e[1]<<8)+e[0]},this.data=new Uint8Array(t),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const Xr=function(a,t){let e=0;const i=function(k){let j=0;for(let V=0;V<k;V++)t.charCodeAt(e>>3)&1<<(e&7)&&(j|=1<<V),e++;return j},n=[],o=1<<a,h=o+1;let u=a+1,p=[];const f=function(){p=[],u=a+1;for(let k=0;k<o;k++)p[k]=[k];p[o]=[],p[h]=null};let _,I;for(;;){if(I=_,_=i(u),_===o){f();continue}if(_===h)break;if(_<p.length)I!==o&&p.push(p[I].concat(p[_][0]));else{if(_!==p.length)throw new Error("Invalid LZW code.");p.push(p[I].concat(p[I][0]))}n.push.apply(n,p[_]),p.length===1<<u&&u<12&&u++}return n};class An{constructor(t,e=W.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=i=>{const n=[];for(let o=0;o<i;o++){const u="#"+this._st.readBytes(3).map(p=>{const f=p.toString(16);return f.length===1?"0"+f:f}).join("");n.push(u)}return n},this.readSubBlocks=()=>{let i,n;n="";do i=this._st.readByte(),n+=this._st.read(i);while(i!==0);return n},this.parseHeader=()=>{const i={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(i.sig=this._st.read(3),i.ver=this._st.read(3),i.sig!=="GIF")throw new Error("Not a GIF file.");i.width=this._st.readUnsigned(),i.height=this._st.readUnsigned();const n=Ts(this._st.readByte());i.gctFlag=n.shift(),i.colorRes=Je(n.splice(0,3)),i.sorted=n.shift(),i.globalColorTableSize=Je(n.splice(0,3)),i.bgColor=this._st.readByte(),i.pixelAspectRatio=this._st.readByte(),i.gctFlag&&(i.globalColorTable=this.parseColorTable(1<<i.globalColorTableSize+1),this.globalColorTable=i.globalColorTable),this._handler.hdr&&this._handler.hdr(i)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=i=>{const n=f=>{this.checkBytes.push(this._st.readByte());const _=Ts(this._st.readByte());f.reserved=_.splice(0,3),f.disposalMethod=Je(_.splice(0,3)),f.userInput=_.shift(),f.transparencyGiven=_.shift(),f.delayTime=this._st.readUnsigned(),f.transparencyIndex=this._st.readByte(),f.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(f)&&this.checkBytes.push(this._handler.gce)},o=f=>{f.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(f)&&this.checkBytes.push(this._handler.com)},h=f=>{this.checkBytes.push(this._st.readByte()),f.ptHeader=this._st.readBytes(12),f.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(f)&&this.checkBytes.push(this._handler.pte)},u=f=>{const _=k=>{this.checkBytes.push(this._st.readByte()),k.unknown=this._st.readByte(),k.iterations=this._st.readUnsigned(),k.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(k)&&this.checkBytes.push(this._handler.app)},I=k=>{k.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[k.identifier]&&this._handler.app[k.identifier](k)&&this.checkBytes.push(this._handler.app[k.identifier])};switch(this.checkBytes.push(this._st.readByte()),f.identifier=this._st.read(8),f.authCode=this._st.read(3),f.identifier){case"NETSCAPE":_(f);break;default:I(f);break}},p=f=>{f.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(f)&&this.checkBytes.push(this._handler.unknown)};switch(i.label=this._st.readByte(),i.label){case 249:i.extType="gce",n(i);break;case 254:i.extType="com",o(i);break;case 1:i.extType="pte",h(i);break;case 255:i.extType="app",u(i);break;default:i.extType="unknown",p(i);break}},this.parseImg=i=>{const n=(u,p)=>{const f=new Array(u.length),_=u.length/p,I=($,tt)=>{const U=u.slice(tt*p,(tt+1)*p);f.splice.apply(f,[$*p,p].concat(U))},k=[0,4,2,1],j=[8,8,4,2];let V=0;for(let $=0;$<4;$++)for(let tt=k[$];tt<_;tt+=j[$])I(tt,V),V++;return f};i.leftPos=this._st.readUnsigned(),i.topPos=this._st.readUnsigned(),i.width=this._st.readUnsigned(),i.height=this._st.readUnsigned();const o=Ts(this._st.readByte());i.lctFlag=o.shift(),i.interlaced=o.shift(),i.sorted=o.shift(),i.reserved=o.splice(0,2),i.lctSize=Je(o.splice(0,3)),i.lctFlag&&(i.lct=this.parseColorTable(1<<i.lctSize+1)),i.lzwMinCodeSize=this._st.readByte();const h=this.readSubBlocks();i.pixels=Xr(i.lzwMinCodeSize,h),i.interlaced&&(i.pixels=n(i.pixels,i.width)),this.frames.push(i),this.arrayToImage(i),this._handler.img&&this._handler.img(i)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const i={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(i.sentinel)){case"!":i.type="ext",this.parseExt(i);break;case",":i.type="img",this.parseImg(i);break;case";":i.type="eof",this._handler.eof&&this._handler.eof(i)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}i.type!=="eof"&&this.parseBlock()},this.arrayToImage=i=>{let n=0;const o=document.createElement("canvas");o.id=n.toString(),o.width=i.width,o.height=i.height,n++;const h=o.getContext("2d"),u=1;let p=0,f=0;for(let I=0;I<i.pixels.length;I++)f%i.width===0&&(p++,f=0),this.globalColorTable[i.pixels[I]]===this._transparentColor.toHex()?h.fillStyle="rgba(0, 0, 0, 0)":h.fillStyle=this.globalColorTable[i.pixels[I]],h.fillRect(f,p,u,u),f++;const _=new Image;_.src=o.toDataURL(),this.images.push(_)},this._st=t,this._handler={},this._transparentColor=e,this.parseHeader(),this.parseBlock()}}class Rs extends ue{constructor(t){super(),this.color=W.Black,this.thickness=1;const{start:e,end:i,color:n,thickness:o}=t;this.start=e,this.end=i,this.color=n??this.color,this.thickness=o??this.thickness;const{width:h,height:u}=ut.fromPoints([e,i]);this.width=h,this.height=u}_drawImage(t,e,i){t.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new Rs({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class Jr extends Ht{constructor(t){super(t),this.points=t.points,this.filtering=ae.Blended,this.rasterize()}get points(){return this._points}set points(t){this._points=t;const e=this.minPoint;this.width=this._points.reduce((i,n)=>Math.max(n.x,i),0)-e.x,this.height=this._points.reduce((i,n)=>Math.max(n.y,i),0)-e.y,this.flagDirty()}get minPoint(){const t=this._points.reduce((i,n)=>Math.min(n.x,i),1/0),e=this._points.reduce((i,n)=>Math.min(n.y,i),1/0);return L(t,e)}clone(){return new Jr({points:this.points.map(t=>t.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){if(this.points&&this.points.length){t.beginPath();const e=this.minPoint.negate(),i=this.points[0].add(e);t.moveTo(i.x,i.y),this.points.forEach(n=>{t.lineTo(n.x+e.x,n.y+e.y)}),t.lineTo(i.x,i.y),t.closePath(),this.color&&t.fill(),this.strokeColor&&t.stroke()}}}class Ea{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const t=new $t;return this._queue.push(t),t.promise}dequeue(t){this._queue.shift().resolve(t)}}class Ia{constructor(t){this._count=t,this._waitQueue=new Ea}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(t=1){if(t!==0){for(;t!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),t--;this._count+=t}}}const Qa="0.27.0";x()})();var ol=C.fWn,al=C.Ia8,ll=C.rqv,hl=C.hLI,cl=C.yyv,dl=C.tX5,H=C.vtX,ul=C.r7K,pl=C.lCh,gl=C.cE4,ml=C.fwF,Al=C.sce,fl=C._c7,vl=C.KUs,_l=C.Ajp,wl=C.RDh,bl=C._H9,yl=C.mxs,xl=C.OmD,Cl=C.kBf,El=C.C4F,Il=C.NQt,Bl=C.JjN,Ml=C.V1s,Pl=C.Xz7,Sl=C.Cdc,Tl=C.FKn,Rl=C.wTW,kl=C.SUY,Dl=C.ab2,Ll=C.GfZ,Gl=C.YMS,zl=C.oyv,Nl=C.aUb,jl=C.SdD,Ul=C.JUv,Fl=C.jEj,Ql=C.TFq,Ol=C.HDU,Yl=C.R_y,Vl=C.ydN,Zl=C.t50,Wl=C.s$$,ks=C.v2G,ht=C.Ilk,Hl=C.s9i,Xl=C.dxL,Jl=C.LLX,Kl=C.wA2,ql=C.R_p,$l=C.IQ$,th=C.I5F,eh=C.X8$,ih=C.FR6,sh=C.U8o,nh=C.kbG,rh=C.iS_,oh=C.cGG,ah=C.RPN,lh=C.skb,hh=C.SLU,ch=C.RdJ,dh=C.cNu,uh=C.gU7,ph=C.LSk,gh=C.Nmp,Wa=C.d1Y,mh=C.xrL,Ah=C.sRW,fh=C.cmV,vh=C.qWz,_h=C.N0Q,wh=C.q8b,Ha=C.ynB,bh=C.jT9,Ue=C.wAz,Xa=C.D4V,yh=C.N6H,xh=C.W1A,Ch=C.JHW,Eh=C.v2K,Ih=C.pBf,Bh=C.GMl,Mh=C.zW2,Ph=C.B0K,Sh=C.Nv7,Th=C.C_p,Rh=C.iqw,kh=C.MUA,Dh=C.xqU,Lh=C.pTp,Gh=C.vUK,zh=C.j9l,At=C.Zxw,Nh=C.Hdx,ft=C.Z$d,jh=C.iqV,Uh=C.o$7,Fh=C.olM,Qh=C.Zm$,Oh=C.$QH,Yh=C.i78,Vh=C.h6u,Zh=C.hts,Wh=C.j88,Hh=C.VME,Xh=C.nt,Jh=C.Ukr,Kh=C.zsu,qh=C.oA6,$h=C.TVh,tc=C.TwZ,ec=C.GTT,ic=C.xxj,sc=C.XdK,nc=C.Jmb,nt=C.cXo,rc=C.Dm5,Vt=C.IIB,oc=C.zI0,ac=C.LYD,lc=C.cEG,hc=C.SEl,cc=C.t9V,dc=C.SKZ,vt=C.__J,uc=C.RI$,pc=C.x12,gc=C.ccz,Ja=C.aNw,mc=C.xwn,Ac=C.dNK,fc=C.ini,vc=C.YdH,_c=C.y3G,wc=C.l57,bc=C.xn0,yc=C.t2V,xc=C.uxB,Cc=C.cpd,Ec=C.fiy,Ic=C.$XZ,Bc=C.uqK,Mc=C.STE,Pc=C.y$z,Sc=C.mAD,Tc=C.sOq,Rc=C.hUw,kc=C._0G,Dc=C.Sqs,Lc=C.hpZ,Fe=C.Vol,po=C.wIZ,Gc=C.cBi,zc=C.RFv,Nc=C.kfC,jc=C.mgq,Uc=C.YVA,Fc=C.Kgp,Qc=C.HH$,Oc=C.M_d,Yc=C.rgh,Vc=C.Ra6,Zc=C.KhR,Wc=C.BS5,Hc=C.xhz,Xc=C.xOq,Jc=C.a9j,Kc=C.bHk,qc=C.CgK,$c=C.cuY,td=C.kvE,ed=C.SBu,id=C.AE_,sd=C.ctO,nd=C.OLH,rd=C.kky,od=C.nSF,ad=C.zHn,ld=C.zwx,hd=C.AeJ,cd=C.hLz,dd=C.D9g,ud=C.wA,pd=C.jhr,gd=C.GVs,md=C._zO,Ad=C.w6$,fd=C.mhV,oo=C.MOD,vd=C.kwd,_d=C.Lmr,Ds=C.xsS,wd=C.lLr,bd=C.Z$r,yd=C.IXb,xd=C.SGH,Cd=C.SMj,Ed=C.L34,Id=C.exe,Pe=C.bnF,Bd=C.MFA,qe=C.$uU,Md=C.jyi,Pd=C.E03,Sd=C.V6q,Td=C.rg2,Rd=C.DVW,kd=C.nVo,Dd=C.F6N,Ld=C.xP7,Gd=C.Odq,zd=C.Zif,Nd=C.ZGJ,jd=C.MJk,Ka=C.xvT,so=C.PHM,Ud=C.dpR,Fd=C.n9L,Qd=C.KwO,Bn=C.B7y,Od=C.x7r,Yd=C.wx7,Vd=C.Uvn,Zd=C.OFT,Wd=C.xzN,Hd=C.M5Z,Xd=C.ZrN,A=C.OWs,Jd=C.dF9,Kd=C.oZy,qd=C.rD2,$d=C.VHo,tu=C.ohE,eu=C.R$E,iu=C.q3I,su=C.Pab,nu=C.uZ5,ru=C.McK,ou=C.F9c,au=C.k0b,lu=C.hnT,hu=C.RSJ,cu=C.Mku,du=C.h90,uu=C.rms,pu=C.ErP,gu=C.aVg,mu=C.lPc,Au=C.Z8E,fu=C._N2,vu=C.yFn,_u=C.lNv,wu=C.cu9,bu=C.MZQ,yu=C.FUM,xu=C.BxR,Cu=C.vdf,Eu=C.iaL,Iu=C.w6H,Bu=C.Q4c,Mu=C.Xxe,Pu=C.Uxb,Su=C.Yr5,it=C.Bhw,Tu=C.yOA;const Ru=Object.freeze(Object.defineProperty({__proto__:null,ActionContext:ol,ActionQueue:al,ActionSequence:ll,ActionsComponent:hl,ActionsSystem:cl,ActivateEvent:dl,Actor:H,AddedComponent:ul,AddedEntity:pl,AffineMatrix:gl,Animation:ml,AnimationDirection:Al,AnimationStrategy:fl,ArcadeSolver:vl,AudioContextFactory:_l,Axis:wl,BaseAlign:bl,Blink:yl,BodyComponent:xl,BoundingBox:Cl,BroadphaseStrategy:El,BrowserComponent:Il,BrowserEvents:Bl,Camera:Ml,Canvas:Pl,Circle:Sl,CircleCollider:Tl,Class:Rl,Clock:kl,ClosestLine:Dl,ClosestLineJumpTable:Ll,Collider:Gl,ColliderComponent:zl,CollisionContact:Nl,CollisionEndEvent:jl,CollisionGroup:Ul,CollisionGroupManager:Fl,CollisionJumpTable:Ql,CollisionPostSolveEvent:Ol,CollisionPreSolveEvent:Yl,CollisionResolutionStrategy:Vl,CollisionStartEvent:Zl,CollisionSystem:Wl,CollisionType:ks,Color:ht,ColorBlindFlags:Hl,ColorBlindnessMode:Xl,ColorBlindnessPostProcessor:Jl,Component:Kl,CompositeCollider:ql,Configurable:$l,ConsoleAppender:th,ContactConstraintPoint:eh,ContactEndEvent:ih,ContactStartEvent:sh,CoordPlane:nh,DeactivateEvent:rh,Debug:oh,DebugGraphicsComponent:ah,DebugSystem:lh,DebugText:hh,DegreeOfFreedom:ch,Delay:dh,Detector:uh,Die:ph,Direction:gh,DisplayMode:Wa,DynamicTree:mh,DynamicTreeCollisionProcessor:Ah,EX_VERSION:fh,EaseBy:vh,EaseTo:_h,EasingFunctions:wh,EdgeCollider:Ha,ElasticToActorStrategy:bh,EmitterType:Ue,Engine:Xa,EnterTriggerEvent:yh,EnterViewPortEvent:xh,Entity:Ch,EntityManager:Eh,EventDispatcher:Ih,EventTypes:Bh,Events:Mh,ExResponse:Ph,ExcaliburGraphicsContext2DCanvas:Sh,ExcaliburGraphicsContextWebGL:Th,ExcaliburWebGLContextAccessor:Rh,ExitTriggerEvent:kh,ExitViewPortEvent:Dh,Fade:Lh,Flags:Gh,Follow:zh,Font:At,FontStyle:Nh,FontUnit:ft,FpsSampler:jh,FrameStats:Uh,Future:Fh,GameEvent:Qh,GameStartEvent:Oh,GameStopEvent:Yh,GamepadAxisEvent:Vh,GamepadButtonEvent:Zh,GamepadConnectEvent:Wh,GamepadDisconnectEvent:Hh,Gif:Xh,GlobalCoordinates:Jh,Graphic:Kh,GraphicsComponent:qh,GraphicsGroup:$h,GraphicsLayer:tc,GraphicsLayers:ec,GraphicsSystem:ic,HiddenEvent:sc,ImageFiltering:nc,ImageSource:nt,InitializeEvent:rc,Input:Vt,Integrator:oc,IsometricEntityComponent:ac,IsometricEntitySystem:lc,IsometricMap:hc,IsometricTile:cc,KillEvent:dc,Label:vt,LimitCameraBoundsStrategy:uc,Line:pc,LineSegment:gc,Loader:Ja,LockCameraToActorAxisStrategy:mc,LockCameraToActorStrategy:Ac,LogLevel:fc,Logger:vc,Matrix:_c,MatrixLocations:wc,MediaEvent:bc,Meet:yc,MotionComponent:xc,MotionSystem:Cc,MoveBy:Ec,MoveTo:Ic,NativeSoundEvent:Bc,NativeSoundProcessedEvent:Mc,Observable:Pc,OffscreenSystem:Sc,Pair:Tc,ParallaxComponent:Rc,ParallelActions:kc,ParseGif:Dc,Particle:Lc,ParticleEmitter:Fe,Physics:po,PhysicsStats:Gc,PointerComponent:zc,PointerSystem:Nc,Polygon:jc,PolygonCollider:Uc,Pool:Fc,PostCollisionEvent:Qc,PostDebugDrawEvent:Oc,PostDrawEvent:Yc,PostFrameEvent:Vc,PostKillEvent:Zc,PostUpdateEvent:Wc,PreCollisionEvent:Hc,PreDebugDrawEvent:Xc,PreDrawEvent:Jc,PreFrameEvent:Kc,PreKillEvent:qc,PreUpdateEvent:$c,Projection:td,QuadIndexBuffer:ed,Query:id,QueryManager:sd,RadiusAroundActorStrategy:nd,Random:rd,Raster:od,Ray:ad,RealisticSolver:ld,Rectangle:hd,RemovedComponent:cd,RemovedEntity:dd,Repeat:ud,RepeatForever:pd,Resolution:gd,Resource:md,RotateBy:Ad,RotateTo:fd,RotationType:oo,ScaleBy:vd,ScaleTo:_d,Scene:Ds,Screen:wd,ScreenAppender:bd,ScreenElement:yd,ScreenShader:xd,ScrollPreventionMode:Cd,Semaphore:Ed,Shader:Id,Shape:Pe,Side:Bd,Sound:qe,Sprite:Md,SpriteFont:Pd,SpriteSheet:Sd,StandardClock:Td,StateMachine:Rd,StrategyContainer:kd,Stream:Dd,System:Ld,SystemManager:Gd,SystemType:zd,TagComponent:Nd,TestClock:jd,Text:Ka,TextAlign:so,TextureLoader:Ud,Tile:Fd,TileMap:Qd,Timer:Bn,Toaster:Od,Transform:Yd,TransformComponent:Vd,TreeNode:Zd,Trigger:Wd,TwoPI:Hd,Util:Xd,Vector:A,VectorView:Jd,VertexBuffer:Kd,VertexLayout:qd,VisibleEvent:$d,WebAudio:tu,WebAudioInstance:eu,World:iu,canonicalizeAngle:su,clamp:nu,createId:ru,frac:ou,hasGraphicsTick:au,hasOnInitialize:lu,hasOnPostUpdate:hu,hasOnPreUpdate:cu,hasPostDraw:du,hasPreDraw:uu,has_initialize:pu,has_postupdate:gu,has_preupdate:mu,isAddedComponent:Au,isAddedSystemEntity:fu,isRemoveSystemEntity:vu,isRemovedComponent:_u,isScreenElement:wu,maxMessages:bu,obsolete:yu,pixelSnapEpsilon:xu,randomInRange:Cu,randomIntInRange:Eu,range:Iu,resetObsoleteCounter:Bu,sign:Mu,toDegrees:Pu,toRadians:Su,vec:it,webgl:Tu},Symbol.toStringTag,{value:"Module"}));function ku(w){if(w.__esModule)return w;var M=w.default;if(typeof M=="function"){var d=function m(){if(this instanceof m){var v=[null];v.push.apply(v,arguments);var x=Function.bind.apply(M,v);return new x}return M.apply(this,arguments)};d.prototype=M.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(w).forEach(function(m){var v=Object.getOwnPropertyDescriptor(w,m);Object.defineProperty(d,m,v.get?v:{enumerable:!0,get:function(){return w[m]}})}),d}var Du={exports:{}};const Lu=ku(Ru);/*! For license information please see dev-tools.js.LICENSE.txt */(function(w,M){(function(d,m){w.exports=m(Lu)})(self,d=>(()=>{var m={"./picker-system.ts":(R,G,z)=>{z.r(G),z.d(G,{PickerSystem:()=>et});var Q=z("excalibur");class et extends Q.System{constructor(){super(...arguments),this.types=["ex.transform"],this.systemType=Q.SystemType.Update,this.priority=99,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map}initialize(P){this._engine=P.engine,this._receiver=this._engine.input.pointers}addPointerToEntity(P,Y){if(!this.currentFrameEntityToPointers.has(P.id))return void this.currentFrameEntityToPointers.set(P.id,[Y]);const Z=this.currentFrameEntityToPointers.get(P.id);this.currentFrameEntityToPointers.set(P.id,Z.concat(Y))}_processPointerToEntity(P){var Y;let Z,K,q;for(const ct of P)if(!(ct instanceof Q.Particle)){if(Z=ct.get(Q.TransformComponent),K=ct.get(Q.ColliderComponent),K){const dt=K.get();if(dt)for(const[B,L]of this._receiver.currentFramePointerCoords.entries())dt.contains(Z.coordPlane===Q.CoordPlane.World?L.worldPos:L.screenPos)&&this.addPointerToEntity(ct,B)}if(q=ct.get(Q.GraphicsComponent),q){const dt=q.localBounds.transform(Z.get().matrix);for(const[B,L]of this._receiver.currentFramePointerCoords.entries())dt.contains(Z.coordPlane===Q.CoordPlane.World?L.worldPos:L.screenPos)&&this.addPointerToEntity(ct,B)}if(!(!((Y=q==null?void 0:q.current)===null||Y===void 0)&&Y.length)&&!(K!=null&&K.get())||ct instanceof Q.ParticleEmitter){const dt=Q.BoundingBox.fromDimension(100,100).transform(Z.get().matrix);for(const[B,L]of this._receiver.currentFramePointerCoords.entries())dt.contains(Z.coordPlane===Q.CoordPlane.World?L.worldPos:L.screenPos)&&this.addPointerToEntity(ct,B)}}}update(P,Y){this._processPointerToEntity(P),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear()}}},"./node_modules/tweakpane/dist/tweakpane.js":function(R,G){(function(z){class Q{constructor(s){this.controller_=s}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(s){this.controller_.viewProps.set("disabled",s)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(s){this.controller_.viewProps.set("hidden",s)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class et{constructor(s){this.target=s}}class S extends et{constructor(s,r,c,g){super(s),this.value=r,this.presetKey=c,this.last=g==null||g}}class P extends et{constructor(s,r,c){super(s),this.value=r,this.presetKey=c}}class Y extends et{constructor(s,r){super(s),this.expanded=r}}class Z extends et{constructor(s,r){super(s),this.index=r}}function K(l){return l==null}function q(l,s){if(l.length!==s.length)return!1;for(let r=0;r<l.length;r++)if(l[r]!==s[r])return!1;return!0}const ct={alreadydisposed:()=>"View has been already disposed",invalidparams:l=>`Invalid parameters for '${l.name}'`,nomatchingcontroller:l=>`No matching controller for '${l.key}'`,nomatchingview:l=>`No matching view for '${JSON.stringify(l.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:l=>`Property '${l.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class dt{constructor(s){var r;this.message=(r=ct[s.type](s.context))!==null&&r!==void 0?r:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=s.type}static alreadyDisposed(){return new dt({type:"alreadydisposed"})}static notBindable(){return new dt({type:"notbindable"})}static propertyNotFound(s){return new dt({type:"propertynotfound",context:{name:s}})}static shouldNeverHappen(){return new dt({type:"shouldneverhappen"})}}class B{constructor(s,r,c){this.obj_=s,this.key_=r,this.presetKey_=c??r}static isBindable(s){return s!==null&&typeof s=="object"}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(s){this.obj_[this.key_]=s}writeProperty(s,r){const c=this.read();if(!B.isBindable(c))throw dt.notBindable();if(!(s in c))throw dt.propertyNotFound(s);c[s]=r}}class L extends Q{get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get title(){var s;return(s=this.controller_.valueController.props.get("title"))!==null&&s!==void 0?s:""}set title(s){this.controller_.valueController.props.set("title",s)}on(s,r){const c=r.bind(this);return this.controller_.valueController.emitter.on(s,()=>{c(new et(this))}),this}}class Pt{constructor(){this.observers_={}}on(s,r){let c=this.observers_[s];return c||(c=this.observers_[s]=[]),c.push({handler:r}),this}off(s,r){const c=this.observers_[s];return c&&(this.observers_[s]=c.filter(g=>g.handler!==r)),this}emit(s,r){const c=this.observers_[s];c&&c.forEach(g=>{g.handler(r)})}}const gt="tp";function bt(l){return(s,r)=>[gt,"-",l,"v",s?`_${s}`:"",r?`-${r}`:""].join("")}function Gt(l){return l.rawValue}function W(l,s){var r,c;l.emitter.on("change",(r=Gt,c=s,g=>c(r(g)))),s(l.rawValue)}function Et(l,s,r){W(l.value(s),r)}function wt(l,s){return r=>{(function(c,g,y){y?c.classList.add(g):c.classList.remove(g)})(l,s,r)}}function ut(l,s){W(l,r=>{s.textContent=r??""})}const $t=bt("btn");class ei{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add($t()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("button");c.classList.add($t("b")),r.viewProps.bindDisabled(c),this.element.appendChild(c),this.buttonElement=c;const g=s.createElement("div");g.classList.add($t("t")),ut(r.props.value("title"),g),this.buttonElement.appendChild(g)}}class de{constructor(s,r){this.emitter=new Pt,this.onClick_=this.onClick_.bind(this),this.props=r.props,this.viewProps=r.viewProps,this.view=new ei(s,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ci{constructor(s,r){var c;this.constraint_=r==null?void 0:r.constraint,this.equals_=(c=r==null?void 0:r.equals)!==null&&c!==void 0?c:(g,y)=>g===y,this.emitter=new Pt,this.rawValue_=s}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(s){this.setRawValue(s,{forceEmit:!1,last:!0})}setRawValue(s,r){const c=r??{forceEmit:!1,last:!0},g=this.constraint_?this.constraint_.constrain(s):s;(!this.equals_(this.rawValue_,g)||c.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=g,this.emitter.emit("change",{options:c,rawValue:g,sender:this}))}}class cr{constructor(s){this.emitter=new Pt,this.value_=s}get rawValue(){return this.value_}set rawValue(s){this.setRawValue(s,{forceEmit:!1,last:!0})}setRawValue(s,r){const c=r??{forceEmit:!1,last:!0};(this.value_!==s||c.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=s,this.emitter.emit("change",{options:c,rawValue:this.value_,sender:this}))}}function re(l,s){const r=s==null?void 0:s.constraint,c=s==null?void 0:s.equals;return r||c?new ci(l,s):new cr(l)}class It{constructor(s){this.emitter=new Pt,this.valMap_=s;for(const r in this.valMap_)this.valMap_[r].emitter.on("change",()=>{this.emitter.emit("change",{key:r,sender:this})})}static createCore(s){return Object.keys(s).reduce((r,c)=>Object.assign(r,{[c]:re(s[c])}),{})}static fromObject(s){const r=this.createCore(s);return new It(r)}get(s){return this.valMap_[s].rawValue}set(s,r){this.valMap_[s].rawValue=r}value(s){return this.valMap_[s]}}function Qe(l){return s=>r=>{if(!s&&r===void 0)return{succeeded:!1,value:void 0};if(s&&r===void 0)return{succeeded:!0,value:void 0};const c=l(r);return c!==void 0?{succeeded:!0,value:c}:{succeeded:!1,value:void 0}}}function _e(l){return{custom:s=>Qe(s)(l),boolean:Qe(s=>typeof s=="boolean"?s:void 0)(l),number:Qe(s=>typeof s=="number"?s:void 0)(l),string:Qe(s=>typeof s=="string"?s:void 0)(l),function:Qe(s=>typeof s=="function"?s:void 0)(l),constant:s=>Qe(r=>r===s?s:void 0)(l),raw:Qe(s=>s)(l),object:s=>Qe(r=>{if((c=r)!==null&&typeof c=="object")return function(g,y){return Object.keys(y).reduce((E,N)=>{if(E===void 0)return;const J=(0,y[N])(g[N]);return J.succeeded?Object.assign(Object.assign({},E),{[N]:J.value}):void 0},{})}(r,s);var c})(l),array:s=>Qe(r=>{if(Array.isArray(r))return c=s,r.reduce((g,y)=>{if(g===void 0)return;const E=c(y);return E.succeeded&&E.value!==void 0?[...g,E.value]:void 0},[]);var c})(l)}}const yt={optional:_e(!0),required:_e(!1)};function oe(l,s){const r=yt.required.object(s)(l);return r.succeeded?r.value:void 0}const dr=bt(""),Gs={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Bt{constructor(s){this.parent_=null,this.blade=s.blade,this.view=s.view,this.viewProps=s.viewProps;const r=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(c=>{r.classList.remove(dr(void 0,Gs[c]))}),this.blade.get("positions").forEach(c=>{r.classList.add(dr(void 0,Gs[c]))})}),this.viewProps.handleDispose(()=>{(function(c){c&&c.parentElement&&c.parentElement.removeChild(c)})(r)})}get parent(){return this.parent_}}const De="http://www.w3.org/2000/svg";function hs(l){l.offsetHeight}function zs(l){return l.ontouchstart!==void 0}function ur(){return new Function("return this")().document}const pr={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function xi(l,s){const r=l.createElementNS(De,"svg");return r.innerHTML=pr[s],r}function cs(l,s,r){l.insertBefore(s,l.children[r])}function Mn(l){l.parentElement&&l.parentElement.removeChild(l)}function Pn(l){for(;l.children.length>0;)l.removeChild(l.children[0])}function ii(l){return l.relatedTarget?l.relatedTarget:"explicitOriginalTarget"in l?l.explicitOriginalTarget:null}const Oe=bt("lbl");class Sn{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Oe()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("div");c.classList.add(Oe("l")),Et(r.props,"label",y=>{K(y)?this.element.classList.add(Oe(void 0,"nol")):(this.element.classList.remove(Oe(void 0,"nol")),function(E){for(;E.childNodes.length>0;)E.removeChild(E.childNodes[0])}(c),c.appendChild(function(E,N){const J=E.createDocumentFragment();return N.split(`
`).map(ot=>E.createTextNode(ot)).forEach((ot,Tt)=>{Tt>0&&J.appendChild(E.createElement("br")),J.appendChild(ot)}),J}(s,y)))}),this.element.appendChild(c),this.labelElement=c;const g=s.createElement("div");g.classList.add(Oe("v")),this.element.appendChild(g),this.valueElement=g}}class ds extends Bt{constructor(s,r){const c=r.valueController.viewProps;super(Object.assign(Object.assign({},r),{view:new Sn(s,{props:r.props,viewProps:c}),viewProps:c})),this.props=r.props,this.valueController=r.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const gr={id:"button",type:"blade",accept(l){const s=yt,r=oe(l,{title:s.required.string,view:s.required.constant("button"),label:s.optional.string});return r?{params:r}:null},controller:l=>new ds(l.document,{blade:l.blade,props:It.fromObject({label:l.params.label}),valueController:new de(l.document,{props:It.fromObject({title:l.params.title}),viewProps:l.viewProps})}),api:l=>l.controller instanceof ds&&l.controller.valueController instanceof de?new L(l.controller):null};class Ci extends Bt{constructor(s){super(s),this.value=s.value}}function Qi(){return new It({positions:re([],{equals:q})})}class Oi extends It{constructor(s){super(s)}static create(s){const r={completed:!0,expanded:s,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},c=It.createCore(r);return new Oi(c)}get styleExpanded(){var s;return(s=this.get("temporaryExpanded"))!==null&&s!==void 0?s:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const s=this.get("expandedHeight");return this.get("shouldFixHeight")&&!K(s)?`${s}px`:"auto"}bindExpandedClass(s,r){const c=()=>{this.styleExpanded?s.classList.add(r):s.classList.remove(r)};Et(this,"expanded",c),Et(this,"temporaryExpanded",c)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Tn(l,s){s.style.height=l.styleHeight}function Ns(l,s){l.value("expanded").emitter.on("beforechange",()=>{l.set("completed",!1),K(l.get("expandedHeight"))&&l.set("expandedHeight",function(r,c){let g=0;return function(y,E){const N=y.style.transition;y.style.transition="none",E(),y.style.transition=N}(c,()=>{r.set("expandedHeight",null),r.set("temporaryExpanded",!0),hs(c),g=c.clientHeight,r.set("temporaryExpanded",null),hs(c)}),g}(l,s)),l.set("shouldFixHeight",!0),hs(s)}),l.emitter.on("change",()=>{Tn(l,s)}),Tn(l,s),s.addEventListener("transitionend",r=>{r.propertyName==="height"&&l.cleanUpTransition()})}class di extends Q{constructor(s,r){super(s),this.rackApi_=r}}class ui{constructor(s){this.emitter=new Pt,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=s}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(s){for(const r of this.allItems())if(s(r))return r;return null}includes(s){return this.cache_.has(s)}add(s,r){if(this.includes(s))throw dt.shouldNeverHappen();const c=r!==void 0?r:this.items_.length;this.items_.splice(c,0,s),this.cache_.add(s);const g=this.extract_(s);g&&(g.emitter.on("add",this.onSubListAdd_),g.emitter.on("remove",this.onSubListRemove_),g.allItems().forEach(y=>{this.cache_.add(y)})),this.emitter.emit("add",{index:c,item:s,root:this,target:this})}remove(s){const r=this.items_.indexOf(s);if(r<0)return;this.items_.splice(r,1),this.cache_.delete(s);const c=this.extract_(s);c&&(c.emitter.off("add",this.onSubListAdd_),c.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:r,item:s,root:this,target:this})}onSubListAdd_(s){this.cache_.add(s.item),this.emitter.emit("add",{index:s.index,item:s.item,root:this,target:s.target})}onSubListRemove_(s){this.cache_.delete(s.item),this.emitter.emit("remove",{index:s.index,item:s.item,root:this,target:s.target})}}class us extends Q{constructor(s){super(s),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new Pt,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(s){const r=s.sender.target.read();this.emitter_.emit("change",{event:new S(this,r,this.controller_.binding.target.presetKey,s.options.last)})}}class Se extends ds{constructor(s,r){super(s,r),this.binding=r.binding}}class ps extends Q{constructor(s){super(s),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new Pt,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(s){const r=s.sender.target.read();this.emitter_.emit("update",{event:new P(this,r,this.controller_.binding.target.presetKey)})}}class Ye extends ds{constructor(s,r){super(s,r),this.binding=r.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function js(l){return l instanceof gs?l.apiSet_:l instanceof di?l.rackApi_.apiSet_:null}function pi(l,s){const r=l.find(c=>c.controller_===s);if(!r)throw dt.shouldNeverHappen();return r}function Yi(l,s,r){if(!B.isBindable(l))throw dt.notBindable();return new B(l,s,r)}class gs extends Q{constructor(s,r){super(s),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new Pt,this.apiSet_=new ui(js),this.pool_=r;const c=this.controller_.rack;c.emitter.on("add",this.onRackAdd_),c.emitter.on("remove",this.onRackRemove_),c.emitter.on("inputchange",this.onRackInputChange_),c.emitter.on("monitorupdate",this.onRackMonitorUpdate_),c.children.forEach(g=>{this.setUpApi_(g)})}get children(){return this.controller_.rack.children.map(s=>pi(this.apiSet_,s))}addInput(s,r,c){const g=c??{},y=this.controller_.view.element.ownerDocument,E=this.pool_.createInput(y,Yi(s,r,g.presetKey),g),N=new us(E);return this.add(N,g.index)}addMonitor(s,r,c){const g=c??{},y=this.controller_.view.element.ownerDocument,E=this.pool_.createMonitor(y,Yi(s,r),g),N=new ps(E);return this.add(N,g.index)}addFolder(s){return function(r,c){return r.addBlade(Object.assign(Object.assign({},c),{view:"folder"}))}(this,s)}addButton(s){return function(r,c){return r.addBlade(Object.assign(Object.assign({},c),{view:"button"}))}(this,s)}addSeparator(s){return function(r,c){const g=c??{};return r.addBlade(Object.assign(Object.assign({},g),{view:"separator"}))}(this,s)}addTab(s){return function(r,c){return r.addBlade(Object.assign(Object.assign({},c),{view:"tab"}))}(this,s)}add(s,r){this.controller_.rack.add(s.controller_,r);const c=this.apiSet_.find(g=>g.controller_===s.controller_);return c&&this.apiSet_.remove(c),this.apiSet_.add(s),s}remove(s){this.controller_.rack.remove(s.controller_)}addBlade(s){const r=this.controller_.view.element.ownerDocument,c=this.pool_.createBlade(r,s),g=this.pool_.createBladeApi(c);return this.add(g,s.index)}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}setUpApi_(s){this.apiSet_.find(r=>r.controller_===s)||this.apiSet_.add(this.pool_.createBladeApi(s))}onRackAdd_(s){this.setUpApi_(s.bladeController)}onRackRemove_(s){if(s.isRoot){const r=pi(this.apiSet_,s.bladeController);this.apiSet_.remove(r)}}onRackInputChange_(s){const r=s.bladeController;if(r instanceof Se){const c=pi(this.apiSet_,r),g=r.binding;this.emitter_.emit("change",{event:new S(c,g.target.read(),g.target.presetKey,s.options.last)})}else if(r instanceof Ci){const c=pi(this.apiSet_,r);this.emitter_.emit("change",{event:new S(c,r.value.rawValue,void 0,s.options.last)})}}onRackMonitorUpdate_(s){if(!(s.bladeController instanceof Ye))throw dt.shouldNeverHappen();const r=pi(this.apiSet_,s.bladeController),c=s.bladeController.binding;this.emitter_.emit("update",{event:new P(r,c.target.read(),c.target.presetKey)})}}class Us extends di{constructor(s,r){super(s,new gs(s.rackController,r)),this.emitter_=new Pt,this.controller_.foldable.value("expanded").emitter.on("change",c=>{this.emitter_.emit("fold",{event:new Y(this,c.sender.rawValue)})}),this.rackApi_.on("change",c=>{this.emitter_.emit("change",{event:c})}),this.rackApi_.on("update",c=>{this.emitter_.emit("update",{event:c})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(s){this.controller_.foldable.set("expanded",s)}get title(){return this.controller_.props.get("title")}set title(s){this.controller_.props.set("title",s)}get children(){return this.rackApi_.children}addInput(s,r,c){return this.rackApi_.addInput(s,r,c)}addMonitor(s,r,c){return this.rackApi_.addMonitor(s,r,c)}addFolder(s){return this.rackApi_.addFolder(s)}addButton(s){return this.rackApi_.addButton(s)}addSeparator(s){return this.rackApi_.addSeparator(s)}addTab(s){return this.rackApi_.addTab(s)}add(s,r){return this.rackApi_.add(s,r)}remove(s){this.rackApi_.remove(s)}addBlade(s){return this.rackApi_.addBlade(s)}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}}class Fs extends Bt{constructor(s){super({blade:s.blade,view:s.view,viewProps:s.rackController.viewProps}),this.rackController=s.rackController}}class mr{constructor(s,r){const c=bt(r.viewName);this.element=s.createElement("div"),this.element.classList.add(c()),r.viewProps.bindClassModifiers(this.element)}}function Qs(l){return l instanceof Ii?l.rack:l instanceof Fs?l.rackController.rack:null}function Ar(l){const s=Qs(l);return s?s.bcSet_:null}class Ei{constructor(s){var r;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new Pt,this.blade_=s??null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new ui(Ar),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(s,r){s.parent&&s.parent.remove(s),s.parent_=this,this.bcSet_.add(s,r)}remove(s){s.parent_=null,this.bcSet_.remove(s)}find(s){return this.bcSet_.allItems().filter(r=>r instanceof s)}onSetAdd_(s){this.updatePositions_();const r=s.target===s.root;if(this.emitter.emit("add",{bladeController:s.item,index:s.index,isRoot:r,sender:this}),!r)return;const c=s.item;if(c.viewProps.emitter.on("change",this.onChildViewPropsChange_),c.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),c.viewProps.handleDispose(this.onChildDispose_),c instanceof Se)c.binding.emitter.on("change",this.onChildInputChange_);else if(c instanceof Ye)c.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(c instanceof Ci)c.value.emitter.on("change",this.onChildValueChange_);else{const g=Qs(c);if(g){const y=g.emitter;y.on("layout",this.onDescendantLayout_),y.on("inputchange",this.onDescendantInputChange_),y.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(s){this.updatePositions_();const r=s.target===s.root;if(this.emitter.emit("remove",{bladeController:s.item,isRoot:r,sender:this}),!r)return;const c=s.item;if(c instanceof Se)c.binding.emitter.off("change",this.onChildInputChange_);else if(c instanceof Ye)c.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(c instanceof Ci)c.value.emitter.off("change",this.onChildValueChange_);else{const g=Qs(c);if(g){const y=g.emitter;y.off("layout",this.onDescendantLayout_),y.off("inputchange",this.onDescendantInputChange_),y.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const s=this.bcSet_.items.filter(g=>!g.viewProps.get("hidden")),r=s[0],c=s[s.length-1];this.bcSet_.items.forEach(g=>{const y=[];g===r&&(y.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||y.push("veryfirst")),g===c&&(y.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||y.push("verylast")),g.blade.set("positions",y)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(s){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(s=>s.viewProps.get("disposed")).forEach(s=>{this.bcSet_.remove(s)})}onChildInputChange_(s){const r=function(c,g){for(let y=0;y<c.length;y++){const E=c[y];if(E instanceof Se&&E.binding===g)return E}return null}(this.find(Se),s.sender);if(!r)throw dt.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:r,options:s.options,sender:this})}onChildMonitorUpdate_(s){const r=function(c,g){for(let y=0;y<c.length;y++){const E=c[y];if(E instanceof Ye&&E.binding===g)return E}return null}(this.find(Ye),s.sender);if(!r)throw dt.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:r,sender:this})}onChildValueChange_(s){const r=function(c,g){for(let y=0;y<c.length;y++){const E=c[y];if(E instanceof Ci&&E.value===g)return E}return null}(this.find(Ci),s.sender);if(!r)throw dt.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:r,options:s.options,sender:this})}onDescendantLayout_(s){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(s){this.emitter.emit("inputchange",{bladeController:s.bladeController,options:s.options,sender:this})}onDescendantMonitorUpdate_(s){this.emitter.emit("monitorupdate",{bladeController:s.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ii extends Bt{constructor(s,r){super(Object.assign(Object.assign({},r),{view:new mr(s,{viewName:"brk",viewProps:r.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const c=new Ei(r.root?void 0:r.blade);c.emitter.on("add",this.onRackAdd_),c.emitter.on("remove",this.onRackRemove_),this.rack=c,this.viewProps.handleDispose(()=>{for(let g=this.rack.children.length-1;g>=0;g--)this.rack.children[g].viewProps.set("disposed",!0)})}onRackAdd_(s){s.isRoot&&cs(this.view.element,s.bladeController.view.element,s.index)}onRackRemove_(s){s.isRoot&&Mn(s.bladeController.view.element)}}const Bi=bt("cnt");class go{constructor(s,r){var c;this.className_=bt((c=r.viewName)!==null&&c!==void 0?c:"fld"),this.element=s.createElement("div"),this.element.classList.add(this.className_(),Bi()),r.viewProps.bindClassModifiers(this.element),this.foldable_=r.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Et(this.foldable_,"completed",wt(this.element,this.className_(void 0,"cpl")));const g=s.createElement("button");g.classList.add(this.className_("b")),Et(r.props,"title",J=>{K(J)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),r.viewProps.bindDisabled(g),this.element.appendChild(g),this.buttonElement=g;const y=s.createElement("div");y.classList.add(this.className_("t")),ut(r.props.value("title"),y),this.buttonElement.appendChild(y),this.titleElement=y;const E=s.createElement("div");E.classList.add(this.className_("m")),this.buttonElement.appendChild(E);const N=r.containerElement;N.classList.add(this.className_("c")),this.element.appendChild(N),this.containerElement=N}}class ue extends Fs{constructor(s,r){var c;const g=Oi.create((c=r.expanded)===null||c===void 0||c),y=new Ii(s,{blade:r.blade,root:r.root,viewProps:r.viewProps});super(Object.assign(Object.assign({},r),{rackController:y,view:new go(s,{containerElement:y.view.element,foldable:g,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=r.props,this.foldable=g,Ns(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Vi={id:"folder",type:"blade",accept(l){const s=yt,r=oe(l,{title:s.required.string,view:s.required.constant("folder"),expanded:s.optional.boolean});return r?{params:r}:null},controller:l=>new ue(l.document,{blade:l.blade,expanded:l.params.expanded,props:It.fromObject({title:l.params.title}),viewProps:l.viewProps}),api:l=>l.controller instanceof ue?new Us(l.controller,l.pool):null};class ae extends Ci{constructor(s,r){const c=r.valueController.viewProps;super(Object.assign(Object.assign({},r),{value:r.valueController.value,view:new Sn(s,{props:r.props,viewProps:c}),viewProps:c})),this.props=r.props,this.valueController=r.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Rt extends Q{}const Rn=bt("spr");class ms{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Rn()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("hr");c.classList.add(Rn("r")),this.element.appendChild(c)}}class Os extends Bt{constructor(s,r){super(Object.assign(Object.assign({},r),{view:new ms(s,{viewProps:r.viewProps})}))}}const na={id:"separator",type:"blade",accept(l){const s=oe(l,{view:yt.required.constant("separator")});return s?{params:s}:null},controller:l=>new Os(l.document,{blade:l.blade,viewProps:l.viewProps}),api:l=>l.controller instanceof Os?new Rt(l.controller):null},fr=bt("");function mo(l,s){return wt(l,fr(void 0,s))}class si extends It{constructor(s){super(s)}static create(s){var r,c;const g=s??{},y={disabled:(r=g.disabled)!==null&&r!==void 0&&r,disposed:!1,hidden:(c=g.hidden)!==null&&c!==void 0&&c},E=It.createCore(y);return new si(E)}bindClassModifiers(s){Et(this,"disabled",mo(s,"disabled")),Et(this,"hidden",mo(s,"hidden"))}bindDisabled(s){Et(this,"disabled",r=>{s.disabled=r})}bindTabIndex(s){Et(this,"disabled",r=>{s.tabIndex=r?-1:0})}handleDispose(s){this.value("disposed").emitter.on("change",r=>{r&&s()})}}const we=bt("tbi");class ra{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(we()),r.viewProps.bindClassModifiers(this.element),Et(r.props,"selected",y=>{y?this.element.classList.add(we(void 0,"sel")):this.element.classList.remove(we(void 0,"sel"))});const c=s.createElement("button");c.classList.add(we("b")),r.viewProps.bindDisabled(c),this.element.appendChild(c),this.buttonElement=c;const g=s.createElement("div");g.classList.add(we("t")),ut(r.props.value("title"),g),this.buttonElement.appendChild(g),this.titleElement=g}}class oa{constructor(s,r){this.emitter=new Pt,this.onClick_=this.onClick_.bind(this),this.props=r.props,this.viewProps=r.viewProps,this.view=new ra(s,{props:r.props,viewProps:r.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class kn{constructor(s,r){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new oa(s,{props:r.itemProps,viewProps:si.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ii(s,{blade:Qi(),viewProps:si.create()}),this.props=r.props,Et(this.props,"selected",c=>{this.itemController.props.set("selected",c),this.contentController.viewProps.set("hidden",!c)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class vr{constructor(s,r){this.controller_=s,this.rackApi_=r}get title(){var s;return(s=this.controller_.itemController.props.get("title"))!==null&&s!==void 0?s:""}set title(s){this.controller_.itemController.props.set("title",s)}get selected(){return this.controller_.props.get("selected")}set selected(s){this.controller_.props.set("selected",s)}get children(){return this.rackApi_.children}addButton(s){return this.rackApi_.addButton(s)}addFolder(s){return this.rackApi_.addFolder(s)}addSeparator(s){return this.rackApi_.addSeparator(s)}addTab(s){return this.rackApi_.addTab(s)}add(s,r){this.rackApi_.add(s,r)}remove(s){this.rackApi_.remove(s)}addInput(s,r,c){return this.rackApi_.addInput(s,r,c)}addMonitor(s,r,c){return this.rackApi_.addMonitor(s,r,c)}addBlade(s){return this.rackApi_.addBlade(s)}}class _r extends di{constructor(s,r){super(s,new gs(s.rackController,r)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new Pt,this.pageApiMap_=new Map,this.rackApi_.on("change",c=>{this.emitter_.emit("change",{event:c})}),this.rackApi_.on("update",c=>{this.emitter_.emit("update",{event:c})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(c=>{this.setUpPageApi_(c)})}get pages(){return this.controller_.pageSet.items.map(s=>{const r=this.pageApiMap_.get(s);if(!r)throw dt.shouldNeverHappen();return r})}addPage(s){const r=this.controller_.view.element.ownerDocument,c=new kn(r,{itemProps:It.fromObject({selected:!1,title:s.title}),props:It.fromObject({selected:!1})});this.controller_.add(c,s.index);const g=this.pageApiMap_.get(c);if(!g)throw dt.shouldNeverHappen();return g}removePage(s){this.controller_.remove(s)}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}setUpPageApi_(s){const r=this.rackApi_.apiSet_.find(g=>g.controller_===s.contentController);if(!r)throw dt.shouldNeverHappen();const c=new vr(s,r);this.pageApiMap_.set(s,c)}onPageAdd_(s){this.setUpPageApi_(s.item)}onPageRemove_(s){if(!this.pageApiMap_.get(s.item))throw dt.shouldNeverHappen();this.pageApiMap_.delete(s.item)}onSelect_(s){this.emitter_.emit("select",{event:new Z(this,s.rawValue)})}}class Le{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=re(!0),this.selectedIndex=re(-1),this.items_=[]}add(s,r){const c=r??this.items_.length;this.items_.splice(c,0,s),s.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(s){const r=this.items_.indexOf(s);r<0||(this.items_.splice(r,1),s.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const s=this.items_.findIndex(r=>r.rawValue);s<0?(this.items_.forEach((r,c)=>{r.rawValue=c===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((r,c)=>{r.rawValue=c===s}),this.selectedIndex.rawValue=s),this.empty.rawValue=!1}onItemSelectedChange_(s){if(s.rawValue){const r=this.items_.findIndex(c=>c===s.sender);this.items_.forEach((c,g)=>{c.rawValue=g===r}),this.selectedIndex.rawValue=r}else this.keepSelection_()}}const Ve=bt("tab");class Mi{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Ve(),Bi()),r.viewProps.bindClassModifiers(this.element),W(r.empty,wt(this.element,Ve(void 0,"nop")));const c=s.createElement("div");c.classList.add(Ve("i")),this.element.appendChild(c),this.itemsElement=c;const g=r.contentsElement;g.classList.add(Ve("c")),this.element.appendChild(g),this.contentsElement=g}}class Zt extends Fs{constructor(s,r){const c=new Ii(s,{blade:r.blade,viewProps:r.viewProps}),g=new Le;super({blade:r.blade,rackController:c,view:new Mi(s,{contentsElement:c.view.element,empty:g.empty,viewProps:r.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new ui(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=g}get pageSet(){return this.pageSet_}add(s,r){this.pageSet_.add(s,r)}remove(s){this.pageSet_.remove(this.pageSet_.items[s])}onPageAdd_(s){const r=s.item;cs(this.view.itemsElement,r.itemController.view.element,s.index),this.rackController.rack.add(r.contentController,s.index),this.tab.add(r.props.value("selected"))}onPageRemove_(s){const r=s.item;Mn(r.itemController.view.element),this.rackController.rack.remove(r.contentController),this.tab.remove(r.props.value("selected"))}}const Ao={id:"tab",type:"blade",accept(l){const s=yt,r=oe(l,{pages:s.required.array(s.required.object({title:s.required.string})),view:s.required.constant("tab")});return r&&r.pages.length!==0?{params:r}:null},controller(l){const s=new Zt(l.document,{blade:l.blade,viewProps:l.viewProps});return l.params.pages.forEach(r=>{const c=new kn(l.document,{itemProps:It.fromObject({selected:!1,title:r.title}),props:It.fromObject({selected:!1})});s.add(c)}),s},api:l=>l.controller instanceof Zt?new _r(l.controller,l.pool):null};class aa{constructor(){this.disabled=!1,this.emitter=new Pt}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class la{constructor(s,r){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=s,this.emitter=new Pt,this.interval_=r,this.setTimer_()}get disabled(){return this.disabled_}set disabled(s){this.disabled_=s,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const s=this.doc_.defaultView;s&&s.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const s=this.doc_.defaultView;s&&(this.timerId_=s.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ys{constructor(s){this.constraints=s}constrain(s){return this.constraints.reduce((r,c)=>c.constrain(r),s)}}function ni(l,s){if(l instanceof s)return l;if(l instanceof Ys){const r=l.constraints.reduce((c,g)=>c||(g instanceof s?g:null),null);if(r)return r}return null}class Vs{constructor(s){this.options=s}constrain(s){const r=this.options;return r.length===0||r.filter(c=>c.value===s).length>0?s:r[0].value}}class As{constructor(s){this.maxValue=s.max,this.minValue=s.min}constrain(s){let r=s;return K(this.minValue)||(r=Math.max(r,this.minValue)),K(this.maxValue)||(r=Math.min(r,this.maxValue)),r}}class Zi{constructor(s,r=0){this.step=s,this.origin=r}constrain(s){const r=this.origin%this.step;return r+Math.round((s-r)/this.step)*this.step}}const wr=bt("lst");class ha{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),this.props_=r.props,this.element=s.createElement("div"),this.element.classList.add(wr()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("select");c.classList.add(wr("s")),Et(this.props_,"options",y=>{Pn(c),y.forEach((E,N)=>{const J=s.createElement("option");J.dataset.index=String(N),J.textContent=E.text,J.value=String(E.value),c.appendChild(J)})}),r.viewProps.bindDisabled(c),this.element.appendChild(c),this.selectElement=c;const g=s.createElement("div");g.classList.add(wr("m")),g.appendChild(xi(s,"dropdown")),this.element.appendChild(g),r.value.emitter.on("change",this.onValueChange_),this.value_=r.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Zs{constructor(s,r){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=r.props,this.value=r.value,this.viewProps=r.viewProps,this.view=new ha(s,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(s){const r=s.currentTarget.selectedOptions.item(0);if(!r)return;const c=Number(r.dataset.index);this.value.rawValue=this.props.get("options")[c].value}}const fo=bt("pop");class ca{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(fo()),r.viewProps.bindClassModifiers(this.element),W(r.shows,wt(this.element,fo(void 0,"v")))}}class vo{constructor(s,r){this.shows=re(!1),this.viewProps=r.viewProps,this.view=new ca(s,{shows:this.shows,viewProps:this.viewProps})}}const _o=bt("txt");class da{constructor(s,r){this.onChange_=this.onChange_.bind(this),this.element=s.createElement("div"),this.element.classList.add(_o()),r.viewProps.bindClassModifiers(this.element),this.props_=r.props,this.props_.emitter.on("change",this.onChange_);const c=s.createElement("input");c.classList.add(_o("i")),c.type="text",r.viewProps.bindDisabled(c),this.element.appendChild(c),this.inputElement=c,r.value.emitter.on("change",this.onChange_),this.value_=r.value,this.refresh()}refresh(){const s=this.props_.get("formatter");this.inputElement.value=s(this.value_.rawValue)}onChange_(){this.refresh()}}class Dn{constructor(s,r){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=r.parser,this.props=r.props,this.value=r.value,this.viewProps=r.viewProps,this.view=new da(s,{props:r.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(s){const r=s.currentTarget.value,c=this.parser_(r);K(c)||(this.value.rawValue=c),this.view.refresh()}}function br(l){return l!=="false"&&!!l}function wo(l){return function(s){return String(s)}(l)}class St{constructor(s){this.text=s}evaluate(){return Number(this.text)}toString(){return this.text}}const ua={"**":(l,s)=>Math.pow(l,s),"*":(l,s)=>l*s,"/":(l,s)=>l/s,"%":(l,s)=>l%s,"+":(l,s)=>l+s,"-":(l,s)=>l-s,"<<":(l,s)=>l<<s,">>":(l,s)=>l>>s,">>>":(l,s)=>l>>>s,"&":(l,s)=>l&s,"^":(l,s)=>l^s,"|":(l,s)=>l|s};class Ws{constructor(s,r,c){this.left=r,this.operator=s,this.right=c}evaluate(){const s=ua[this.operator];if(!s)throw new Error(`unexpected binary operator: '${this.operator}`);return s(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Wt={"+":l=>l,"-":l=>-l,"~":l=>~l};class pa{constructor(s,r){this.operator=s,this.expression=r}evaluate(){const s=Wt[this.operator];if(!s)throw new Error(`unexpected unary operator: '${this.operator}`);return s(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function fs(l){return(s,r)=>{for(let c=0;c<l.length;c++){const g=l[c](s,r);if(g!=="")return g}return""}}function Ft(l,s){var r;const c=l.substr(s).match(/^\s+/);return(r=c&&c[0])!==null&&r!==void 0?r:""}function Wi(l,s){var r;const c=l.substr(s).match(/^[0-9]+/);return(r=c&&c[0])!==null&&r!==void 0?r:""}function Hs(l,s){const r=l.substr(s,1);if(s+=1,r.toLowerCase()!=="e")return"";const c=function(g,y){const E=Wi(g,y);if(E!=="")return E;const N=g.substr(y,1);if(N!=="-"&&N!=="+")return"";const J=Wi(g,y+=1);return J===""?"":N+J}(l,s);return c===""?"":r+c}function Hi(l,s){const r=l.substr(s,1);if(r==="0")return r;const c=function(g,y){const E=g.substr(y,1);return E.match(/^[1-9]$/)?E:""}(l,s);return s+=c.length,c===""?"":c+Wi(l,s)}const ga=fs([function(l,s){const r=Hi(l,s);if(s+=r.length,r==="")return"";const c=l.substr(s,1);if(s+=c.length,c!==".")return"";const g=Wi(l,s);return r+c+g+Hs(l,s+=g.length)},function(l,s){const r=l.substr(s,1);if(s+=r.length,r!==".")return"";const c=Wi(l,s);return s+=c.length,c===""?"":r+c+Hs(l,s)},function(l,s){const r=Hi(l,s);return s+=r.length,r===""?"":r+Hs(l,s)}]),Xi=fs([function(l,s){const r=l.substr(s,2);if(s+=r.length,r.toLowerCase()!=="0b")return"";const c=function(g,y){var E;const N=g.substr(y).match(/^[01]+/);return(E=N&&N[0])!==null&&E!==void 0?E:""}(l,s);return c===""?"":r+c},function(l,s){const r=l.substr(s,2);if(s+=r.length,r.toLowerCase()!=="0o")return"";const c=function(g,y){var E;const N=g.substr(y).match(/^[0-7]+/);return(E=N&&N[0])!==null&&E!==void 0?E:""}(l,s);return c===""?"":r+c},function(l,s){const r=l.substr(s,2);if(s+=r.length,r.toLowerCase()!=="0x")return"";const c=function(g,y){var E;const N=g.substr(y).match(/^[0-9a-f]+/i);return(E=N&&N[0])!==null&&E!==void 0?E:""}(l,s);return c===""?"":r+c}]),Ge=fs([Xi,ga]);function yr(l,s){var r;return(r=function(c,g){const y=Ge(c,g);return g+=y.length,y===""?null:{evaluable:new St(y),cursor:g}}(l,s))!==null&&r!==void 0?r:function(c,g){const y=c.substr(g,1);if(g+=y.length,y!=="(")return null;const E=Ln(c,g);if(!E)return null;g=E.cursor,g+=Ft(c,g).length;const N=c.substr(g,1);return g+=N.length,N!==")"?null:{evaluable:E.evaluable,cursor:g}}(l,s)}function ma(l,s,r){r+=Ft(s,r).length;const c=l.filter(g=>s.startsWith(g,r))[0];return c?(r+=c.length,{cursor:r+=Ft(s,r).length,operator:c}):null}const Aa=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((l,s)=>function(r,c){return(g,y)=>{const E=r(g,y);if(!E)return null;y=E.cursor;let N=E.evaluable;for(;;){const J=ma(c,g,y);if(!J)break;y=J.cursor;const ot=r(g,y);if(!ot)return null;y=ot.cursor,N=new Ws(J.operator,N,ot.evaluable)}return N?{cursor:y,evaluable:N}:null}}(l,s),function l(s,r){const c=yr(s,r);if(c)return c;const g=s.substr(r,1);if(r+=g.length,g!=="+"&&g!=="-"&&g!=="~")return null;const y=l(s,r);return y?{cursor:r=y.cursor,evaluable:new pa(g,y.evaluable)}:null});function Ln(l,s){return s+=Ft(l,s).length,Aa(l,s)}function gi(l){var s;const r=function(c){const g=Ln(c,0);return g?g.cursor+Ft(c,g.cursor).length!==c.length?null:g.evaluable:null}(l);return(s=r==null?void 0:r.evaluate())!==null&&s!==void 0?s:null}function bo(l){if(typeof l=="number")return l;if(typeof l=="string"){const s=gi(l);if(!K(s))return s}return 0}function fa(l){return String(l)}function Ht(l){return s=>s.toFixed(Math.max(Math.min(l,20),0))}const Gn=Ht(0);function vs(l){return Gn(l)+"%"}function Xs(l){return String(l)}function zn(l){return l}function Nn(l,s){for(;l.length<s;)l.push(void 0)}function Pi(l){const s=[];return Nn(s,l),re(s)}function yo(l){const s=l.indexOf(void 0);return s<0?l:l.slice(0,s)}function Js({primary:l,secondary:s,forward:r,backward:c}){let g=!1;function y(E){g||(g=!0,E(),g=!1)}l.emitter.on("change",E=>{y(()=>{s.setRawValue(r(l,s),E.options)})}),s.emitter.on("change",E=>{y(()=>{l.setRawValue(c(l,s),E.options)}),y(()=>{s.setRawValue(r(l,s),E.options)})}),y(()=>{s.setRawValue(r(l,s),{forceEmit:!1,last:!0})})}function be(l,s){const r=l*(s.altKey?.1:1)*(s.shiftKey?10:1);return s.upKey?+r:s.downKey?-r:0}function _s(l){return{altKey:l.altKey,downKey:l.key==="ArrowDown",shiftKey:l.shiftKey,upKey:l.key==="ArrowUp"}}function ri(l){return{altKey:l.altKey,downKey:l.key==="ArrowLeft",shiftKey:l.shiftKey,upKey:l.key==="ArrowRight"}}function xr(l){return function(s){return s==="ArrowUp"||s==="ArrowDown"}(l)||l==="ArrowLeft"||l==="ArrowRight"}function _t(l,s){var r,c;const g=s.ownerDocument.defaultView,y=s.getBoundingClientRect();return{x:l.pageX-(((r=g&&g.scrollX)!==null&&r!==void 0?r:0)+y.left),y:l.pageY-(((c=g&&g.scrollY)!==null&&c!==void 0?c:0)+y.top)}}class Si{constructor(s){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=s,this.emitter=new Pt,s.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),s.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),s.addEventListener("touchend",this.onTouchEnd_),s.addEventListener("mousedown",this.onMouseDown_)}computePosition_(s){const r=this.elem_.getBoundingClientRect();return{bounds:{width:r.width,height:r.height},point:s?{x:s.x,y:s.y}:null}}onMouseDown_(s){var r;s.preventDefault(),(r=s.currentTarget)===null||r===void 0||r.focus();const c=this.elem_.ownerDocument;c.addEventListener("mousemove",this.onDocumentMouseMove_),c.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:s.altKey,data:this.computePosition_(_t(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onDocumentMouseMove_(s){this.emitter.emit("move",{altKey:s.altKey,data:this.computePosition_(_t(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onDocumentMouseUp_(s){const r=this.elem_.ownerDocument;r.removeEventListener("mousemove",this.onDocumentMouseMove_),r.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:s.altKey,data:this.computePosition_(_t(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onTouchStart_(s){s.preventDefault();const r=s.targetTouches.item(0),c=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:s.altKey,data:this.computePosition_(r?{x:r.clientX-c.left,y:r.clientY-c.top}:void 0),sender:this,shiftKey:s.shiftKey}),this.lastTouch_=r}onTouchMove_(s){const r=s.targetTouches.item(0),c=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:s.altKey,data:this.computePosition_(r?{x:r.clientX-c.left,y:r.clientY-c.top}:void 0),sender:this,shiftKey:s.shiftKey}),this.lastTouch_=r}onTouchEnd_(s){var r;const c=(r=s.targetTouches.item(0))!==null&&r!==void 0?r:this.lastTouch_,g=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:s.altKey,data:this.computePosition_(c?{x:c.clientX-g.left,y:c.clientY-g.top}:void 0),sender:this,shiftKey:s.shiftKey})}}function Dt(l,s,r,c,g){return c+(l-s)/(r-s)*(g-c)}function xo(l){return String(l.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Xt(l,s,r){return Math.min(Math.max(l,s),r)}function Cr(l,s){return(l%s+s)%s}const ze=bt("txt");class Ji{constructor(s,r){this.onChange_=this.onChange_.bind(this),this.props_=r.props,this.props_.emitter.on("change",this.onChange_),this.element=s.createElement("div"),this.element.classList.add(ze(),ze(void 0,"num")),r.arrayPosition&&this.element.classList.add(ze(void 0,r.arrayPosition)),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("input");c.classList.add(ze("i")),c.type="text",r.viewProps.bindDisabled(c),this.element.appendChild(c),this.inputElement=c,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=r.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ze()),this.inputElement.classList.add(ze("i"));const g=s.createElement("div");g.classList.add(ze("k")),this.element.appendChild(g),this.knobElement=g;const y=s.createElementNS(De,"svg");y.classList.add(ze("g")),this.knobElement.appendChild(y);const E=s.createElementNS(De,"path");E.classList.add(ze("gb")),y.appendChild(E),this.guideBodyElem_=E;const N=s.createElementNS(De,"path");N.classList.add(ze("gh")),y.appendChild(N),this.guideHeadElem_=N;const J=s.createElement("div");J.classList.add(bt("tt")()),this.knobElement.appendChild(J),this.tooltipElem_=J,r.value.emitter.on("change",this.onChange_),this.value=r.value,this.refresh()}onDraggingChange_(s){if(s.rawValue===null)return void this.element.classList.remove(ze(void 0,"drg"));this.element.classList.add(ze(void 0,"drg"));const r=s.rawValue/this.props_.get("draggingScale"),c=r+(r>0?-1:r<0?1:0),g=Xt(-c,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${c+g},0 L${c},4 L${c+g},8`,`M ${r},-1 L${r},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${r},4`);const y=this.props_.get("formatter");this.tooltipElem_.textContent=y(this.value.rawValue),this.tooltipElem_.style.left=`${r}px`}refresh(){const s=this.props_.get("formatter");this.inputElement.value=s(this.value.rawValue)}onChange_(){this.refresh()}}class Ti{constructor(s,r){var c;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=r.baseStep,this.parser_=r.parser,this.props=r.props,this.sliderProps_=(c=r.sliderProps)!==null&&c!==void 0?c:null,this.value=r.value,this.viewProps=r.viewProps,this.dragging_=re(null),this.view=new Ji(s,{arrayPosition:r.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const g=new Si(this.view.knobElement);g.emitter.on("down",this.onPointerDown_),g.emitter.on("move",this.onPointerMove_),g.emitter.on("up",this.onPointerUp_)}constrainValue_(s){var r,c;const g=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("minValue"),y=(c=this.sliderProps_)===null||c===void 0?void 0:c.get("maxValue");let E=s;return g!==void 0&&(E=Math.max(E,g)),y!==void 0&&(E=Math.min(E,y)),E}onInputChange_(s){const r=s.currentTarget.value,c=this.parser_(r);K(c)||(this.value.rawValue=this.constrainValue_(c)),this.view.refresh()}onInputKeyDown_(s){const r=be(this.baseStep_,_s(s));r!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+r),{forceEmit:!1,last:!1})}onInputKeyUp_(s){be(this.baseStep_,_s(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(s){if(!s.point)return null;const r=s.point.x-s.bounds.width/2;return this.constrainValue_(this.originRawValue_+r*this.props.get("draggingScale"))}onPointerMove_(s){const r=this.computeDraggingValue_(s.data);r!==null&&(this.value.setRawValue(r,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(s){const r=this.computeDraggingValue_(s.data);r!==null&&(this.value.setRawValue(r,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ws=bt("sld");class lt{constructor(s,r){this.onChange_=this.onChange_.bind(this),this.props_=r.props,this.props_.emitter.on("change",this.onChange_),this.element=s.createElement("div"),this.element.classList.add(ws()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("div");c.classList.add(ws("t")),r.viewProps.bindTabIndex(c),this.element.appendChild(c),this.trackElement=c;const g=s.createElement("div");g.classList.add(ws("k")),this.trackElement.appendChild(g),this.knobElement=g,r.value.emitter.on("change",this.onChange_),this.value=r.value,this.update_()}update_(){const s=Xt(Dt(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${s}%`}onChange_(){this.update_()}}class Te{constructor(s,r){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=r.baseStep,this.value=r.value,this.viewProps=r.viewProps,this.props=r.props,this.view=new lt(s,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Si(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,r){s.point&&this.value.setRawValue(Dt(Xt(s.point.x,0,s.bounds.width),0,s.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),r)}onPointerDownOrMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const r=be(this.baseStep_,ri(s));r!==0&&this.value.setRawValue(this.value.rawValue+r,{forceEmit:!1,last:!1})}onKeyUp_(s){be(this.baseStep_,ri(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ks=bt("sldtxt");class Co{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Ks());const c=s.createElement("div");c.classList.add(Ks("s")),this.sliderView_=r.sliderView,c.appendChild(this.sliderView_.element),this.element.appendChild(c);const g=s.createElement("div");g.classList.add(Ks("t")),this.textView_=r.textView,g.appendChild(this.textView_.element),this.element.appendChild(g)}}class Ki{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.sliderC_=new Te(s,{baseStep:r.baseStep,props:r.sliderProps,value:r.value,viewProps:this.viewProps}),this.textC_=new Ti(s,{baseStep:r.baseStep,parser:r.parser,props:r.textProps,sliderProps:r.sliderProps,value:r.value,viewProps:r.viewProps}),this.view=new Co(s,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function qs(l,s){l.write(s)}function pe(l){const s=yt;return Array.isArray(l)?s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))(l).value:typeof l=="object"?s.required.raw(l).value:void 0}function jn(l){if(l==="inline"||l==="popup")return l}function le(l){const s=yt;return s.required.object({max:s.optional.number,min:s.optional.number,step:s.optional.number})(l).value}function st(l){if(Array.isArray(l))return l;const s=[];return Object.keys(l).forEach(r=>{s.push({text:r,value:l[r]})}),s}function Nt(l){return K(l)?null:new Vs(st(l))}function Ze(l){const s=l?ni(l,Vs):null;return s?s.options:null}function ge(l,s){const r=l&&ni(l,Zi);return r?xo(r.step):Math.max(xo(s),2)}function oi(l){const s=function(r){const c=r?ni(r,Zi):null;return c?c.step:null}(l);return s??1}function Ri(l,s){var r;const c=l&&ni(l,Zi),g=Math.abs((r=c==null?void 0:c.step)!==null&&r!==void 0?r:s);return g===0?.1:Math.pow(10,Math.floor(Math.log10(g))-1)}const bs=bt("ckb");class mi{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),this.element=s.createElement("div"),this.element.classList.add(bs()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("label");c.classList.add(bs("l")),this.element.appendChild(c);const g=s.createElement("input");g.classList.add(bs("i")),g.type="checkbox",c.appendChild(g),this.inputElement=g,r.viewProps.bindDisabled(this.inputElement);const y=s.createElement("div");y.classList.add(bs("w")),c.appendChild(y);const E=xi(s,"check");y.appendChild(E),r.value.emitter.on("change",this.onValueChange_),this.value=r.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Er{constructor(s,r){this.onInputChange_=this.onInputChange_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.view=new mi(s,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(s){const r=s.currentTarget;this.value.rawValue=r.checked}}const ki={id:"input-bool",type:"input",accept:(l,s)=>{if(typeof l!="boolean")return null;const r=oe(s,{options:yt.optional.custom(pe)});return r?{initialValue:l,params:r}:null},binding:{reader:l=>br,constraint:l=>function(s){const r=[],c=Nt(s.options);return c&&r.push(c),new Ys(r)}(l.params),writer:l=>qs},controller:l=>{var s;const r=l.document,c=l.value,g=l.constraint;return g&&ni(g,Vs)?new Zs(r,{props:It.fromObject({options:(s=Ze(g))!==null&&s!==void 0?s:[]}),value:c,viewProps:l.viewProps}):new Er(r,{value:c,viewProps:l.viewProps})}},Jt=bt("col");class ye{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Jt()),r.foldable.bindExpandedClass(this.element,Jt(void 0,"expanded")),Et(r.foldable,"completed",wt(this.element,Jt(void 0,"cpl")));const c=s.createElement("div");c.classList.add(Jt("h")),this.element.appendChild(c);const g=s.createElement("div");g.classList.add(Jt("s")),c.appendChild(g),this.swatchElement=g;const y=s.createElement("div");if(y.classList.add(Jt("t")),c.appendChild(y),this.textElement=y,r.pickerLayout==="inline"){const E=s.createElement("div");E.classList.add(Jt("p")),this.element.appendChild(E),this.pickerElement=E}else this.pickerElement=null}}function $s(l,s,r){const c=Cr(l,360),g=Xt(s/100,0,1),y=Xt(r/100,0,1),E=y*g,N=E*(1-Math.abs(c/60%2-1)),J=y-E;let ot,Tt,ee;return[ot,Tt,ee]=c>=0&&c<60?[E,N,0]:c>=60&&c<120?[N,E,0]:c>=120&&c<180?[0,E,N]:c>=180&&c<240?[0,N,E]:c>=240&&c<300?[N,0,E]:[E,0,N],[255*(ot+J),255*(Tt+J),255*(ee+J)]}function me(l){return[l[0],l[1],l[2]]}function ie(l,s){return[l[0],l[1],l[2],s]}const qi={hsl:{hsl:(l,s,r)=>[l,s,r],hsv:function(l,s,r){const c=r+s*(100-Math.abs(2*r-100))/200;return[l,c!==0?s*(100-Math.abs(2*r-100))/c:0,r+s*(100-Math.abs(2*r-100))/200]},rgb:function(l,s,r){const c=(l%360+360)%360,g=Xt(s/100,0,1),y=Xt(r/100,0,1),E=(1-Math.abs(2*y-1))*g,N=E*(1-Math.abs(c/60%2-1)),J=y-E/2;let ot,Tt,ee;return[ot,Tt,ee]=c>=0&&c<60?[E,N,0]:c>=60&&c<120?[N,E,0]:c>=120&&c<180?[0,E,N]:c>=180&&c<240?[0,N,E]:c>=240&&c<300?[N,0,E]:[E,0,N],[255*(ot+J),255*(Tt+J),255*(ee+J)]}},hsv:{hsl:function(l,s,r){const c=100-Math.abs(r*(200-s)/100-100);return[l,c!==0?s*r/c:0,r*(200-s)/200]},hsv:(l,s,r)=>[l,s,r],rgb:$s},rgb:{hsl:function(l,s,r){const c=Xt(l/255,0,1),g=Xt(s/255,0,1),y=Xt(r/255,0,1),E=Math.max(c,g,y),N=Math.min(c,g,y),J=E-N;let ot=0,Tt=0;const ee=(N+E)/2;return J!==0&&(Tt=J/(1-Math.abs(E+N-1)),ot=c===E?(g-y)/J:g===E?2+(y-c)/J:4+(c-g)/J,ot=ot/6+(ot<0?1:0)),[360*ot,100*Tt,100*ee]},hsv:function(l,s,r){const c=Xt(l/255,0,1),g=Xt(s/255,0,1),y=Xt(r/255,0,1),E=Math.max(c,g,y),N=E-Math.min(c,g,y);let J;return J=N===0?0:E===c?((g-y)/N%6+6)%6*60:E===g?60*((y-c)/N+2):60*((c-g)/N+4),[J,100*(E===0?0:N/E),100*E]},rgb:(l,s,r)=>[l,s,r]}};function ys(l,s){return[s==="float"?1:l==="rgb"?255:360,s==="float"?1:l==="rgb"?255:100,s==="float"?1:l==="rgb"?255:100]}function Ne(l,s,r,c){const g=ys(s,r),y=ys(s,c);return l.map((E,N)=>E/g[N]*y[N])}function he(l,s){return typeof l=="object"&&!K(l)&&s in l&&typeof l[s]=="number"}class mt{constructor(s,r,c="int"){this.mode=r,this.type=c,this.comps_=function(g,y,E){var N;const J=ys(y,E);return[y==="rgb"?Xt(g[0],0,J[0]):Cr(g[0],J[0]),Xt(g[1],0,J[1]),Xt(g[2],0,J[2]),Xt((N=g[3])!==null&&N!==void 0?N:1,0,1)]}(s,r,c)}static black(s="int"){return new mt([0,0,0],"rgb",s)}static fromObject(s,r="int"){const c="a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b];return new mt(c,"rgb",r)}static toRgbaObject(s,r="int"){return s.toRgbaObject(r)}static isRgbColorObject(s){return he(s,"r")&&he(s,"g")&&he(s,"b")}static isRgbaColorObject(s){return this.isRgbColorObject(s)&&he(s,"a")}static isColorObject(s){return this.isRgbColorObject(s)}static equals(s,r){if(s.mode!==r.mode)return!1;const c=s.comps_,g=r.comps_;for(let y=0;y<c.length;y++)if(c[y]!==g[y])return!1;return!0}getComponents(s,r="int"){return ie(function(c,g,y){const E=Ne(c,g.mode,g.type,"int");return Ne(qi[g.mode][y.mode](...E),y.mode,"int",y.type)}(me(this.comps_),{mode:this.mode,type:this.type},{mode:s??this.mode,type:r}),this.comps_[3])}toRgbaObject(s="int"){const r=this.getComponents("rgb",s);return{r:r[0],g:r[1],b:r[2],a:r[3]}}}const jt=bt("colp");class te{constructor(s,r){this.alphaViews_=null,this.element=s.createElement("div"),this.element.classList.add(jt());const c=s.createElement("div");c.classList.add(jt("hsv"));const g=s.createElement("div");g.classList.add(jt("sv")),this.svPaletteView_=r.svPaletteView,g.appendChild(this.svPaletteView_.element),c.appendChild(g);const y=s.createElement("div");y.classList.add(jt("h")),this.hPaletteView_=r.hPaletteView,y.appendChild(this.hPaletteView_.element),c.appendChild(y),this.element.appendChild(c);const E=s.createElement("div");if(E.classList.add(jt("rgb")),this.textView_=r.textView,E.appendChild(this.textView_.element),this.element.appendChild(E),r.alphaViews){this.alphaViews_={palette:r.alphaViews.palette,text:r.alphaViews.text};const N=s.createElement("div");N.classList.add(jt("a"));const J=s.createElement("div");J.classList.add(jt("ap")),J.appendChild(this.alphaViews_.palette.element),N.appendChild(J);const ot=s.createElement("div");ot.classList.add(jt("at")),ot.appendChild(this.alphaViews_.text.element),N.appendChild(ot),this.element.appendChild(N)}}get allFocusableElements(){const s=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(r=>r.inputElement)];return this.alphaViews_&&s.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),s}}function xe(l){return l==="int"?"int":l==="float"?"float":void 0}function Mt(l){const s=yt;return oe(l,{alpha:s.optional.boolean,color:s.optional.object({alpha:s.optional.boolean,type:s.optional.custom(xe)}),expanded:s.optional.boolean,picker:s.optional.custom(jn)})}function Di(l){return l?.1:1}function Li(l){var s;return(s=l.color)===null||s===void 0?void 0:s.type}function Re(l,s){const r=l.match(/^(.+)%$/);return Math.min(r?.01*parseFloat(r[1])*s:parseFloat(l),s)}const Eo={deg:l=>l,grad:l=>360*l/400,rad:l=>360*l/(2*Math.PI),turn:l=>360*l};function se(l){const s=l.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!s)return parseFloat(l);const r=parseFloat(s[1]),c=s[2];return Eo[c](r)}function Un(l){const s=l.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const r=[Re(s[1],255),Re(s[2],255),Re(s[3],255)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Fn(l){return s=>{const r=Un(s);return r?new mt(r,"rgb",l):null}}function Ir(l){const s=l.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const r=[Re(s[1],255),Re(s[2],255),Re(s[3],255),Re(s[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function Ae(l){return s=>{const r=Ir(s);return r?new mt(r,"rgb",l):null}}function tn(l){const s=l.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const r=[se(s[1]),Re(s[2],100),Re(s[3],100)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function en(l){return s=>{const r=tn(s);return r?new mt(r,"hsl",l):null}}function $i(l){const s=l.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const r=[se(s[1]),Re(s[2],100),Re(s[3],100),Re(s[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function Ut(l){return s=>{const r=$i(s);return r?new mt(r,"hsl",l):null}}function Br(l){const s=l.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(s)return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)];const r=l.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}function Mr(l){const s=l.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(s)return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16),Dt(parseInt(s[4]+s[4],16),0,255,0,1)];const r=l.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),Dt(parseInt(r[4],16),0,255,0,1)]:null}function Pr(l){const s=l.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!s)return null;const r=[parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Sr(l){return s=>{const r=Pr(s);return r?new mt(r,"rgb",l):null}}function Tr(l){const s=l.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!s)return null;const r=[parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function Be(l){return s=>{const r=Tr(s);return r?new mt(r,"rgb",l):null}}const Io=[{parser:Br,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Mr,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Un,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ir,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:tn,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:$i,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Pr,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Tr,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Qn(l,s="int"){const r=function(c){return Io.reduce((g,{parser:y,result:E})=>g||(y(c)?E:null),null)}(l);return r?r.notation==="hex"&&s!=="float"?Object.assign(Object.assign({},r),{type:"int"}):r.notation==="func"?Object.assign(Object.assign({},r),{type:s}):null:null}const Rr={int:[function(l){const s=Br(l);return s?new mt(s,"rgb","int"):null},function(l){const s=Mr(l);return s?new mt(s,"rgb","int"):null},Fn("int"),Ae("int"),en("int"),Ut("int"),Sr("int"),Be("int")],float:[Fn("float"),Ae("float"),en("float"),Ut("float"),Sr("float"),Be("float")]};function On(l){const s=Rr[l];return r=>s.reduce((c,g)=>c||g(r),null)}function kr(l){const s=Xt(Math.floor(l),0,255).toString(16);return s.length===1?`0${s}`:s}function Dr(l,s="#"){return`${s}${me(l.getComponents("rgb")).map(kr).join("")}`}function Yn(l,s="#"){const r=l.getComponents("rgb");return`${s}${[r[0],r[1],r[2],255*r[3]].map(kr).join("")}`}function Lr(l,s){const r=Ht(s==="float"?2:0);return`rgb(${me(l.getComponents("rgb",s)).map(c=>r(c)).join(", ")})`}function Bo(l){return s=>Lr(s,l)}function sn(l,s){const r=Ht(2),c=Ht(s==="float"?2:0);return`rgba(${l.getComponents("rgb",s).map((g,y)=>(y===3?r:c)(g)).join(", ")})`}function Mo(l){return s=>sn(s,l)}function Vn(l,s){const r=Ht(s==="float"?2:0),c=["r","g","b"];return`{${me(l.getComponents("rgb",s)).map((g,y)=>`${c[y]}: ${r(g)}`).join(", ")}}`}function Gr(l){return s=>Vn(s,l)}function xs(l,s){const r=Ht(2),c=Ht(s==="float"?2:0),g=["r","g","b","a"];return`{${l.getComponents("rgb",s).map((y,E)=>`${g[E]}: ${(E===3?r:c)(y)}`).join(", ")}}`}function Cs(l){return s=>xs(s,l)}const Zn=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Dr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Yn},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(l){const s=[Ht(0),vs,vs];return`hsl(${me(l.getComponents("hsl")).map((r,c)=>s[c](r)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(l){const s=[Ht(0),vs,vs,Ht(2)];return`hsla(${l.getComponents("hsl").map((r,c)=>s[c](r)).join(", ")})`}},...["int","float"].reduce((l,s)=>[...l,{format:{alpha:!1,mode:"rgb",notation:"func",type:s},stringifier:Bo(s)},{format:{alpha:!0,mode:"rgb",notation:"func",type:s},stringifier:Mo(s)},{format:{alpha:!1,mode:"rgb",notation:"object",type:s},stringifier:Gr(s)},{format:{alpha:!0,mode:"rgb",notation:"object",type:s},stringifier:Cs(s)}],[])];function Es(l){return Zn.reduce((s,r)=>{return s||(c=r.format,g=l,c.alpha===g.alpha&&c.mode===g.mode&&c.notation===g.notation&&c.type===g.type?r.stringifier:null);var c,g},null)}const Gi=bt("apl");class Wn{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),this.value=r.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(Gi()),r.viewProps.bindTabIndex(this.element);const c=s.createElement("div");c.classList.add(Gi("b")),this.element.appendChild(c);const g=s.createElement("div");g.classList.add(Gi("c")),c.appendChild(g),this.colorElem_=g;const y=s.createElement("div");y.classList.add(Gi("m")),this.element.appendChild(y),this.markerElem_=y;const E=s.createElement("div");E.classList.add(Gi("p")),this.markerElem_.appendChild(E),this.previewElem_=E,this.update_()}update_(){const s=this.value.rawValue,r=s.getComponents("rgb"),c=new mt([r[0],r[1],r[2],0],"rgb"),g=new mt([r[0],r[1],r[2],255],"rgb"),y=["to right",sn(c),sn(g)];this.colorElem_.style.background=`linear-gradient(${y.join(",")})`,this.previewElem_.style.backgroundColor=sn(s);const E=Dt(r[3],0,1,0,100);this.markerElem_.style.left=`${E}%`}onValueChange_(){this.update_()}}class Hn{constructor(s,r){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.view=new Wn(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Si(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,r){if(!s.point)return;const c=s.point.x/s.bounds.width,g=this.value.rawValue,[y,E,N]=g.getComponents("hsv");this.value.setRawValue(new mt([y,E,N,c],"hsv"),r)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const r=be(Di(!0),ri(s));if(r===0)return;const c=this.value.rawValue,[g,y,E,N]=c.getComponents("hsv");this.value.setRawValue(new mt([g,y,E,N+r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){be(Di(!0),ri(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const We=bt("coltxt");class nn{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(We());const c=s.createElement("div");c.classList.add(We("m")),this.modeElem_=function(E){const N=E.createElement("select");return N.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((J,ot)=>{const Tt=E.createElement("option");return Tt.textContent=ot.text,Tt.value=ot.value,J.appendChild(Tt),J},E.createDocumentFragment())),N}(s),this.modeElem_.classList.add(We("ms")),c.appendChild(this.modeSelectElement);const g=s.createElement("div");g.classList.add(We("mm")),g.appendChild(xi(s,"dropdown")),c.appendChild(g),this.element.appendChild(c);const y=s.createElement("div");y.classList.add(We("w")),this.element.appendChild(y),this.textsElem_=y,this.textViews_=r.textViews,this.applyTextViews_(),W(r.colorMode,E=>{this.modeElem_.value=E})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(s){this.textViews_=s,this.applyTextViews_()}applyTextViews_(){Pn(this.textsElem_);const s=this.element.ownerDocument;this.textViews_.forEach(r=>{const c=s.createElement("div");c.classList.add(We("c")),c.appendChild(r.element),this.textsElem_.appendChild(c)})}}function Ai(l,s,r){const c=ys(l,s)[r];return new As({min:0,max:c})}function Xn(l,s,r){return new Ti(l,{arrayPosition:r===0?"fst":r===2?"lst":"mid",baseStep:Di(!1),parser:s.parser,props:It.fromObject({draggingScale:s.colorType==="float"?.01:1,formatter:(c=s.colorType,Ht(c==="float"?2:0))}),value:re(0,{constraint:Ai(s.colorMode,s.colorType,r)}),viewProps:s.viewProps});var c}class zr{constructor(s,r){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=r.colorType,this.parser_=r.parser,this.value=r.value,this.viewProps=r.viewProps,this.colorMode=re(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(s),this.view=new nn(s,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(s){const r={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},c=[Xn(s,r,0),Xn(s,r,1),Xn(s,r,2)];return c.forEach((g,y)=>{Js({primary:this.value,secondary:g.value,forward:E=>E.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[y],backward:(E,N)=>{const J=this.colorMode.rawValue,ot=E.rawValue.getComponents(J,this.colorType_);return ot[y]=N.rawValue,new mt(ie(me(ot),ot[3]),J,this.colorType_)}})}),c}onModeSelectChange_(s){const r=s.currentTarget;this.colorMode.rawValue=r.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const zi=bt("hpl");class Jn{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),this.value=r.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(zi()),r.viewProps.bindTabIndex(this.element);const c=s.createElement("div");c.classList.add(zi("c")),this.element.appendChild(c);const g=s.createElement("div");g.classList.add(zi("m")),this.element.appendChild(g),this.markerElem_=g,this.update_()}update_(){const s=this.value.rawValue,[r]=s.getComponents("hsv");this.markerElem_.style.backgroundColor=Lr(new mt([r,100,100],"hsv"));const c=Dt(r,0,360,0,100);this.markerElem_.style.left=`${c}%`}onValueChange_(){this.update_()}}class Kn{constructor(s,r){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.view=new Jn(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Si(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,r){if(!s.point)return;const c=Dt(Xt(s.point.x,0,s.bounds.width),0,s.bounds.width,0,359),g=this.value.rawValue,[,y,E,N]=g.getComponents("hsv");this.value.setRawValue(new mt([c,y,E,N],"hsv"),r)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const r=be(Di(!1),ri(s));if(r===0)return;const c=this.value.rawValue,[g,y,E,N]=c.getComponents("hsv");this.value.setRawValue(new mt([g+r,y,E,N],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){be(Di(!1),ri(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const qn=bt("svp");class Po{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),this.value=r.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(qn()),r.viewProps.bindTabIndex(this.element);const c=s.createElement("canvas");c.height=64,c.width=64,c.classList.add(qn("c")),this.element.appendChild(c),this.canvasElement=c;const g=s.createElement("div");g.classList.add(qn("m")),this.element.appendChild(g),this.markerElem_=g,this.update_()}update_(){const s=function(ot){const Tt=ot.ownerDocument.defaultView;return Tt&&"document"in Tt?ot.getContext("2d"):null}(this.canvasElement);if(!s)return;const r=this.value.rawValue.getComponents("hsv"),c=this.canvasElement.width,g=this.canvasElement.height,y=s.getImageData(0,0,c,g),E=y.data;for(let ot=0;ot<g;ot++)for(let Tt=0;Tt<c;Tt++){const ee=Dt(Tt,0,c,0,100),je=Dt(ot,0,g,100,0),Me=$s(r[0],ee,je),Je=4*(ot*c+Tt);E[Je]=Me[0],E[Je+1]=Me[1],E[Je+2]=Me[2],E[Je+3]=255}s.putImageData(y,0,0);const N=Dt(r[1],0,100,0,100);this.markerElem_.style.left=`${N}%`;const J=Dt(r[2],0,100,100,0);this.markerElem_.style.top=`${J}%`}onValueChange_(){this.update_()}}class So{constructor(s,r){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.view=new Po(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Si(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,r){if(!s.point)return;const c=Dt(s.point.x,0,s.bounds.width,0,100),g=Dt(s.point.y,0,s.bounds.height,100,0),[y,,,E]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new mt([y,c,g,E],"hsv"),r)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){xr(s.key)&&s.preventDefault();const[r,c,g,y]=this.value.rawValue.getComponents("hsv"),E=Di(!1),N=be(E,ri(s)),J=be(E,_s(s));N===0&&J===0||this.value.setRawValue(new mt([r,c+N,g+J,y],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){const r=Di(!1),c=be(r,ri(s)),g=be(r,_s(s));c===0&&g===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class $n{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.hPaletteC_=new Kn(s,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new So(s,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=r.supportsAlpha?{palette:new Hn(s,{value:this.value,viewProps:this.viewProps}),text:new Ti(s,{parser:gi,baseStep:.1,props:It.fromObject({draggingScale:.01,formatter:Ht(2)}),value:re(0,{constraint:new As({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Js({primary:this.value,secondary:this.alphaIcs_.text.value,forward:c=>c.rawValue.getComponents()[3],backward:(c,g)=>{const y=c.rawValue.getComponents();return y[3]=g.rawValue,new mt(y,c.rawValue.mode)}}),this.textC_=new zr(s,{colorType:r.colorType,parser:gi,value:this.value,viewProps:this.viewProps}),this.view=new te(s,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:r.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const tr=bt("colsw");class To{constructor(s,r){this.onValueChange_=this.onValueChange_.bind(this),r.value.emitter.on("change",this.onValueChange_),this.value=r.value,this.element=s.createElement("div"),this.element.classList.add(tr()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("div");c.classList.add(tr("sw")),this.element.appendChild(c),this.swatchElem_=c;const g=s.createElement("button");g.classList.add(tr("b")),r.viewProps.bindDisabled(g),this.element.appendChild(g),this.buttonElement=g,this.update_()}update_(){const s=this.value.rawValue;this.swatchElem_.style.backgroundColor=Yn(s)}onValueChange_(){this.update_()}}class Ro{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.view=new To(s,{value:this.value,viewProps:this.viewProps})}}class er{constructor(s,r){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.foldable_=Oi.create(r.expanded),this.swatchC_=new Ro(s,{value:this.value,viewProps:this.viewProps});const c=this.swatchC_.view.buttonElement;c.addEventListener("blur",this.onButtonBlur_),c.addEventListener("click",this.onButtonClick_),this.textC_=new Dn(s,{parser:r.parser,props:It.fromObject({formatter:r.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ye(s,{foldable:this.foldable_,pickerLayout:r.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=r.pickerLayout==="popup"?new vo(s,{viewProps:this.viewProps}):null;const g=new $n(s,{colorType:r.colorType,supportsAlpha:r.supportsAlpha,value:this.value,viewProps:this.viewProps});g.view.allFocusableElements.forEach(y=>{y.addEventListener("blur",this.onPopupChildBlur_),y.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=g,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(g.view.element),Js({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:y=>y.rawValue,backward:(y,E)=>E.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ns(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(s){if(!this.popC_)return;const r=this.view.element,c=s.relatedTarget;c&&r.contains(c)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(s){if(!this.popC_)return;const r=this.popC_.view.element,c=ii(s);c&&r.contains(c)||c&&c===this.swatchC_.view.buttonElement&&!zs(r.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(s){this.popC_?s.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&s.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function ko(l){return me(l.getComponents("rgb")).reduce((s,r)=>s<<8|255&Math.floor(r),0)}function Do(l){return l.getComponents("rgb").reduce((s,r,c)=>s<<8|255&Math.floor(c===3?255*r:r),0)>>>0}function va(l){return typeof l!="number"?mt.black():new mt([(s=l)>>16&255,s>>8&255,255&s],"rgb");var s}function Lo(l){return typeof l!="number"?mt.black():new mt([(s=l)>>24&255,s>>16&255,s>>8&255,Dt(255&s,0,255,0,1)],"rgb");var s}function fe(l){var s;return!(!(l!=null&&l.alpha)&&!(!((s=l==null?void 0:l.color)===null||s===void 0)&&s.alpha))}function He(l){return l?s=>Yn(s,"0x"):s=>Dr(s,"0x")}const Go={id:"input-color-number",type:"input",accept:(l,s)=>{if(typeof l!="number"||!function(c){return"color"in c||"view"in c&&c.view==="color"}(s))return null;const r=Mt(s);return r?{initialValue:l,params:r}:null},binding:{reader:l=>fe(l.params)?Lo:va,equals:mt.equals,writer:l=>function(s){const r=s?Do:ko;return(c,g)=>{qs(c,r(g))}}(fe(l.params))},controller:l=>{const s=fe(l.params),r="expanded"in l.params?l.params.expanded:void 0,c="picker"in l.params?l.params.picker:void 0;return new er(l.document,{colorType:"int",expanded:r!=null&&r,formatter:He(s),parser:On("int"),pickerLayout:c??"popup",supportsAlpha:s,value:l.value,viewProps:l.viewProps})}};function rn(l){return s=>function(r,c){return mt.isColorObject(r)?mt.fromObject(r,c):mt.black(c)}(s,l)}function zo(l,s){return r=>l?xs(r,s):Vn(r,s)}const _a={id:"input-color-object",type:"input",accept:(l,s)=>{if(!mt.isColorObject(l))return null;const r=Mt(s);return r?{initialValue:l,params:r}:null},binding:{reader:l=>rn(Li(l.params)),equals:mt.equals,writer:l=>{return c=l.initialValue,s=mt.isRgbaColorObject(c),r=Li(l.params),(g,y)=>{s?function(E,N,J){const ot=N.toRgbaObject(J);E.writeProperty("r",ot.r),E.writeProperty("g",ot.g),E.writeProperty("b",ot.b),E.writeProperty("a",ot.a)}(g,y,r):function(E,N,J){const ot=N.toRgbaObject(J);E.writeProperty("r",ot.r),E.writeProperty("g",ot.g),E.writeProperty("b",ot.b)}(g,y,r)};var s,r,c}},controller:l=>{var s;const r=mt.isRgbaColorObject(l.initialValue),c="expanded"in l.params?l.params.expanded:void 0,g="picker"in l.params?l.params.picker:void 0,y=(s=Li(l.params))!==null&&s!==void 0?s:"int";return new er(l.document,{colorType:y,expanded:c!=null&&c,formatter:zo(r,y),parser:On(y),pickerLayout:g??"popup",supportsAlpha:r,value:l.value,viewProps:l.viewProps})}},No={id:"input-color-string",type:"input",accept:(l,s)=>{if(typeof l!="string"||"view"in s&&s.view==="text")return null;const r=Qn(l,Li(s));if(!r||!Es(r))return null;const c=Mt(s);return c?{initialValue:l,params:c}:null},binding:{reader:l=>{var s;return function(r){const c=Rr[r];return g=>{if(typeof g!="string")return mt.black(r);const y=c.reduce((E,N)=>E||N(g),null);return y??mt.black(r)}}((s=Li(l.params))!==null&&s!==void 0?s:"int")},equals:mt.equals,writer:l=>{const s=Qn(l.initialValue,Li(l.params));if(!s)throw dt.shouldNeverHappen();const r=function(c){const g=Es(c);return g?(y,E)=>{qs(y,g(E))}:null}(s);if(!r)throw dt.notBindable();return r}},controller:l=>{const s=Qn(l.initialValue,Li(l.params));if(!s)throw dt.shouldNeverHappen();const r=Es(s);if(!r)throw dt.shouldNeverHappen();const c="expanded"in l.params?l.params.expanded:void 0,g="picker"in l.params?l.params.picker:void 0;return new er(l.document,{colorType:s.type,expanded:c!=null&&c,formatter:r,parser:On(s.type),pickerLayout:g??"popup",supportsAlpha:s.alpha,value:l.value,viewProps:l.viewProps})}};class Xe{constructor(s){this.components=s.components,this.asm_=s.assembly}constrain(s){const r=this.asm_.toComponents(s).map((c,g)=>{var y,E;return(E=(y=this.components[g])===null||y===void 0?void 0:y.constrain(c))!==null&&E!==void 0?E:c});return this.asm_.fromComponents(r)}}const Nr=bt("pndtxt");class jo{constructor(s,r){this.textViews=r.textViews,this.element=s.createElement("div"),this.element.classList.add(Nr()),this.textViews.forEach(c=>{const g=s.createElement("div");g.classList.add(Nr("a")),g.appendChild(c.element),this.element.appendChild(g)})}}class ir{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.acs_=r.axes.map((c,g)=>function(y,E,N){return new Ti(y,{arrayPosition:N===0?"fst":N===E.axes.length-1?"lst":"mid",baseStep:E.axes[N].baseStep,parser:E.parser,props:E.axes[N].textProps,value:re(0,{constraint:E.axes[N].constraint}),viewProps:E.viewProps})}(s,r,g)),this.acs_.forEach((c,g)=>{Js({primary:this.value,secondary:c.value,forward:y=>r.assembly.toComponents(y.rawValue)[g],backward:(y,E)=>{const N=r.assembly.toComponents(y.rawValue);return N[g]=E.rawValue,r.assembly.fromComponents(N)}})}),this.view=new jo(s,{textViews:this.acs_.map(c=>c.view)})}}function jr(l,s){return"step"in l&&!K(l.step)?new Zi(l.step,s):null}function ve(l){return"max"in l&&!K(l.max)||"min"in l&&!K(l.min)?new As({max:l.max,min:l.min}):null}function Uo(l){const[s,r]=function(c){const g=c?ni(c,As):null;return g?[g.minValue,g.maxValue]:[void 0,void 0]}(l);return[s??0,r??100]}const Fo={id:"input-number",type:"input",accept:(l,s)=>{if(typeof l!="number")return null;const r=yt,c=oe(s,{format:r.optional.function,max:r.optional.number,min:r.optional.number,options:r.optional.custom(pe),step:r.optional.number});return c?{initialValue:l,params:c}:null},binding:{reader:l=>bo,constraint:l=>function(s,r){const c=[],g=jr(s,r);g&&c.push(g);const y=ve(s);y&&c.push(y);const E=Nt(s.options);return E&&c.push(E),new Ys(c)}(l.params,l.initialValue),writer:l=>qs},controller:l=>{var s,r;const c=l.value,g=l.constraint;if(g&&ni(g,Vs))return new Zs(l.document,{props:It.fromObject({options:(s=Ze(g))!==null&&s!==void 0?s:[]}),value:c,viewProps:l.viewProps});const y=(r="format"in l.params?l.params.format:void 0)!==null&&r!==void 0?r:Ht(ge(g,c.rawValue));if(g&&ni(g,As)){const[E,N]=Uo(g);return new Ki(l.document,{baseStep:oi(g),parser:gi,sliderProps:It.fromObject({maxValue:N,minValue:E}),textProps:It.fromObject({draggingScale:Ri(g,c.rawValue),formatter:y}),value:c,viewProps:l.viewProps})}return new Ti(l.document,{baseStep:oi(g),parser:gi,props:It.fromObject({draggingScale:Ri(g,c.rawValue),formatter:y}),value:c,viewProps:l.viewProps})}};class fi{constructor(s=0,r=0){this.x=s,this.y=r}getComponents(){return[this.x,this.y]}static isObject(s){if(K(s))return!1;const r=s.x,c=s.y;return typeof r=="number"&&typeof c=="number"}static equals(s,r){return s.x===r.x&&s.y===r.y}toObject(){return{x:this.x,y:this.y}}}const Ur={toComponents:l=>l.getComponents(),fromComponents:l=>new fi(...l)},Ni=bt("p2d");class on{constructor(s,r){this.element=s.createElement("div"),this.element.classList.add(Ni()),r.viewProps.bindClassModifiers(this.element),W(r.expanded,wt(this.element,Ni(void 0,"expanded")));const c=s.createElement("div");c.classList.add(Ni("h")),this.element.appendChild(c);const g=s.createElement("button");g.classList.add(Ni("b")),g.appendChild(xi(s,"p2dpad")),r.viewProps.bindDisabled(g),c.appendChild(g),this.buttonElement=g;const y=s.createElement("div");if(y.classList.add(Ni("t")),c.appendChild(y),this.textElement=y,r.pickerLayout==="inline"){const E=s.createElement("div");E.classList.add(Ni("p")),this.element.appendChild(E),this.pickerElement=E}else this.pickerElement=null}}const ne=bt("p2dp");class ji{constructor(s,r){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=r.invertsY,this.maxValue_=r.maxValue,this.element=s.createElement("div"),this.element.classList.add(ne()),r.layout==="popup"&&this.element.classList.add(ne(void 0,"p"));const c=s.createElement("div");c.classList.add(ne("p")),r.viewProps.bindTabIndex(c),this.element.appendChild(c),this.padElement=c;const g=s.createElementNS(De,"svg");g.classList.add(ne("g")),this.padElement.appendChild(g),this.svgElem_=g;const y=s.createElementNS(De,"line");y.classList.add(ne("ax")),y.setAttributeNS(null,"x1","0"),y.setAttributeNS(null,"y1","50%"),y.setAttributeNS(null,"x2","100%"),y.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(y);const E=s.createElementNS(De,"line");E.classList.add(ne("ax")),E.setAttributeNS(null,"x1","50%"),E.setAttributeNS(null,"y1","0"),E.setAttributeNS(null,"x2","50%"),E.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(E);const N=s.createElementNS(De,"line");N.classList.add(ne("l")),N.setAttributeNS(null,"x1","50%"),N.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(N),this.lineElem_=N;const J=s.createElement("div");J.classList.add(ne("m")),this.padElement.appendChild(J),this.markerElem_=J,r.value.emitter.on("change",this.onValueChange_),this.value=r.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[s,r]=this.value.rawValue.getComponents(),c=this.maxValue_,g=Dt(s,-c,+c,0,100),y=Dt(r,-c,+c,0,100),E=this.invertsY_?100-y:y;this.lineElem_.setAttributeNS(null,"x2",`${g}%`),this.lineElem_.setAttributeNS(null,"y2",`${E}%`),this.markerElem_.style.left=`${g}%`,this.markerElem_.style.top=`${E}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Is(l,s,r){return[be(s[0],ri(l)),be(s[1],_s(l))*(r?1:-1)]}class Qo{constructor(s,r){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.baseSteps_=r.baseSteps,this.maxValue_=r.maxValue,this.invertsY_=r.invertsY,this.view=new ji(s,{invertsY:this.invertsY_,layout:r.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Si(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(s,r){if(!s.point)return;const c=this.maxValue_,g=Dt(s.point.x,0,s.bounds.width,-c,+c),y=Dt(this.invertsY_?s.bounds.height-s.point.y:s.point.y,0,s.bounds.height,-c,+c);this.value.setRawValue(new fi(g,y),r)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onPadKeyDown_(s){xr(s.key)&&s.preventDefault();const[r,c]=Is(s,this.baseSteps_,this.invertsY_);r===0&&c===0||this.value.setRawValue(new fi(this.value.rawValue.x+r,this.value.rawValue.y+c),{forceEmit:!1,last:!1})}onPadKeyUp_(s){const[r,c]=Is(s,this.baseSteps_,this.invertsY_);r===0&&c===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Bs{constructor(s,r){var c,g;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=r.value,this.viewProps=r.viewProps,this.foldable_=Oi.create(r.expanded),this.popC_=r.pickerLayout==="popup"?new vo(s,{viewProps:this.viewProps}):null;const y=new Qo(s,{baseSteps:[r.axes[0].baseStep,r.axes[1].baseStep],invertsY:r.invertsY,layout:r.pickerLayout,maxValue:r.maxValue,value:this.value,viewProps:this.viewProps});y.view.allFocusableElements.forEach(E=>{E.addEventListener("blur",this.onPopupChildBlur_),E.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=y,this.textC_=new ir(s,{assembly:Ur,axes:r.axes,parser:r.parser,value:this.value,viewProps:this.viewProps}),this.view=new on(s,{expanded:this.foldable_.value("expanded"),pickerLayout:r.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(c=this.view.buttonElement)===null||c===void 0||c.addEventListener("blur",this.onPadButtonBlur_),(g=this.view.buttonElement)===null||g===void 0||g.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Js({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:E=>E.rawValue,backward:(E,N)=>N.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ns(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(s){if(!this.popC_)return;const r=this.view.element,c=s.relatedTarget;c&&r.contains(c)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(s){if(!this.popC_)return;const r=this.popC_.view.element,c=ii(s);c&&r.contains(c)||c&&c===this.view.buttonElement&&!zs(r.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(s){this.popC_?s.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&s.key==="Escape"&&this.view.buttonElement.focus()}}function wa(l){return fi.isObject(l)?new fi(l.x,l.y):new fi}function sr(l,s){l.writeProperty("x",s.x),l.writeProperty("y",s.y)}function ai(l,s){if(!l)return;const r=[],c=jr(l,s);c&&r.push(c);const g=ve(l);return g&&r.push(g),new Ys(r)}function Fr(l,s){var r,c;const g=l&&ni(l,As);if(g)return Math.max(Math.abs((r=g.minValue)!==null&&r!==void 0?r:0),Math.abs((c=g.maxValue)!==null&&c!==void 0?c:0));const y=oi(l);return Math.max(10*Math.abs(y),10*Math.abs(s))}function Oo(l,s){const r=s instanceof Xe?s.components[0]:void 0,c=s instanceof Xe?s.components[1]:void 0,g=Fr(r,l.x),y=Fr(c,l.y);return Math.max(g,y)}function an(l,s){return{baseStep:oi(s),constraint:s,textProps:It.fromObject({draggingScale:Ri(s,l),formatter:Ht(ge(s,l))})}}function Yo(l){if(!("y"in l))return!1;const s=l.y;return!!s&&"inverted"in s&&!!s.inverted}const nr={id:"input-point2d",type:"input",accept:(l,s)=>{if(!fi.isObject(l))return null;const r=yt,c=oe(s,{expanded:r.optional.boolean,picker:r.optional.custom(jn),x:r.optional.custom(le),y:r.optional.object({inverted:r.optional.boolean,max:r.optional.number,min:r.optional.number,step:r.optional.number})});return c?{initialValue:l,params:c}:null},binding:{reader:l=>wa,constraint:l=>{return s=l.params,r=l.initialValue,new Xe({assembly:Ur,components:[ai("x"in s?s.x:void 0,r.x),ai("y"in s?s.y:void 0,r.y)]});var s,r},equals:fi.equals,writer:l=>sr},controller:l=>{const s=l.document,r=l.value,c=l.constraint;if(!(c instanceof Xe))throw dt.shouldNeverHappen();const g="expanded"in l.params?l.params.expanded:void 0,y="picker"in l.params?l.params.picker:void 0;return new Bs(s,{axes:[an(r.rawValue.x,c.components[0]),an(r.rawValue.y,c.components[1])],expanded:g!=null&&g,invertsY:Yo(l.params),maxValue:Oo(r.rawValue,c),parser:gi,pickerLayout:y??"popup",value:r,viewProps:l.viewProps})}};class ts{constructor(s=0,r=0,c=0){this.x=s,this.y=r,this.z=c}getComponents(){return[this.x,this.y,this.z]}static isObject(s){if(K(s))return!1;const r=s.x,c=s.y,g=s.z;return typeof r=="number"&&typeof c=="number"&&typeof g=="number"}static equals(s,r){return s.x===r.x&&s.y===r.y&&s.z===r.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Qr={toComponents:l=>l.getComponents(),fromComponents:l=>new ts(...l)};function ln(l){return ts.isObject(l)?new ts(l.x,l.y,l.z):new ts}function es(l,s){l.writeProperty("x",s.x),l.writeProperty("y",s.y),l.writeProperty("z",s.z)}function Or(l,s){return{baseStep:oi(s),constraint:s,textProps:It.fromObject({draggingScale:Ri(s,l),formatter:Ht(ge(s,l))})}}const Vo={id:"input-point3d",type:"input",accept:(l,s)=>{if(!ts.isObject(l))return null;const r=yt,c=oe(s,{x:r.optional.custom(le),y:r.optional.custom(le),z:r.optional.custom(le)});return c?{initialValue:l,params:c}:null},binding:{reader:l=>ln,constraint:l=>{return s=l.params,r=l.initialValue,new Xe({assembly:Qr,components:[ai("x"in s?s.x:void 0,r.x),ai("y"in s?s.y:void 0,r.y),ai("z"in s?s.z:void 0,r.z)]});var s,r},equals:ts.equals,writer:l=>es},controller:l=>{const s=l.value,r=l.constraint;if(!(r instanceof Xe))throw dt.shouldNeverHappen();return new ir(l.document,{assembly:Qr,axes:[Or(s.rawValue.x,r.components[0]),Or(s.rawValue.y,r.components[1]),Or(s.rawValue.z,r.components[2])],parser:gi,value:s,viewProps:l.viewProps})}};class is{constructor(s=0,r=0,c=0,g=0){this.x=s,this.y=r,this.z=c,this.w=g}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(s){if(K(s))return!1;const r=s.x,c=s.y,g=s.z,y=s.w;return typeof r=="number"&&typeof c=="number"&&typeof g=="number"&&typeof y=="number"}static equals(s,r){return s.x===r.x&&s.y===r.y&&s.z===r.z&&s.w===r.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Yr={toComponents:l=>l.getComponents(),fromComponents:l=>new is(...l)};function Zo(l){return is.isObject(l)?new is(l.x,l.y,l.z,l.w):new is}function hn(l,s){l.writeProperty("x",s.x),l.writeProperty("y",s.y),l.writeProperty("z",s.z),l.writeProperty("w",s.w)}const rr={id:"input-point4d",type:"input",accept:(l,s)=>{if(!is.isObject(l))return null;const r=yt,c=oe(s,{x:r.optional.custom(le),y:r.optional.custom(le),z:r.optional.custom(le),w:r.optional.custom(le)});return c?{initialValue:l,params:c}:null},binding:{reader:l=>Zo,constraint:l=>{return s=l.params,r=l.initialValue,new Xe({assembly:Yr,components:[ai("x"in s?s.x:void 0,r.x),ai("y"in s?s.y:void 0,r.y),ai("z"in s?s.z:void 0,r.z),ai("w"in s?s.w:void 0,r.w)]});var s,r},equals:is.equals,writer:l=>hn},controller:l=>{const s=l.value,r=l.constraint;if(!(r instanceof Xe))throw dt.shouldNeverHappen();return new ir(l.document,{assembly:Yr,axes:s.rawValue.getComponents().map((c,g)=>{return y=c,{baseStep:oi(E=r.components[g]),constraint:E,textProps:It.fromObject({draggingScale:Ri(E,y),formatter:Ht(ge(E,y))})};var y,E}),parser:gi,value:s,viewProps:l.viewProps})}},Ms={id:"input-string",type:"input",accept:(l,s)=>{if(typeof l!="string")return null;const r=oe(s,{options:yt.optional.custom(pe)});return r?{initialValue:l,params:r}:null},binding:{reader:l=>Xs,constraint:l=>function(s){const r=[],c=Nt(s.options);return c&&r.push(c),new Ys(r)}(l.params),writer:l=>qs},controller:l=>{var s;const r=l.document,c=l.value,g=l.constraint;return g&&ni(g,Vs)?new Zs(r,{props:It.fromObject({options:(s=Ze(g))!==null&&s!==void 0?s:[]}),value:c,viewProps:l.viewProps}):new Dn(r,{parser:y=>y,props:It.fromObject({formatter:zn}),value:c,viewProps:l.viewProps})}},ss={defaultInterval:200,defaultLineCount:3},cn=bt("mll");class Wo{constructor(s,r){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=r.formatter,this.element=s.createElement("div"),this.element.classList.add(cn()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("textarea");c.classList.add(cn("i")),c.style.height=`calc(var(--bld-us) * ${r.lineCount})`,c.readOnly=!0,r.viewProps.bindDisabled(c),this.element.appendChild(c),this.textareaElem_=c,r.value.emitter.on("change",this.onValueUpdate_),this.value=r.value,this.update_()}update_(){const s=this.textareaElem_,r=s.scrollTop===s.scrollHeight-s.clientHeight,c=[];this.value.rawValue.forEach(g=>{g!==void 0&&c.push(this.formatter_(g))}),s.textContent=c.join(`
`),r&&(s.scrollTop=s.scrollHeight)}onValueUpdate_(){this.update_()}}class Ps{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.view=new Wo(s,{formatter:r.formatter,lineCount:r.lineCount,value:this.value,viewProps:this.viewProps})}}const dn=bt("sgl");class un{constructor(s,r){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=r.formatter,this.element=s.createElement("div"),this.element.classList.add(dn()),r.viewProps.bindClassModifiers(this.element);const c=s.createElement("input");c.classList.add(dn("i")),c.readOnly=!0,c.type="text",r.viewProps.bindDisabled(c),this.element.appendChild(c),this.inputElement=c,r.value.emitter.on("change",this.onValueUpdate_),this.value=r.value,this.update_()}update_(){const s=this.value.rawValue,r=s[s.length-1];this.inputElement.value=r!==void 0?this.formatter_(r):""}onValueUpdate_(){this.update_()}}class ns{constructor(s,r){this.value=r.value,this.viewProps=r.viewProps,this.view=new un(s,{formatter:r.formatter,value:this.value,viewProps:this.viewProps})}}const Vr={id:"monitor-bool",type:"monitor",accept:(l,s)=>{if(typeof l!="boolean")return null;const r=oe(s,{lineCount:yt.optional.number});return r?{initialValue:l,params:r}:null},binding:{reader:l=>br},controller:l=>{var s;return l.value.rawValue.length===1?new ns(l.document,{formatter:wo,value:l.value,viewProps:l.viewProps}):new Ps(l.document,{formatter:wo,lineCount:(s=l.params.lineCount)!==null&&s!==void 0?s:ss.defaultLineCount,value:l.value,viewProps:l.viewProps})}},vi=bt("grl");class pn{constructor(s,r){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=s.createElement("div"),this.element.classList.add(vi()),r.viewProps.bindClassModifiers(this.element),this.formatter_=r.formatter,this.props_=r.props,this.cursor_=r.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const c=s.createElementNS(De,"svg");c.classList.add(vi("g")),c.style.height=`calc(var(--bld-us) * ${r.lineCount})`,this.element.appendChild(c),this.svgElem_=c;const g=s.createElementNS(De,"polyline");this.svgElem_.appendChild(g),this.lineElem_=g;const y=s.createElement("div");y.classList.add(vi("t"),bt("tt")()),this.element.appendChild(y),this.tooltipElem_=y,r.value.emitter.on("change",this.onValueUpdate_),this.value=r.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const s=this.svgElem_.getBoundingClientRect(),r=this.value.rawValue.length-1,c=this.props_.get("minValue"),g=this.props_.get("maxValue"),y=[];this.value.rawValue.forEach((Tt,ee)=>{if(Tt===void 0)return;const je=Dt(ee,0,r,0,s.width),Me=Dt(Tt,c,g,s.height,0);y.push([je,Me].join(","))}),this.lineElem_.setAttributeNS(null,"points",y.join(" "));const E=this.tooltipElem_,N=this.value.rawValue[this.cursor_.rawValue];if(N===void 0)return void E.classList.remove(vi("t","a"));const J=Dt(this.cursor_.rawValue,0,r,0,s.width),ot=Dt(N,c,g,s.height,0);E.style.left=`${J}px`,E.style.top=`${ot}px`,E.textContent=`${this.formatter_(N)}`,E.classList.contains(vi("t","a"))||(E.classList.add(vi("t","a"),vi("t","in")),hs(E),E.classList.remove(vi("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class gn{constructor(s,r){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=r.props,this.value=r.value,this.viewProps=r.viewProps,this.cursor_=re(-1),this.view=new pn(s,{cursor:this.cursor_,formatter:r.formatter,lineCount:r.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),zs(s)){const c=new Si(this.view.element);c.emitter.on("down",this.onGraphPointerDown_),c.emitter.on("move",this.onGraphPointerMove_),c.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(s){const r=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Dt(s.offsetX,0,r.width,0,this.value.rawValue.length))}onGraphPointerDown_(s){this.onGraphPointerMove_(s)}onGraphPointerMove_(s){s.data.point?this.cursor_.rawValue=Math.floor(Dt(s.data.point.x,0,s.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function or(l){return"format"in l&&!K(l.format)?l.format:Ht(2)}function Zr(l){return"view"in l&&l.view==="graph"}const Ss={id:"monitor-number",type:"monitor",accept:(l,s)=>{if(typeof l!="number")return null;const r=yt,c=oe(s,{format:r.optional.function,lineCount:r.optional.number,max:r.optional.number,min:r.optional.number,view:r.optional.string});return c?{initialValue:l,params:c}:null},binding:{defaultBufferSize:l=>Zr(l)?64:1,reader:l=>bo},controller:l=>Zr(l.params)?function(s){var r,c,g;return new gn(s.document,{formatter:or(s.params),lineCount:(r=s.params.lineCount)!==null&&r!==void 0?r:ss.defaultLineCount,props:It.fromObject({maxValue:(c="max"in s.params?s.params.max:null)!==null&&c!==void 0?c:100,minValue:(g="min"in s.params?s.params.min:null)!==null&&g!==void 0?g:0}),value:s.value,viewProps:s.viewProps})}(l):function(s){var r;return s.value.rawValue.length===1?new ns(s.document,{formatter:or(s.params),value:s.value,viewProps:s.viewProps}):new Ps(s.document,{formatter:or(s.params),lineCount:(r=s.params.lineCount)!==null&&r!==void 0?r:ss.defaultLineCount,value:s.value,viewProps:s.viewProps})}(l)},Ui={id:"monitor-string",type:"monitor",accept:(l,s)=>{if(typeof l!="string")return null;const r=yt,c=oe(s,{lineCount:r.optional.number,multiline:r.optional.boolean});return c?{initialValue:l,params:c}:null},binding:{reader:l=>Xs},controller:l=>{var s;const r=l.value;return r.rawValue.length>1||"multiline"in l.params&&l.params.multiline?new Ps(l.document,{formatter:zn,lineCount:(s=l.params.lineCount)!==null&&s!==void 0?s:ss.defaultLineCount,value:r,viewProps:l.viewProps}):new ns(l.document,{formatter:zn,value:r,viewProps:l.viewProps})}};class _i{constructor(s){this.onValueChange_=this.onValueChange_.bind(this),this.reader=s.reader,this.writer=s.writer,this.emitter=new Pt,this.value=s.value,this.value.emitter.on("change",this.onValueChange_),this.target=s.target,this.read()}read(){const s=this.target.read();s!==void 0&&(this.value.rawValue=this.reader(s))}write_(s){this.writer(this.target,s)}onValueChange_(s){this.write_(s.rawValue),this.emitter.emit("change",{options:s.options,rawValue:s.rawValue,sender:this})}}class wi{constructor(s){this.onTick_=this.onTick_.bind(this),this.reader_=s.reader,this.target=s.target,this.emitter=new Pt,this.value=s.value,this.ticker=s.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const s=this.target.read();if(s===void 0)return;const r=this.value.rawValue,c=this.reader_(s);this.value.rawValue=function(g,y){const E=[...yo(g),y];return E.length>g.length?E.splice(0,E.length-g.length):Nn(E,g.length),E}(r,c),this.emitter.emit("update",{rawValue:c,sender:this})}onTick_(s){this.read()}}function ba(l,s){return s===0?new aa:new la(l,s??ss.defaultInterval)}class ya{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(s){s.type==="blade"?this.pluginsMap_.blades.unshift(s):s.type==="input"?this.pluginsMap_.inputs.unshift(s):s.type==="monitor"&&this.pluginsMap_.monitors.unshift(s)}createInput(s,r,c){if(K(r.read()))throw new dt({context:{key:r.key},type:"nomatchingcontroller"});const g=this.pluginsMap_.inputs.reduce((y,E)=>y??function(N,J){const ot=N.accept(J.target.read(),J.params);if(K(ot))return null;const Tt=yt,ee={target:J.target,initialValue:ot.initialValue,params:ot.params},je=N.binding.reader(ee),Me=N.binding.constraint?N.binding.constraint(ee):void 0,Je=re(je(ot.initialValue),{constraint:Me,equals:N.binding.equals}),Ts=new _i({reader:je,target:J.target,value:Je,writer:N.binding.writer(ee)}),lr=Tt.optional.boolean(J.params.disabled).value,Xr=Tt.optional.boolean(J.params.hidden).value,An=N.controller({constraint:Me,document:J.document,initialValue:ot.initialValue,params:ot.params,value:Ts.value,viewProps:si.create({disabled:lr,hidden:Xr})}),Rs=Tt.optional.string(J.params.label).value;return new Se(J.document,{binding:Ts,blade:Qi(),props:It.fromObject({label:Rs??J.target.key}),valueController:An})}(E,{document:s,target:r,params:c}),null);if(g)return g;throw new dt({context:{key:r.key},type:"nomatchingcontroller"})}createMonitor(s,r,c){const g=this.pluginsMap_.monitors.reduce((y,E)=>y??function(N,J){var ot,Tt,ee;const je=yt,Me=N.accept(J.target.read(),J.params);if(K(Me))return null;const Je={target:J.target,initialValue:Me.initialValue,params:Me.params},Ts=N.binding.reader(Je),lr=(Tt=(ot=je.optional.number(J.params.bufferSize).value)!==null&&ot!==void 0?ot:N.binding.defaultBufferSize&&N.binding.defaultBufferSize(Me.params))!==null&&Tt!==void 0?Tt:1,Xr=je.optional.number(J.params.interval).value,An=new wi({reader:Ts,target:J.target,ticker:ba(J.document,Xr),value:Pi(lr)}),Rs=je.optional.boolean(J.params.disabled).value,Jr=je.optional.boolean(J.params.hidden).value,Ea=N.controller({document:J.document,params:Me.params,value:An.value,viewProps:si.create({disabled:Rs,hidden:Jr})}),Ia=(ee=je.optional.string(J.params.label).value)!==null&&ee!==void 0?ee:J.target.key;return new Ye(J.document,{binding:An,blade:Qi(),props:It.fromObject({label:Ia}),valueController:Ea})}(E,{document:s,params:c,target:r}),null);if(g)return g;throw new dt({context:{key:r.key},type:"nomatchingcontroller"})}createBlade(s,r){const c=this.pluginsMap_.blades.reduce((g,y)=>g??function(E,N){const J=E.accept(N.params);if(!J)return null;const ot=yt.optional.boolean(N.params.disabled).value,Tt=yt.optional.boolean(N.params.hidden).value;return E.controller({blade:Qi(),document:N.document,params:Object.assign(Object.assign({},J.params),{disabled:ot,hidden:Tt}),viewProps:si.create({disabled:ot,hidden:Tt})})}(y,{document:s,params:r}),null);if(!c)throw new dt({type:"nomatchingview",context:{params:r}});return c}createBladeApi(s){if(s instanceof Se)return new us(s);if(s instanceof Ye)return new ps(s);if(s instanceof Ii)return new gs(s,this);const r=this.pluginsMap_.blades.reduce((c,g)=>c??g.api({controller:s,pool:this}),null);if(!r)throw dt.shouldNeverHappen();return r}}class mn extends Q{constructor(s){super(s),this.emitter_=new Pt,this.controller_.valueController.value.emitter.on("change",r=>{this.emitter_.emit("change",{event:new S(this,r.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get options(){return this.controller_.valueController.props.get("options")}set options(s){this.controller_.valueController.props.set("options",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}}class Wr extends Q{constructor(s){super(s),this.emitter_=new Pt,this.controller_.valueController.value.emitter.on("change",r=>{this.emitter_.emit("change",{event:new S(this,r.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(s){this.controller_.valueController.sliderController.props.set("maxValue",s)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(s){this.controller_.valueController.sliderController.props.set("minValue",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}}class ar extends Q{constructor(s){super(s),this.emitter_=new Pt,this.controller_.valueController.value.emitter.on("change",r=>{this.emitter_.emit("change",{event:new S(this,r.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(s){this.controller_.valueController.props.set("formatter",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,r){const c=r.bind(this);return this.emitter_.on(s,g=>{c(g.event)}),this}}const Hr={id:"list",type:"blade",accept(l){const s=yt,r=oe(l,{options:s.required.custom(pe),value:s.required.raw,view:s.required.constant("list"),label:s.optional.string});return r?{params:r}:null},controller(l){const s=new Zs(l.document,{props:It.fromObject({options:st(l.params.options)}),value:re(l.params.value),viewProps:l.viewProps});return new ae(l.document,{blade:l.blade,props:It.fromObject({label:l.params.label}),valueController:s})},api:l=>l.controller instanceof ae&&l.controller.valueController instanceof Zs?new mn(l.controller):null};class Ho extends Us{constructor(s,r){super(s,r)}get element(){return this.controller_.view.element}importPreset(s){(function(r,c){r.forEach(g=>{const y=c[g.presetKey];y!==void 0&&g.write(y)})})(this.controller_.rackController.rack.find(Se).map(r=>r.binding.target),s),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(Se).map(s=>s.binding.target).reduce((s,r)=>Object.assign(s,{[r.presetKey]:r.read()}),{})}refresh(){this.controller_.rackController.rack.find(Se).forEach(s=>{s.binding.read()}),this.controller_.rackController.rack.find(Ye).forEach(s=>{s.binding.read()})}}class xa extends ue{constructor(s,r){super(s,{expanded:r.expanded,blade:r.blade,props:r.props,root:!0,viewProps:r.viewProps})}}const Xo={id:"slider",type:"blade",accept(l){const s=yt,r=oe(l,{max:s.required.number,min:s.required.number,view:s.required.constant("slider"),format:s.optional.function,label:s.optional.string,value:s.optional.number});return r?{params:r}:null},controller(l){var s,r;const c=(s=l.params.value)!==null&&s!==void 0?s:0,g=new Ki(l.document,{baseStep:1,parser:gi,sliderProps:It.fromObject({maxValue:l.params.max,minValue:l.params.min}),textProps:It.fromObject({draggingScale:Ri(void 0,c),formatter:(r=l.params.format)!==null&&r!==void 0?r:fa}),value:re(c),viewProps:l.viewProps});return new ae(l.document,{blade:l.blade,props:It.fromObject({label:l.params.label}),valueController:g})},api:l=>l.controller instanceof ae&&l.controller.valueController instanceof Ki?new Wr(l.controller):null},Fi={id:"text",type:"blade",accept(l){const s=yt,r=oe(l,{parse:s.required.function,value:s.required.raw,view:s.required.constant("text"),format:s.optional.function,label:s.optional.string});return r?{params:r}:null},controller(l){var s;const r=new Dn(l.document,{parser:l.params.parse,props:It.fromObject({formatter:(s=l.params.format)!==null&&s!==void 0?s:c=>String(c)}),value:re(l.params.value),viewProps:l.viewProps});return new ae(l.document,{blade:l.blade,props:It.fromObject({label:l.params.label}),valueController:r})},api:l=>l.controller instanceof ae&&l.controller.valueController instanceof Dn?new ar(l.controller):null};function rs(l,s,r){if(l.querySelector(`style[data-tp-style=${s}]`))return;const c=l.createElement("style");c.dataset.tpStyle=s,c.textContent=r,l.head.appendChild(c)}const Ca=new class{constructor(l){const[s,r]=l.split("-"),c=s.split(".");this.major=parseInt(c[0],10),this.minor=parseInt(c[1],10),this.patch=parseInt(c[2],10),this.prerelease=r??null}toString(){const l=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[l,this.prerelease].join("-"):l}}("3.1.0");z.BladeApi=Q,z.ButtonApi=L,z.FolderApi=Us,z.InputBindingApi=us,z.ListApi=mn,z.MonitorBindingApi=ps,z.Pane=class extends Ho{constructor(l){var s,r;const c=l??{},g=(s=c.document)!==null&&s!==void 0?s:ur(),y=function(){const E=new ya;return[nr,Vo,rr,Ms,Fo,No,_a,Go,ki,Vr,Ui,Ss,gr,Vi,na,Ao].forEach(N=>{E.register(N)}),E}();super(new xa(g,{expanded:c.expanded,blade:Qi(),props:It.fromObject({title:c.title}),viewProps:si.create()}),y),this.pool_=y,this.containerElem_=(r=c.container)!==null&&r!==void 0?r:function(E){const N=E.createElement("div");return N.classList.add(bt("dfw")()),E.body&&E.body.appendChild(N),N}(g),this.containerElem_.appendChild(this.element),this.doc_=g,this.usesDefaultWrapper_=!c.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw dt.alreadyDisposed();return this.doc_}dispose(){const l=this.containerElem_;if(!l)throw dt.alreadyDisposed();if(this.usesDefaultWrapper_){const s=l.parentElement;s&&s.removeChild(l)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(l){("plugin"in l?[l.plugin]:"plugins"in l?l.plugins:[]).forEach(s=>{this.pool_.register(s),this.embedPluginStyle_(s)})}embedPluginStyle_(l){l.css&&rs(this.document,`plugin-${l.id}`,l.css)}setUpDefaultPlugins_(){rs(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(l=>{this.embedPluginStyle_(l)}),this.registerPlugin({plugins:[Xo,Hr,Ao,Fi]})}},z.SeparatorApi=Rt,z.SliderApi=Wr,z.TabApi=_r,z.TabPageApi=vr,z.TextApi=ar,z.TpChangeEvent=S,z.VERSION=Ca,Object.defineProperty(z,"__esModule",{value:!0})})(G)},excalibur:R=>{R.exports=d}},v={};function x(R){var G=v[R];if(G!==void 0)return G.exports;var z=v[R]={exports:{}};return m[R].call(z.exports,z,z.exports,x),z.exports}x.n=R=>{var G=R&&R.__esModule?()=>R.default:()=>R;return x.d(G,{a:G}),G},x.d=(R,G)=>{for(var z in G)x.o(G,z)&&!x.o(R,z)&&Object.defineProperty(R,z,{enumerable:!0,get:G[z]})},x.o=(R,G)=>Object.prototype.hasOwnProperty.call(R,G),x.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var b={};return(()=>{x.r(b),x.d(b,{DevTool:()=>Q});var R=x("excalibur"),G=x("./node_modules/tweakpane/dist/tweakpane.js"),z=x("./picker-system.ts");class Q{constructor(S){this.engine=S,this.pointerPos={x:0,y:0},this.highlightedEntities=[-1],this.selectedEntity=null,this.selectedEntityId=-1,this._previousScenes=[],this._previousScene=null,this.pane=new G.Pane({title:"Excalibur Dev Tools",expanded:!0});const P=document.createElement("style");P.innerText=".excalibur-tweakpane-custom { width: 405px; }",document.head.appendChild(P),this.pane.element.parentElement.classList.add("excalibur-tweakpane-custom"),this._buildMain(),this.tabs=this.pane.addTab({pages:[{title:"Entity"},{title:"Screen"},{title:"Camera"},{title:"Clock"},{title:"Timers"},{title:"Physics"},{title:"Settings"}]}),this.selectedEntityTab=this.tabs.pages[0],this.screenTab=this.tabs.pages[1],this.cameraTab=this.tabs.pages[2],this.clockTab=this.tabs.pages[3],this.timerTab=this.tabs.pages[4],this.physicsTab=this.tabs.pages[5],this.debugTab=this.tabs.pages[6],this._installPickerSystemIfNeeded(S.currentScene),S.debug.transform.showPosition=!0,S.debug.entity.showName=!0,this.selectedEntityFolder=this.selectedEntityTab.addFolder({title:"Selected"}),this._buildScreenTab(),this._buildCameraTab(),this._buildClockTab(),this._buildTimersTab(),this._buildPhysicsTab(),this._buildDebugSettingsTab(),setInterval(()=>{this.update(this)},30),this.addListeners()}addListeners(){this.engine.canvas.addEventListener("click",()=>{this.highlightedEntities[0]!==-1&&this.selectEntityById(this.highlightedEntities[0])})}selectEntityById(S){const P=this.engine;this.selectedEntityId=S,this.selectedEntity=P.currentScene.world.entityManager.getById(S),this._buildEntityUI(this.selectedEntity);const Y=this.selectedEntity.get(R.TransformComponent);this._buildTransformUI(Y);const Z=this.selectedEntity.get(R.MotionComponent);if(this._buildMotionUI(Z),this.selectedEntity instanceof R.ParticleEmitter)this._buildParticleEmitterUI(this.selectedEntity);else{const K=this.selectedEntity.get(R.GraphicsComponent);this._buildGraphicsUI(K);const q=this.selectedEntity.get(R.ColliderComponent),ct=this.selectedEntity.get(R.BodyComponent);this._buildColliderUI(q,ct)}}update(S){const P=S.engine,Y=P.input.pointers.primary.lastWorldPos;this.pointerPos.x=Y.x,this.pointerPos.y=Y.y,this.pointerPosInput.refresh();const Z=[...this.pickerSystem.lastFrameEntityToPointers.keys(),...this.pickerSystem.currentFrameEntityToPointers.keys()];Z.length===0&&(Z.push(-1),Z.push(this.selectedEntityId)),this.highlightedEntities=Z,P.debug.filter.useFilter=!0,P.debug.filter.ids=Z,this.currentResolution.width===P.screen.resolution.width&&this.currentResolution.height===P.screen.resolution.height&&this.currentViewport.width===P.screen.viewport.width&&this.currentViewport.height===P.screen.viewport.height||(this.resolutionText.dispose(),this.viewportText.dispose(),this.resolutionText=this.screenFolder.addBlade({view:"text",label:"resolution",value:`(${P.screen.resolution.width}x${P.screen.resolution.height})`,parse:K=>String(K),index:0}),this.viewportText=this.screenFolder.addBlade({view:"text",label:"viewport",value:`(${P.screen.viewport.width.toFixed(0)}x${P.screen.viewport.height.toFixed(0)})`,parse:K=>String(K),index:1})),this._buildTimersTab(),this._buildSceneUI()}_installPickerSystemIfNeeded(S){this.pickerSystem=S.world.systemManager.get(z.PickerSystem),this.pickerSystem||(this.pickerSystem=new z.PickerSystem,S.world.systemManager.addSystem(this.pickerSystem))}_buildMain(){this.pane.addInput({debug:!1},"debug").on("change",()=>{this.engine.toggleDebug()}),this.pane.addMonitor(this.engine.clock.fpsSampler,"fps",{view:"graph",label:"fps (0 - 120)",min:0,max:120}),this._buildSceneUI(),this.pointerPos={x:10,y:10},this.pointerPosInput=this.pane.addInput(this,"pointerPos",{label:"pointer pos (world)"}),this.pane.addInput(this,"selectedEntityId",{label:"Select By Id"}).on("change",S=>this.selectEntityById(S.value))}_buildEntityUI(S){var P,Y;this.selectedEntityFolder&&(this.selectedEntityFolder.dispose(),this.selectedEntityFolder=this.selectedEntityTab.addFolder({title:"Selected"})),this.selectedEntityFolder.addBlade({view:"text",label:"id",value:S.id.toString(),parse:Z=>String(Z)}),this.selectedEntityFolder.addInput(this.selectedEntity,"name"),this.selectedEntityFolder.addBlade({view:"text",label:"tags",value:S.tags.join(",")||"none",parse:Z=>String(Z)}),S instanceof R.Actor&&S.color&&this.selectedEntityFolder.addInput(this.selectedEntity,"color").on("change",Z=>{S.color=new R.Color(Z.value.r,Z.value.g,Z.value.b,Z.value.a)}),this.selectedEntityFolder.addBlade({view:"text",label:"parent",value:S.parent?`(${(P=S.parent)===null||P===void 0?void 0:P.id}) ${(Y=S.parent)===null||Y===void 0?void 0:Y.name}`:"none",parse:Z=>String(Z)}),this.selectedEntityFolder.addBlade({view:"list",label:"children",options:S.children.map(Z=>({text:`(${Z.id}) ${Z.name}`,value:Z.id})),value:S.children.length?S.children[0].id:"none"}),this.selectedEntityFolder.addButton({title:"Kill Entity"}).on("click",Z=>{this.selectedEntity.kill(),this.selectedEntityFolder.dispose(),this.selectedEntityFolder=this.selectedEntityTab.addFolder({title:"Selected"})})}_buildColliderUI(S,P){var Y,Z;if(S){const K=this.selectedEntityFolder.addFolder({title:"Collider & Body"});K.addBlade({view:"text",label:"type",value:(Z=(Y=S.get())===null||Y===void 0?void 0:Y.constructor.name)!==null&&Z!==void 0?Z:"none",parse:q=>String(q)}),P&&(K.addBlade({view:"list",label:"collisionType",options:[R.CollisionType.Active,R.CollisionType.Fixed,R.CollisionType.Passive,R.CollisionType.PreventCollision].map(q=>({text:q,value:q})),value:P.collisionType}).on("change",q=>{P.collisionType=q.value}),K.addBlade({view:"list",label:"collisionGroup",options:[R.CollisionGroup.All,...R.CollisionGroupManager.groups].map(q=>({text:q.name,value:q})),value:P.group}).on("change",q=>{P.group=q.value}))}}_buildParticleEmitterUI(S){const P=this.selectedEntityFolder.addFolder({title:"Particles"});P.addInput(S,"isEmitting"),P.addInput(S,"emitRate"),P.addInput(S,"fadeFlag"),P.addInput(S,"particleLife",{min:100,max:1e4,step:100}),P.addInput(S,"width"),P.addInput(S,"height"),P.addInput(S,"minVel"),P.addInput(S,"maxVel"),P.addInput(S,"minAngle",{min:0,max:2*Math.PI,step:.1}),P.addInput(S,"maxAngle",{min:0,max:2*Math.PI,step:.1}),P.addInput(S,"minSize"),P.addInput(S,"maxSize"),P.addInput(S,"beginColor"),P.addInput(S,"endColor"),P.addInput(S,"opacity",{min:0,max:1,step:.01}),P.addInput(S,"randomRotation"),P.addInput(S,"particleRotationalVelocity")}_buildGraphicsUI(S){var P;if(S){const Y=this.selectedEntityFolder.addFolder({title:"Graphics"});Y.addInput(S,"anchor"),Y.addInput(S,"opacity",{min:0,max:1,step:.05}),Y.addInput(S,"visible");const Z=[],K=[],q=S.current.map(L=>L.graphic),ct=[];let dt=0;for(let L in S.graphics)Z.push({text:L,value:dt++}),K.push(S.graphics[L]),ct.push(S.graphics[L]);let B=0;for(let L of q)ct.indexOf(L)===-1&&(Z.push({text:"anonymous"+B++,value:dt}),K.push(L));Y.addBlade({view:"list",label:"graphics",options:Z,value:K.indexOf((P=S.current[0])===null||P===void 0?void 0:P.graphic)}).on("change",L=>{S.use(K[L.value])})}}_buildMotionUI(S){if(S){const P=this.selectedEntityFolder.addFolder({title:"Motion"});P.addInput(S,"vel"),P.addInput(S,"acc"),P.addInput(S,"angularVelocity",{step:.1}),P.addInput(S,"scaleFactor"),P.addInput(S,"inertia")}}_buildTransformUI(S){if(S){const P=this.selectedEntityFolder.addFolder({title:"Transform"});P.addBlade({view:"list",label:"coord plane",options:[R.CoordPlane.World,R.CoordPlane.Screen].map(B=>({text:B,value:B})),value:S.coordPlane}).on("change",B=>S.coordPlane=B.value);const Y=P.addInput(S,"pos"),Z=P.addInput(S,"rotation",{min:0,max:2*Math.PI}),K=P.addInput(S,"scale");P.addSeparator();const q=P.addInput(S,"globalPos",{label:"global pos"}),ct=P.addInput(S,"globalRotation",{label:"global rot",min:0,max:2*Math.PI}),dt=P.addInput(S,"globalScale",{label:"global pos"});q.on("change",()=>Y.refresh()),Y.on("change",()=>q.refresh()),ct.on("change",()=>Z.refresh()),Z.on("change",()=>ct.refresh()),dt.on("change",()=>K.refresh()),K.on("change",()=>dt.refresh()),P.addInput(S,"z",{label:"z-index"})}}_buildScreenTab(){this.screenFolder=this.screenTab.addFolder({title:"Screen"}),this.currentResolution=this.engine.screen.resolution,this.currentViewport=this.engine.screen.viewport,this.resolutionText=this.screenFolder.addBlade({view:"text",label:"resolution",value:`(${this.engine.screen.resolution.width}x${this.engine.screen.resolution.height})`,parse:Y=>String(Y),index:0}),this.viewportText=this.screenFolder.addBlade({view:"text",label:"viewport",value:`(${this.engine.screen.viewport.width.toFixed(0)}x${this.engine.screen.viewport.height.toFixed(0)})`,parse:Y=>String(Y),index:1}),this.screenFolder.addButton({title:"Fullscreen"}).on("click",()=>{this.engine.screen.goFullScreen()}),this.screenFolder.addSeparator();const S=this.screenFolder.addBlade({view:"list",label:"Color Blindness Mode",options:[R.ColorBlindnessMode.Deuteranope,R.ColorBlindnessMode.Protanope,R.ColorBlindnessMode.Tritanope].map(Y=>({text:Y,value:Y})),value:R.ColorBlindnessMode.Deuteranope}),P={simulate:!1};this.screenFolder.addInput(P,"simulate"),this.screenFolder.addButton({title:"Apply"}).on("click",()=>{P.simulate?this.engine.debug.colorBlindMode.simulate(S.value):this.engine.debug.colorBlindMode.correct(S.value)}),this.screenFolder.addButton({title:"Clear"}).on("click",()=>{this.engine.debug.colorBlindMode.clear()})}_buildCameraTab(){const S=this.cameraTab.addFolder({title:"Camera"});S.addInput(this.engine.currentScene.camera,"zoom",{min:.01,max:10,step:.1}),S.addInput(this.engine.currentScene.camera,"pos")}_buildClockTab(){const S=this.clockTab.addFolder({title:"Clock"});let P=this.engine.clock instanceof R.TestClock,Y=16;const Z=S.addButton({title:"step",disabled:!P,index:2}).on("click",()=>this.engine.clock.step(Y));S.addBlade({view:"slider",label:"step (ms)",min:1,max:100,step:16,value:Y}).on("change",ct=>Y=ct.value),S.addButton({title:"Use Test Clock",index:0}).on("click",()=>{this.engine.debug.useTestClock(),P=!0,Z.disabled=!1}),S.addButton({title:"Use Standard Clock",index:1}).on("click",()=>{this.engine.debug.useStandardClock(),P=!1,Z.disabled=!0}),this.pane.addSeparator();const K=S.addButton({title:"Stop",disabled:!1}),q=S.addButton({title:"Start",disabled:!0});K.on("click",()=>{this.engine.clock.stop(),q.disabled=!1,K.disabled=!0}),q.on("click",()=>{this.engine.clock.start(),K.disabled=!1,q.disabled=!0})}_buildTimersTab(){this.timerTab,this._timersFolder&&this._timersFolder.dispose(),this._timersFolder=this.timerTab.addFolder({title:"Timers"});for(let S of this.engine.currentScene.timers){let P=S.repeats&&S.maxNumberOfRepeats===-1?"repeats":S._numberOfTicks+1+" of "+(S.maxNumberOfRepeats===-1?1:S.maxNumberOfRepeats);S.isRunning||(P="stopped"),S.complete&&(P="complete"),this._timersFolder.addBlade({view:"text",label:`timer(${S.id})`,value:`${P} next(${S.timeToNextAction.toFixed(0)}ms)`,parse:Y=>String(Y)})}}_buildPhysicsTab(){const S=this.physicsTab,P={};for(let Z in R.Physics)P[Z]=R.Physics[Z];S.addInput(P,"enabled").on("change",Z=>R.Physics.enabled=Z.value),S.addInput(P,"acc");const Y=S.addInput(P,"collisionResolutionStrategy");S.addButton({title:"Use Arcade"}).on("click",()=>{R.Physics.useArcadePhysics(),P.collisionResolutionStrategy=R.Physics.collisionResolutionStrategy,Y.refresh()}),S.addButton({title:"Use Realistic"}).on("click",()=>{R.Physics.useRealisticPhysics(),P.collisionResolutionStrategy=R.Physics.collisionResolutionStrategy,Y.refresh()}),S.addInput(P,"bodiesCanSleepByDefault").on("change",Z=>R.Physics.bodiesCanSleepByDefault=Z.value),S.addInput(P,"warmStart").on("change",Z=>R.Physics.warmStart=Z.value),S.addInput(P,"sleepEpsilon",{min:.01,max:2,step:.05}).on("change",Z=>R.Physics.sleepEpsilon=Z.value),S.addInput(P,"wakeThreshold",{min:.01,max:2,step:.05}).on("change",Z=>R.Physics.wakeThreshold=Z.value),S.addInput(P,"positionIterations",{min:1,max:30,step:1}).on("change",Z=>R.Physics.positionIterations=Z.value),S.addInput(P,"velocityIterations",{min:1,max:30,step:1}).on("change",Z=>R.Physics.velocityIterations=Z.value),S.addInput(P,"checkForFastBodies").on("change",Z=>R.Physics.checkForFastBodies=Z.value)}_buildDebugSettingsTab(){const S=this.debugTab;for(let P of["entity","transform","motion","body","collider","physics","graphics","camera"]){let Y=S.addFolder({title:P});if(this.engine.debug[P]){for(let Z in this.engine.debug[P])if(Z)if(Z.toLocaleLowerCase().includes("color"))Y.addInput(this.engine.debug[P],Z);else{if(Array.isArray(this.engine.debug[P][Z]))continue;Y.addInput(this.engine.debug[P],Z)}}}}_areArraysEqual(S,P,Y){return S.length===P.length&&S.every(Y)}_areScenesEqual(S,P){return this._areArraysEqual(S,P,(Y,Z,K)=>Y.value===K[Z].value)}_buildSceneUI(){const S=[];let P="";for(let Y in this.engine.scenes)this.engine.currentScene===this.engine.scenes[Y]&&(P=Y),S.push({text:Y,value:Y});this._previousScene===this.engine.currentScene&&this._areScenesEqual(this._previousScenes,S)||(this._scenePicker&&this._scenePicker.dispose(),this._numberEntitiesBlade&&this._numberEntitiesBlade.dispose(),this._scenePicker=this.pane.addBlade({view:"list",label:"current scene",options:S,value:P,index:2}),this._scenePicker.on("change",Y=>{this.engine.goToScene(Y.value)}),this._numberEntitiesBlade=this.pane.addBlade({view:"text",label:"number of entities",value:this.engine.currentScene.world.entityManager.entities.length,parse:Y=>String(Y),index:3}),this._installPickerSystemIfNeeded(this.engine.currentScene),this._previousScene=this.engine.currentScene,this._previousScenes=S)}}})(),b})())})(Du);const Gu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAj4AAAEfCAYAAABBKsyiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNFQxMzozMzo1MyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTRUMTM6Mzk6MDArMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTRUMTM6Mzk6MDArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2NTQ4ODZjLTVlNTYtNWQ0NS1iNTI3LTRhNWZiYTc0MTc1OCIgeG1wTU06RG9jdW1lbnRJRD0i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",zu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAAB4CAYAAAA9p5seAAANLklEQVR4Ae3dPW7cRhQAYK2hPoVvYMCNr2BVqQwELoyk9AI5ggyfw7COEGBdRnBhBEiVanUFNwZ8Axe+QJQgMWBxhF1ylsPh/HypPOJw5s33uJQeuBOenfmPAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjEC2xiT3n7eXsbe07P/V892kUZ8017tfCP84z1ihs9fe/ePi9L52dpz6Xjj73CSlvv0vHE+tTeP/Z645824/zTesaOxj9W7Hj/WM/jo90/6v5z3+TuT1L7P7g7uH8TIECAAAECBAgQIECAAIFWBRTArWbWuggQIECAAAECBAgQIEBgIKAAHnBoECBAgAABAgQIECBAgECrAudzF3Z983DuEM6/I8DzDsYK/+zd/2J3eXSP/357FbWnfekU9p6v1L69eZa23tLiSX19lT4e/3UzxJ//ugLrzu76z+vvCXBeb7MRIECAAAECBAgQIECAwEoCCuCV4E1LgAABAgQIECBAgAABAnkFFMB5vc1GgAABAgQIECBAgAABAisJzN4DvFLcpv0m8MOfT5NafH12k3Q8gxEg8F3gycvX3xv//uvjuzeDtgYBAgQIECBAgMCyAp4AL+trdAIECBAgQIAAAQIECBAoREABXEgihEGAAAECBAgQIECAAAECywoogJf1NToBAgQIECBAgAABAgQIFCJw/vbz9uh7PwuJUxjfBMI9vw9++mWWzd9//D7rfCcTIHBYYGzP79jxwyM7QoAAAQIE1hN4/+HTYPIXzx8P2hoEShbwBLjk7IiNAAECBAgQIECAAAECBJIJKICTURqIAAECBAgQIECAAAECBEoW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4JKzIzYCBAgQIECAAAECBAgQSCZwbw9w7B6Kud/ZHvtO+NjxuRK51zs3XucTINCPQHh/mnu/HZPbb682Y33uHr/YXd7ebcf+e2zP79jx2Pnm9o/1mTuf8wkQOCyw9P3w8Mz/Hwnvz2F77Py14x+Lz3ECcwTG6rex4+HcqX//egIcCmsTIECAAAECBAgQIECAQJMCCuAm02pRBAgQIECAAAECBAgQIBAKKIBDEW0CBAgQIECAAAECBAgQaFLg/NWjXdSer7eft7P2fIWK4Xt+Y78THo43t21PxlxB5xMgcKpAeP8J95SF7bD/qfOudV74nt/S9vyu5WJeAgTKF4i9/4b37/JXKEICpwuUVt+FK/EEOBTRJkCAAAECBAgQIECAAIEmBRTATabVoggQIECAAAECBAgQIEAgFFAAhyLaBAgQIECAAAECBAgQINCkwL33AK+9yvA742vHY34CBAisJRDuMWt9D1m4J3gtd/MSIECAAAEC6QRKq+88AU6XWyMRIECAAAECBAgQIECAQMECCuCCkyM0AgQIECBAgAABAgQIEEgnoABOZ2kkAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQaE/gH+eGVVrzB0wcAAAAASUVORK5CYII=",Nu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAABZCAYAAAAARqm0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALQSURBVHhe7dwxbtNQAMdhwsTAgMQBOABHYGVDmVg5BiNjR47BylSxdeUIHIADIDEwsIEc7Ci13Max3ef3N98npXULkZ+f88PYkbN71Hp9/eFPuwhU7mZ/dWj38EW8kKeJeNeP983L7+0SUJsv3160S/88br8fiBfq1m/0GLB4IcNpq7eOwEAWAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUOw40fqnN4k/Pnr83ZpnLevfrRL481Zx6XPLaGm8Z3bH7Xv3yEl57SmsfR1Y+s+WufOgK/fvW9/ut/+08fJO3jqOi55bgk1jW/M/qh9/w4pNac1jaXvdGxdwP4LDcEEDMEEDMEEDMEEvEHNRZb+I8na4197/ZcQ8MY0V0f7j0Rrbcda651KwBBMwBBMwBBMwBBMwBBMwJx17m2Vc3/Ow9n8zQzNc0tYY3xz5m/ImvtjC/M3ZOnt6Mbx39yNNHV8c9Q+f0Nq2h+J8zfkIdfhbiTYAAFDMAFDsEXOgaeaen5QanyNEuc+Uy15fjXnfG3pc73E+Ruy9LycWuwiVglzXjBzlNhxJYzZjjkvtqVfqInzN2TpeTnlIhZsgIAhmIAhmIAh2PEi1u+fvw6/6NR2EaGvxPiG1jtW7fM35JILLn1znjskcf6GLD0vnSfPnh6+OwJDsM0fgef86znHWvO39PbO2Y4SR64SSmzHpetwBIYNEDAEEzAEEzAEEzAEEzAEm/020lqX2Gt/m6H2+RtrzjxvZdtqXIe3kWADBAzBBAzBBAzBBAzBBMy9mquj/ceQsX+PZQkYggkYggkYggkYggkYggkYgt15MwNQLzczwAYIGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIJGIIdA+7u8AfqdtrqrSOwiKFu/UZ3zZfuc7GAHDf7q91flsTzEv4iXT4AAAAASUVORK5CYII=",ju="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAA3CAYAAADt2n/EAAACrklEQVR4Ae2bzU3DQBCFE0QDVEAB3KiBG6IDDhSCFEWiEA50gLhRAzcKoAJKACbSJ61D4jj7NzPOWEpY27sz771vl1uWi+S6eX38SW5jaDCB97unpcjafMkgoEkKPi6BtwG3De326suHgxNS+fZ5OXB7Prj7u5kDtO/n64Gti4ePwb3HG+GSwjtLTcwJ2np9v5CPXNsgU8+eximfAThPJsa0AkzmpOOxNd7ezQrc2Mkae+cNmuidDTjA7DphPGOOR1DbmmcBDiAA2jYp97xj7q45np65BwcIwIyFzxzWjM21/s49OAkYIFPCPmbulHpac1yDKzk5JWu1YKV93YIj+JwTxBpqpIF4GbsER+AAyAmbtdTKqaG5xiU4CYzgS8KrUaOkf8lad+BanJAWNUugTFnrChwB1zwp1KL2lNAszHEDjmAJumZ41KRHzdqtarkBJwEQcIswWtZuodcFuJ4noWevEqDmwRFkjxNBD3qWBNt6rWlwBEigrcOQ+vSid4+eOT3MgiM4gswxl7uGnmjIrdNynVlwYpoAWwawr7Zm732a0ucmwVna6Za0mAZHUBZ2PBrQlAanPTZ14giIwLTDkf5oQZsFTaLBFDgRRFAytnJZ1GQGnLUdvWvTWNJoAhyBWNzZAEQbWnmu9VcdHEEQjFYQU/qiEc1T1rSaow5OjBFIK5M161rRqgrOws7NhaqtXQ0cxq3s4GMAohkPx6ytNVcFHIYJoJaZnnXQjpeevaVXd3AYxXhvwzX74QFPNWsfqtUdnAjC8CFxHt5reekKTmNn9oLf21tXcBKi1g5tCVDD07/fgLc0KLVXq5fWLU6ifldwc/gRvZVd0f1fpRXj3nUEOKcEA1yAc5qAU9lx4pyCC9mRQCQQCUQCkUAkEAlEApFAJBAJRAKRQCTQIYFfff2/wDwLh+EAAAAASUVORK5CYII=",Uu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAA3CAYAAADt2n/EAAACvUlEQVR4Ae2cMU4DMRBFE0RBQcENqLgIouUGHAUpisRRuAEt4iJU3ICCgg74kR5aQeRsvN6Z8WrceL22Z/68b6fLrlc/7ebp/kv95/uHumyBCZxdnO/UnQTWmNIKBNK4ApzIU6eW4q5fLy3Tmed6uXozy2lqnKrabu/MirNMtNk8WqZbmf9UWhdoQdOjJlPjLH9KLAwb5rCuzdQ4CvU4oeRu3XvVYm4cJ9Or4JbGUQM1tYx9KJa5cRJEoRR+SGTEebRTi7VGF+NUJAUDwLrwKfnQTA1TYtXudTNOgj0LrwXGPm/trsYBgRPMOHIfRau7cZzcKEBKhwaNaC6tnXvO3TgVCAjAzF10TXy0obUmRss9IYxTQVGAlOBG0hjGOIBxshlH6CNqCmUcJzoSKLSgLcJBkoZQxkkQgACmd14NDWjy0rEvbzjjJDISqEhahgaGNA6BnHjGlr1n7jF1hjWOk+4BkJxoGAPSek1Y4wQCcIC0gEMuclvkrMkR2jgVBECA1hQ5dg85yDl2n8e68MYJiiVIy1xTDO/COArkRjBu2c8Zu6VOYnVjHDdhDsDEJAdwIvfdGCeIgAV0C7DEInaLmBYxujJOQOYAPEfMuc3rzjiAcFMY1/QtYtTkbbGnS+O4IVPAs5dYLWBaxujSOAECOAYcA409xDhmb5S13RongFPAT9kbwbyujQMgN4hxqT9mbSmO91z3xnFzxhjCGvZ4w5+Sv3vjVDxGYMw+IMyxdt+ant4twjgBxxAMGprAO9YM53p9XoxxMqBkTGmuR/MWZRwGcMM0Hj4zv4R+rSL4XIael/DJjL//NV/KbeNTGfLp33/ANdm7eUsxSgbRhqbp3e7G6WF46zTOFpfA8+3D+tc4yUzz4pqFMpnGc/ZJIAkkgSSQBJJAEkgCSSAJJIEkkASSQBJIAkkgCSQBbwLfpUjOVW0Jh34AAAAASUVORK5CYII=",Fu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAABaCAYAAACyh9hDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAONSURBVHhe7ZkxihRBFIZnxEDQQMHIZDEQBDOPIGayNzDwIMKysAcx8AZitngEM0EwEBMjQQMFA0H37+kayuJVdfVMVdd7Xf8Hb6Z3p6d6pr+p/9X0bDcjT9+8/DtuEqVcnl4MvoYbCrMDxG1DYc8efRm3iBbefjgZt3ZcG+8HKEwnoZe9NArTje/nv5lGbEBpBqE0g1CaQSjNIJRmEEozCKUZhNIMQmkGoTSDUJpB9j/NWLhg/P3V43ErzZ0X78etdeF+ojEn7fz8+fiXzNnZ69VLYzwahNIMoloa4tAvskN1T5N6GHqWj/Q4e5pCIGWtYnJgTzOIKmnsYXmo6mk5PQy4aIztz56mANfDXPUOe5pBmkrz+xeK5NG0p8V6UkgsEmPPT+2f4tjorT2+igvGc096yCHSwv0dJRYwtcfnBWPDFJWGT9qcIodRNB4hIhYPMRAbIYxHGVXxiDfjF0nDnuaBmSJViLQPailUxOOhs0s63lQ8xpgTa6n3if1jHJsii8Uj3oRfLcFJk6o00jFQpVgkHku/6N5hTzMIpRmE0jLAwsOv1lRfPWLx4frZ1ONzKTVeSkSLVWIMXnv0wEmWagrpOajaUJpB9vH4+8fP4R/H8OTTiRhX7x7sonfq8bmUHi9EGt9R8ji53Lh9a7jnTDMIpV2BGSXVFNJzULVhPF4hjePAeBItYpPxOANI8Ks1lGYQSjPIItLQM1CkDNWloWH7JXHvz81xqy7uwxNWaaRjoEpRffU4hVttOXFfr/8a7nOQjpdavaVeX2yVCMLxUgJS4x+7iFG3eoQs1FKzTgInVaoQaR/UUqiQhk+uq4ef7w7iWsrTTvF4nEsq3iAuFZc4Xsl4PHa21B6/SjziRc2pKVrHpVbU9DSST9F4nEss3kI+3v8mxuQh8ZgiZ/anqD2+i8fm0kJiElxM+vLmSrOOiiU/Tq5fKSCLPW6HuZ7mxPUsz4Q0xKBfbtb1StOeFgIhIamehf3Z0xrj97e1nvgS8HuaQUxKc72tV1T1tJCcHhfCntaYQ3vc2r8SrLKnrf2LOBciBlHd00JyFx9+lLrZtoYv4youGC8J5FkXZ2IhQmS6keYWJmtYnHQ109ayquwyHq2LY08zSLfSLM+2rmea1cVJ9/FocXHCnjZiadZRmgfEWWAvzV0i6R2t4nw//800itNJ6GWLG3fRmOjn8vRiO0gDFKcfCNtsNpt/CbPrgkI2zBEAAAAASUVORK5CYII=",Qu=""+new URL("VCR_OSD_MONO_1.001-01918d86.ttf",import.meta.url).href,Ou="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yNlQxMjowMDo0OCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjZUMTQ6NDg6MTMrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjZUMTQ6NDg6MTMrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFhY2UxYmE2LTE1YjAtNWQ0OS1iMjMzLTUxNWI1MDdmMjg3ZCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphYWNlMWJhNi0xNWIwLTVkNDktYjIzMy01MTViNTA3ZjI4N2QiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYWNlMWJhNi0xNWIwLTVkNDktYjIzMy01MTViNTA3ZjI4N2QiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFhY2UxYmE2LTE1YjAtNWQ0OS1iMjMzLTUxNWI1MDdmMjg3ZCIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yNlQxMjowMDo0OCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po10tBgAAABwSURBVDiNlZNRCsAwCEN7/0s76L4WzYsTRmFN40uxp9468MX9jVCrNaCOetCtx6ErpTVwJiMyadxmFUca42g3vAPVELIjahUFJsJn/UMS74QipEZxTjTSRNRMHDIRrUnIdP121Gw9bPS/DRsJk8nVPBfUyGKTJkHxAAAAAElFTkSuQmCC",Yu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yNlQxMjowMDo0OCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjZUMTQ6NDk6MDUrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjZUMTQ6NDk6MDUrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmYwODJkYzA2LWY2ODQtZDg0ZC05YWY2LTRkMzY3ZThjZWRiNyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjVhYzMyOWVhLTZkNzEtNjI0ZS04NDk0LWUzNTY2OGUwOTA3MyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhlNTE5MWM1LTc5MGQtY2E0Ny04N2ZhLWIxYzI5ZDhjMWFiOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGU1MTkxYzUtNzkwZC1jYTQ3LTg3ZmEtYjFjMjlkOGMxYWI5IiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI2VDEyOjAwOjQ4KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjA4MmRjMDYtZjY4NC1kODRkLTlhZjYtNGQzNjdlOGNlZGI3IiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI2VDE0OjQ5OjA1KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+x7a24wAAAWNJREFUOI2V1KFuYmEQBeAvqxB9gIoKfD0JoopHuAm2tgqzSSVJNZYEQYLGoQgGWYJGYniATV8ANRX3bMJ2u2Urbib/nTnnnzkz8yvqjDeccMAOW2ywpjY57+I/Jf6MopzxizpiH+ASC8wwpWbUglqGcI9jcGdhPOKVWmGOCcbUM/WztcbUpPXXKvHH4J3CvGpvrheMqEcM0VDDnEfxz0K0D94hJczxQj1RDQboo0f1c27w1BLVPLiDiLVsS6hRCB6oe3SpO6qb80P8o8Qvg7dtRawxHnPjPW6pG3Rib0M0SNw4uK2kNIt4w5TQDfAHJfYmGfWj0XO6tqGsqWm60FC9lNBpCX5/Orhr/Zo23pRafzMTycQQycTmQhPjtHGQ2qNJdfAPTWoR/GV3fKM7NQlu98mc+DAn1Yv9MCf+mJMrE1uZWF9O7H/uTl3sjr9258oW17S1Fvn/6RZfeU9qHeBX78k7qFn+4CZD8eIAAAAASUVORK5CYII=",Vu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAxCAYAAADk4SSDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNDoxMzowNyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjhUMDE6MzE6MjgrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjhUMDE6MzE6MjgrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmQzOGYxNmU0LTYzNGYtNDg0OS1iZGNmLTM5ZDQ5YmE1YmFlMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkMzhmMTZlNC02MzRmLTQ4NDktYmRjZi0zOWQ0OWJhNWJhZTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMzhmMTZlNC02MzRmLTQ4NDktYmRjZi0zOWQ0OWJhNWJhZTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQzOGYxNmU0LTYzNGYtNDg0OS1iZGNmLTM5ZDQ5YmE1YmFlMyIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yN1QxNDoxMzowNyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrhnpCoAAALgSURBVHja7d09coMwEIZhDuYbpE+TSevaN8khXOZOaVzmEErFjMMIWSvtLivxMvNNKgdY6yH6AbKklBZCyJihCIQAmBACYEIIgAkBMCEEwIQQABNCAEwIgAkhUQFvt6+fz6SdZWeLsI/lxSb9vEX9ao81Sl01jtGrpl77ktYBwAAG8FkBX+431ZQOXuP3lwrU+rnaY5Tsz6qOkeoqAVx7rpY19dhXSx2rAef0Wzc87X2VrnYtn5PUIwpgi++w9BdkBMC/729hAEvrCGAAA/gsgD27KFG7RFvAEc+tBOJyv6W3j+9/OeI7jAJ4xVuD+Ki2CWAAAxjAAJ4J8DU90jU91BHThdYf3m33d00PAAMYwKcGXHvSMwJumQSKCnhFfATgXKOVTpbOsIyUO8+9Oq54159NgHPjhsVg6716vyp0xDHNYrw9j4G3gLVr2rLWLp3N1zguzbYprePeRcr0LzCAAQzggQHnutAegFtuFwRwfr+5WWgAHwP4kFloAAMYwAMD9mh4pYH+6ID3Jmq8APc2PAADGMAABnBUwNrdTOt7r2snzFovApKLk/ZTRwDWr6nmEtL0gGsa+PPMnBbgmoceNAC3XqBmA9zyUMjIgEvnC2AAAxjANmPgFsA1eKWIa2a8rRr2HuCZx8C5OQAvVJ51lNx91nuMAAYwgAFsD9izC2094w3g8l1IswHWGB4AGMAABvAxgD2WkTS6Nr2AJXeYzQC49nsdGbDWUKH7rZRHPw9sjcq7AUnWBLUfJ4zwRszSuNCiB+T5OKFXexnqgX4AAxjAQQG/eguBR7c2CmCNOls08pa3VvQch/YqwAiAS4/nAhjAAAawHV7pOvCMgLW60dqNvPXNjb3HofnoaHTA2xoDGMAABrDtf2Z4NVlxVsC9tbVYDinh1V6W8bw76jRd6Ny6lPajVACWLfx7ArZeYwWw8Sw0gAEM4IEBE0LGCUUgBMCEEAATQgBMCIAJIeHzB9ZPrAJd78rWAAAAAElFTkSuQmCC",Zu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAA3CAYAAAAyuMeeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNDoxMzowNyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjhUMDE6MzE6MDgrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjhUMDE6MzE6MDgrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFmNGViNzM2LWIwZTMtNmI0YS1iNTdlLTY1NjI0YWIzNGU4MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxZjRlYjczNi1iMGUzLTZiNGEtYjU3ZS02NTYyNGFiMzRlODIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjRlYjczNi1iMGUzLTZiNGEtYjU3ZS02NTYyNGFiMzRlODIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFmNGViNzM2LWIwZTMtNmI0YS1iNTdlLTY1NjI0YWIzNGU4MiIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yN1QxNDoxMzowNyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjhmiSgAAAJ8SURBVHja7dy9TcQwGAbgG4wNEC0NoqVmE4ZAomEnGkqGCNWhw8pdEsf/eSK9oozt5Mkl9odP0zSdRKTPGAQRgEUEYBEBWARgEQFYRAAWEYBFABaREQC/fT1Pa3IqdKxtT+rEtiVH/0YYl5L3TI0xAhhggAHeD/ju/XVaSsmLsaY9ORLTlljAOdrS0riUvme2jG2qAAwwwAADDDDAAM/k5/EeYICbBxx+mwJ8gff8F2CAWwVca1wABhhggMd+hV4znQ9wHcD3T5//Uhvw5f0KMMAAAwwwwAADfLBlpC1AWwB8qwIp9qHTC+CHj+kvIeKSgMM5G4ABBhhggHMsxp8qHlvHau0DJsW5S49DS4Cv4c1Zkw0wwAADfLxSyl4B33q96xFwOJHV0jpw+LkCMMAAAwzwUQEvTbL0CrjFSqy5iUKAAQYYYIBT3RwplkJGeoXeU9QyImDLSAADDDDARwW8tdRzz7n3lpTGLvUt9XE0wC/TN8AAAwywSaxmjpJolspJa/X7GuQaW+rk6uMZ7yVigAEGGGCAjwo4RFO732F7RgLsFRpggAGuC7jUrv9hmV7LgGM3FsgxWdPCgysEXOJ+yXlth1pGAhhggDsFXPOfxecQt7LUFLuUk2riqLVdKXO3qdSy45q+AAwwwAADDDDAAG+sQikNuATilOuhS5VKKc61t5IoF+CciEsBXtMPgAEGGOD8gOeqUFLNWi/NQt/ac6k1wFtexUoDjrmGsWh6Axy7c+gwv8B7NlxfuiAlv4VzLbHkKl9s8Re4V8Ax5wYYYIABBhhggAHO+LG/94K0PInVE+BSaAAGGGCAARaRPmIQRAAWEYBFBGCRo+QX4biQcgU+fCoAAAAASUVORK5CYII=",Wu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAAAxCAYAAACVmUgdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNDoxMzowNyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjhUMTE6MTU6NTArMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjhUMTE6MTU6NTArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmUxNmFlZjcxLTMxYjQtODI0Ny04NTYwLWJmYWI0OWQ4ZDFiZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjk2NjE2YWE2LTFjYmMtMTI0Mi05YTJkLTk1OTZlN2RiMTg1ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmQzOGYxNmU0LTYzNGYtNDg0OS1iZGNmLTM5ZDQ5YmE1YmFlMyI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iSGVscCIgcGhvdG9zaG9wOkxheWVyVGV4dD0iSGVscCIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZDM4ZjE2ZTQtNjM0Zi00ODQ5LWJkY2YtMzlkNDliYTViYWUzIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI3VDE0OjEzOjA3KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNmYTZmNGUzLWQ4NWMtNmQ0OC1iZGRmLTcyZjExYzI2NDMwNyIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yOFQxMToxNTo1MCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMTZhZWY3MS0zMWI0LTgyNDctODU2MC1iZmFiNDlkOGQxYmQiIHN0RXZ0OndoZW49IjIwMjMtMDYtMjhUMTE6MTU6NTArMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC42IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6lxdqiAAADHUlEQVR42u2dPVLEMAyFcySGGrjAFnQ0QEvJcBMOQUnDiWgoOUQgDNnxZOzYkmVJsV/xZrvYUb7I1o+z0zzPEwQdWTACBIghCBBDECCGADGMAAFiCALEECQH8evn40wUa1DqOIlrcOarJZH75tpXSp5tCYgBcb8QX729zBRxjcwZJybqdbQkNV8tiD3b95AQP81fZwFiQNwcYq7RchAvy0gIMdejn+7f/6RteKkVyDpg8gAxObDzAvHWE1Ovs8K7XkcbZECsa193EP8vIWwoQngBMSBWh3iFd/tbep0YwBYgA+LBPXGYXqFCAYgBsZqRY6D2CnEYXafuGRAXZSmSdQNTT7wH8tH3xBt4z/OlgAyI45y4206UPFBOdiIG8e+vZrXrDG8Icek9HxHi2pW5BGC3EOe8E8fIa5ot9MIGZdvdFSgH8ygQp2ySspHbwE4aYi9QhB65xMuMCnHsBU/ZRgzimgaV0mUjV3o8EsSpMi7lYY0AsVp2ghpl1143tjTXBh6ce6iFubS4g8BOCWKNVEouZdXqpWnlyQGxA4hLAxIpmLddYdIQU++pJcQlAUwvEH9cPNhArAVvbLwQ4ljKSvql0YY4NX6PEC8AX97cVoFcBbFVkjtR/Zo09uMjQ9zKcal7Ys0tRGr8VAFBK7DUgri0UqnpiWuffdhSa7IntoR3rxeh5ckDK4hLyqtW2wkuAwvA18/yIJMh9hiNciGm5HSt9piWEJdUGKlM1ALMOtlRM+EeWhs9QJzro24Jby77o80F+7sT3vOCvffnah/Zj724ueKMFivNz9gB4nqIv+9O4mX92vK4p7rBcBB72QqVzncBeMmZpkDWni/3yH5Le4tCHDO0dWPJnkewBFnCE/cYOKt8i20P4FWeIM55XSuvLNWCiu3aABB7aFiq3f4g5lCC2Pt2wlPPByB2DLFkbV8bYs+BqIcDmENAnIr6j+SJNT2y1AFZrS7BoTyxVIOK1XJnnaD3BvFw2wlPZ6pq8toaIHuFmLqiAmKnEGsA5BFizoFUQAyIXZ1Z6/WTCPj3JAh/AQZBgBiCADEEzdMPxSYfljluza8AAAAOZVhJZk1NACoAAAAIAAAAAAAAANJTkwAAAABJRU5ErkJggg==",Hu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAABZCAYAAAAARqm0AAAEIElEQVR4Ae3cPW7UUBQGUAZRpKBAYgEsgCXQpkOpaFkGZcqULIOWKqJLyxJYAAtAoqCgC3JC3vzoPWXsN2PfmzkU4IzH48/nvk8zcYDVs/+/zq8vbx+2/UmAQGyBm4ur1ZDw7jfljT0s6QjUBIYSr3bL+/7tz9pzPUaAQACBbz/ebKV4vvmV8m5q2CYQT2C3o6XAuzviRZeIAIFBYLOrpcBoCBDIJ6DA+WYmMYEioMCFwgaBfAIKnG9mEhMoAgpcKGwQyCegwPlmJjGBIqDAhcIGgXwCCpxvZhITKAIKXChsEMgnoMD5ZiYxgSKgwIXCBoF8Agqcb2YSEygCClwobBDIJ6DA+WYmMYEioMCFwgaBfAIKnG9mEhMoAgpcKGwQyCegwPlmJjGBIqDAhcIGgXwCLyJH/vr99eh4H979Gn3McMDYc+2eZ+zxk0JOOKg35+7xEyJMOiSC51LXPgYsdIGHC7n++Gnv67n48nnv59aeuO+5WufZ9/jauY/xWG/O1vHHyFp7zSU9l772mkftMR+hayoeI5BEQIGTDEpMAjUBBa6peIxAEgEFTjIoMQnUBMLfxKqF9hiBOQRqd8Kj3ZlW4DlWgnOkE6jdAY94Z9pH6HRLS2ACawEFXlvYIpBOQIHTjUxgAmsBBV5b2CKQTkCB041MYAJrAXeh1xazbUW8mznbxR/hRL2etTvOR4h5lJdU4KOwPv6i0X6e+Hji2M+Y6ln7WW/sK91O5yP0toevCKQSUOBU4xKWwLaAAm97+IpAKoEn9z1wlu9penNO/Z4v1eocEbbXc8SpQj31SRU4y93E3py9d11DrcADhOn1PECExV7CR+jF6J2YQL+AAvcbegUCiwmUj9Cn+j3EVPmlveY6/1znmTqHuY+L4nH26v7KvQPPvQKcj8ABBRT4gJheisDcAuUj9NwnPuXzuYscf/pZZuQdOP5akpBAU0CBmzR2EIgvoMDxZyQhgaaAAjdp7CAQX0CB489IQgJNAQVu0thBIL7Ak/oxUu+t/7n+Uvxc58ni0Zuz9/j4NW0n9A7ctrGHQHgBBQ4/IgEJtAUUuG1jD4HwAgocfkQCEmgLKHDbxh4C4QUUOPyIBCTQFlDgto09BMILKHD4EQlIoC2gwG0bewiEF1Dg8CMSkEBbQIHbNvYQCC+wOr++vB1S/v39J3xYAQkQuBc4e/XybsM7sBVBILGAAicenugEFNgaIJBYQIETD090AgpsDRBILKDAiYcnOgEFtgYIJBZQ4MTDE52AAlsDBBILKHDi4YlOQIGtAQKJBRQ48fBEJ6DA1gCBxAIKnHh4ohNQYGuAQGIBBU48PNEJKLA1QCCxQCnww7/wT3wtohM4CYHNrpYCD1e+ueMkJFwkgWQCux1dDfkf/l+sZNciLoGTFri5uFr9AyIza8QIg6OoAAAAAElFTkSuQmCC",Xu=""+new URL("whoosh-4847e4bd.mp3",import.meta.url).href,Ju=""+new URL("536766__egomassive__thud-faa7bab2.mp3",import.meta.url).href,Ku=""+new URL("smash-cd9ee525.wav",import.meta.url).href,qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAigAAAD6CAYAAACLZLyIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGvWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNVQxMDozOTo1NiswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTVUMTE6MDQ6MjcrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTVUMTE6MDQ6MjcrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdiODUwM2QwLTE0ODktNTY0MC1iYzU0LWU0NmQ3OWQ0YjMwMyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmYyYzdmMjhiLTgyZjgtN2Q0My05MDgxLTFhYzdmY2UzMmYzOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjQxOGRlNjc1LTM5ZDUtZjI0MC1iMzMxLWQzMWIwODkzMWJjNSI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iTGFkZW4uLi4iIHBob3Rvc2hvcDpMYXllclRleHQ9IkxhZGVuLi4uIi8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MThkZTY3NS0zOWQ1LWYyNDAtYjMzMS1kMzFiMDg5MzFiYzUiIHN0RXZ0OndoZW49IjIwMjMtMDYtMTVUMTA6Mzk6NTYrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Yjg1MDNkMC0xNDg5LTU2NDAtYmM1NC1lNDZkNzlkNGIzMDMiIHN0RXZ0OndoZW49IjIwMjMtMDYtMTVUMTE6MDQ6MjcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4WN1jIAAAG8ElEQVR4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",qu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAADICAYAAAD4MNisAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNFQxMTozNjowMSswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTVUMTE6MDg6MDIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTVUMTE6MDg6MDIrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJmNzc4NjY2LTU0MGYtODE0OC05OTQ5LWVlMjBkMTdkNzc1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyZjc3ODY2Ni01NDBmLTgxNDgtOTk0OS1lZTIwZDE3ZDc3NTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyZjc3ODY2Ni01NDBmLTgxNDgtOTk0OS1lZTIwZDE3ZDc3NTIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmNzc4NjY2LTU0MGYtODE0OC05OTQ5LWVlMjBkMTdkNzc1MiIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0xNFQxMTozNjowMSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnc/gIAAAAQCSURBVHja7d2xUQJBFIDhOyIDA2cowxJMNVIiU8og1EhDyiAlOjNNKcQCrGEdzCAQWI653XvfN/MKYPe832eAk5RSY4wxxpj6ZtIAAFUScQAQcQBAxAEAEQcAEQcARBwAEHEAEHEAYEQRb9t2Zx4+XpMxxhhj+p393trEAcCf05vmvntJ23FcANC/3M7axAFgjJv4od8MHm+/jTHGGHPi9LWR28QBYIyb+KENHAAYrqM2cQCIsInbwAGgnI3cJg4AETZxAEDEAQARBwARBwBEHAAQcQBAxAFAxAEAEQcARBwARBwAEHEAQMQBABEHABEHAEQcABBxABBxAEDEAQARBwBEHABEHAAQcQBAxAFAxAEAEQcARBwARBwAEHEAQMQBABEHABEHAES8adabqckY5zrMuXrOnav7cA+l3YNNHABs4vm6+cIcMc61jHP1nDtX9+EeSrkHmzgA2MQBABEHAEQcAEQcABBxAEDEAUDEAQARBwBqiXhp36kMl+A5d24R7wObOABQesRL/45l8Jw7J8+texBxAEDEAQARBwARBwBEHAAQcQBAxAFAxAEAEQcARBwARBwAEHEAQMQBgFojPlstQ05p5zSW+/ac131OUd83Uc/J+8YmDgA28aE93/2EnKHPZaz37Tmv61yivm+inov3jU0cAGziAICIAwAiDgAiDgCIOAAg4gCAiAOAiAMAIp5jvZmGHGLxvLkH94FNHABEfHjdfBFyiMXz5x7cBzZxABBxAEDEAQARBwARBwBEHAAQcQCgj4j7BqEyRP3GKN+U5Tl3H/F+7oa671o+n00cACJs4gCAiAMAIg4AIg4ARI34bLUMOQCl814TcQBAxAEAEQcAEQcARBwAEHEAQMQBQMQBABEHAEQcAEQcABBxAEDEAYDLRbybL0IOXIL/1uce+rwP7zURBwBEHAAQcQAQcQBAxAEAEQcARBwARBwAEHEAQMQBQMQBABHnP767GgARBwARBwBEHAAQcQBAxAFAxAEAEQcARBwARBwAEHEAQMQBABEHABEHAOqP+Kn/lSv61C7qOfncZX3uqD+nPrf3sk0cAGziAICIAwAiDgAiDgCIOAAg4gAg4gCAiAMAIg4AiDgAiDgAIOIAgIgDgIgDACIOAIg4ACDiACDiAICIAwAiDgAiDgCIOAAg4gCAiAOAiAMAIg4AiDgAiDgAIOIAgIgDACIOACIOAJQb8aub678BAM53bldt4gAQYRO3kQPA8Bu4TRwAxryJf83e2+0c+k3CGGOMMcdPbndt4gAQYRPP/c0AADhebmdt4gAwxk08pbQzn09vrTHGGGP6nf3e2sQBIPImDgCIOAAg4gCAiAOAiAMAIg4AiDgAiDgAUJxfrzvaYmeDO/UAAAAASUVORK5CYII=",$u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAABKCAYAAADe4Ib1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNVQxMDozOTo1NiswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTVUMTE6MjM6MzArMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTVUMTE6MjM6MzArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmYwZWU0Y2U4LWFkYmUtNzc0My1hYTRkLTRjZTY3NmYwMThjZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjQ5NjllODE3LWYyNGEtNDk0Mi1hN2Y2LTk4MDc2NWQ5MzQzZSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjM5N2ZkNTQwLTYyMDAtMmI0MS1hNTQ4LTU5MDM0OTI0Y2IxMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Mzk3ZmQ1NDAtNjIwMC0yYjQxLWE1NDgtNTkwMzQ5MjRjYjEwIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTE1VDEwOjM5OjU2KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjBlZTRjZTgtYWRiZS03NzQzLWFhNGQtNGNlNjc2ZjAxOGNkIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTE1VDExOjIzOjMwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QvvudQAAAMFJREFUaN7t1jEOgDAIQFHufzGPhYMu1hZoipXhm7DYlrwooKKqkhDHag4BAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgRICCIi2oS3bkU49xRkEqHX0QlIu9hcmhjd3CUhz9Xn48wAmbnrQULttQjJaN8voyjEqezUGllp362QV9cMJ+Ud5jT198Tb9xfIoFi/fDVTXbMfYk3Bzn2vAM0zvWldEiIBwGuv8TkYnVnqmn0Q5yOX9V9r5qwP2R0nmgTDIx6KkBAAAAAASUVORK5CYII=",tp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNFQxNDo1MDo0NyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjNUMTA6NTQ6MzArMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjNUMTA6NTQ6MzArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIzM2I1YmIwLWY1YWQtZWU0ZS1iMjJkLTg2N2QwMDYwNTZjYiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMzNiNWJiMC1mNWFkLWVlNGUtYjIyZC04NjdkMDA2MDU2Y2IiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMzNiNWJiMC1mNWFkLWVlNGUtYjIyZC04NjdkMDA2MDU2Y2IiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzM2I1YmIwLWY1YWQtZWU0ZS1iMjJkLTg2N2QwMDYwNTZjYiIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0xNFQxNDo1MDo0NyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsrS0J0AAACbSURBVGje7dqxEcAgDENRRvcabJsmbQJcICfpfqEaXge2Wu+9bU5NZuu5f178KEwBsAWkBPgEUkUsY1QByyAHxBTGBTHEOCFeMW6IR0w0pEzyCimzZEPKNJmQMg8QICchlRAgQIAAAQIEyA3hrQUEyBjCn10RwlxLERIzMmUarwqJWfRErd6ilqFR6+mowkBchSOqVBNXc5Iqnl0Ztl+o/yuiqwAAAABJRU5ErkJggg==",Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABCCAYAAADuSnCvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFbGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNTozMjozOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjdUMjM6NTU6NTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjdUMjM6NTU6NTIrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNjNjlhNzhiLTY4NDAtZTc0ZS05MTBjLTM3MWE0NzJiMTRlNyIgeG1wTU06RG9jdW1lbnRJRD0i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",ep="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABCCAYAAADuSnCvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGR2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNTozMjozOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6NTYrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6NTYrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJmYmRjZjhmLTA0ZTgtODA0MC04ZTBhLWY3YjNhNWU4OTZmMyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBlNTIyZGNlLTdiYWQtN2Q0OC05ZDc4LThiNWU1NmE2YmQ5MSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUyNzE1NmZmLWJiMWYtOTc0Zi04YmU5LWM5Mjc3YTYxYmQyMCI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iMiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iMiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTI3MTU2ZmYtYmIxZi05NzRmLThiZTktYzkyNzdhNjFiZDIwIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI3VDE1OjMyOjM4KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmYmRjZjhmLTA0ZTgtODA0MC04ZTBhLWY3YjNhNWU4OTZmMyIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yN1QyMzo1Njo1NiswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PheCz84AAAFNSURBVHja7dvLDYMwEEVRt5ZC2KYdSohSDA2kADapAznLMBZfMx9LXKS3RU9HQjaMSTnnRP4BARBAAAEEEEAAAQQQQAABBBBAAAEEkOACKeUigDQJEnDllFIeprfIHMa1DCDtgAiIb/6IRMEAchakHzvVrEH0YyeyBmPQB5AmQI5CeMMAEg1SC+EFA0gUiBaENQwg3iBWEFYwgHiBeEFowwBiDRIFoQUDiBVIKxBXYQDRBmkVohYGEC0Qa4jn6yHiBQPIVRAviHIM4QUDyAUQV4hylBkFA8gBkBCIYXpvLu+eMIAsgbQCsbcRdIUBZHn1EQWiILxgjgzVARHLjRKMFoQVzFKvuQUgB0CqYKwgtGC2IKreZW4PslYgCqIWZq2X2veQ24LsPUJbEJHHO2t7AaJ4LFMUCIRQ7QXIHsiJw/qiwNJNg34iUOkFSJEfUs6ewtOfTUUAAAAASUVORK5CYII=",ip="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABCCAYAAADuSnCvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGR2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNTozMjozOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6NDIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6NDIrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5OTk2NDA1LTY2ZGItZjE0MC04YzAyLTk5MDRlYmU0MjIzYSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjM2Njg0ZDZmLWIxZjEtNzQ0OC1iNjhkLTQ2ZTA3MTM4YThlMyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjZDgwOGI0LTBjMGItMDk0ZC1hYmY1LTE0MjE0ZGZiOGUxMCI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iMiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iMiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWNkODA4YjQtMGMwYi0wOTRkLWFiZjUtMTQyMTRkZmI4ZTEwIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI3VDE1OjMyOjM4KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5OTk2NDA1LTY2ZGItZjE0MC04YzAyLTk5MDRlYmU0MjIzYSIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yN1QyMzo1Njo0MiswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn1bJxAAAAFPSURBVHja7du7DYMwFIVhz5Q1UrEKdXZgEySGyAhZgj61U4aLeJr7sMSPdFp09EnIhmtSzjmRf0AABBBAAAEEEEAAAQQQQAABBBBAAAEkuEBKeRZAqgQJuHJKKXf9KDKFcS0DSD0gAuL9+YpEwQByFqRpB9WsQTTtILIGY9AHkCpAjkJ4wwASDVIK4QUDSBSIFoQ1DCDeIFYQVjCAeIF4QWjDAGINEgWhBQOIFUgtEFdhANEGqRWiFAYQLRBriMfzJeIFA8hVEC+I+RjCCwaQCyCuEPNRZhQMIAdAQiC6ftxc3j1hAFkCqQVibyPoCgPI8uojCkRBeMEcGaoDIpYbJRgtCCuYpV5TC0AOgBTBWEFowWxBFL3L3B5krUAURCnMWi+17yG3Bdl7hLYgIo93lvYCRPFYpigQCKHaC5A9kBOH9UWBpZsG/USg0guQWX4LZEMoyDKO7AAAAABJRU5ErkJggg==",sp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABCCAYAAADuSnCvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGR2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yN1QxNTozMjozOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6MTkrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjdUMjM6NTY6MTkrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxYjQ5NDhmLTllMzUtYWQ0Ny04NmVjLWE3YTk0YjI1NDczZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmMzYWFiNWI3LWY5MDMtMmM0NC1hZmY1LWZiNjlmMWQyNzdmZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmVjNGU2MTBhLWQ0OTYtYzE0ZC1iOTYyLTlhZTIxOWEwZTBkYiI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iMiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iMiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZWM0ZTYxMGEtZDQ5Ni1jMTRkLWI5NjItOWFlMjE5YTBlMGRiIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTI3VDE1OjMyOjM4KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxYjQ5NDhmLTllMzUtYWQ0Ny04NmVjLWE3YTk0YjI1NDczZiIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yN1QyMzo1NjoxOSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjK9ExMAAAF4SURBVHja7dvtCcIwEMZxv+kCgvs4gCs4ghO4gjM6SXyBojkSezF3uSp/4fkgkvr0B21jU1cppRV5BQRAAAEEEEAAAQQQQAABBBBAAAEEEECCC9wriACySJCA1xPgeDxleYcZWgaQ5YBkEOfzJUsUDCDRINftOj0iIfb7QxYJM40D5F9Bph1Ku80z03sJIVMbB8i/gMgdkqnBaMcB8sMg2WV1bge1kSdl68syIANAihMu7aGgPbS8JnCAOIJ8hGg9acrUtmMNA4gDSBOENYg1DCCGIEMgWqf6vTCAGIAMhRgNA0gHiAtE7487axhAvgD5CkJ7o2f6XC5DaMdpo4UBpAHEBKIGIyHkUmYNpvf752AAUYC4QMgoTnJFGKt8ggGkBLIgiOXAAFLu5VLA4AZOWC9AssuNcQGH5QL3Xqp5CCCdBQY88OLSq/m3DCCNBQIehTLtBYj1LcRACJdegHgtQwRCmPYCZA6k4WH9rEBpo0F/IjDpBYjIDWFaV3H3FpR/AAAAAElFTkSuQmCC",np="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABQUlEQVR4Ae3XSw6CMBCAYfQeYDyBN2Ah7D2re3HBDTyBEQ6iCcmQ0DDpK/JIfzcNQ6dpvxlBs4wPAggggAACCCCAAAIIIIAAAggggAACCKQkcHA9bFXdvnNzm+buvMZcfmwsdl/H2A3sPd9avVjhpYBC90kHaBUKFdXWWyruu286wKyMr6CZv5Vr13PQAVIxVzGZ37av4XdBWV4mbxItvlae7Vx0gCmU52cp1uxYFKchXtfXYXw8npN5Wlwmafe1uG9e130kZXbs+/cknnwHADDphwQvxie4+SwQC+3fnva01+KynnZfi8fm2c6V/Fdg7ACRtonJvK2PruegA7RKugpq+WvFffdNB9gq5StqW+9f90P3SQe4ViRU2HX90Hmx+0q+A0LhyUMAAQQQQAABBBBAAAEEEEAAAQQQQACBfQr8AAyZmfq774XzAAAAAElFTkSuQmCC",rp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACXklEQVR4Ae1Zu04DMRBMEMW1KA0NUr6FpOcXUlHDDwQpDSV8Qmo6+oSGir+IQkMT0V4Xwkoj2avz45zz5XETKdrYXtvrmfHad+n1+CECRIAInAAC2+ti+/9tOtSLpgfkeHsikItpV1idV0Dfhcyp1E+nL968MJs9etfYeQVcHgvTyPD9n9LLGOIF8+PxrVQNh1diV6tfsYvFB1y9lgrwwtNiY4h5KOTp/lmi0szfDAZJ0VIBSbAdsJOL+e/NRqJCDogNsfMKiMq4sWiaftizqHPtcfjpdtSj/+fbl/xEtsee18wj+4fOf4xLBQCJ3BaMaqZd88I/F/OYlwoAEqkWTNVl1uXvuuE1tef1OqkAjUhqGUpAfxfDaNe2beYxPxUAJJq2sYpwMV+WpYRUFIVY3PDqnvOhdVEBIYSaaocikBtQzn3Oh+LvvAJafyME5sFM03d7jBtrO6+AbE+DYEAzfug9j7hgqQAgkcse+pwPrYsKCCEU0V75z8yOeeka+w6v6RteRNziQgXEIuXxEwWMRnfisly+W67r9VrKuZ7nrckSClRAAmi6i5UDJpMHaZ/PXy0/KCHXU501WY0CFVADrJCrpQScArv381Y/oz77LdSa2FGgAhzA1Kn2Mu/KCbsJqIA6KOfy3YcFL/M64Ip7wj5z6+GTy8wBCdDFMg+GLX9jPrQbVe3/pAJqYG4xaZzneoijYFYH5SpTAS5kjPqzZB7rowKARIW1mD/2G11F/FFVVIAHJlFAxQ0OXU4q2yNobakAjYhRtnKAUX8WzGM9nVcAgKAlAkSACBCBLiLwBy7ZE8tr1tAiAAAAAElFTkSuQmCC",op="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACLElEQVR4Ae1aQUoDQRCM4g8kxxx8gQ8IBCFHD96C3/ADG7If8AfxKt48eAxIIA/wBR5yFH8gKCwUZAqantnt3RW6c5ntnp7u2aqayWTIZBKfQCAQCAQCgUAgEPCKwNlYL/61uv09rT19eRtlLuenk/D4fDHWS99/j1Y6eeVQQAJHj8Z+/5Gs+e32KanG/YvF9SB7QiggocHQYEY59fH4ya7E5vF9KSIUkMBuYDBzBimbFMhrrYRQgDVDVvmkPNZKCAVISOf6wYgWz2u3qh6TcwH3a3nRz+O0eXB/KIARybXBgBTflRkeL9WDn+OlebE/FMCIDGXX9cMgZ33tfdwroJgFrDkJ2bZrUcrHfuv67hVgdi3TN/NQAupoSkC81rpXgLoH4PYWd3iz2VUDqvR7fj6/SUDvutvzifFweE/yw+B5PV/+NF3abbN7BQQAkJDXVt0DGBhp98XuzPF92VbzcL8EzM4BYKRvJaCOlbLcK6B4DwDyGhPWSuirnnsFmO0BUEZuyyc86cSoMZ9bT4oLBUjIaH6scYkh9iNey4t+Hg8/t6V5ebx7BbT+FmAkcxnDuM2mwmPTrtd1YmtGV+aR370CzL4FwEipEsBEbos6ufFaXChAQ6i0HwxZKwF5S+ejxYcCNITa9jNjrAjc4Un5ebwU19XvXgFm54BSJpbLu+T/Abvd6yhzca8As3NAqQJwb49xUzwM3LpXwMB4R7lAIBAIBAKBQCAQ+EcI/AFlE6oSMvrF/gAAAABJRU5ErkJggg==",ap="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABwCAYAAAD7cpUtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuYThkNDc1MywgMjAyMy8wMy8yMy0wODo1NjozNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yMlQxMDozMTowNCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjJUMTI6NTg6MTgrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjJUMTI6NTg6MTgrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM4NzM2NzU4LWZlNTMtMGU0MS05YmZlLTAyZjZkM2MxODc4NCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmY4ODBjOTMyLWNhMjktMWY0ZC1hYmNhLWQzNThhZTkzZGE2ZSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjczOWU4NTlhLTBhYTEtNzY0Ny04NGQxLTAzNzdhOTQ4NWQ2ZiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NzM5ZTg1OWEtMGFhMS03NjQ3LTg0ZDEtMDM3N2E5NDg1ZDZmIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTIyVDEwOjMxOjA0KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Mzg3MzY3NTgtZmU1My0wZTQxLTliZmUtMDJmNmQzYzE4Nzg0IiBzdEV2dDp3aGVuPSIyMDIzLTA2LTIyVDEyOjU4OjE4KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+spSGiwAAAkBJREFUeNrt3bFtAkEQBVC6oQM3QOiAzBkSJbgHF+CK3IpdgIvAmSUuuPMwO3cDfkg/Q7enfcns7izsdv/ss98/dcslkh0wYMCAAQPWBORwOF4FGDBgwIAB2xBsFiQaYMCAAQMGrBBsFuh8fp3NH4qOq/GAAQMGDBiwrYCAAQMGDBiwFcE2BQIGDBgwYK3BLoMTBQsdMK4NBAwYMGDANgW7dEr0gHFrIGDAgAEDVgqWmsCvr7dQPj5Os8m+TzcgYMCAAQM2FCw0AdMJjQK9f55mE31eFnBtIGDAgAEDlgILFQ3TCc2CZYuQ6fe/X56vEgUFBgwYMGCPCxbN0gRmwaLPj24er33JHRgwYMCAzYKtCjRNtEhZAssWPdmmn81PiIEBAwbsscFSQNUL49GJbibfcEAKDBgwYMCagi0tRO8NsKDJBxgwYMCANQHLbqaOXshmDyyzm80RsMPhODzAisAqsIAVgVVhASsAq8RaBSxalEQXsmsXOdEmHWDAgAEDth3Y6IVxFmw04OjNX2DAgAED1hds9IFg9eZt9oATGDBgwIA9Lli2aKgGGN2YCgwYMGDA+oBNB6i+DNG9MbUbEDBgwIABmwWbZihgNcDShcDo+N2AgAEDBgxYHVj0ckR1E031JXRgwIABA9YaLAW41Ig6TfZHmEcXFd2AgAEDBgxYCmwoYLbJp/rPcroBAQMGDBiwoWCzgKNBR2fpfbsBAQMGDBiwUrBWoPcOAgwYMGDAWoGlQG/I7pEDDBgwYMB+8wNADZueQvPg2gAAAABJRU5ErkJggg==",lp=""+new URL("spicyBami-20b0a34e.png",import.meta.url).href,hp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAAAXNSR0IArs4c6QAAAchJREFUaEPtlzFKQ0EQhjeFBE0jiI12HkEQG7FIYyPYewdbL+Id7AVrC7s0OYKdpWUMIYQIyoA77Dizm3kv686kS3bf7vz/N/8kGQSDr4FBzcFFW6HupJ10ww54ezcMN5LmpJ10ww54ezcM1weZt7e3d8MO9Nres+nDOuXl6PSu1zp6vcyEaEoklZzl6mdl/6xb8p2SNiWaEwtEuVnZFfFOSJsSTYnlyC4X82/oO8PdJHxt4qqkXXQIgSPMZRrW/xXppkXjttYSC6Qh84cX9ypxVDnEtGhMmJvKXKbhedhXJemmRJ88XSf/HQGB6dEVBy25znUCJn3+8frnPW83z6K4ijaZEM2JpOwuJY7PyyVM1UORT5I2Jfr4cRxldzjay8pqKWlMFl/KZRnvX8w+o4/eb18iuNEbF/3LKy3iHFFtwnBeFml4yKRoTEBqwuTgMmsmwGZphnF2qcuKSDctGsThgSbFxXUARZ4jKyWK68SEYT35PW1SNHas1ITcQVhKlJrSVIeKfnubFC3N9KbmSKevtJ6NSEsvMSlaas6294kyve0ite930dqO1nqek66VjHZdTlrb0VrPc9K1ktGuy0lrO1rreSZJfwEAoghNSbc9tAAAAABJRU5ErkJggg==",cp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAAAXNSR0IArs4c6QAAArNJREFUaEPtlzFrU1EUx18gJIOoxcWli4OTgiBxkHSQDNlcdQt+AU3r2kop0tU29QuUbO3qIGQIDmYyCB3q6iZ00aogJAQqnPgX7+Gd3NPnffTxzu1ym9xzzrv/8zvnnpdKYvCvYlBzEkVboR5JR9IlzkAs7xLDdaRF0pF0iTMQy7vEcONFFss7WHm//XZGsS4vzUP+PKWlvfOY1sFgQMlut9tkN1g7cB8Nv5VKLlByCZpYEv2X3B+SvHJOP7wmso/W39DW4fZDWpfuPU1Nvi9e1soMStp3SBOiIfK8REDel8TzxoV9rqRLLZoTySqWk8uLeBDSpkXjNpZ67f3JjdStleufF7YnbnvM96y9HLSnQdqUaGSQ93Ia2VqtRubT6VQExslLczwr8SA9bVK0hnAWKnkRD0LahOgvn27SO/TX7z8I4HJ1g9Z/e1jTu1r6IP7r0h654Lm3759kgpbJyYRojKRXW0eU6eebd2jt9/u0jsdjLTSVnVQljUaD/DudDq37u/P5/mR1Pv+1c1xF2oRoiORYkNm1rbu01ev1HBMf8clkkkq6Xq8vrAAQhlG326V/X6y+cyqPB5HIL/zxbkJ0q9WiW7larS7MPHr75e4DhzhIS0SloLDnxPEZpEF4Z/Oj08tS3NlsRlvD4dCB63wwLRqZk4j7ens0GjnJl0j6rvJms+mYaHsZhOGsIm1aNCfByUtzG36cuI8s9jlhaS7zeJxwJtImREMkLjQfGZD39biPPCernccSWYkwvk+d0yZFc8LaJOxtH5PrtatXaMWvIf6uzuOjZ3FHcP9n67d8RZc6jyUn1bu3SdGqNCdJIiVHqgAtUT5ntef5L9Lah5gUrU3ORdupevqiDxn6+VF06IwWNV4kXVQyoc8VSYfOaFHjRdJFJRP6XJF06IwWNZ5J0r8BJzv2TfzT+VAAAAAASUVORK5CYII=",dp="data:image/png;base64,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",up="data:image/png;base64,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",pp="data:image/png;base64,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",gp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAJNJREFUOE9jZCABvJVR+Y+snBGZ81rLBEUSJCd67QyKGpyaSXAEWCkjulP+8QngNIPp0wcUOcbbgtIYToWpEOLmxDDo3dfvcDG8mgl5g/GkmBKGzUK/f2LayMqOIYahGZtGdF3voAZR5myKAgw9qggFEkoiQU9V6HEJUowr7nEmPWJcgJHCkDUJP7mD1XCYaymyGQA8wTE8wIRy1QAAAABJRU5ErkJggg==",mp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAABiCAYAAACf3McSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNlQxNDo0NDoxOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTlUMTE6MzI6NTErMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTlUMTE6MzI6NTErMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkzMGRiZjA4LWIwYjQtZTk0Yi1iYTY2LTMyOGE5ZWZjNjU0NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkMjRlNWE2Mi1iY2YxLWNmNDYtOWU1ZC1lYTZjY2E1MTAzMDUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMjRlNWE2Mi1iY2YxLWNmNDYtOWU1ZC1lYTZjY2E1MTAzMDUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyNGU1YTYyLWJjZjEtY2Y0Ni05ZTVkLWVhNmNjYTUxMDMwNSIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0xNlQxNDo0NDoxOCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5YzRmYWQ5Yi0zZWIxLWRlNDktOGFjMC04NzEyMzc1Njk2NDgiIHN0RXZ0OndoZW49IjIwMjMtMDYtMTlUMTA6NTE6MDkrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTMwZGJmMDgtYjBiNC1lOTRiLWJhNjYtMzI4YTllZmM2NTQ2IiBzdEV2dDp3aGVuPSIyMDIzLTA2LTE5VDExOjMyOjUxKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pa57YAAAAlhJREFUeNrt3UtuqzAYBlCWVN1BB11LF3GX1knXR6VUqlQa8I+NDcYH6ZtEbR4c4viFPc3zPMn94ySAFtACWkALaAEtoAW0lEI7fo55kTYvCho06ArA/17fHgEN+nbQc2EAgwZ9BehfHzw3HVwAtYCzvhigQdeFLs0Sfv78/8iF4EuhQ587+oUADfryzavQiTgB/vvE/r3wdn2e5QUc+Mna/CkDDbrbDpMo/FWK7OgFWvS+QYNuDj0flBB8RfDo66wV8VXeF2jQbZtX0ebCsnKSUeRV7ciIArfuEgUN+nDoTdBaHSmp589oBuU2q4YZpgQ9EnSDwYjNC2Ct8nMAwNrzHH1BgQY9VodJUUdKBvgm8NkTDkCDHmZy4CbIjqL26f9vAJ8yYQI06OGm+z4Fzu3KTBXlrYdTQYMedgJ/tChOVbqKJkEeDQ8a9PC35GxW0paZEpMWl4MxqcGZoydMgAbtJrtnla0ocBS8oEgHDRr0buCPl/dH1sCngydO7JhYARo06OpFd6rylXp8LaXgoEGDLqmMRQFTsGuPgwYN+oqVsb0dKSpjoEHrMAENGrRBDdCgTTww8QA06CtWuiaTA0GDNoHfBH7QoE+FdZMdaNBuhN8PbsUD0PeEtliNVYlA36wyZkE5KweCHqF5ZdFXq/uC1mGS2THSepgz+vdW4Ac9HPSu5lXrwYOCZpvNU0D3CV2lQ8QGZzfbyQ50Z9AVNh+1CemddpsF3Q90aRHe22FHeNBjQI92DDdMCRr0OOCgQfcNLX3GSQAtoAW0gBbQAlpAC2gBDVpunC8Z9pLgCvj9AwAAAABJRU5ErkJggg==",Ap="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAtCAYAAAAwRkzIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yMFQxMDoxODo0MiswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjBUMTE6Mjc6NTcrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjBUMTE6Mjc6NTcrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFiMGQ4NGMxLTIyZTAtMzM0ZC05ODFmLTk1NmM0MzllNWJjMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5Yzg0NzNjZS1kM2YwLWFlNDEtOWNjNy1iMzQ4ODRjZmNkNjQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5Yzg0NzNjZS1kM2YwLWFlNDEtOWNjNy1iMzQ4ODRjZmNkNjQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjljODQ3M2NlLWQzZjAtYWU0MS05Y2M3LWIzNDg4NGNmY2Q2NCIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0yMFQxMDoxODo0MiswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjBkODRjMS0yMmUwLTMzNGQtOTgxZi05NTZjNDM5ZTViYzMiIHN0RXZ0OndoZW49IjIwMjMtMDYtMjBUMTE6Mjc6NTcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz75vCrdAAABOElEQVRo3u3boQ7CMBDG8b0NGonC4UjQWDwOiUHxJggSHOHJUAhwzYl169Hr1tv+TT5DUkh/aZr1uDWN3fhGwgAU0OnBPXfXkPfpHNIBnRNAAQV0GMT9YhkSQ4xFzr2sV6rIuVOABhRQJ4ha0M/tEZID+gc0oIACmo94P2xC5Oexs7IEoidcQAF1AiojEeWILaY0nCdcQAGtD7S3wFEbluHNqgg0oIA6AR3yhpOT13HbmhhobKPINVriAgpo3aAmj01jIaaAppyhxXcroIDWDaotcMhzSjs3BSgTsXe9gAI6T1Dzv0BSblwpWIWKIK2PjIACOk9Qk0YHqxuXYaNDazGo43uKFFMABbRu0N4fSCw61NDOmAKqXReggE4YVAXtpcNQ24E9Wi0VUECrAfU+tBuC97IAdQj6A8wYYMS40mdkAAAAAElFTkSuQmCC",fp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAAAqCAYAAACwTnX4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG/2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yMFQxMzo1OToxOCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjBUMTc6NDI6MTMrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjBUMTc6NDI6MTMrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM0MWQ5ZjgzLTAyOWQtNWQ0Yi1iYzY1LTZlZWMxYzRkZjc4YiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjRhMTA2MjA5LWI5ZWItOTY0YS05NDMxLTRlODVmYTdmNjgyZCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFjOGFmZDI4LWJiNGEtYjI0YS1hY2JkLTRkNWZjNGQ1MzFmZiI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnhtcC5kaWQ6OWM4NDczY2UtZDNmMC1hZTQxLTljYzctYjM0ODg0Y2ZjZDY0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpkMjRlNWE2Mi1iY2YxLWNmNDYtOWU1ZC1lYTZjY2E1MTAzMDU8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzhhZmQyOC1iYjRhLWIyNGEtYWNiZC00ZDVmYzRkNTMxZmYiIHN0RXZ0OndoZW49IjIwMjMtMDYtMjBUMTM6NTk6MTgrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDFkOWY4My0wMjlkLTVkNGItYmM2NS02ZWVjMWM0ZGY3OGIiIHN0RXZ0OndoZW49IjIwMjMtMDYtMjBUMTc6NDI6MTMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC41IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7oVzTjAAABo0lEQVR42u3cO27DMAyAYW/pNQIE6NyhQw7Ue2TJ2Kt0LtBL9AS9ipsAgcAWYkLalCzLfwBO8UPWZz3MyBmGoM84jtmIPt7tmOOEyB638LW7yhJdh8WRHp1uKlKRwqwFqXLlNItkKef36Txcw9FzNIukVvjL69EU+8NzioqQ6Xgfb+8pLigpvK0KJJDyTbtVpMt2wzWWQDJ2n/PGAGOBzGGFmBt3IGfDWOoqcgYKEkjtITm7vsWQZIGzocHI+Pn8SiH3rYVQqVXJMfjhDeqdRIAEUh9Ihq4vBEl7yHXDaBclT2zZt/Vwtqr0vbwp7+znalUgVUb6n9MDqV7Xt0xL0qbD8qNd1JowIlqVlvmOmo6DBNI2kEo+2JoTgrKQu91Tit4wArPppvHGM56BBBJIoUiWTMHWkWS9yPqSN7h7IpBfE/Fne5BAAikCKWQKzpg0fa2fd0kXSCCBFIrkTZLKvngrWXDrCtS5ARJIIJVACv/5XMtc9LDGASSQQOoFybU4UstW9LyCFSSQQOoRifeTQAIJJJC2+/Y5SCC1j7SGP9uohfQLXioykibJrrAAAAAASUVORK5CYII=",vp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALwAAAA5CAYAAACMNEHAAAAAAXNSR0IArs4c6QAABVZJREFUeF7tnb9rFEEUxzdNKgslKQRjNJWFP4K/SKEIioWFPwtJYRltRFEQRAISRRQRguKvRoMgNuEEDQoSEMUQhIAiEv0HQggWd5jKIo1yOW8y2czcvLfzZm7v7nvVcPf2zez3febdu5ndvbYEr3or8FdoAG1CfpraDUSqf3gBfMQYAPiIYlu6AvARYwDgw4rthPnCqaOZRzBXnFfHFsYndD+Iq0VVCJMZN9KBAJ4kUzwjAB9WawAfVl+297wAbwPDZ3xO2JIk8fGvi23sy6dc4UayRnmDUkdTQCrg3Pik7QG8p4IAniYggKfp5LJChncplJPPYwNvBOPy4T4lx9z8H9V+MTlN+TpmwUbMhKzwxCxdWANLkgQrOcsVA/Bcggz2AF5AxEguALyA0ABeQMRILkIBbywzdm3drE7rwIZVzlO883bKaZNn2JyDj2yA8kZuWY606gLgIxOe6g7AA3gRAtvb2zP7WVhYyHSsq0+TXwAvC7wqYw7t2+MMYvH30nUgNuPONavVR7r9l+mf6v08lDQu+GqJERN4fRxM+GNu4jnZ8TGQrOEBfIZIAPgMonkcAuA9xKseigy/qIQkSwJRMbvwHSQrq0udhUR54wOp1HmY/GTN+NwxcTbg3hRGkuu3HqouZmZnVXvk8e3F9pGTA9whcO19WRWZlQCeGzaHPYC3CgTgy9Jk/QGLDG+9eWQFca2Y4Z0bSfqKinDSq+kua3kD4M3AP7p7U+m9vXeLah/vP63axVJJtSffv1LtUqmo2rYSaGjwIsv/2OiTrCWT8RuB+jUB4CPN4nqXNAC+EmgAD+AbLcPrEVOJPZ3hjWDbNpLefZpUTndvW/r6i1neoKTJNhNtqzTler36mpn9pZUo94zAPxi+kalEKR+k+3/2/KXW78pVoFr2ugJDg+dMJRCARw1vruEBfJIkzZjh03kx1gSIVaO78n6zZ3j9/PU9gnKqV2XMpp6NRp161q8zvv9x6qt6f3/fTpfGQT7PWtIAeHOG//xhzLjqcqz/jHq/s6NDtfVVl+6uter9gbNXVLu7q0u17w9fM/q3req8Hn3KGo/JHsAbph4yfEUUAJ8kCTK83JcTpaShTj6KL9vIbSVNKwCva9IyqzRyCMt7qifwth+tlFWUjo5OJcbegyeMJVD12pu0anoJpG9sVTeeyva6f9tGmG5f7SNd0gB4eWa9PAL4pZ3crMCnLmbDsqQXkYEOpoJu6p5b3nBXaRotw1OBt4Wy6XZaAzHr5TYPwOuXFnBXXb59/6HO3zZB9FUU3f78pavq2B29vdoqkHEjiauzNcMDeK6UgvYAviKmEPC4eEyQzSCuAHx+gHdmfsqN21KUSG026eOhwsatlTnnTB1DyBre5Lu8cmPbeMIdT5wIZ7QF8CuF405E7i1+AL6iecPe4pdGhppduWBx5jR1DMjwHFWX21JvAKH0wII/b8+locLWAsCbmMBzaQwzoKGBp8zoWDbUyaePhzsR8SAm/2gCeH8NFz1QgedCrg8PwAsF678b50YVnh5sFzwU8Drkeu+F8QnJ0laWJGFvoU4UwAsHSsIdM6tLdJk7HwA+dyEJNyAAH/95gPiPp3A8Gz0D8nDLkpRQAniKSoI2AB7AKwUK4xMiaOXhGfW2EwHw9QXeFhepPyambJDoY5D6DcP660yRWZZyQrxUQOp8Q5xCFJ95EQDAe4YbwNMEBPA0nVxWyPAuhXLyeV6Az4kc4sNwllg+9T/qc368ADxfM84RAJ6jVgRbAB9WZAAfVl+2dwDPlkz8AOekIPaIWBKEgkgEkQKbAPjAAodYh4445KbrCsBHDOk/kBDgcapKzoYAAAAASUVORK5CYII=",_p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA5CAYAAADA8o59AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0yMVQxMTowMzoyNCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMjFUMTU6MTQ6MzErMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMjFUMTU6MTQ6MzErMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmYwOWEyMDQ0LTBjNTUtNWY0Yi1hZWY4LWM3NzlkMWJlZmExZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjYzYjViNmUwLTIzNGEtZWU0ZC1hOTFjLTJmOWJhMWI1MmE3NiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjdiMzU3YjQwLWEyZjEtNTQ0NS05Y2FmLTE4MWM4YjdkMTI5OSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6N2IzNTdiNDAtYTJmMS01NDQ1LTljYWYtMTgxYzhiN2QxMjk5IiBzdEV2dDp3aGVuPSIyMDIzLTA2LTIxVDExOjAzOjI0KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjA5YTIwNDQtMGM1NS01ZjRiLWFlZjgtYzc3OWQxYmVmYTFkIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTIxVDE1OjE0OjMxKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+79VYEQAAAclJREFUeNrt3DFOwzAUxvEoR2Fn7gVgYGFlYOiIujF1QgXBwoTEjEDcgCtwhp6Ba6DUQsIKUh59z46T1+Q/fEOHJsr7xU4cO6mapqmIn1AEQAgggBBAMlPXdZMRQAABBJAhC7w5OzZluTiK6RMHEEAAmQ1IToFfLxemlMIBBBBAJg0iIVgL/Hl9ujfSfwEBBJDRQUqNRIdC0BS4ne3NeWc0OIAAAsgoIO2N3a5OYjzgWBGkAkv5eryI0eAAAgggHkDaiRt+WC9jrDvMnGfoBaFdbCnfL1cxEk4CiHkuBRDPIFIhAfEB0tla3p/XMZodPt2tkpMDIhVbk75ArMcIyCGBSN0OID5AOluLZocfb/fJGfIaUuK2VzouQKYGInVfgPgA2dtachByQErHiqC5boTfsZ6ATAFE030BogdRDww9gFhxSsd6e/vPUOBPTwMIIIBonwFmIUij9pzRec4IvkQ0CNqWILUKQACZJ0ixhXKauZGAUoW+/id9zYEcSlJaAiBzA/nFmCPIIO8YalagBJTOsyH17DA+tnEV9yCFlgIB4nGN1iy/5CA91Q0oRc4MMhDIGM1+8t86oZvi4zOAEEAIIIAQQAAhPWYHPq9l1rbfPy4AAAAASUVORK5CYII=",wp=""+new URL("garden-cc781a46.png",import.meta.url).href,bp=""+new URL("garden-1-28dfe799.png",import.meta.url).href,yp=""+new URL("garden-2-a85022af.png",import.meta.url).href,xp=""+new URL("garden-3-691759a2.png",import.meta.url).href,Cp=""+new URL("garden-4-45062901.png",import.meta.url).href,Ep=""+new URL("map-1-ground-3d70e736.png",import.meta.url).href,Ip=""+new URL("map-1-top-7a97e125.png",import.meta.url).href,Bp=""+new URL("map-2-ground-56b3d41b.png",import.meta.url).href,Mp=""+new URL("map-2-top-e70ca852.png",import.meta.url).href,Pp="data:image/png;base64,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",Sp="data:image/png;base64,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",Tp=""+new URL("click-10315716.wav",import.meta.url).href,Rp=""+new URL("Main_Menu-b890cc86.mp3",import.meta.url).href,kp=""+new URL("Settings_1-639b38e0.mp3",import.meta.url).href,Dp=""+new URL("parkSong-a6c62004.mp3",import.meta.url).href,Lp=""+new URL("crunch-edfcfcd8.mp3",import.meta.url).href,Gp=""+new URL("plop-3ca5df25.mp3",import.meta.url).href,zp=""+new URL("parkSong-a6c62004.mp3",import.meta.url).href,Np="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAABaBAMAAABAqcVwAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAYUExURQAAAESzfI/eXX5+j///6zyjcFafe////6W9jIsAAAABdFJOUwBA5thmAAAAAWJLR0QHFmGI6wAAAAd0SU1FB+cGGxQkDVu7MhMAAAABb3JOVAHPoneaAAABYElEQVRYw+3Y3XGEIBAAYNJBzEwKOK4D1g6ggXuQDkj/JYS/RVHwYDNxJhf2gRHwUwQBR8YmQrwz9kZxE7O3491xszecPvodd47A+G244V7XgQsBIQSHFGJfCeIOkNysbAifzkrYrD/0x1mltCV3JdGBL4QzB+hg4/CsEycxlVQHW+eeGNPg8DjU+hb6EiWPDs+KjmOJ6wtX4q6Yu12rfDvlzil8gh+70Mrc1dppTzy4+OToYE3XfhFzbRzCNVKJzFMBLeNXcPtxh9J7lgRUneBnrvxeZ9NnO4/WCVWcR39lnRjuH7qFEI/hhkthlzufrNHm7Nbhkzkuui77os7tUpLQLzHT7AzRaUNzi6Y53x/9TuFX3CUufjxArws3lKbbhcmjcT41uxi6WvM7bvkiusVc7LShuVrXPF8/zcVOE115DFv2B0N0pbFo2o8q7vMpPIb7T0TYAB/WUf+DEf+7fQM5i2LS0Z+QaAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNi0yN1QyMDozNToyOSswMDowMMjlg1UAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDYtMjdUMjA6MzU6MjkrMDA6MDC5uDvpAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTA2LTI3VDIwOjM2OjEzKzAwOjAwL2X5mAAAAABJRU5ErkJggg==",jp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAABaBAMAAABAqcVwAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAYUExURQAAAESzfI/eXX5+j///6zyjcFafe////6W9jIsAAAABdFJOUwBA5thmAAAAAWJLR0QHFmGI6wAAAAd0SU1FB+cGGxQjBoMofVwAAAABb3JOVAHPoneaAAABhklEQVRYw+3Y3ZGDIBAAYK+D82augJAOWDtYG8iDduD1X0KAdRERhOyNyf24D0DQL6LI6tg0rSDem+ZN4trGHE49HBdzwPbjcaesEzB1Od3p/q4DGxootAIfOt4I+grgXdeb0K7sem1+uqZrrzai6bn2yA5cJ+w5YAeB4712HHKJUgehs2fMJTlu01Y3QtfT49bxXrNT3GOvhe2x/7h20ajcODFyPZ/Btx2Ncu1y4zQ7btx85uxgKZfrorvcPNB/+B5clxpq5i/h4nmH1H3mBWSdVnsufV+vlk+4jpYFlVxHvyVPnO4fukEQt1e7SehG6TjrDrh1YxVMXBepqzrD1Dx8CR3lO19zu+gow/q6ozaW3JzRgWv7SK9xlOLn9E41Sh1UOTdGXGp6/zjOxeMk+kTnXpMEbqhz8XXBoXIeXBHXP80Fa2gK11TJBZFf+se4fMoo5fnpyS6XhYvPo1HoMiM9zo1Cl57Dmuf0JHSpuah6L8i4zyLchv1OJHgRuRkn/Q4m/O52B2tDWKd/CbJIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA2LTI3VDIwOjM0OjI1KzAwOjAw4IeCHwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNi0yN1QyMDozNDoyNSswMDowMJHaOqMAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjMtMDYtMjdUMjA6MzU6MDYrMDA6MDBawG2iAAAAAElFTkSuQmCC",Up="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAABZCAYAAAAARqm0AAAEu0lEQVR4Ae2cMW7VQBCGMaJIQRGJA3AAjkCbDqWi5RiUKVNyDFqqJ7q0HIEDcAAkCgq6oA14ZK+deN8+z76dmS9FsrZ3Z+b/xr/st4re8Oz/z9Xh5n4c8xcCEOibwN317ZAqfPiFeftuFtVBYI1AMvGQm/fdmx9rczkHAQh0QODr99ezKp5PjzDvlAZjCPRHIPeoGDi/0F/pVAQBCCQCU6+KgUEDAQjYI4CB7fWMiiEgBDCwoGAAAXsEMLC9nlExBIQABhYUDCBgjwAGttczKoaAEMDAgoIBBOwRwMD2ekbFEBACGFhQMICAPQIY2F7PqBgCQgADCwoGELBHAAPb6xkVQ0AIYGBBwQAC9ghgYHs9o2IICAEMLCgYQMAeAQxsr2dUDAEhgIEFBQMI2COAge31jIohIAQwsKBgAAF7BDCwvZ5RMQSEAAYWFAwgYI/Aiz1K/vLtVXGY929/Fs+tmXhMLTXxt9aM+krrGOdvxU3XS2OmuWPcY9akdXv/1NQxrtm7lsfitWS0t7ZdDJzAHD58fIyPnL/+/EnGmoOSWjTy5/q26sjnl9S0FTPFyOOWrCnJfeycmjryNcfmrJ3fgpGGNl6hazvOOgh0QAADd9AESoBALQEMXEuOdRDogMBun4E70EIJECgi0HLTqqigEyZh4BPgsdQugRabVi3o8ArdgjI5IKBEAAMrgSUsBFoQwMAtKJMDAkoEMLASWMJCoAUBNrFaUH4ix9qO6PjvdmvXngjFpYAEQhpY41/a1u6dPE++85kfpxhba0ryrM3ZOpfn3Zrv/boVHiENnG6+8SmndSPm8bWfpnm+Gl17xKjJ2+saCzz4DNzr3UNdECgggIELIDEFAr0SCPsKXfNKa+GV6pQbDSZzejU85hGWR3vfQyENvLZ5tEQ9P2NlU2NedfkRTOasanjMIyyPNO4hXqGXnDkDATMEMLCZVlEoBJYE5BVa431/me6473VaW3/Ocz0zalVbzl8jr0bMvO5zHe+l7eLynwKewOfqJHkhsAMBDLwDREJA4FwE5BX6XAWcI6/GbmCJjjzv2k7n2rlp7DzG9NopY624p9SkuVZD71bvNPTwBNagSkwINCKAgRuBJg0ENAhgYA2qxIRAIwIYuBFo0kBAgwAG1qBKTAg0ItB0F1pjl65mN1GjjtSvmloa9XkzjQaTGh6t6tDIswlZYQJPYAWohIRAKwIYuBVp8kBAgQAGVoBKSAi0IoCBW5EmDwQUCDTdxFKo33TItU2efHNlbY5p0YGKb9E7nsCBbiik+iOAgf31FEWBCGDgQM1Gqj8CGNhfT1EUiAAGDtRspPojMFwdbu6TrD+/fvtThyIIOCVwcfnyQRlPYKcNRlYMAhg4Rp9R6ZQABnbaWGTFIICBY/QZlU4JYGCnjUVWDAIYOEafUemUAAZ22lhkxSCAgWP0GZVOCWBgp41FVgwCGDhGn1HplAAGdtpYZMUggIFj9BmVTglgYKeNRVYMAhg4Rp9R6ZQABnbaWGTFIICBY/QZlU4JYGCnjUVWDAIYOEafUemUAAZ22lhkxSAgBh6/YyeGbFRCwC6BqVfFwEnO9IJdeVQOAb8Eco8OSer4zZR+ZaMMAv4I3F3fDn8BHNijP+7B0qIAAAAASUVORK5CYII=",Fp=""+new URL("parkmapselect-ae497cf4.png",import.meta.url).href,Qp=""+new URL("parkmapselect2-859cf730.png",import.meta.url).href,Op=""+new URL("parkmapselect3-298caf6a.png",import.meta.url).href,Yp="data:image/png;base64,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",Vp="data:image/png;base64,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",Zp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAHEElEQVR4Ae2dPY8dNRSGdwntRhSIEoGERIdCQwP5AzRIlBS0/ABoqWjhB6RNkRKJhj8QaGhAdEhIICiQEAXK1mHZzOrR2s54jj3jmeuPN43XH2Of85zj9/re692cnemfCIjAuATOZ1y/mmlTUz8EvJi/0I9f8mQNATcbtPPXEGz3mSn2UoB2A1jE8hetWa6++9Iaov6KCZy/99midVKARTz9d0bPAOHOv/zj5/5pdOThxatved7MKIHOAB6hQSvmGeConX/xxrtDheDy1+939Ze4hUoQLqozQEhksHpUAcggi8fancsOWPu8ZVft/fgNh5i9qeNiz1txlALEyA3SHlUAy38y0xoX69/6fGze1tpTOYTjLOVI5SAFSCXV6bhsBQgzsVMu1btFHLYqgRSg+lDva6ASYF++u8/+TAlQgzWLKQHWUOvoGSVAJ8FcqwRKgE4SYK0b2e8C1i50/s4nax8d8rmrHx4c4rcU4BDM9S6yuwKw8//8+vN6KVRoGdyePPp4si71pM+41M8HpAAVBv9Ik3ZTADI43Pn//KabRUsBfvn1m5s8cLv74RfT8CeP/KfY6X5rfk0KkM+sqydcBeB+4PT7AXc/ejg5ymsQXsdeW6yMDHf+a69cMKXKawK//305cYATShCDE8Yhxp84OvMQ56lJCuCQGfFHVwHwnwzJ+k2hMCOZjIymXtvOf+nN+5iWVf77y+Os8dZguIRKYD1Hf4w//dclcXWazs6kAB6O8SpzCpC180Nkt69FN2eIsL+WOjv/p8ffrjLp3v33Z58rrQyziziNt7ydxusfZxSBuHpKIAXwuQ1XcxWADJkghKd/yMQyjv7ay607H/9iyoEy7K0EVhzo5/MD590AcZ6UQApARActXQVYREBGLQ7qqJNTueUSp3ZrXKn+0nGQApSKTKPzmApQOuMa5ZRsNmeDVAVJnXivOEgBUiPQ6ThTATr1u5hbpXd6McMSJ5ICJILqdZipAHyitNdrUK9gT+0XcbPskAJYhDrvNxWgVf/5xK9V+4+yWwpwFOlK1+lWAXg/Xin3asySAlQTitMYYirAqKf/3DPE3t/+5aYHcbPeDUgBcsl2Nt5UgFb9jX1Cx862zghWf8gltl44rra6FKC2iBxsj6kA4WsIry0H2zn8csShNH8pwOCpZSpAyIdMpL10RjLvqctaX9NT+YfjYjylADEyg7S7CsB98enWKLdIY7eD4UOm9aoE+NlKSTywlzhSvy6J89QkBXDIjPijqwD4T4Zwf5z2xTLMvMXB6ixGIIM7cfXWlgJ4OMarzClA1s4Pkd2eBR6GXaoXJHDL2Z90QRGIq6cEUgCf33A1VwHIkAmCdfqHVCwT6VdZhkAqZ8ahBMTReTdAnCclkAKUiU+zs7gKkOUEmZb1kAYfRoD4oASxhaUAMTKDtGcrAJk1CJ/u3ZQCdB/iZQeTFUA7fxlkq71SgFYjV8huJUAhkK1OowRoNXKF7E4+AxRab/U03OaNTVDbvfyYnbW1SwFqi8jB9jSjANY9/aP+Pt/B8dl9OSnA7ojrXsBUgNbe/1tnhbrDEbeOz/RLx0MKEGc+RI+pAHtlXmm61hmh9Hqnmi81Hoyz7JQCWIQ67zcVINX/1IxLnS8cZ/2mTu7f7LXmC9evrQ7vrWcCKUBtkT3YHlcBuC063RnjDhl3ykpl3MH+DbccccJx4kj9uiTOU5MUwCEz4o+uAuA/GcLtUdqnMswwrzOhcufOTc49ffpfwuhxhsAl1+OMeBBXbwkpgIdjvMqcAszu/FJowlNrqW/xWj3VP/fJ5V95/4tZyHNBEYirpwRSgFKZ3eg8rgKQIZMrnP5L+8Undnx799wOKL1gI/PBJdXccOfzHO0oAXF03g0Q50kJpACQG7R0FWARAZnFIDKMuso2CUgB2oxbMatNBQh3PivTvlYJeM3jLMC8o5VwKO13anykAKXJNzafqQCWP7FMC0+fP371wexUe+2A2cUaanz7028ma+GI6fCmvrWUAmwl2PjzmxUA/8PM5GxABjvvQ3lE5QIBuC0MKdIlBSiCsd1JiilAiABFCJUgHKd6GgF4po1OHyUFSGfV5cjdFABaVuaiEIw/qgztOpUdMX9D+2LjtrZLAbYSbPx5UwHYGXtlZOq82LEX71Q7Yuvn2rd1vZgdue1SgFxinY03FQB/yfBTZe6p1sX/reVR9ufGSQqwNbKNP5+sAPhJhlGPlUdlfGz9o9v39jeVO36njpcCQGzQMlsBUjnFMnDvnZJqX+3jYvxK2y0FKE20sfncO+LcFvVcOOpbKW9RVYoRWPgWVreCi1FueCJTARr2TaYvE5ACLPMZo9dVADyePQvQqbJ5Al7M9S6g+XjKAREQAREQAREQAREQAREQAREQAREQAREQAREQAREQAREQARGIE/gf/L55SXCo/VEAAAAASUVORK5CYII=",Wp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuYzAyMDRiMiwgMjAyMy8wMi8wOS0wNjoyNjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNi0xNlQwOTo1MzowMCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDYtMTlUMTE6NTQ6NDArMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDYtMTlUMTE6NTQ6NDArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdkYzg1NGYyLTg4OTEtYjk0YS1hNjg3LWUyNjNjZDE3MTE5YyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjlkNGIwOGE0LWUyYjQtODE0Mi04MzVjLTNjOTA2ODllOTQzMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjllNmYxMGEzLTk4NDctNzg0My1hMGUxLWMxN2U3MjE4Mjc5ZCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWU2ZjEwYTMtOTg0Ny03ODQzLWEwZTEtYzE3ZTcyMTgyNzlkIiBzdEV2dDp3aGVuPSIyMDIzLTA2LTE2VDA5OjUzOjAwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjQuNSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdkYzg1NGYyLTg4OTEtYjk0YS1hNjg3LWUyNjNjZDE3MTE5YyIgc3RFdnQ6d2hlbj0iMjAyMy0wNi0xOVQxMTo1NDo0MCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjUgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Priqty0AAAMhSURBVHja7d3LbdRQFAbgdEgDiE7oAApgjcQyVWTFhiIoIBINmAWMkhg8vi/f5xfplyIl8ST3fMrY1+fMPGzb9iDrxiIA8PeTl49Nps6fIgMAwB6AxVkoAAAQBmB7+iQDBwAA0gDsD/Tr2wcZKGcQAAAgDEC1X/j7l6VSGwIAAMQBuLpwqxY+FkIpMAAAUBbA6oUb7SkEAADKALD4Y0IAAAAAVoYAAAAArAwBAADaAtCEEdmwAQAAUwC4He/n40eJyL4OuRAAAKAugKPC//j8Tu7kDEJoHQAAIBrAfwdDUm8L7wHs/9Dnr+/lVY4gpN6cOyp89GQQAOsBeAMhtwFB4fMglKrDP8UFAICiTwH7f0UA1AFwdhJY7RwAgPEBXHIZCMA1AGI3hJrtAwAwCYDULeAUALfvPTp27s+3SgkAqVvCAACQBiD39m8MgNjCjVL4GAhHAHJvDwMAAAAAAABAzyeBAJQDULwfAAAAXAY2vAwEAIB1ABwtRuwxemv3AgCA8QDUvAyUxfcBBAAAAACgy51ADSF9NIQsAcA+QMcAQkEAcA2A2KbQoQC4F9AWwCWjYQDUBXBW+OqzgQCMB6DZaBgAi88GArD4bCAA+YMhzc4BSs4GugxsA8A+gIaQPgDoBxgAgIaQvgFcvhXsZpC7gQAAAMAyADSEAAAAAAZDRtkHAAAA08HGwwEAAAAAAADAS8TM0g8AAAAuAzWENHjPIAAASHpA/QBl+gGaTwYBMD+AoKbQmgDcDOpwMgiA+QFcOhhy+7piv81tXaafDAKgfwBZgyFnAFIujWbOfj2GnQ4GYHwARQp/BmCU7draOVqn7t49HIBFAZw9AAAAADAjgNgHCgUAwv3Cd/PGkQAAkDSOHAtByhYeAADatoQFbEjIneQO5wIAQFsAoZeLkvdSPAAA0DeAXoH0DrX0+gIAQN228N6htP79aq8bAADUfZGo1dJbwQEAoM57BoEyxlMgAADUBQBGXye9AAAQB+BqCFInR3UFAIAwADJnAAAgbDRMpkvcbKAsAkDWjEUAwCIAIAAIAAKAACAACAACgAAg0+c3Tw7u1Z/hXXkAAAAASUVORK5CYII=",Hp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAE30lEQVR4Ae2dQW4TQRBFJxarKBYSYgFZxhIsWMBNuEAukMNwgKxznghYsGBBloFsiMBRlgbZ+E/S5W5mPJ7xdNf/kaJyz0zirv+7Ht1lBFWlLykgBXgVOOBNvc78T/2K8MWEMGel/EgBRgJQV/wj71cvRQCrCNn4CVm+G+neXpxuXNvlwtX9dJcf7+1nTw7nrX6XCNBKJr8P0RMgZW0ulZyaX9N1zL+JBCJAk5LO74sAa4NRMSm/J3fXqVtZXV8cHQfzsXlZIogAgVx8A6Y+QHD+vzw/i7pdSqVHJx+5aIlgHxEBrCJkY+0B1oZ7q3ys46a8RAAoRRppCdBUGSzrQQRgcTqRpxZAQhiWy1oALE4n8mToAwTn/48f3iek4LwsAnD6XmetBVBL4evFuzevq+V305cWQJNCzu/T9gG8+dqm2mM5iwAxVYiuiQCFm9218pG2CAAlSKMIUJjxu1a8TVcEsIqQjT0TwFUHsO/KxzoXAaAEafRMgKItHarirSgigFWEbCwCZGb4viofaYsAUII0igCZGL/vykfaIgCUII0eCVDE+X+sirfrXASwipCNPRIgawtzqXyIJAJACdIoAgxsfG4Vb9MVAawiZGMRYCDDc698pC0CQAnSKAL0bHwplY+0RQAoQRo9EWCUDmBpFW/XuQhgFSEbeyLAXq0rvfIhlggAJUijCNDSeC8Vb9MVAawiZGMRoMFwr5WPtEUAKEEaPRCg1/O/94q361wEsIqQjT0QoBfL2CofookAUII00hOAtfKx3kUAKEEaaQnAXvlY7yIAlCCNWgCkxiNtLQAoQRppF8D8549q+c3+RbsA2I1H/rSngG/ff600mK2VmD57AU2ooghAZfdmsrQEgBTsJBABsBJIo6f/M6iXvxcwe/k0WAql7w0+ffka5GMHIoBVhGxMvwewfmNPgOveTwkiAJwmjSJAg/EgwtvF7+DJg+evgnGpAxGgVOd6mrcI0FLIzzfBIaOaTf59jlD6KUEEaLkAvD4mAnR0FnsDnBLwa0ojgggA50ijp04gLAz+sN73/xaOTmIuJFAnEMtCMaqA9gBRWbpfxN4AfYPc+wXaA3T32sVPigAD2Yi+AfoFeJtc9gaYjwgAJUijCDCw8dgT4G3QN8iFBCIAnCGNHvsAsHLUfgAmkYroF+D+UERQHwAKK0YV0B4gKsvwF3PZG2gPMLzXWb+DCJCJPSDCvk8JIkAmC2CsaYgAYymfeF+QAJ8l4LGhPlMQAaAwaRQBMjUenyVgevhMoe9+gQgAhUmj504gLM26I4hJto3bdhDVCWyrLOlz2gMUZjxOCZj2rn0D7QGgJGmkI8Di6Dhq9eTuOno994sgQte+gQiQu8MDz4+OAAPrOdqvt32D6ub//zIIJioCQAnSyNAHgLVBP+Dy/AzXg1jqXiBIYouBCLCFWB4f1QIwri5PCamTgnnUxVALwIWN3ZOgPQWcHM5Xql3dT6PqgQJe9gTIxyYrAlhFyMa0BIDPbUmA5xFzJ0Oq4jF/RBEASpBGegLAd5AA49TeAPdLjTZPEaBUJ3uaN1MnEJIFHcHbi1Ncj0YvJLCVj2RFAChBGrUHaDAelVMKCTDfhrTq2yJALQXnC/o9AKftD1mLAA9aUL5iJIA1OjgV2JvexyKAd4eVnxSQAlIgqcBff4K6mEVotwsAAAAASUVORK5CYII=",Xp="data:image/png;base64,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",Jp=""+new URL("BuyMenuBar-2f6549f7.png",import.meta.url).href,Kp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAENklEQVR4Ae2crW5VURCFDz99AASGItBNcAh8b0LAVFVhKhB9BRRB8QoIBAaFqgHTGhQJkoQnKCQQEh6ANIC657vJmew9nD17zm1W1erunJmz1+qszPm5dxj0IwbEgBhIY+BKWmUU3t8/+INfu8Gzs5P0/V/ttlsVmmRAAkzS0m8xvAW99nL66lvo7ldPbrnyR9uUOsAlR/tgCdCeU1fGEAuqsZ1oq3Gx8C+4xpoi7Egd4FWqcbwEaEyoN10zC7Jsx2s1F3duevcQGv9gtTOZv5UdqQMm6e23KAH6cT1ZaZYFzbEdy2qu/X43eaJLWFw9PJg8jTl2pA6YpLTfogTox/VkJbcFuW1n99O68MXOozUmWLLt8DyJW9mROoCsJmAJkEA6S1ZZkNt2UCF62jk+vI1qZfjy7Xk5yBkxx47UAU6yW4dLgNaMOvOZFrQttnO0d8O15ddffk3Gt7Imrx2pAybl6LcoAfpxPVnp+uTqfyxGTzs8pRrbuf/8Mw8Z8bO7IwY6Phx/aWVHY0YbqQNsbrr8RQJ0odkusjEFeSefnrbDLXw0bMS0HR4M3CoPUg6831XzNE0dQPYSsARIIJ0lzSnI+zB9G28pey2LxNXgN0+/rsMev9hdYwJ1ANlIwBIggXSWNC2IQcScfCJsp+b28tEez2i7sTogWT8JkCyA24Kiz7fmPo91DjX2xWN73vNhXWJ1ANlIwBIggXSWXJwF1VwcWfdw/PZ1Ti5SsDoghfaxqAQYuUhBi7OgOSzU2Nec/BHHqgMiWHXklAAOsiJCJUAEq46cEsBBVkSoBIhg1ZHzUk1Bjn03DeWD+M1b9PeKddQBRYpiAyRALL/F7BKgSFFsgASI5beYXQIUKYoN0BTUmF9ORMPwo5hdHVCkKDZAAsTyW8xuWhC/wsv7mmKx6iUL4MXX9w/liy9uXx1ANhKwBEggnSVNC2JQK2y9t7OE93O8e9ycdnj0OPlYb0QzWh1ANhKwBEggnSU3PiPGP5ifF3t/wjAXtt7n4afXLTuifVnv/0Q/lLds5+dZ2XasrzVTB7j+hdoHS4D2nLoydp2CrDOjpfAT64xnDNejsWU7vPgaBt/FF89ZHUA2ErAESCCdJc0piEERExHzW9MRY4izph3aDu/5WBdc1uTDvagDyEYClgAJpLNklQXxgGg7Yq1obE04rBthO8yvDiAbCVgCJJDOkm4L4sHbYkdeq+EeW007zEmsDiAbCVgCJJDOkrMsiIla2VGNXbCuF3Oq4bG0Gq7PuchiHgurAyxmOq1LgE5EW2WaWRALWHbEmFM8WbNsx7IL5qnBlr3wWMtqGFNzb4fxNVgdUMNSYIwECCS3JnWIBbFwjR0xnt80yPVWuMZqWCvCdphfHUA2ErAESCCdJcMtiMUs7LUpK493Pdpeas5HHVDDUmCMBAgkV6nFgBgQAwtn4C+2APIbsx2sCgAAAABJRU5ErkJggg==",qp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAC+UlEQVR4Ae2dMU4zQQxGNyiXoOAEVNRpkBIJUXEWToCSG1EhJFJxACpOQMEdKIAuWsmzmo+J7VmiRxUZrz15T47W/5+ExeD0s17f/XiU2u8fFx51lBpzOPOZclBy4gggII6tVBkBEqa4JATEsZUqI0DCFJe0VEordwsv789KqWrORribUu6UlDM/vD1VzyMlHHFmJkAiHJeEgDi2UmUESJjikhAQx1aqjAAJU1wSAuLYSpURIGGKS0JAHFup8kJZWKQl6/NDalhMOr8ohqeCm8ubqV8d4tKZD9nHPXj9+q4W2F7dFnOYgCKWvCAC8lgXOyGgiCUviIA81sVOCChiyQsiII91sRMCiljyggjIY13sJP2PWPHKluAfF66pFplL1tQZvOJMgBfJxjoIaATndRkCvEg21kFAIzivyxDgRbKxjt9dkNMdTuPz+LeXMQGd1SEAAZ0JdG7PBCCgM4HO7ZkABHQm0Lk9E9BZgN8iprwviGXN6GYCDJLcAAJyeZtuCDBIcgMIyOVtuiHAIMkNICCXt+mGAIMkN4CAXN6mm98ixpJl4CoBJkChFJiDgEC4SunlanVdzdtUM4bhlN4uOH66x3z+a1xn6gtGmIAxpQ6PEdAB+rjlcre7r35LofJR1nFRHusEmACdVUgmAkKw6kURoLMKyURACFa9KAJ0ViGZ0r8FneqyFr1kKcaYAIVSYA4CAuEqpaWXIJY1BWVbDhPQxs3tKgS4oWwrhIA2bm5XIcANZVshBLRxc7tKugtSus1tWZvDkqVwYwIUSoE5CAiEq5R2ewliWVNw2xwmwDJJjSAgFbdthgDLJDWCgFTcthkCLJPUiNtdkHJqr2VN+ftfU18XPz7n1NsFxznRj5mAaMKV+gioAIr+depLEMua1ckEWCapEQSk4rbNEGCZpEYQkIrbNkOAZZIaSb0LUp6ZsqxthUJzWLKEYw5MgEIpMAcBgXCV0tXPhylFsnOUz6zxEpRt5Z/24yWoszgEIKAzgc7tmYDOAn4BwyhgclzEETAAAAAASUVORK5CYII=",$p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACy0lEQVR4Ae2ZMWsUQRiGR2N+gIUgxkIsA3Yq6XMg2qSysklh4V8QhEMI+BcsLGysrNIYhLvGKmg6wVIbFRQhPyCEaGb32dv9Mnu7Nzs5hHmv+Wa++WZm933f+WZnzjn9hIAQEAJCQAgIASEgBPJE4ELq197c3Dqpjzl59bNercqjx9eq8mlhOt1N/iyNCVoqF1v82biToQ7zlvHjG1d6gXlvtOrjlq0EKaAXPXOCLPMwvnL0bk4v50b3txrtVjk0nneukAJAelFrma/6r32qivXC/viWrz77eNNbyzjKqfcJlVPniuwVcCmEcowPBleOwr0t87P4Ile09bOjTfYKz78c4r83hu4a2Ssg+jvg5Nsdz4Bl0jJGtrdr3nXkCsZ5/eXQF1++/Y6rYRk/VgnZKyBZDoAWGKF+hvmy4Uzc3i5dvN14/rmwpZddBH8jeEAlewUkywHsz5ZxckQXSfTfufvVh/Zl+teH2z7+6ugg6l2yV8DgHABzMA/jnAUi9nfP6M64qZm+imj26q5JAd0YhSM4pcE8UTBPHUsWp962v0/K3YBdgjr9sMerD8rib1xRVgqIgi3Qabb2A401F2t5o/ShDPy10KUUpYBYmFn7M+bDN0BPHl73U2yvh2dqY/7N0x/hDsb76MVa6TkwLf2qUkA/nOKjOMXtjy/7QVjzjNimANqtJfv/mZL9UYCN7FeXAvrhlC6qi3EYdg6Gi7nxwzxrP/YegDeSAkDif7epmed9pQCQWNRyFng/aV4Ds++T/Rcdl3jWuKv2+aJl6JpnfKwUABKx1p7+ttfZ7wvLqa/tS5B5bZZ3rtjfUzPOfNjsFRB1jwZ6p7b6j9Dc6tZj5pUt86z982aeZ5ICQGKobVMCDNvxyR3c6i6beZ5HCgCJVBYlMF7buR7GiVvWmmc+bPYKAAhZISAEhIAQEAJCQAgIASEgBISAEMgJgb+ynOaZifXwyQAAAA5lWElmTU0AKgAAAAgAAAAAAAAA0lOTAAAAAElFTkSuQmCC",tg="data:image/jpeg;base64,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",eg=""+new URL("bami-impact-849a157e.mp3",import.meta.url).href,ig=""+new URL("lock-1f15d0c4.png",import.meta.url).href,sg=""+new URL("cutscene-2f0603e0.png",import.meta.url).href,$a=new FontFace("VCR",`url(${Qu})`);document.fonts.add($a);$a.load();const D={Logo:new nt(Gu),PausedLogo:new nt(zu),HervatButton:new nt(Nu),Volumeup:new nt(ju),Volumedown:new nt(Uu),Mutebutton:new nt(Fu),Web:new nt(Ou),helpText:new nt(Wu),helpButton:new nt(Hu),ExplosiveWeb:new nt(Yu),GameOver:new nt(Vu),SelectText:new nt(Zu),CutScene:new nt(sg),Whoosh:new qe(Xu),Thud:new qe(Ju),Garden:new nt(wp),Garden1:new nt(bp),Garden2:new nt(yp),Garden3:new nt(xp),Garden4:new nt(Cp),Loading:new nt(qa),Start:new nt(qu),MenuSpider:new nt($u),Pan:new nt(hp),SpicyPan:new nt(lp),TinyLau:new nt(dp),SpiderTrike:new nt(pp),Map1Ground:new nt(Ep),Map2Ground:new nt(Bp),Map3Ground:new nt(Pp),Map3Top:new nt(Sp),SpiderMeneer:new nt(up),Range:new nt(tp),Bami:new nt(ap),aboutaleb:new nt(cp),Map1Top:new nt(Ip),Map2Top:new nt(Mp),ParkMapselect:new nt(Fp),ParkMapSelect2:new nt(Qp),ParkMapSelect3:new nt(Op),RangeIndicator:new nt(np),DamageIndicator:new nt(rp),Laser:new nt(gp),PlayButton:new nt(Yp),SettingsButton:new nt(Vp),UpgradeButton:new nt(Za),EndlessButton:new nt(Xp),UpgradeButtonPath1:new nt(ep),UpgradeButtonPath2:new nt(ip),upgradeLock:new nt(sp),SwearUit:new nt(Np),SwearAan:new nt(jp),levelSelectButtonX:new nt(Up),BuyButton:new nt(Zp),MenuButton:new nt(Wp),SideButton:new nt(Hp),BuyMenu:new nt(Jp),Gulden:new nt(Kp),Health:new nt(qp),TargetingSymbol:new nt(op),CostLogo:new nt($p),background:new nt(tg),Click:new qe(Tp),MenuMusic:new qe(Rp),BackgroundMusic:new qe(Dp),SettingsMusic:new qe(kp),ParkMusic:new qe(zp),Crunch:new qe(Lp),Smash:new qe(Ku),Bamigeluid:new qe(eg),Lock:new nt(ig),Upgrade:new qe(Za),Plop:new qe(Gp),Mouse:new nt(Ap),Spider:new nt(mp),Rat:new nt(fp),Racoon:new nt(vp),Snail:new nt(_p)},tl=[];for(const w in D)tl.push(D[w]);const Ls=new Ja(tl);Ls.logo=qa;Ls.logoWidth=550;Ls.logoHeight=250;Ls.backgroundColor=new ht(239,255,228);Ls.loadingBarColor="#3ca370";Ls.suppressPlayButton=!1;Ls.playButtonText="Speel!";class ng extends H{constructor(d){super({width:50,height:50,color:ht.Red});T(this,"speedX",0);T(this,"speedY",0);T(this,"clicked",!1);T(this,"timer",new Bn({fcn:()=>this.button1Clicked(),repeats:!1,interval:200}));T(this,"game");T(this,"actorsInRadius",[]);T(this,"actorsDistance",[]);T(this,"actorClicked")}onInitialize(d){this.game=d,this._setName("Cursor"),this.z=1e4,document.addEventListener("joystick0up",()=>this.setUp()),document.addEventListener("joystick0down",()=>this.setDown()),document.addEventListener("joystick0left",()=>this.setLeft()),document.addEventListener("joystick0right",()=>this.setRight()),document.addEventListener("joystick0neutral",()=>this.setNeutral()),document.addEventListener("joystick0button0",()=>this.button1Click()),this.game.add(this.timer),console.log(this.game)}onPreUpdate(){this.vel=new A(this.speedX,this.speedY),this.clicked===!1&&(this.color=ht.Red)}button1Click(){console.log("hallo"),this.clicked=!0,this.color=ht.Green,this.timer.start();let d=this.game.currentScene;Object.values(d).forEach(b=>{b instanceof H&&this.actorsDistance.push(b)});for(let b=0;b<this.actorsInRadius.length;b++)if(this.actorsDistance[b].clickable){let R=new A(this.pos.x,this.pos.y),G=new A(this.actorsInRadius[b].other.pos.x,this.actorsInRadius[b].other.pos.y),z=R.distance(G);this.actorsDistance.push(z)}else this.actorsDistance.splice(b,0);let v=Math.min(...this.actorsDistance),x=this.actorsInRadius[this.actorsDistance.indexOf(v,0)];this.actorsDistance=[],this.actorClicked=x}button1Clicked(){this.clicked=!1,this.timer.reset()}setUp(){this.speedY=-400}setDown(){this.speedY=400}setLeft(){this.speedX=-400}setRight(){this.speedX=400}setNeutral(){this.speedX=0,this.speedY=0}onPreKill(d){document.removeEventListener("joystick0up",()=>this.setUp()),document.removeEventListener("joystick0down",()=>this.setDown()),document.removeEventListener("joystick0left",()=>this.setLeft()),document.removeEventListener("joystick0right",()=>this.setRight()),document.removeEventListener("joystick0neutral",()=>this.setNeutral()),document.removeEventListener("joystick0button0",()=>this.buttonToggle()),document.removeEventListener("joystick0button1",()=>this.buttonToggle()),document.removeEventListener("joystick0button2",()=>this.buttonToggle()),document.removeEventListener("joystick0button3",()=>this.buttonToggle()),document.removeEventListener("joystick0button4",()=>this.buttonToggle()),document.removeEventListener("joystick0button5",()=>this.buttonToggle())}}class rg extends Ds{constructor(){super();T(this,"logo");T(this,"spider");T(this,"music",D.MenuMusic);T(this,"click",D.Click);po.useRealisticPhysics()}onActivate(d){this.engine.backgroundColor=new ht(239,255,228),this.music.volume=.3,this.music.loop=!0,this.music.play().then(m=>console.log(m))}onInitialize(d){this.cursor=new ng(this.engine),this.add(this.cursor),this.logo=new H,this.logo.graphics.use(D.Logo.toSprite()),this.logo.pos=new A(720,250),this.logo.scale=new A(.1,.1),this.logo.actions.scaleTo(it(1.1,1.1),it(2,2)),this.logo.z=1e3,this.add(this.logo);const m=new H;m.graphics.use(D.Start.toSprite()),m.pos=new A(720,500),m.scale=new A(.1,.1),m.actions.scaleTo(it(.6,.6),it(2.5,2.5)),m.z=1e3,m.enableCapturePointer=!0,m.pointer.useGraphicsBounds=!0,m.collider.set(Pe.Box(500,200)),m.on("pointerup",b=>this.startGame()),m.on("precollision",b=>this.onCollision(b)),this.add(m);const v=new H;v.graphics.use(D.EndlessButton.toSprite()),v.pos=new A(720,700),v.scale=new A(.1,.1),v.actions.scaleTo(it(.6,.6),it(.5,.5)),v.z=1e3,v.enableCapturePointer=!0,v.pointer.useGraphicsBounds=!0,v.on("pointerup",b=>this.startEndless());const x=new H;x.pos=new A(750,500),x.scale=new A(.75,.75),x.z=1e3,x.enableCapturePointer=!0,x.pointer.useGraphicsBounds=!0,x.on("pointerup",b=>this.startPractise()),this.add(x),this.spider=new H,this.spider.graphics.use(D.MenuSpider.toSprite()),this.spider.pos=new A(100,0),this.spider.scale=new A(1.5,1.5),this.spider.z=1e3,this.add(this.spider)}startHelp(){console.log("start game"),this.click.volume=1,this.click.play(),this.engine.goToScene("Helper")}onCollision(d){d.other.name==="Cursor"&&d.other.clicked===!0&&this.startGame()}onPreUpdate(d,m){this.logo.actions.scaleTo(it(1.2,1.2),it(.05,.05)),this.logo.actions.scaleTo(it(1,1),it(.05,.05)),Math.floor(Math.random()*(2e3-1)+1)===1&&this.spiderPeek(),d.input.keyboard.wasReleased(Vt.Keys.S)&&this.spiderPeek()}startGame(){console.log("start game"),this.click.volume=1,this.click.play(),this.engine.goToScene("cutscene")}startEndless(){console.log("start endless"),this.click.volume=1,this.click.play(),this.engine.endless=!0,this.engine.goToScene("levelselect")}startPractise(){}spiderPeek(){this.spider.actions.moveTo(it(100,100),50).delay(1e3).moveTo(it(100,0),50)}onDeactivate(d){this.music.stop(),this.music.volume=0}}class Ua extends H{constructor(){super({})}onPreUpdate(M,d){this.health<1&&this.kill(),this.vel=new A(Math.cos(this.rotation)*this.projectileSpeed,Math.sin(this.rotation)*this.projectileSpeed),this.projectileTime<0&&this.kill(),this.projectileTime--}}class Kr extends Ua{constructor(d,m,v,x){super({});T(this,"projectileSpeed");T(this,"projectileTime",200);T(this,"damage",1);T(this,"health");T(this,"special");this.projectileSpeed=d,this.damage=m,this.health=x,this.special=v}onInitialize(d){this.graphics.use(D.Bami.toSprite()),this._setName("projectile"),this.collider.set(Pe.Box(10,10)),this.scale=new A(.2,.2),this.special===1&&this.graphics.use(D.SpicyPan.toSprite()),this.special===2&&(this.scale=new A(.4,.4),this.collider.set(Pe.Box(25,25)),this.graphics.use(D.SpicyPan.toSprite()))}}class li extends Ua{constructor(d,m,v,x){super({});T(this,"projectileSpeed");T(this,"projectileTime",25);T(this,"damage",1);T(this,"health");T(this,"special");this.projectileSpeed=d,this.damage=m,this.health=x,this.special=v}onInitialize(d){this.graphics.use(D.Web.toSprite()),this._setName("projectile"),this.collider.set(Pe.Box(5,5)),this.scale=new A(.6,.6),this.special===3&&(this.scale=new A(1.6,1.6)),this.special===4&&(this.graphics.use(D.ExplosiveWeb.toSprite()),this.scale=new A(2,2))}}class ho extends H{constructor(d){super();T(this,"route",[]);T(this,"levels",[0,1]);T(this,"routes",[[",1128.102,1125.141,1118.192,1114.224,1116.268,1114.318,1098.352,1068.398,1030.444,993.468,936.461,867.452,806.444,761.426,723.401,707.352,674.289,641.246,600.217,547.192,490.182,416.197,345.220,305.252,273.289,250.319,231.368,227.417,234.478,248.526,258.560,273.588,275.619,254.643,214.673,189.705,171.731,156.1083".split(","),",1310. 730,1120. 545,1023. 477,924. 463,800. 442,715. 414,704. 348,662. 274,588. 212,511. 189,409. 197,372. 212,372. 256,370. 295,387. 317,436. 321,486. 312,539. 311,585. 346,607. 388,617. 435,605. 493,574. 539,540. 559,455. 576,394. 583,342. 606,290. 630,249. 659,219. 678,188. 699,170. 729,155. 758, 153.1018".split(","),"0. 0,1087. 745,1085. 624,1117. 556,1028. 479,926. 459,817. 444,721. 425,711. 487,680. 563,630. 619,572. 652,511. 661,431. 653,353. 629,321. 612,296. 612,283. 629,262. 647,241. 662,226. 672,203. 685,184. 702,174. 719,163. 746,162. 770,154. 1052".split(",")],["133. 838, 132. 851,141. 394,178. 334,222. 309,280. 312,342. 327,384. 343,447. 370,511. 384,1013. 505,1077. 528,1098. 547,1113. 579,1116. 603,1101. 635,1089. 656,1085. 675,1085. 723,1090. 786,1090. 851,1063. 766,".split(","),"146. 45,146. 45,145. 212,174. 277,214. 301,302. 327,365. 333,414. 354,602. 404,1013. 500,1078. 537,1133. 611,1115. 665,1101. 690,1092. 724,1085. 777,1089. 829,1056. 605,".split(",")],["1005. 519,287. 45,300. 255,328. 447,399. 592,502. 642,689. 687,1218. 686,1254. 653,1276. 613,1287. 212,1256. 169,1202. 158,566. 153,520. 186,501. 226,510. 609,556. 648,649. 666,862. 666,888. 661,906. 641,911. 611,907. 553,892. 474,894. 390,894. 382".split(",")]]);T(this,"enemies",[[D.Spider,4],[D.Mouse,3],[D.Rat,6],[D.Racoon,10],[D.Snail,50]]);T(this,"positionInRoute");T(this,"engine");T(this,"game");T(this,"timeAlive",0);T(this,"particle");T(this,"speed",100);T(this,"health",1);T(this,"type",0);T(this,"deathAnimation");T(this,"damageAnimation");T(this,"nextPath");T(this,"damageOverTime",0);T(this,"damageCooldown",0);T(this,"worth");T(this,"enemyType",0);this.game=d}onInitialize(d){this.engine=d,this.game=d,this.anchor=new A(.5,.5),this.z=100,this._setName("Enemy"),this.on("collisionstart",m=>this.collided(m)),this.setRoute()}setRoute(){this.tempRoute=this.routes[this.game.currentScene.id];let d=0;this.tempRoute[d].forEach(m=>{m=m.split(".");let v=new A(Number(m[0]),Number(m[1]));this.route.push(v)}),this.route[0]=this.route[1],this.move(this.route)}setType(d){this.type=d,this.enemyType=d,this.sprite=this.enemies[d][0].toSprite(),this.graphics.use(this.sprite),this.health=this.enemies[d][1],this.worth=this.health*3,d===0&&(this.body.scale=new A(.25,.25),this.collider.set(Pe.Box(100,100)),this.speed=100),d===1&&(this.body.scale=new A(.5,.5),this.collider.set(Pe.Box(100,50)),this.speed=200),d===2&&(this.body.scale=new A(.6,.6),this.collider.set(Pe.Box(125,60)),this.speed=150),d===3&&(this.body.scale=new A(.5,.5),this.collider.set(Pe.Box(125,60)),this.speed=50),d===4&&(this.body.scale=new A(.25,.25),this.collider.set(Pe.Box(50,50)),this.speed=30)}collided(d){if(d.other!==null){if(d.other.name==="projectile"){if((d.other.special===1||d.other.special===2)&&(this.damageOverTime=1e3),d.other.special===4&&this.type===0){for(let m=0;m<Math.ceil(Math.random()*20);m++){let v=new li(1e3,1,4,1);v.pos=this.pos,v.rotation=Math.random()*6-Math.PI/2,this.engine.add(v)}this.explode()}this.removeBulletHealth(d),this.health-=d.other.damage,this.damageAnimation=50}d.other.name==="curse"&&(this.health-=d.other.damage,this.damageAnimation=50)}}removeBulletHealth(d){let m=d;this.game.currentScene.impactParticleFunction(d.other.pos),m.other.health--,m.other.speed>100&&(m.other.speed=m.other.speed-100)}explode(){this.actions.clearActions(),this.collider.clear(),this.deathAnimation=50,D.Smash.play(.1),this.engine.gulden+=this.worth,this.game.currentScene.enemyKilled(this.pos)}move(d){if(d.length,d!==[]){this.pos=d[0];for(let m=0;m<d.length;m++){let v=m+1,x;d[v]===void 0?x=new A(d[m].x-this.pos.x,d[m].y-this.pos.y):x=new A(d[m].x-d[v].x,d[m].y-d[v].y);let b=Math.sqrt(x.x*x.x+x.y*x.y);x.x<0,b=Math.asin(x.y/b),isNaN(b)||(x.x<0&&(b=Math.abs(b)+Math.PI),x.x<0&&x.y>0&&(b=-Math.abs(b)),this.actions.moveTo(d[m].x,d[m].y,Math.random()*(this.speed+20-(this.speed-20))+(this.speed-20)),this.actions.rotateTo(b,1e3,oo.ShortestPath))}}}onPreUpdate(d,m){if(this.health<0&&this.health>-9999&&(this.explode(),this.health=-1e4),this.damageOverTime>1&&this.damageOverTime--,this.damageOverTime>1&&this.damageCooldown===1&&(this.health--,this.damageAnimation=50),this.damageCooldown>100&&(this.damageCooldown=0),this.damageCooldown++,this.deathAnimation<0&&(this.kill(),this.game.currentScene.activeEnemies-=1,this.game.currentScene.activeEnemyObjects.splice(this.game.currentScene.activeEnemyObjects.indexOf(this)),this.engine.levens<1&&(this.game.currentScene.activeEnemyObjects.forEach(v=>{v.kill()}),this.game.levens=20,this.engine.goToScene("gameover"))),this.deathAnimation>0){this.graphics.opacity=this.deathAnimation/50;let v=this.enemies[this.type][0].toSprite();v.tint=new ht(this.deathAnimation*5,0,0),this.graphics.use(v)}if(this.deathAnimation--,this.damageAnimation>1&&this.health>1){let v=this.enemies[this.type][0].toSprite();v.tint=new ht(250-this.damageAnimation*5,255,255),this.graphics.use(v)}this.damageAnimation>0&&this.damageAnimation--,d.input.keyboard.wasPressed(Vt.Keys.Enter)&&this.move(this.route),d.input.keyboard.wasPressed(Vt.Keys.J),this.timeAlive++}}class qr extends H{constructor(d,m,v,x){super({});T(this,"projectileSpeed");T(this,"projectileTime",1e3);T(this,"damage",1);T(this,"special");T(this,"target");T(this,"colour");this.projectileSpeed=d,this.damage=m,this.special=v,this.target=x}onInitialize(d){let m=[];d.profanityMode===!1?m=["godgodverdommes","pestkankertering","bloedkankerding","pestpleurislijer","godverdom maar op","kankeritus"]:m=["sjongejonge","geestelijk gestoord","kersemus","achterlijk","gezeik met jou","niet goed bij je verstand"],this.colour=ht.White,this.special===1&&(this.colour=ht.Red),this.special===2&&(this.colour=ht.Green);let v=new Ka({text:m[Math.floor(Math.random()*m.length)].toString(),font:new At({unit:ft.Px,family:"VCR",size:20,color:this.colour})});this.graphics.use(v),this._setName("curse"),this.collider.set(Pe.Box(150,20)),this.scale=new A(1,1)}onPreUpdate(d,m){if(console.log(this.target),this.target.other._name!=="Enemy"){let v=new A(this.pos.x,this.pos.y),x=new A(this.target.other.worldPosition.x,this.target.other.worldPosition.y);v.distance(x)<100&&(this.target.other.buff(this.special),this.kill())}this.health<1&&this.kill(),this.vel=new A(Math.cos(this.rotation)*this.projectileSpeed,Math.sin(this.rotation)*this.projectileSpeed),this.projectileTime<0&&this.kill(),this.projectileTime--}}class og extends Ua{constructor(d,m,v,x){super({});T(this,"projectileSpeed");T(this,"projectileTime",25);T(this,"damage",1);T(this,"health");T(this,"special");this.projectileSpeed=d,this.damage=m,this.health=x,this.special=v}onInitialize(d){this.graphics.use(D.Laser.toSprite()),this._setName("projectile"),this.collider.set(Pe.Box(5,5)),this.special===3&&(this.scale=new A(1.6,1.6))}}let $r=[D.Pan,D.TinyLau,D.SpiderMeneer,D.aboutaleb];class ta extends H{constructor(d,m){super({width:50,height:50});T(this,"tier",0);T(this,"tierList",[0,1.1,1.2,2.1,2.2]);T(this,"descriptionList",[]);T(this,"costList",[]);T(this,"type",0);T(this,"shootingCooldown",0);T(this,"amountOfEnemies");T(this,"enemy");T(this,"enemiesInRadiusName",[]);T(this,"enemiesInRadiusTime",[]);T(this,"enemiesDistance",[]);T(this,"coolDown",0);T(this,"damage",1);T(this,"shootingMode",0);T(this,"upgradeButton");T(this,"selected");T(this,"rangeDisplay");T(this,"worldPosition");T(this,"randomizerCooldown",0);T(this,"engine");T(this,"upgrade",D.Upgrade);T(this,"upgradeParticles",new Fe({emitterType:Ue.Rectangle,radius:2,minVel:100,maxVel:200,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Green,endColor:ht.Green,isEmitting:!1}));T(this,"timer",new Bn({fcn:()=>this.removeParticles(),repeats:!1,interval:200}));T(this,"towerRange",0);T(this,"description","");T(this,"game");T(this,"curseCooldown",250);T(this,"damageMultiplier",1);T(this,"seeMouses",!1);T(this,"whoosh",D.Whoosh);T(this,"Bami",D.Bamigeluid);this.type=m,this.game=d}onInitialize(d){this.engine=d,this.rangeDisplay=new H,this.rangeDisplay.graphics.use(D.Range.toSprite()),this.rangeDisplay.pos=new A(0,0),this.type===0&&(this._setName("Pan Bami"),this.description=`Gooit een pan bami
naar ongedierte. 

Het liefst uit het
raam naar beneden.`,this.towerRange=200,this.shootingMode=0,this.descriptionList=["Sneller schieten","Meer schade","Pittige bami","Grotere pan"],this.costList=["145","200","250","550"]),this.type===1&&(this._setName("Tiny & Lau"),this.towerRange=100,this.description=`Scheld naar andere.

Versterkt anderen of
pijnigt de vijand`,this.descriptionList=["Scheld meer","Scheld sneller","Beïnvloed meer","Beïnvloede zien muizen"],this.costList=["300","800","375","1000"]),this.type===2&&(this._setName("Spinnenman"),this.towerRange=300,this.description=`Kookt lekker eten.

Maar schiet ook
webben naar vijanden`,this.shootingMode=3,this.descriptionList=["Schiet 3 webben","Schiet 5 webben","Meer schade","Spinnen ontploffen!"],this.costList=["275","475","400","700"]),this.type===3&&(this._setName("Aboutaleb"),this.towerRange=9999,this.description=`Leuke burgemeester.
Pas op want hij ziet
 alles en iedereen.`,this.shootingMode=3,this.descriptionList=["Meer schade",`Nog meer schade en kan
ongedierte verlammen`,"Schoten kunnen splitsen","Kans op splitsen verhogen"],this.costList=["800","2000","950","1200"]),this.coolDown=100,this.engine=d,this.anchor=new A(.5,.5),this.scale=new A(1,1),this.range=this.towerRange,this.rangeDisplay.scale=new A(this.towerRange/24,this.towerRange/24),this.z=100;const m=Pe.Circle(this.towerRange);this.collider.clear(),this.collider.set(m),this.on("precollision",v=>{(v.other.name==="Enemy"||v.other.name==="Pan Bami"||v.other.name==="Tiny & Lau"||v.other.name==="Spiderman")&&this.collisionHandler(v)}),this.worldPosition=new A(this.pos.x,this.pos.y)}select(){this.selected=!0,this.children<1&&this.addChild(this.rangeDisplay)}deSelect(){this.selected=!1,this.rangeDisplay.unparent(),this.rangeDisplay.kill()}collisionHandler(d){this.type===0&&(this.seeMouses===!0?d.other.name==="Enemy"&&(this.amountOfEnemies++,this.enemiesInRadiusName.push(d),this.enemiesInRadiusTime.push(d.other.timeAlive)):d.other.name==="Enemy"&&d.other.enemyType!==1&&(this.amountOfEnemies++,this.enemiesInRadiusName.push(d),this.enemiesInRadiusTime.push(d.other.timeAlive))),this.type===1&&(d.other.name==="Enemy"||d.other.name==="Pan Bami"||d.other.name==="Spiderman")&&(this.amountOfEnemies++,this.enemiesInRadiusName.push(d)),this.type===2&&d.other.name==="Enemy"&&(this.amountOfEnemies++,this.enemiesInRadiusName.push(d),this.enemiesInRadiusTime.push(d.other.timeAlive))}checkSelf(d){if(this.game.isLegal===!0)this.sprite=$r[d].toSprite(),this.graphics.use($r[d].toSprite());else{let m=$r[d].toSprite();m.tint=new ht(100,0,0),this.sprite=m,this.graphics.use(m)}}onPreUpdate(d,m){if(this.updateMenu(),this.amountOfEnemies>0&&this.onCollision(),this.amountOfEnemies=0,this.type===0||this.type===2){if(this.shootingMode===0){let v=Math.max(...this.enemiesInRadiusTime);this.enemy=this.enemiesInRadiusName[this.enemiesInRadiusTime.indexOf(v,0)]}if(this.shootingMode===1){let v=Math.min(...this.enemiesInRadiusTime);this.enemy=this.enemiesInRadiusName[this.enemiesInRadiusTime.indexOf(v,0)]}if(this.shootingMode===2&&(this.enemy=this.enemiesInRadiusName[Math.floor(Math.random()*Math.length)]),this.shootingMode===3){for(let b=0;b<this.enemiesInRadiusName.length;b++){let R=new A(this.pos.x,this.pos.y),G=new A(this.enemiesInRadiusName[b].other.pos.x,this.enemiesInRadiusName[b].other.pos.y),z=R.distance(G);this.enemiesDistance.push(z)}let v=Math.min(...this.enemiesDistance),x=this.enemiesInRadiusName[this.enemiesDistance.indexOf(v,0)];this.enemiesDistance=[],this.enemy=x}}if(this.type===1&&this.randomizerCooldown===1){let v=[];this.enemiesInRadiusName.forEach(x=>{x.other instanceof ta&&v.push(x)}),v.length>0?this.enemy=v[Math.floor(Math.random()*this.enemiesInRadiusName.length)]:this.enemy=this.enemiesInRadiusName[Math.floor(Math.random()*this.enemiesInRadiusName.length)],v=[],this.actions.clearActions(),this.shootingCooldown=this.coolDown-50}this.enemiesInRadiusName=[],this.enemiesInRadiusTime=[],this.randomizerCooldown>this.curseCooldown&&(this.randomizerCooldown=0),this.randomizerCooldown++,this.buffCooldown>1&&this.buffCooldown--,this.buffCooldown===1&&this.deBuff()}onCollision(){if(this.enemy!==void 0){let d=new A(this.enemy.other.pos.x-this.pos.x,this.enemy.other.pos.y-this.pos.y),m=Math.sqrt(d.x*d.x+d.y*d.y);d.x<0,m=Math.asin(d.y/m),isNaN(m)||(d.x<0&&(m=Math.abs(m)+Math.PI),d.x<0&&d.y>0&&(m=-Math.abs(m)),this.type===0&&this.actions.rotateTo(m+.5*Math.PI,1e3,oo.ShortestPath),this.type===1&&this.actions.rotateTo(m+.5*Math.PI,30,oo.ShortestPath),this.type===2&&this.actions.rotateTo(m+.5*Math.PI,1e3,oo.ShortestPath)),this.inRange()}}updateRange(d){const m=Pe.Circle(d);this.rangeDisplay.scale=new A(d/24,d/24),this.collider.clear(),this.collider.set(m)}fire(){if(this.type===0){if(this.tier===0){this.whoosh.play(.5);let d=new Kr(1e3,this.damage*this.damageMultiplier,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=20}if(this.tier===1.1){this.whoosh.play(.5);let d=new Kr(1700,this.damage*this.damageMultiplier*1.3,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=20}if(this.tier===1.2){this.whoosh.play();let d=new Kr(2e3,this.damage*this.damageMultiplier*1.5,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=15}if(this.tier===2.1){this.whoosh.play();let d=new Kr(1e3,this.damage*this.damageMultiplier,1,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=20}if(this.tier===2.2){this.Bami.play();let d=new Kr(1e3,this.damage*this.damageMultiplier,2,5);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=20,this.engine.shake()}}if(this.type===1){if(this.tier===0&&this.enemy!==void 0){let d=new qr(250,1,0,this.enemy);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=250,this.curseCooldown=200,this.updateRange(100)}if(this.tier===1.1&&this.enemy!==void 0){let d=new qr(300,1,0,this.enemy);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=250,this.curseCooldown=150,this.updateRange(100)}if(this.tier===1.2&&this.enemy!==void 0){let d=new qr(300,1,1,this.enemy);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=250,this.curseCooldown=150,this.updateRange(100)}if(this.tier===2.1&&this.enemy!==void 0){let d=new qr(250,1,0,this.enemy);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=250,this.curseCooldown=200,this.updateRange(300)}if(this.tier===2.2&&this.enemy!==void 0){let d=new qr(250,1,2,this.enemy);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=250,this.curseCooldown=200,this.updateRange(300)}}if(this.type===2){if(this.tier===0){let d=new li(1e3,.75*this.damageMultiplier,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=20}if(this.tier===1.1){let d=new li(1e3,.5*this.damageMultiplier,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d);let m=new li(1e3,.5*this.damageMultiplier,0,1);m.pos=this.pos,m.rotation=this.rotation-1.3,this.engine.add(m);let v=new li(1e3,.5*this.damageMultiplier,0,1);v.pos=this.pos,v.rotation=this.rotation-1.8,this.engine.add(v),this.coolDown=20}if(this.tier===1.2){let d=new li(1e3,.25*this.damageMultiplier,0,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d);let m=new li(1e3,.25*this.damageMultiplier,0,1);m.pos=this.pos,m.rotation=this.rotation-1.3,this.engine.add(m);let v=new li(1e3,.25*this.damageMultiplier,0,1);v.pos=this.pos,v.rotation=this.rotation-1.8,this.engine.add(v);let x=new li(1e3,.25*this.damageMultiplier,0,1);x.pos=this.pos,x.rotation=this.rotation-1.45,this.engine.add(x);let b=new li(1e3,.25*this.damageMultiplier,0,1);b.pos=this.pos,b.rotation=this.rotation-1.65,this.engine.add(b),this.coolDown=20}if(this.tier===2.1){let d=new li(1500,.5*this.damageMultiplier,3,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=15}if(this.tier===2.2){let d=new li(1500,.5*this.damageMultiplier,4,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=15}}}shootLaser(){let d=new og(1500,.5*this.damageMultiplier,4,1);d.pos=this.pos,d.rotation=this.rotation-Math.PI/2,this.engine.add(d),this.coolDown=15}inRange(){this.shootingCooldown===1&&this.fire(),this.shootingCooldown>this.coolDown&&(this.shootingCooldown=0),this.shootingCooldown++}buff(d){let m=$r[this.type].toSprite();m.tint=new ht(0,255,0),this.graphics.use(m),this.buffCooldown=500,d===1&&(this.damageMultiplier=2),d===2&&(this.seeMouses=!0)}deBuff(){this.graphics.use($r[this.type].toSprite()),this.damageMultiplier=1,this.seeMouses=!1}updateMenu(){this.selected===!0&&this.engine.paused===!1&&(console.log(this.tier),this.engine.currentScene.towerRange.text=this.range.toString()+"cm",this.engine.currentScene.towerDamage.text=`${this.damage*this.damageMultiplier}`,this.engine.currentScene.towerTargeting.text=this.shootingMode.toString(),this.engine.currentScene.upgradeButton!==void 0&&(this.tier===0&&(this.engine.currentScene.upgradeButton.graphics.use(D.UpgradeButtonPath1.toSprite()),this.engine.currentScene.upgradeButton2.graphics.use(D.UpgradeButtonPath2.toSprite()),this.engine.currentScene.upgradeDesc1.text=this.descriptionList[0],this.engine.currentScene.upgradeDesc2.text=this.descriptionList[2],this.engine.currentScene.coinDesc1.text=this.costList[0],this.engine.currentScene.coinDesc2.text=this.costList[2],this.engine.currentScene.coin1.graphics.opacity=1,this.engine.currentScene.coin2.graphics.opacity=1),this.tier===1.1&&(this.engine.currentScene.upgradeButton.graphics.use(D.UpgradeButton.toSprite()),this.engine.currentScene.upgradeButton2.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeDesc1.text=this.descriptionList[1],this.engine.currentScene.upgradeDesc2.text="Pad onbruikbaar",this.engine.currentScene.coinDesc1.text=this.costList[1],this.engine.currentScene.coinDesc2.text=" ",this.engine.currentScene.coin1.graphics.opacity=1,this.engine.currentScene.coin2.graphics.opacity=0),this.tier===1.2&&(this.engine.currentScene.upgradeButton.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeButton2.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeDesc1.text="Max Upgrades!",this.engine.currentScene.upgradeDesc2.text="Pad onbruikbaar",this.engine.currentScene.coinDesc1.text=" ",this.engine.currentScene.coinDesc2.text=" ",this.engine.currentScene.coin1.graphics.opacity=0,this.engine.currentScene.coin2.graphics.opacity=0),this.tier===2.1&&(this.engine.currentScene.upgradeButton.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeButton2.graphics.use(D.UpgradeButton.toSprite()),this.engine.currentScene.upgradeDesc1.text="Pad onbruikbaar",this.engine.currentScene.upgradeDesc2.text=this.descriptionList[3],this.engine.currentScene.coinDesc1.text=" ",this.engine.currentScene.coinDesc2.text=this.costList[3],this.engine.currentScene.coin1.graphics.opacity=0,this.engine.currentScene.coin2.graphics.opacity=1),this.tier===2.2&&(this.engine.currentScene.upgradeButton.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeButton2.graphics.use(D.upgradeLock.toSprite()),this.engine.currentScene.upgradeDesc1.text="Pad onbruikbaar",this.engine.currentScene.upgradeDesc2.text="Max upgrades!",this.engine.currentScene.coinDesc1.text=" ",this.engine.currentScene.coinDesc2.text=" ",this.engine.currentScene.coin1.graphics.opacity=0,this.engine.currentScene.coin2.graphics.opacity=0)))}tierUp(d){d===1&&this.tier===1.1&&this.engine.gulden>=Number(this.costList[1])&&(this.engine.gulden-=Number(this.costList[1]),this.tier=1.2,this.tierUpSucces()),d===1&&this.tier===0&&this.engine.gulden>=Number(this.costList[0])&&(this.engine.gulden-=Number(this.costList[0]),this.tier=1.1,this.tierUpSucces()),d===2&&this.tier===2.1&&this.engine.gulden>=Number(this.costList[3])&&(this.engine.gulden-=Number(this.costList[3]),this.tier=2.2,this.tierUpSucces()),d===2&&this.tier===0&&this.engine.gulden>=Number(this.costList[2])&&(this.engine.gulden-=Number(this.costList[2]),this.tier=2.1,this.tierUpSucces())}tierUpSucces(){this.game.add(this.upgradeParticles),this.upgradeParticles.isEmitting=!0,this.upgrade.play(),this.upgradeParticles.pos=this.pos,this.game.add(this.timer),this.timer.start()}removeParticles(){this.upgradeParticles.isEmitting=!1,this.upgradeParticles.kill()}}class hi extends ta{constructor(d){super();T(this,"game");T(this,"range");T(this,"type");T(this,"rangeDisplay");T(this,"itemIds",[D.Pan,D.TinyLau,D.SpiderMeneer,D.aboutaleb]);this.type=d}onInitialize(d){this.game=d,this.scale=new A(1,1),console.log(this.towerRange),this.rangeDisplay=new H,this.rangeDisplay.graphics.use(D.Range.toSprite()),this.rangeDisplay.pos=new A(0,0),this.type===0&&(this.towerRange=200),this.type===1&&(this.towerRange=100),this.type===2&&(this.towerRange=300),this.type===3&&(this.towerRange=300),this.range=this.towerRange,this.rangeDisplay.scale=new A(this.towerRange/24,this.towerRange/24)}checkSelf(d,m){if(m===!0)this.sprite=this.itemIds[d].toSprite(),this.graphics.use(this.itemIds[d].toSprite());else{let v=this.itemIds[d].toSprite();v.tint=new ht(255,0,0),this.sprite=v,this.graphics.use(v)}}}class ea extends H{constructor(M,d,m,v){super(),this._setName("wall"),this.pos=new A(0,0);const x=new Ha({begin:new A(M,d),end:new A(m,v)});this.collider.set(x),this.body.collisionType=ks.Fixed}}class ia extends vt{constructor(){super({pos:new A(140,90),z:99999,font:new At({unit:ft.Px,family:"VCR",size:35,color:ht.White})});T(this,"engine");console.log(this.text)}updateScore(){this.text="Score: 200"}}class sa extends vt{constructor(){super({pos:new A(140,130),z:99999,font:new At({unit:ft.Px,family:"VCR",size:35,color:ht.White})}),console.log(this.text)}}class ag extends H{constructor(){super({});T(this,"rangeIndicator");this.graphics.use(D.BuyMenu.toSprite()),this.scale=new A(3,1),this.pos=new A(1600,450),this.z=99999,this.enableCapturePointer=!0,this.pointer.useGraphicsBounds=!0,this.rangeIndicator=new vt({pos:new A(500,500),z:99999,font:new At({family:"VCR",size:20,color:ht.White,text:"test"})})}}class lg extends Ds{constructor(){super();T(this,"levelselect");T(this,"spider");T(this,"music",D.BackgroundMusic);T(this,"click",D.Click);po.useRealisticPhysics()}onActivate(d){this.engine.backgroundColor=new ht(239,255,228),this.music.volume=.3,this.music.loop=!0,this.music.play().then(m=>console.log(m))}onInitialize(d){this.engine=d,this.helpTextX=new H,this.helpTextX.graphics.use(D.helpText.toSprite()),this.helpTextX.pos=new A(720,210),this.helpTextX.scale=new A(.1,.1),this.helpTextX.actions.scaleTo(it(4.5,4.5),it(10,10)),this.helpTextX.z=1e3,this.add(this.helpTextX),this.backButton=new H,this.backButton.graphics.use(D.UpgradeButton.toSprite()),this.backButton.pos=new A(170,220),this.backButton.rotation=Math.PI*5.5,this.backButton.scale=new A(.1,.1),this.backButton.actions.scaleTo(it(2.5,2.5),it(8,8)),this.backButton.z=1e3,this.backButton.enableCapturePointer=!0,this.backButton.pointer.useGraphicsBounds=!0,this.backButton.on("pointerup",v=>this.engine.goToScene("settings")),this.add(this.backButton);let m=new H;m.graphics.use(D.background.toSprite()),m.scale=new A(5,5),m.pos=new A(745,433),this.add(m),this.buyMenuButton=new H,this.buyMenuButton.graphics.use(D.BuyButton.toSprite()),this.buyMenuButton.pos=new A(170,610),this.buyMenuButton.scale=new A(.7,.7),this.buyMenuButton.z=9999,this.add(this.buyMenuButton),this.settingsButton=new H,this.settingsButton.graphics.use(D.SettingsButton.toSprite()),this.settingsButton.pos=new A(170,510),this.settingsButton.scale=new A(.7,.7),this.settingsButton.z=9999,this.add(this.settingsButton),this.playRoundButton=new H,this.playRoundButton.graphics.use(D.PlayButton.toSprite()),this.playRoundButton.pos=new A(170,710),this.playRoundButton.scale=new A(.7,.7),this.playRoundButton.z=9999,this.playRoundButton.enableCapturePointer=!0,this.playRoundButton.pointer.useGraphicsBounds=!0,this.playRoundButton.on("pointerup",v=>this.startWave()),this.add(this.playRoundButton),this.settingsDesc=new vt({font:new At({unit:ft.Px,family:"VCR",size:28})}),this.settingsDesc.pos=new A(220,500),this.settingsDesc.actions.moveTo(220,500,1600),this.settingsDesc.text=`Brengt je naar de instellingen, hier kan je het geluid dempen, van level
veranderen of terug naar het spel.`,this.settingsDesc.z=99999,this.add(this.settingsDesc),this.buyMenuDesc=new vt({font:new At({unit:ft.Px,family:"VCR",size:28})}),this.buyMenuDesc.pos=new A(220,605),this.buyMenuDesc.actions.moveTo(220,605,1600),this.buyMenuDesc.text="Met deze knop kan je de winkel openen of sluiten",this.buyMenuDesc.z=99999,this.add(this.buyMenuDesc),this.playbuttonDesc=new vt({font:new At({unit:ft.Px,family:"VCR",size:28})}),this.playbuttonDesc.pos=new A(220,705),this.playbuttonDesc.actions.moveTo(220,705,1600),this.playbuttonDesc.text="Met deze knop begin je de (volgende) ronde",this.playbuttonDesc.z=99999,this.add(this.playbuttonDesc)}onPreUpdate(d,m){Math.floor(Math.random()*(2e3-1)+1)===1&&this.spiderPeek(),d.input.keyboard.wasReleased(Vt.Keys.S)&&this.spiderPeek()}spiderPeek(){this.spider.actions.moveTo(it(100,100),50).delay(1e3).moveTo(it(100,0),50)}onDeactivate(d){this.music.stop(),this.music.volume=0}}class hg extends Ds{constructor(){super();T(this,"logo");T(this,"spider");T(this,"music",D.SettingsMusic);T(this,"click",D.Click);T(this,"mapId");T(this,"musicVolume");console.log("I am settings!")}onInitialize(d){this.engine=d,this.engine.paused=!0,this.logo=new H,this.logo.graphics.use(D.PausedLogo.toSprite()),this.logo.pos=new A(720,250),this.logo.scale=new A(1.1,1.1),this.logo.z=1e3,this.add(this.logo),this.music.volume=.3,this.music.loop=!0,this.music.play().then(m=>console.log(m)),this.resumeButton=new H,this.resumeButton.graphics.use(D.HervatButton.toSprite()),this.resumeButton.pos=new A(720,400),this.resumeButton.scale=new A(.1,.1),this.resumeButton.z=1e3,this.resumeButton.enableCapturePointer=!0,this.resumeButton.pointer.useGraphicsBounds=!0,this.resumeButton.on("pointerup",m=>this.resumeGame()),this.add(this.resumeButton),this.soundButton=new H,this.soundButton.graphics.use(D.Mutebutton.toSprite()),this.soundButton.pos=new A(648,640),this.soundButton.scale=new A(.1,.1),this.soundButton.z=1e3,this.soundButton.enableCapturePointer=!0,this.soundButton.pointer.useGraphicsBounds=!0,this.soundButton.on("pointerup",m=>this.muteSound()),this.add(this.soundButton),this.profanityFilter=new H,this.profanityFilter.graphics.use(D.SwearAan.toSprite()),this.profanityFilter.pos=new A(794,639.5),this.profanityFilter.scale=new A(.1,.1),this.profanityFilter.actions.scaleTo(it(1.1,1.1),it(8,8)),this.profanityFilter.z=1e3,this.profanityFilter.collider.useCircleCollider(50),this.profanityFilter.enableCapturePointer=!0,this.profanityFilter.pointer.useGraphicsBounds=!0,this.profanityFilter.on("pointerup",m=>this.toggleProfanityFilter()),this.add(this.profanityFilter),this.levelSelectButton=new H,this.levelSelectButton.graphics.use(D.levelSelectButtonX.toSprite()),this.levelSelectButton.pos=new A(720,520),this.levelSelectButton.scale=new A(.1,.1),this.levelSelectButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.levelSelectButton.z=1e3,this.levelSelectButton.enableCapturePointer=!0,this.levelSelectButton.pointer.useGraphicsBounds=!0,this.levelSelectButton.on("pointerup",m=>this.engine.goToScene("levelselect")),this.add(this.levelSelectButton),this.helpSelect=new H,this.helpSelect.graphics.use(D.helpButton.toSprite()),this.helpSelect.pos=new A(720,760),this.helpSelect.scale=new A(.1,.1),this.helpSelect.actions.scaleTo(it(1.1,1.1),it(8,8)),this.helpSelect.z=1e3,this.helpSelect.enableCapturePointer=!0,this.helpSelect.pointer.useGraphicsBounds=!0,this.helpSelect.on("pointerup",m=>this.startHelp()),this.add(this.helpSelect)}onActivate(d){this.mapId=d.id,this.resumeButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.soundButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.levelSelectButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.profanityFilter.actions.scaleTo(it(1.1,1.1),it(8,8)),this.music.volume===0?this.music.pause():(this.music.loop=!0,this.music.play().then(m=>console.log(m)))}muteSound(){this.click.play(),this.engine.musicVolume===0?(this.music.volume=.5,this.music.loop=!0,this.music.play().then(d=>console.log(d)),this.engine.musicVolume=.5):(this.music.volume=0,this.music.pause(),this.engine.musicVolume=0)}raiseVolume(){this.buttonAnimatior(this.volumeUpButton),this.click.play(),this.engine.musicVolume<1&&(this.engine.musicVolume+=.1,this.music.volume+=.1)}startHelp(){console.log("start game"),this.click.volume=1,this.click.play(),this.engine.goToScene("Helper")}lowerVolume(){this.click.play(),this.engine.musicVolume>0&&(this.engine.musicVolume-=.1,this.music.volume-=.1)}resumeGame(){this.click.play(),this.music.pause(),console.log("start game"),this.engine.activeScene===1&&this.engine.goToScene("level1"),this.engine.activeScene===2&&this.engine.goToScene("level2"),this.engine.activeScene===3&&this.engine.goToScene("level3")}toggleProfanityFilter(){this.engine.profanityMode=this.engine.profanityMode===!1,this.engine.profanityMode===!1&&this.profanityFilter.graphics.use(D.SwearUit.toSprite()),this.engine.profanityMode===!0&&this.profanityFilter.graphics.use(D.SwearAan.toSprite())}onPreUpdate(d,m){d.input.keyboard.wasPressed(Vt.Keys.Esc||Vt.Keys.Escape)&&this.resumeGame()}onActivate(){this.engine.paused=!0}onDeactivate(d){this.engine.paused=!1,this.resumeButton.scale=new A(.1,.1),this.soundButton.scale=new A(.1,.1),this.profanityFilter.scale=new A(.1,.1),this.levelSelectButton.scale=new A(.1,.1),this.resumeButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.soundButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.profanityFilter.actions.scaleTo(it(1.1,1.1),it(8,8)),this.levelSelectButton.actions.scaleTo(it(1.1,1.1),it(8,8)),this.music.pause()}}class Fa extends Ds{constructor(){super();T(this,"upgradeButton");T(this,"particleEmitting",!1);T(this,"placing",!1);T(this,"placingSprite");T(this,"int",0);T(this,"activetower",this.activetower);T(this,"path","");T(this,"engine");T(this,"id",0);T(this,"route",[]);T(this,"towers",[]);T(this,"crunch",D.Crunch);T(this,"timer",new Bn({fcn:()=>this.removeParticles(),repeats:!1,interval:200}));T(this,"deathParticles",new Fe({emitterType:Ue.Rectangle,radius:10,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:600,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.fromRGB(139,69,19),isEmitting:!1}));T(this,"upgradeParticles",new Fe({emitterType:Ue.Rectangle,radius:2,minVel:100,maxVel:200,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Green,endColor:ht.Green,isEmitting:!1}));T(this,"impactParticle",new Fe({emitterType:Ue.Rectangle,radius:1,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:50,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.Red,isEmitting:!1}));T(this,"towersInDistance",[]);T(this,"mapping",!1);T(this,"running",!1);T(this,"wavetext");T(this,"levels",[]);T(this,"wave",0);T(this,"waveItem",0);T(this,"activeWave");T(this,"waveText");T(this,"impactParticleCounter",0);T(this,"order",[]);T(this,"walls",[]);T(this,"nearestTowerName");T(this,"garden",new H({width:100,height:100}));T(this,"gardenSprites",[D.Garden,D.Garden4,D.Garden3,D.Garden2,D.Garden1,D.Garden1]);T(this,"music",D.ParkMusic);T(this,"plop",D.Plop);T(this,"click",D.Click);T(this,"spiderSpawner",0);T(this,"isLegal",!0);T(this,"endlessMode",!1);T(this,"activeEnemies",0);T(this,"nameLabel");T(this,"settingsButton");T(this,"buyMenuClick",0);T(this,"upgradeMenuClicked",0);T(this,"menuOpened",0);T(this,"particleCounter",0);T(this,"id",0);T(this,"b")}onActivate(d){this.activetower=void 0,this.engine.backgroundColor=new ht(239,255,228),this.music.volume=this.engine.musicVolume,this.music.volume===0?this.music.pause():(this.music.loop=!0,this.music.play().then(m=>console.log(m)))}onDeactivate(d){super.onDeactivate(d),this.music.pause()}onInitialize(d){this.endlessMode=this.engine.endless,this.game=d,this.waveText=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.waveText.text=`${localStorage.getItem("0")}/${this.levels.length}`,this.waveText.pos=new A(20,350),this.waveText.z=99999,this.game.currentScene.add(this.waveText),this.buyMenu=new H,this.buyMenu.graphics.use(D.BuyMenu.toSprite()),this.buyMenu.pos=new A(1400,450),this.buyMenu.scale=new A(3,1),this.buyMenu.z=9999,this.buyMenu.enableCapturePointer=!0,this.buyMenu.pointer.useGraphicsBounds=!0,this.guldenLogo=new H,this.guldenLogo.graphics.use(D.Gulden.toSprite()),this.guldenLogo.scale=new A(.4,.4),this.guldenLogo.pos=new A(120,80),this.guldenLogo.z=99999,this.add(this.guldenLogo),this.guldenDisplay=new ia,this.add(this.guldenDisplay),this.levensLogo=new H,this.levensLogo.graphics.use(D.Health.toSprite()),this.levensLogo.scale=new A(.4,.4),this.levensLogo.pos=new A(120,120),this.levensLogo.z=99999,this.add(this.levensLogo),this.levensDisplay=new sa,this.add(this.levensDisplay),this.placingSprite=new hi,this.engine.input.pointers.primary.on("up",()=>this.mouseInput()),this.engine=d;let m=[1103,45,1094,188,1083,321,1066,361,994,454,913,440,787,409,736,404,714,324,656,229,592,192,515,166,458,162,394,179,302,220,214,347,210,501,232,557,263,617,216,646,175,680,130,796,186,808,204,743,241,700,302,643,322,596,272,515,271,373,315,313,357,264,421,237,526,237,594,268,646,328,677,368,684,447,571,449,537,377,474,345,414,371,375,435,399,504,469,547,543,514,579,458,534,372,582,449,480,547,325,590,399,617,488,628,602,591,663,527,679,466,676,386,633,321,541,252,459,247,351,279,296,348,271,430,283,522,321,580,306,646,357,674,418,701,556,710,634,672,702,608,739,518,743,473,866,484,1009,500,1079,552,1079,591,1075,708,1067,803,1120,805,1121,734,1116,605,1321,814,1410,809,1050,465,1093,427,1126,369,1145,333,1148,192,1152,47];for(let b=0;b<m.length;b+=2){let R=0,G=0,z=new ea(m[b]+R,m[b+1]+G,m[b+2]+R,m[b+3]+G);z.on("precollision",Q=>{Q.other instanceof hi&&(this.isLegal=!1)}),z.on("collisionend",Q=>{Q.other instanceof hi&&(this.isLegal=!0)}),this.walls.push(z)}this.garden.sprite=D.Garden.toSprite(),this.garden.graphics.use(this.garden.sprite),this.add(this.garden),this.garden.z=9999,this.garden.pos=new A(157,807),this.garden.collisionType=ks.Passive,this.garden.on("collisionstart",b=>{b.other instanceof ho&&(this.engine.damage(),this.crunch.play(),this.garden.graphics.use(this.gardenSprites[Math.ceil(this.engine.levens/4)].toSprite()),b.other.explode())});let v=new H;v.graphics.use(D.Map1Ground.toSprite()),v.scale=new A(5.5,5.5),v.pos=new A(745,473),this.add(v);let x=new H;x.graphics.use(D.Map1Top.toSprite()),x.scale=new A(5.5,5.5),x.pos=new A(745,425),x.z=9999,this.add(x),this.settingsButton=new H,this.settingsButton.graphics.use(D.SettingsButton.toSprite()),this.settingsButton.pos=new A(50,105),this.settingsButton.scale=new A(.7,.7),this.settingsButton.z=9999,this.settingsButton.enableCapturePointer=!0,this.settingsButton.pointer.useGraphicsBounds=!0,this.settingsButton.on("pointerup",b=>this.goToSettings()),this.add(this.settingsButton),this.buyMenuButton=new H,this.buyMenuButton.graphics.use(D.BuyButton.toSprite()),this.buyMenuButton.pos=new A(50,195),this.buyMenuButton.scale=new A(.7,.7),this.buyMenuButton.z=9999,this.buyMenuButton.enableCapturePointer=!0,this.buyMenuButton.pointer.useGraphicsBounds=!0,this.buyMenuButton.on("pointerup",b=>this.drawBuyMenu()),this.add(this.buyMenuButton),this.enemies(),this.koopLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.koopLabel.text="Koop:",this.koopLabel.pos=new A(1350,150),this.koopLabel.z=99999,this.bamiLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamiLabel.text="Pan bami",this.bamiLabel.pos=new A(1350,150),this.bamiLabel.z=99999,this.bamiButton=new H,this.button(this.bamiButton,D.Pan,new A(1350,200),new A(1.5,1.5)),this.bamiButton.on("pointerdown",b=>this.buyTower(1)),this.costlogobami=new H,this.costLogo(this.costlogobami,new A(1350,250)),this.bamicost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamicost.text="200",this.bamicost.pos=new A(1370,250),this.bamicost.z=99999,this.tinyLauLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinyLauLabel.text="Tiny en Lau",this.tinyLauLabel.pos=new A(1350,300),this.tinyLauLabel.z=99999,this.tinyLauButton=new H,this.button(this.tinyLauButton,D.TinyLau,new A(1350,350),new A(2,2)),this.tinyLauButton.on("pointerdown",b=>this.buyTower(2)),this.costlogotiny=new H,this.costLogo(this.costlogotiny,new A(1350,400)),this.tinycost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinycost.text="300",this.tinycost.pos=new A(1370,400),this.tinycost.z=99999,this.spiderTrikeLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spiderTrikeLabel.text="Spinnenman",this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.z=99999,this.spiderTrikeButton=new H,this.button(this.spiderTrikeButton,D.SpiderMeneer,new A(1350,500),new A(1.5,1.5)),this.spiderTrikeButton.on("pointerdown",b=>this.buyTower(3)),this.enemies(),this.costlogospider=new H,this.costLogo(this.costlogospider,new A(1350,550)),this.spidercost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spidercost.text="650",this.spidercost.pos=new A(1370,550),this.spidercost.z=99999,this.activeWave=new H,this.button(this.activeWave,D.TinyLau,new A(130,350),new A(2,2)),this.activeWave.on("pointerdown",b=>this.startWave())}button(d,m,v,x){d.graphics.use(m.toSprite()),d.pos=v,d.scale=x,d.z=99999,d.enableCapturePointer=!0,d.pointer.useGraphicsBounds=!0}costLogo(d,m){d.graphics.use(D.CostLogo.toSprite()),d.pos=m,d.z=99999,d.scale=new A(.75,.75)}enemies(){this.endlessMode&&(this.levels=[`${Math.round(Math.random()*(10-1)+1)}*${Math.round(Math.random()*(4-0)+0)}`]),this.parse(0)}enemyKilled(d){this.deathParticles.isEmitting=!0,this.deathParticles.pos=d,this.add(this.deathParticles),this.particleCounter=0,this.particleEmitting=!0,console.log("eeee")}impactParticleFunction(d){this.impactParticle.isEmitting=!0,this.impactParticle.pos=d,this.add(this.impactParticle),this.impactParticleCounter=0,console.log("eeee")}parse(d){this.endlessMode===!1?(this.order=[],this.levels[d].split(",").forEach(v=>{v=v.split("*");for(let x=0;x<Number(v[0]);x++)this.order.push(Number(v[1]))})):(this.order=[],console.log(this.levels),this.levels[Math.random()*this.levels.length].split(",").forEach(v=>{v=v.split("*");for(let x=0;x<Number(v[0]);x++)this.order.push(Number(v[1]))}))}drawBuyMenu(){this.buyMenuClick++,this.buyMenuClick===1&&(this.buyMenu.pos=new A(1500,450),this.buyMenu.actions.moveTo(1400,450,1100),this.add(this.buyMenu),this.koopLabel.pos=new A(1500,100),this.koopLabel.actions.moveTo(1300,100,1100),this.add(this.koopLabel),this.bamiLabel.pos=new A(1500,150),this.bamiLabel.actions.moveTo(1310,150,1300),this.add(this.bamiLabel),this.bamiButton.pos=new A(1500,180),this.bamiButton.actions.moveTo(1350,180,1300),this.add(this.bamiButton),this.costlogobami.pos=new A(1500,200),this.costlogobami.actions.moveTo(1300,230,1300),this.add(this.costlogobami),this.bamicost.pos=new A(1500,230),this.bamicost.actions.moveTo(1330,230,1300),this.add(this.bamicost),this.tinyLauLabel.pos=new A(1500,270),this.tinyLauLabel.actions.moveTo(1295,270,1300),this.add(this.tinyLauLabel),this.tinyLauButton.pos=new A(1500,300),this.tinyLauButton.actions.moveTo(1350,300,1300),this.add(this.tinyLauButton),this.costlogotiny.pos=new A(1500,350),this.costlogotiny.actions.moveTo(1300,350,1300),this.add(this.costlogotiny),this.tinycost.pos=new A(1500,380),this.tinycost.actions.moveTo(1330,350,1300),this.add(this.tinycost),this.spiderTrikeLabel.pos=new A(1500,380),this.spiderTrikeLabel.actions.moveTo(1300,390,1300),this.add(this.spiderTrikeLabel),this.spiderTrikeButton.pos=new A(1500,430),this.spiderTrikeButton.actions.moveTo(1350,440,1300),this.add(this.spiderTrikeButton),this.costlogospider.pos=new A(1500,480),this.costlogospider.actions.moveTo(1300,490,1300),this.add(this.costlogospider),this.spidercost.pos=new A(1500,510),this.spidercost.actions.moveTo(1330,490,1300),this.add(this.spidercost)),this.buyMenuClick===2&&(this.buyMenu.kill(),this.koopLabel.pos=new A(1350,50),this.koopLabel.kill(),this.bamiLabel.pos=new A(1350,150),this.bamiLabel.kill(),this.bamiButton.pos=new A(1350,450),this.bamiButton.kill(),this.costlogobami.pos=new A(1350,250),this.costlogobami.kill(),this.bamicost.pos=new A(1350,250),this.bamicost.kill(),this.tinyLauLabel.pos=new A(1350,250),this.tinyLauLabel.kill(),this.tinyLauButton.pos=new A(1350,350),this.tinyLauButton.kill(),this.costlogotiny.pos=new A(1350,350),this.costlogotiny.kill(),this.tinycost.pos=new A(1350,350),this.tinycost.kill(),this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.kill(),this.spiderTrikeButton.pos=new A(1350,250),this.spiderTrikeButton.kill(),this.costlogospider.pos=new A(1350,350),this.costlogospider.kill(),this.spidercost.pos=new A(1350,350),this.spidercost.kill(),this.buyMenuClick=0)}goToSettings(){console.log("goToSettings"),this.click.play(),this.game=this.engine,this.engine.goToScene("settings")}mouseInput(){if(!this.placing){for(let m=0;m<this.towers.length;m++){let v=new A(this.engine.input.pointers.primary.lastWorldPos.x,this.engine.input.pointers.primary.lastWorldPos.y),x=new A(this.towers[m].worldPosition.x,this.towers[m].worldPosition.y),b=v.distance(x);this.towersInDistance.push(b)}let d=Math.min(...this.towersInDistance);this.nearestTowerName=this.towers[this.towersInDistance.indexOf(d,0)],d<100?(this.towers.forEach(m=>{m.deSelect()}),this.activetower=this.nearestTowerName,this.activetower.select(),this.menuInfo()):(this.upgradeMenu&&this.uiRemover(),this.towers.forEach(m=>{m.deSelect()})),this.towersInDistance=[]}if(this.placing&&this.isLegal){let d=new ta(this,this.int);d.pos=this.placingSprite.pos,this.add(d),this.towers.push(d),this.add(this.upgradeParticles),this.upgradeParticles.isEmitting=!0,this.upgradeParticles.pos=d.pos,this.add(this.timer),this.timer.start(),d.checkSelf(this.int),this.activetower=d,this.placing=!1,this.placingSprite.kill(),this.drawBuyMenu(),this.plop.play()}else if(this.mapping){let d=this.engine.input.pointers.primary.lastWorldPos;this.path+=`,${Math.floor(d.x).toString()}.${Math.floor(d.y).toString()}`,localStorage.setItem("this.path",this.path)}}uiRemover(){this.upgradeMenuClicked=0,this.upgradeMenu.kill(),this.towerName.kill(),this.towerRange.kill(),this.rangeIndicator.kill(),this.damageIndicator.kill(),this.towerDamage.kill(),this.towerDesc.kill(),this.upgradeText.kill(),this.towerTargeting.kill(),this.towerTargetIndicator.kill(),this.upgradeDesc1.kill(),this.upgradeDesc2.kill(),this.upgradeButton.kill(),this.upgradeButton2.kill(),this.coin1.kill(),this.coin2.kill(),this.coinDesc1.kill(),this.coinDesc2.kill()}removeParticles(){this.upgradeParticles.isEmitting=!1,this.upgradeParticles.kill()}menuInfo(){this.buyMenuClick=1,this.drawBuyMenu(),this.upgradeMenu&&this.uiRemover(),this.upgradeMenuClicked=1,this.upgradeMenu=new ag,this.pos=new A(1600,450),this.upgradeMenu.actions.moveTo(1400,450,1600),this.add(this.upgradeMenu),this.buyMenuClick=0,this.towerName=new vt({font:new At({unit:ft.Px,family:"VCR",size:28})}),this.towerName.pos=new A(1350,85),this.towerName.actions.moveTo(1260,85,1600),this.towerName.text=this.activetower.name.toString(),this.towerName.z=99999,this.add(this.towerName),this.towerDesc=new vt({font:new At({unit:ft.Px,family:"VCR",size:14,color:ht.White})}),this.towerDesc.pos=new A(1350,105),this.towerDesc.actions.moveTo(1260,105,1600),this.towerDesc.text=this.activetower.description.toString(),this.towerDesc.z=99999,this.add(this.towerDesc),this.towerRange=new vt({font:new At({unit:ft.Px,family:"VCR",size:36})}),this.towerRange.pos=new A(1500,220),this.towerRange.actions.moveTo(1330,220,1650),this.towerRange.z=99999,this.add(this.towerRange),this.rangeIndicator=new H,this.rangeIndicator.graphics.use(D.RangeIndicator.toSprite()),this.rangeIndicator.pos=new A(1500,210),this.rangeIndicator.actions.moveTo(1295,210,1600),this.rangeIndicator.scale=new A(1,1),this.rangeIndicator.z=999999,this.add(this.rangeIndicator),this.towerDamage=new vt({font:new At({unit:ft.Px,family:"VCR",size:36})}),this.towerDamage.pos=new A(1500,295),this.towerDamage.actions.moveTo(1330,295,1650),this.towerDamage.z=99999,this.add(this.towerDamage),this.damageIndicator=new H,this.damageIndicator.graphics.use(D.DamageIndicator.toSprite()),this.damageIndicator.pos=new A(1500,280),this.damageIndicator.actions.moveTo(1295,280,1600),this.damageIndicator.scale=new A(1,1),this.damageIndicator.z=999999,this.add(this.damageIndicator),this.towerTargeting=new vt({font:new At({unit:ft.Px,family:"VCR",size:36})}),this.towerTargetIndicator=new H,this.towerTargetIndicator.graphics.use(D.TargetingSymbol.toSprite()),this.towerTargetIndicator.pos=new A(1500,355),this.towerTargetIndicator.actions.moveTo(1295,355,1600),this.towerTargetIndicator.scale=new A(1,1),this.towerTargetIndicator.z=999999,this.add(this.towerTargetIndicator),this.towerTargeting.pos=new A(1500,365),this.towerTargeting.actions.moveTo(1330,365,1650),this.towerTargeting.z=99999,this.add(this.towerTargeting),this.upgradeText=new vt({font:new At({unit:ft.Px,family:"VCR",size:32})}),this.upgradeText.pos=new A(1350,500),this.upgradeText.actions.moveTo(1260,500,1600),this.upgradeText.text="Upgrades",this.upgradeText.z=99999,this.add(this.upgradeText),this.upgradeDesc1=new vt({font:new At({unit:ft.Px,family:"VCR",size:14,color:ht.White,textAlign:so.Center})}),this.upgradeDesc1.pos=new A(1500,540),this.upgradeDesc1.actions.moveTo(1335,540,1600),this.upgradeDesc1.z=99999,this.add(this.upgradeDesc1),this.coin1=new H,this.coin1.graphics.use(D.Gulden.toSprite()),this.coin1.scale=new A(.2,.2),this.coin1.pos=new A(1500,555),this.coin1.actions.moveTo(1305,555,1600),this.coin1.z=99999,this.add(this.coin1),this.coinDesc1=new vt({font:new At({unit:ft.Px,family:"VCR",size:14,color:ht.White,textAlign:so.Right})}),this.coinDesc1.pos=new A(1500,558),this.coinDesc1.actions.moveTo(1345,558,1600),this.coinDesc1.z=99999,this.add(this.coinDesc1),this.upgradeDesc2=new vt({font:new At({unit:ft.Px,family:"VCR",size:14,color:ht.White,textAlign:so.Center})}),this.upgradeDesc2.pos=new A(1500,690),this.upgradeDesc2.actions.moveTo(1335,690,1600),this.upgradeDesc2.z=99999,this.add(this.upgradeDesc2),this.coin2=new H,this.coin2.graphics.use(D.Gulden.toSprite()),this.coin2.scale=new A(.2,.2),this.coin2.pos=new A(1500,705),this.coin2.actions.moveTo(1305,705,1600),this.coin2.z=99999,this.add(this.coin2),this.coinDesc2=new vt({font:new At({unit:ft.Px,family:"VCR",size:14,color:ht.White,textAlign:so.Right})}),this.coinDesc2.pos=new A(1500,708),this.coinDesc2.actions.moveTo(1345,708,1600),this.coinDesc2.z=99999,this.add(this.coinDesc2),this.upgradeButton=new H,this.upgradeButton.pos=new A(1500,600),this.upgradeButton.actions.moveTo(1340,600,1600),this.upgradeButton.scale=new A(1.7,1.7),this.upgradeButton.z=999999,this.upgradeButton.enableCapturePointer=!0,this.upgradeButton.pointer.useGraphicsBounds=!0,this.upgradeButton.on("pointerdown",d=>this.activetower.tierUp(1)),this.upgradeButton2=new H,this.upgradeButton2.pos=new A(1500,750),this.upgradeButton2.actions.moveTo(1340,750,1600),this.upgradeButton2.scale=new A(1.7,1.7),this.upgradeButton2.z=999999,this.upgradeButton2.enableCapturePointer=!0,this.upgradeButton2.pointer.useGraphicsBounds=!0,this.upgradeButton2.on("pointerdown",d=>this.activetower.tierUp(2)),this.add(this.upgradeButton),this.add(this.upgradeButton2)}startWave(){this.activeEnemies===0&&this.endlessMode===!1?(this.wave=Number(localStorage.getItem(`${this.engine.currentScene.id}`)),this.wave<this.engine.currentScene.levels.length&&(this.engine.gulden+=this.wave*100,this.engine.currentScene.guldenDisplay.text=`${this.engine.gulden}`,this.waveItem=0,this.parse(Number(localStorage.getItem(`${this.engine.currentScene.id}`))),this.running=!0,this.wave+=1,console.log(this.wave),localStorage.setItem(`${this.engine.currentScene.id}`,`${this.wave}`),this.engine.currentScene.waveText.text=`${localStorage.getItem(`${this.engine.currentScene.id}`)}/${this.engine.currentScene.levels.length}`)):this.endlessMode===!0?this.running=!0:console.log("Already Running")}buyTower(d){if(d===1&&this.engine.gulden>=200&&(this.engine.gulden-=200),d===2&&this.engine.gulden>=300&&(this.engine.gulden-=300),d===3&&this.engine.gulden>=650&&(this.engine.gulden-=650),d===1&&(this.int=0),d===2&&(this.int=1),d===3&&(this.int=2),this.placing=!this.placing,this.drawBuyMenu(),this.placing){this.walls.forEach(v=>{this.add(v)});const m=Pe.Circle(50);this.placingSprite.collider.set(m),this.placingSprite.collisionType=ks.Passive,this.placingSprite._setName("this.placingSprite"),this.add(this.placingSprite)}else this.walls.forEach(m=>{m.kill()}),this.placingSprite.kill()}onPreUpdate(d,m){if(this.guldenDisplay.text=`${this.engine.gulden}`,this.levensDisplay.text=`${this.engine.levens}`,this.deathParticles.isEmitting&&(this.particleCounter>20&&(this.particleCounter=0,this.deathParticles.isEmitting=!1,this.deathParticles.kill()),this.particleCounter++),this.impactParticle.isEmitting&&(this.impactParticleCounter>5&&(this.impactParticleCounter=0,this.impactParticle.isEmitting=!1,this.impactParticle.kill()),this.impactParticleCounter++),d.input.keyboard.isHeld(Vt.Keys.R)&&this.activetower.type===3&&this.activetower.shootLaser(),d.input.keyboard.wasPressed(Vt.Keys.Esc||Vt.Keys.Escape)&&this.goToSettings(),this.placingSprite.checkSelf(this.int,this.isLegal),this.engine.input.keyboard.wasPressed(Vt.Keys.B))if(this.placing=!this.placing,this.placing){this.walls.forEach(x=>{this.add(x)});const v=Pe.Circle(50);this.placingSprite.collider.set(v),this.placingSprite.collisionType=ks.Passive,this.placingSprite._setName("this.placingSprite"),this.add(this.placingSprite)}else this.walls.forEach(v=>{v.kill()}),this.placingSprite.kill();if(d.input.keyboard.wasPressed(Vt.Keys.O)&&this.activetower.updateRange(this.activetower.range-=50),d.input.keyboard.wasPressed(Vt.Keys.Y)&&(this.engine.gulden+=50),d.input.keyboard.wasPressed(Vt.Keys.U)&&(this.engine.gulden-=50),d.input.keyboard.wasPressed(Vt.Keys.Enter)&&this.startWave(),d.input.keyboard.wasPressed(Vt.Keys.P)&&this.activetower.updateRange(this.activetower.range+=50),d.input.keyboard.wasPressed(Vt.Keys.T)&&(this.towers.splice(this.towers.indexOf(this.activetower),1),this.engine.gulden+=50,this.activetower.kill()),d.input.keyboard.wasPressed(Vt.Keys.K)&&(this.activetower.tier=this.activetower.tierList[this.activetower.tierList.indexOf(this.activetower.tier,0)-1]),d.input.keyboard.wasPressed(Vt.Keys.H)&&(this.mapping=!this.wave.mapping),d.input.keyboard.wasPressed(Vt.Keys.N)&&(this.int+=1,this.int>3&&(this.int=0)),this.placing&&(this.placingSprite.pos=this.engine.input.pointers.primary.lastWorldPos),this.running&&(this.endlessMode===!0&&(this.levels=[],this.levels.push(`${Math.round(Math.random()*(10-1)+1)}*${Math.round(Math.random()*(4-0)+0)}, ${Math.round(Math.random()*(10-1)+1)}*${Math.round(Math.random()*(4-0)+0)}`),this.parse(0)),this.waveItem<=this.order.length-1)){if(this.spiderSpawner===1){let v=new ho(this);v.setType(this.order[this.waveItem]),this.add(v),this.waveItem+=1,this.activeEnemies+=1,this.engine.currentScene.activeEnemyObjects.push(v)}this.spiderSpawner++,this.spiderSpawner>Math.random()*(100-25)+25&&(this.spiderSpawner=0,this.spiderSpawner=0)}}}class cg extends Ds{constructor(){super();T(this,"levelselect");T(this,"spider");T(this,"music",D.BackgroundMusic);T(this,"click",D.Click);T(this,"mapLabel1");T(this,"mapLabel2");T(this,"mapLabel3");T(this,"endlessMode");po.useRealisticPhysics()}onActivate(d){this.engine.backgroundColor=new ht(239,255,228),this.music.volume=.3,this.music.loop=!0,this.music.play().then(m=>console.log(m))}onInitialize(d){this.engine=d,this.endlessMode=this.engine.endless,this.levelselect=new H,this.levelselect.graphics.use(D.SelectText.toSprite()),this.levelselect.pos=new A(720,200),this.levelselect.scale=new A(.1,.1),this.levelselect.actions.scaleTo(it(4.5,4.5),it(3,3)),this.levelselect.z=1e3,this.add(this.levelselect);const m=new H;m.graphics.use(D.ParkMapselect.toSprite()),m.pos=new A(350,500),m.scale=new A(.1,.1),m.actions.scaleTo(it(.6,.6),it(.5,.5)),m.z=1e3,m.enableCapturePointer=!0,m.pointer.useGraphicsBounds=!0,m.on("pointerup",R=>this.parkLevel(1)),this.add(m),this.endlessMode===!1&&(this.mapLabel1=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.mapLabel1.text=`${localStorage.getItem("0")}/5`,this.mapLabel1.pos=new A(320,630),this.mapLabel1.z=99999,this.add(this.mapLabel1)),this.mapLabel1=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.mapLabel1.text=`${localStorage.getItem("0")}/5`,this.mapLabel1.pos=new A(320,630),this.mapLabel1.z=99999,this.add(this.mapLabel1);const v=new H;if(v.graphics.use(D.ParkMapSelect2.toSprite()),v.pos=new A(720,500),v.scale=new A(.1,.1),v.actions.scaleTo(it(.6,.6),it(.5,.5)),v.z=1e3,v.enableCapturePointer=!0,v.pointer.useGraphicsBounds=!0,console.log(Number(localStorage.getItem("0"))),Number(localStorage.getItem("0"))>4)v.on("pointerup",R=>this.parkLevel(2));else{const R=new H;R.graphics.use(D.Lock.toSprite()),R.scale=new A(.01,.01),R.actions.scaleTo(it(.5,.5),it(.5,.5)),R.pos=new A(720,490),R.z=1100,this.add(R);let G=D.ParkMapSelect2.toSprite();G.tint=new ht(100,100,100),v.sprite=G,v.graphics.use(G)}this.add(v),this.endlessMode===!1&&(this.mapLabel2=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.mapLabel2.text=`${localStorage.getItem("1")}/8`,this.mapLabel2.pos=new A(700,630),this.mapLabel2.z=99999,this.add(this.mapLabel2));let x=new H;x.graphics.use(D.background.toSprite()),x.scale=new A(5,5),x.pos=new A(745,433),this.add(x);const b=new H;if(b.graphics.use(D.ParkMapSelect3.toSprite()),b.pos=new A(1090,500),b.scale=new A(.1,.1),b.actions.scaleTo(it(.6,.6),it(.5,.5)),b.z=1e3,b.enableCapturePointer=!0,b.pointer.useGraphicsBounds=!0,Number(localStorage.getItem("1"))>9)b.on("pointerup",R=>this.parkLevel(3));else{const R=new H;R.graphics.use(D.Lock.toSprite()),R.scale=new A(.01,.01),R.actions.scaleTo(it(.5,.5),it(.5,.5)),R.pos=new A(1090,490);let G=D.ParkMapSelect3.toSprite();G.tint=new ht(100,100,100),b.sprite=G,b.graphics.use(G),R.z=1100,this.add(R)}this.add(b),this.endlessMode===!1&&(this.mapLabel3=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.mapLabel3.text=`${localStorage.getItem("2")}/10`,this.mapLabel3.pos=new A(1065,630),this.mapLabel3.z=99999,this.add(this.mapLabel3)),this.spider=new H,this.spider.graphics.use(D.MenuSpider.toSprite()),this.spider.pos=new A(100,0),this.spider.scale=new A(1.5,1.5),this.spider.z=1e3,this.add(this.spider)}onPreUpdate(d,m){d.input.keyboard.wasPressed(Vt.Keys.H)&&localStorage.clear(),this.levelselect.actions.scaleTo(it(4.5,4.5),it(.05,.05)),this.levelselect.actions.scaleTo(it(4.2,4.2),it(.1,.1)),Math.floor(Math.random()*(2e3-1)+1)===1&&this.spiderPeek(),d.input.keyboard.wasReleased(Vt.Keys.S)&&this.spiderPeek()}parkLevel(d){this.click.volume=1,this.click.play(),d===1&&(this.engine.goToScene("level1"),this.engine.activeScene=1,console.log("park level1")),d===2&&(this.engine.goToScene("level2"),this.engine.activeScene=2,console.log("park level2")),d===3&&(this.engine.goToScene("level3"),this.engine.activeScene=3,console.log("park level3"))}spiderPeek(){this.spider.actions.moveTo(it(100,100),50).delay(1e3).moveTo(it(100,0),50)}onDeactivate(d){this.music.stop(),this.music.volume=0}}class dg extends Ds{constructor(){super();T(this,"logo");T(this,"spider");T(this,"music",D.MenuMusic);T(this,"click",D.Click);po.useRealisticPhysics()}onActivate(d){this.engine.backgroundColor=new ht(239,255,228),this.music.volume=.3,this.music.loop=!0,this.music.play().then(m=>console.log(m))}onInitialize(d){this.logo=new H,this.logo.graphics.use(D.GameOver.toSprite()),this.logo.pos=new A(720,250),this.logo.scale=new A(.1,.1),this.logo.actions.scaleTo(it(4,4),it(2,2)),this.logo.z=1e3,this.add(this.logo);const m=new H;m.graphics.use(D.Start.toSprite()),m.pos=new A(720,500),m.scale=new A(.1,.1),m.actions.scaleTo(it(.6,.6),it(.5,.5)),m.z=1e3,m.enableCapturePointer=!0,m.pointer.useGraphicsBounds=!0,m.on("pointerup",v=>this.startGame()),this.add(m),this.spider=new H,this.spider.graphics.use(D.MenuSpider.toSprite()),this.spider.pos=new A(100,0),this.spider.scale=new A(1.5,1.5),this.spider.z=1e3,this.add(this.spider)}onPreUpdate(d,m){this.logo.actions.scaleTo(it(4,4),it(.05,.05)),this.logo.actions.scaleTo(it(3.8,3.8),it(.1,.1)),Math.floor(Math.random()*(2e3-1)+1)===1&&this.spiderPeek(),d.input.keyboard.wasReleased(Vt.Keys.S)&&this.spiderPeek()}startGame(){console.log("terug naar menu"),this.click.volume=1,this.click.play(),this.engine.goToScene("menu")}spiderPeek(){this.spider.actions.moveTo(it(100,100),50).delay(1e3).moveTo(it(100,0),50)}onDeactivate(d){this.music.stop(),this.music.volume=0}}var ug=0;function kt(w){return"__private_"+ug+++"_"+w}function O(w,M){if(!Object.prototype.hasOwnProperty.call(w,M))throw new TypeError("attempted to use private field on non-instance");return w}const Ga=document.createElement("template");Ga.innerHTML=`
<style>
:host {
    position:           absolute;
    top:                10px;
    right:              10px;
}
root {
    top:                10px;
    right:              10px;
    width:              289px; 
    height:             120px;
    display:            block;
    background-color:   #75a8f77a;
}
root * {
    position:           relative;
}
.button-wrapper, .axes-wrapper {
    display:            flex;
    flex-wrap:          wrap;
    float:              left;
}
root .button-div {
    border: solid 1px black;
    width:              60px;
    margin:             5px;
    padding:            5px;
}
.button-wrapper {
    width:              164px;
}
.axes-wrapper {
    width:              115px;
    margin:             5px;
}
.axes-cell {
    width:              25px;  
    height:             25px; 
    margin:             5px;  
    border:             solid 1px transparent;
}
.axes-cell.direction {
    border:             solid 1px black;
}
.axes-cell.center{
    border:             solid 1px black;
    background-color:   blue;
}
.axes-cell.active{
    background-color:   red;
}
.identifier{
    position:           absolute;
    top:                5px;
    left:               5px;
    width:              auto;
    font-weight:        bold;
    color:              #fff;
}
</style>`;var to=kt("panelHeight"),eo=kt("panelSpacing"),os=kt("joystick"),In=kt("numberOfButtons"),co=kt("buttonDivs"),bn=kt("left"),yn=kt("right"),xn=kt("up"),Cn=kt("down"),ke=kt("rootElement"),Pa=kt("createListenersForButtons"),za=kt("handleButtonClicks"),Sa=kt("createHTMLForButtons"),Ta=kt("createHTMLForAxes");class el extends HTMLElement{constructor(M,d){super(),Object.defineProperty(this,Ta,{value:Ag}),Object.defineProperty(this,Sa,{value:mg}),Object.defineProperty(this,za,{value:gg}),Object.defineProperty(this,Pa,{value:pg}),Object.defineProperty(this,to,{writable:!0,value:120}),Object.defineProperty(this,eo,{writable:!0,value:10}),Object.defineProperty(this,os,{writable:!0,value:void 0}),Object.defineProperty(this,In,{writable:!0,value:void 0}),Object.defineProperty(this,co,{writable:!0,value:[]}),Object.defineProperty(this,bn,{writable:!0,value:void 0}),Object.defineProperty(this,yn,{writable:!0,value:void 0}),Object.defineProperty(this,xn,{writable:!0,value:void 0}),Object.defineProperty(this,Cn,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),this.Axes=[],O(this,os)[os]=M,O(this,In)[In]=d;let m=O(this,eo)[eo]+O(this,os)[os].JoystickNumber*(O(this,to)[to]+O(this,eo)[eo]);this.style.top=m+"px",O(this,ke)[ke]=document.createElement("root"),O(this,ke)[ke].style.height=O(this,to)[to]+"px",Ga.appendChild(O(this,ke)[ke]);let v=document.createElement("div");if(v.classList.add("identifier"),v.innerHTML="#"+O(this,os)[os].JoystickNumber,O(this,ke)[ke].appendChild(v),O(this,Ta)[Ta](),O(this,Sa)[Sa](),O(this,Pa)[Pa](),this.attachShadow({mode:"open"}),this.shadowRoot){let x=Ga.content.cloneNode(!0);x.appendChild(O(this,ke)[ke]),this.shadowRoot.appendChild(x)}document.body.appendChild(this)}update(){this.Axes[0]==0?(O(this,bn)[bn].classList.remove("active"),O(this,yn)[yn].classList.remove("active")):this.Axes[0]<0?O(this,bn)[bn].classList.add("active"):this.Axes[0]>0&&O(this,yn)[yn].classList.add("active"),this.Axes[1]==0?(O(this,xn)[xn].classList.remove("active"),O(this,Cn)[Cn].classList.remove("active")):this.Axes[1]<0?O(this,xn)[xn].classList.add("active"):this.Axes[1]>0&&O(this,Cn)[Cn].classList.add("active")}}function pg(){for(let w=0;w<O(this,In)[In];w++)document.addEventListener(O(this,os)[os].ButtonEvents[w],M=>O(this,za)[za](M,w))}function gg(w,M){O(this,co)[co][M].style.filter="hue-rotate("+360*Math.random()+"deg)"}function mg(){let w=document.createElement("div");w.className="button-wrapper";for(let M=0;M<O(this,In)[In];M++){let d=document.createElement("div");d.className="button-div",w.appendChild(d),d.style.backgroundColor="blue",d.innerHTML="Button "+(M+1),O(this,co)[co].push(d)}O(this,ke)[ke].appendChild(w)}function Ag(){let w=document.createElement("div");w.className="axes-wrapper";for(let M=1;M<=9;M++){let d=document.createElement("div");switch(d.className="axes-cell",M%2==0&&d.classList.add("direction"),M==5&&d.classList.add("center"),w.appendChild(d),M){case 2:O(this,xn)[xn]=d;break;case 4:O(this,bn)[bn]=d;break;case 6:O(this,yn)[yn]=d;break;case 8:O(this,Cn)[Cn]=d}}O(this,ke)[ke].appendChild(w)}window.customElements.define("debug-panel",el);var as=kt("DEBUG"),no=kt("BUT1"),ro=kt("BUT2"),io=kt("joystickNumber"),ls=kt("numberOfBUttons"),Ee=kt("buttonEvents"),Yt=kt("axes"),Ke=kt("gamepad"),ti=kt("previousGamepad"),qt=kt("previousJoystickDirection"),Ra=kt("readGamepad"),$e=kt("buttonPressed");class fg{get Left(){return O(this,Yt)[Yt][0]==-1}get Right(){return O(this,Yt)[Yt][0]==1}get Up(){return O(this,Yt)[Yt][1]==-1}get Down(){return O(this,Yt)[Yt][1]==1}get Neutral(){return O(this,Yt)[Yt][0]==0&&O(this,Yt)[Yt][1]==0}get Y(){return Math.round(O(this,Yt)[Yt][1])}get X(){return Math.round(O(this,Yt)[Yt][0])}get JoystickNumber(){return O(this,io)[io]}get ButtonEvents(){return O(this,Ee)[Ee]}get Gamepad(){return O(this,Ke)[Ke]}set Gamepad(M){O(this,Ke)[Ke]=M}get PreviousGamepad(){return O(this,ti)[ti]}set PreviousGamepad(M){O(this,ti)[ti]=M}constructor(M,d,m){Object.defineProperty(this,$e,{value:_g}),Object.defineProperty(this,Ra,{value:vg}),Object.defineProperty(this,as,{writable:!0,value:!0}),Object.defineProperty(this,no,{writable:!0,value:8}),Object.defineProperty(this,ro,{writable:!0,value:9}),Object.defineProperty(this,io,{writable:!0,value:0}),Object.defineProperty(this,ls,{writable:!0,value:0}),Object.defineProperty(this,Ee,{writable:!0,value:[]}),Object.defineProperty(this,Yt,{writable:!0,value:[]}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,ti,{writable:!0,value:void 0}),Object.defineProperty(this,qt,{writable:!0,value:void 0}),O(this,io)[io]=M,O(this,ls)[ls]=d,O(this,as)[as]=m;for(let v=0;v<O(this,ls)[ls];v++)O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"button"+v);O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"neutral"),O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"left"),O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"right"),O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"up"),O(this,Ee)[Ee].push("joystick"+this.JoystickNumber+"down"),O(this,qt)[qt]="neutral",O(this,as)[as]&&(this.debugPanel=new el(this,O(this,ls)[ls]))}update(){if(O(this,Ke)[Ke]===void 0||O(this,Ke)[Ke].index===void 0||navigator.getGamepads()[O(this,Ke)[Ke].index]===void 0)return;let M=navigator.getGamepads()[O(this,Ke)[Ke].index];M&&O(this,Ra)[Ra](M)}destroy(){O(this,as)[as]&&this.debugPanel.remove()}}function vg(w){for(let M=0;M<O(this,ls)[ls];M++)O(this,$e)[$e](w.buttons[M])&&!O(this,$e)[$e](O(this,ti)[ti].buttons[M])&&document.dispatchEvent(new Event(O(this,Ee)[Ee][M])),!O(this,$e)[$e](w.buttons[O(this,no)[no]])||!O(this,$e)[$e](w.buttons[O(this,ro)[ro]])||O(this,$e)[$e](O(this,ti)[ti].buttons[O(this,no)[no]])&&O(this,$e)[$e](O(this,ti)[ti].buttons[O(this,ro)[ro]])||document.dispatchEvent(new Event("redirect"));O(this,Yt)[Yt][0]=Math.round(w.axes[0]),O(this,Yt)[Yt][1]=Math.round(w.axes[1]),O(this,as)[as]&&(this.debugPanel.Axes[0]=O(this,Yt)[Yt][0],this.debugPanel.Axes[1]=O(this,Yt)[Yt][1],this.debugPanel.update()),this.Left&&O(this,qt)[qt]!=="left"&&(O(this,qt)[qt]="left",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"left"))),this.Right&&O(this,qt)[qt]!=="right"&&(O(this,qt)[qt]="right",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"right"))),this.Up&&O(this,qt)[qt]!=="up"&&(O(this,qt)[qt]="up",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"up"))),this.Down&&O(this,qt)[qt]!=="down"&&(O(this,qt)[qt]="down",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"down"))),this.Neutral&&O(this,qt)[qt]!=="neutral"&&(O(this,qt)[qt]="neutral",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"neutral"))),O(this,ti)[ti]=w}function _g(w){return typeof w=="object"?w.pressed:w==1}var Ie=kt("DEBUG"),ce=kt("joysticks"),Na=kt("REDIRECT_URL"),En=kt("multiplayer"),ao=kt("game"),ka=kt("onRedirect"),Da=kt("onGamePadConnected"),La=kt("onGamePadDisconnected"),lo=kt("showStatus"),ja=kt("removeStatus");class wg{get Joysticks(){return O(this,ce)[ce]}constructor(M,d=!1,m=!1){Object.defineProperty(this,ja,{value:Eg}),Object.defineProperty(this,lo,{value:Cg}),Object.defineProperty(this,La,{value:xg}),Object.defineProperty(this,Da,{value:yg}),Object.defineProperty(this,ka,{value:bg}),Object.defineProperty(this,Ie,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,Na,{writable:!0,value:"http://hr-cmgt.github.io/arcade-server"}),Object.defineProperty(this,En,{writable:!0,value:!1}),Object.defineProperty(this,ao,{writable:!0,value:void 0}),O(this,ao)[ao]=M,O(this,En)[En]=d,O(this,Ie)[Ie]=m,O(this,ce)[ce]=[],O(this,Ie)[Ie]&&O(this,lo)[lo]("Gamepad is NOT connected. Press a button to connect"),document.addEventListener("redirect",()=>O(this,ka)[ka]()),window.addEventListener("gamepadconnected",v=>O(this,Da)[Da](v)),window.addEventListener("gamepaddisconnected",v=>O(this,La)[La](v))}createAndAddJoystick(M,d){let m=this.getJoystickByNumber(M);if(m!=null)return m;let v=new fg(M,d,O(this,Ie)[Ie]);return O(this,ce)[ce][M]=v,v&&(document.dispatchEvent(new CustomEvent("joystickcreated",{detail:M})),console.log("joystick created")),v}removeJoystick(M){let d=this.getJoystickByNumber(M);if(d!=null){var m=O(this,ce)[ce].indexOf(d);typeof O(this,ce)[ce][m].destroy=="function"&&O(this,ce)[ce][m].destroy(),m>-1&&O(this,ce)[ce].splice(m,1)}}getJoystickByNumber(M){for(let d of O(this,ce)[ce])if(d.JoystickNumber==M)return d;return null}}function bg(){O(this,Ie)[Ie]&&console.log("redirect!!"),window.location.href=O(this,Na)[Na]}function yg(w){if(O(this,Ie)[Ie]&&(console.log("Game pad connected"),console.log("Joystick number: "+w.gamepad.index)),!O(this,En)[En]&&O(this,ce)[ce].length==0||O(this,En)[En]){let M=this.createAndAddJoystick(w.gamepad.index,6);M.PreviousGamepad=M.Gamepad,M.Gamepad=w.gamepad,M.PreviousGamepad==null&&(M.PreviousGamepad=w.gamepad)}O(this,Ie)[Ie]&&O(this,ja)[ja]()}function xg(w){O(this,Ie)[Ie]&&console.log("Game pad disconnected"),O(this,Ie)[Ie]&&O(this,lo)[lo]("Gamepad is NOT connected. Connect the gamepad and press a button."),this.removeJoystick(w.gamepad.index),O(this,ao)[ao].disconnect()}function Cg(w){let M,d;(M=document.getElementsByTagName("status")[0])||(M=document.createElement("status"),document.body.append(M)),M&&((d=M.getElementsByTagName("p")[0])||(d=document.createElement("p"),M.appendChild(d))),d&&(d.innerHTML=w)}function Eg(){let w;(w=document.getElementsByTagName("status")[0])&&w.remove()}class Ig extends Fa{constructor(){super();T(this,"levels",["3*0","5*0, 2*2, 2*0","3*0,3*2,3*0, 3*2","5*2, 10*0, 5*2, 5*0","15*0, 5*2"]);T(this,"id",0);T(this,"waveItem",0);T(this,"activeWave");T(this,"waveText");T(this,"order",[]);T(this,"walls",[]);T(this,"activeEnemyObjects",[]);T(this,"garden",new H({width:100,height:100}));T(this,"gardenSprites",[D.Garden,D.Garden4,D.Garden3,D.Garden2,D.Garden1,D.Garden1]);T(this,"endlessMode",!1);T(this,"timer",new Bn({fcn:()=>this.removeParticles(),repeats:!1,interval:200}));T(this,"deathParticles",new Fe({emitterType:Ue.Rectangle,radius:10,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:600,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.fromRGB(139,69,19),isEmitting:!1}));T(this,"upgradeParticles",new Fe({emitterType:Ue.Rectangle,radius:2,minVel:100,maxVel:200,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Green,endColor:ht.Green,isEmitting:!1}));T(this,"impactParticle",new Fe({emitterType:Ue.Rectangle,radius:1,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:50,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.Red,isEmitting:!1}))}onInitialize(d){this.endlessMode=this.engine.endless,this.endlessMode===!1&&(this.waveText=new vt({font:new At({unit:ft.Px,family:"VCR",size:30,color:ht.White,strokeColor:ht.Black})}),this.waveText.text=`${localStorage.getItem("0")}/${this.levels.length}`,this.waveText.pos=new A(20,350),this.waveText.z=99999,this.add(this.waveText)),this.buyMenu=new H,this.buyMenu.graphics.use(D.BuyMenu.toSprite()),this.buyMenu.pos=new A(1400,450),this.buyMenu.scale=new A(3,1),this.buyMenu.z=9999,this.buyMenu.enableCapturePointer=!0,this.buyMenu.pointer.useGraphicsBounds=!0,this.guldenLogo=new H,this.guldenLogo.graphics.use(D.Gulden.toSprite()),this.guldenLogo.scale=new A(.4,.4),this.guldenLogo.pos=new A(120,80),this.guldenLogo.z=99999,this.add(this.guldenLogo),this.guldenDisplay=new ia,this.add(this.guldenDisplay),this.levensLogo=new H,this.levensLogo.graphics.use(D.Health.toSprite()),this.levensLogo.scale=new A(.4,.4),this.levensLogo.pos=new A(120,120),this.levensLogo.z=99999,this.add(this.levensLogo),this.levensDisplay=new sa,this.add(this.levensDisplay),this.placingSprite=new hi,this.engine.input.pointers.primary.on("up",()=>this.mouseInput()),this.engine=d;let m=[1103,45,1094,188,1083,321,1066,361,994,454,913,440,787,409,736,404,714,324,656,229,592,192,515,166,458,162,394,179,302,220,214,347,210,501,232,557,263,617,216,646,175,680,130,796,186,808,204,743,241,700,302,643,322,596,272,515,271,373,315,313,357,264,421,237,526,237,594,268,646,328,677,368,684,447,571,449,537,377,474,345,414,371,375,435,399,504,469,547,543,514,579,458,534,372,582,449,480,547,325,590,399,617,488,628,602,591,663,527,679,466,676,386,633,321,541,252,459,247,351,279,296,348,271,430,283,522,321,580,306,646,357,674,418,701,556,710,634,672,702,608,739,518,743,473,866,484,1009,500,1079,552,1079,591,1075,708,1067,803,1120,805,1121,734,1116,605,1321,814,1410,809,1050,465,1093,427,1126,369,1145,333,1148,192,1152,47];for(let b=0;b<m.length;b+=2){let R=0,G=0,z=new ea(m[b]+R,m[b+1]+G,m[b+2]+R,m[b+3]+G);z.on("precollision",Q=>{Q.other instanceof hi&&(this.isLegal=!1)}),z.on("collisionend",Q=>{Q.other instanceof hi&&(this.isLegal=!0)}),this.walls.push(z)}this.garden.sprite=D.Garden.toSprite(),this.garden.graphics.use(this.garden.sprite),this.add(this.garden),this.garden.z=9999,this.garden.pos=new A(157,807),this.garden.collisionType=ks.Passive,this.garden.on("collisionstart",b=>{b.other instanceof ho&&(this.engine.damage(),this.crunch.play(),this.garden.graphics.use(this.gardenSprites[Math.ceil(this.engine.levens/4)].toSprite()),b.other.explode())});let v=new H;v.graphics.use(D.Map1Ground.toSprite()),v.scale=new A(5.5,5.5),v.pos=new A(745,473),this.add(v);let x=new H;x.graphics.use(D.Map1Top.toSprite()),x.scale=new A(5.5,5.5),x.pos=new A(745,425),x.z=9999,this.add(x),this.settingsButton=new H,this.settingsButton.graphics.use(D.SettingsButton.toSprite()),this.settingsButton.pos=new A(50,105),this.settingsButton.scale=new A(.7,.7),this.settingsButton.z=9999,this.settingsButton.enableCapturePointer=!0,this.settingsButton.pointer.useGraphicsBounds=!0,this.settingsButton.on("pointerup",b=>this.goToSettings()),this.add(this.settingsButton),this.buyMenuButton=new H,this.buyMenuButton.graphics.use(D.BuyButton.toSprite()),this.buyMenuButton.pos=new A(50,195),this.buyMenuButton.scale=new A(.7,.7),this.buyMenuButton.z=9999,this.buyMenuButton.enableCapturePointer=!0,this.buyMenuButton.pointer.useGraphicsBounds=!0,this.buyMenuButton.on("pointerup",b=>this.drawBuyMenu()),this.add(this.buyMenuButton),this.playRoundButton=new H,this.playRoundButton.graphics.use(D.PlayButton.toSprite()),this.playRoundButton.pos=new A(50,285),this.playRoundButton.scale=new A(.7,.7),this.playRoundButton.z=9999,this.playRoundButton.enableCapturePointer=!0,this.playRoundButton.pointer.useGraphicsBounds=!0,this.playRoundButton.on("pointerup",b=>this.startWave()),this.add(this.playRoundButton),this.enemies(),this.koopLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.koopLabel.text="Koop:",this.koopLabel.pos=new A(1350,150),this.koopLabel.z=99999,this.bamiLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamiLabel.text="Pan bami",this.bamiLabel.pos=new A(1350,150),this.bamiLabel.z=99999,this.bamiButton=new H,this.button(this.bamiButton,D.Pan,new A(1350,200),new A(1.5,1.5)),this.bamiButton.on("pointerdown",b=>{this.engine.gulden>=200&&this.buyTower(1)}),this.costlogobami=new H,this.costLogo(this.costlogobami,new A(1350,250)),this.bamicost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamicost.text="200",this.bamicost.pos=new A(1370,250),this.bamicost.z=99999,this.endlessMode===!0&&(this.tinyLauLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinyLauLabel.text="Tiny en Lau",this.tinyLauLabel.pos=new A(1350,300),this.tinyLauLabel.z=99999,this.tinyLauButton=new H,this.button(this.tinyLauButton,D.TinyLau,new A(1350,350),new A(2,2)),this.tinyLauButton.on("pointerdown",b=>this.buyTower(2)),this.costlogotiny=new H,this.costLogo(this.costlogotiny,new A(1350,400)),this.tinycost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinycost.text="500",this.tinycost.pos=new A(1370,400),this.tinycost.z=99999,this.spiderTrikeLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spiderTrikeLabel.text="Spinnenman",this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.z=99999,this.spiderTrikeButton=new H,this.button(this.spiderTrikeButton,D.SpiderMeneer,new A(1350,500),new A(1.5,1.5)),this.spiderTrikeButton.on("pointerdown",b=>this.buyTower(3)),this.enemies(),this.costlogospider=new H,this.costLogo(this.costlogospider,new A(1350,550)),this.spidercost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spidercost.text="800",this.spidercost.pos=new A(1370,550),this.spidercost.z=99999),this.activeWave=new H,this.button(this.activeWave,D.TinyLau,new A(130,350),new A(2,2)),this.activeWave.on("pointerdown",b=>this.startWave())}drawBuyMenu(){this.buyMenuClick++,this.buyMenuClick===1&&(this.buyMenu.pos=new A(1500,450),this.buyMenu.actions.moveTo(1400,450,1100),this.add(this.buyMenu),this.koopLabel.pos=new A(1500,100),this.koopLabel.actions.moveTo(1300,100,1100),this.add(this.koopLabel),this.bamiLabel.pos=new A(1500,150),this.bamiLabel.actions.moveTo(1310,150,1300),this.add(this.bamiLabel),this.bamiButton.pos=new A(1500,180),this.bamiButton.actions.moveTo(1350,180,1300),this.add(this.bamiButton),this.costlogobami.pos=new A(1500,200),this.costlogobami.actions.moveTo(1300,230,1300),this.add(this.costlogobami),this.bamicost.pos=new A(1500,230),this.bamicost.actions.moveTo(1330,230,1300),this.add(this.bamicost),this.endlessMode===!0&&(this.tinyLauLabel.pos=new A(1500,270),this.tinyLauLabel.actions.moveTo(1295,270,1300),this.add(this.tinyLauLabel),this.tinyLauButton.pos=new A(1500,300),this.tinyLauButton.actions.moveTo(1350,300,1300),this.add(this.tinyLauButton),this.costlogotiny.pos=new A(1500,350),this.costlogotiny.actions.moveTo(1300,350,1300),this.add(this.costlogotiny),this.tinycost.pos=new A(1500,380),this.tinycost.actions.moveTo(1330,350,1300),this.add(this.tinycost),this.spiderTrikeLabel.pos=new A(1500,380),this.spiderTrikeLabel.actions.moveTo(1300,390,1300),this.add(this.spiderTrikeLabel),this.spiderTrikeButton.pos=new A(1500,430),this.spiderTrikeButton.actions.moveTo(1350,440,1300),this.add(this.spiderTrikeButton),this.costlogospider.pos=new A(1500,480),this.costlogospider.actions.moveTo(1300,490,1300),this.add(this.costlogospider),this.spidercost.pos=new A(1500,510),this.spidercost.actions.moveTo(1330,490,1300),this.add(this.spidercost))),this.buyMenuClick===2&&(this.buyMenu.kill(),this.koopLabel.pos=new A(1350,50),this.koopLabel.kill(),this.bamiLabel.pos=new A(1350,150),this.bamiLabel.kill(),this.bamiButton.pos=new A(1350,450),this.bamiButton.kill(),this.costlogobami.pos=new A(1350,250),this.costlogobami.kill(),this.bamicost.pos=new A(1350,250),this.bamicost.kill(),this.endlessMode===!0&&(this.tinyLauLabel.pos=new A(1350,250),this.tinyLauLabel.kill(),this.tinyLauButton.pos=new A(1350,350),this.tinyLauButton.kill(),this.costlogotiny.pos=new A(1350,350),this.costlogotiny.kill(),this.tinycost.pos=new A(1350,350),this.tinycost.kill(),this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.kill(),this.spiderTrikeButton.pos=new A(1350,250),this.spiderTrikeButton.kill(),this.costlogospider.pos=new A(1350,350),this.costlogospider.kill(),this.spidercost.pos=new A(1350,350),this.spidercost.kill()),this.buyMenuClick=0)}goToSettings(){console.log("goToSettings"),this.click.play(),this.game=this.engine,this.engine.goToScene("settings")}enemyKilled(d){this.deathParticles.isEmitting=!0,this.deathParticles.pos=d,this.add(this.deathParticles),this.particleCounter=0,this.particleEmitting=!0,console.log("eeee")}impactParticleFunction(d){this.impactParticle.isEmitting=!0,this.impactParticle.pos=d,this.add(this.impactParticle),this.impactParticleCounter=0,console.log("eeee")}removeParticles(){this.upgradeParticles.isEmitting=!1,this.upgradeParticles.kill()}}class Bg extends Fa{constructor(){super();T(this,"levels",["5*0","8*0, 2*2, 2*0","12*0,3*2,5*0,2*2,6*0","8*0, 2*3, 2*0","4*2, 2*1","13*0, 2*2, 4*0","5*0, 2*1, 2*0, 8*0","2*3, 7*2, 9*0","8*2, 2*1","5*0,1*4, 8*3, 7*0, 6*2, 10*0, 15*2"]);T(this,"id",1);T(this,"waveItem",0);T(this,"activeEnemyObjects",[]);T(this,"activeWave");T(this,"order",[]);T(this,"walls",[]);T(this,"garden",new H({width:100,height:100}));T(this,"gardenSprites",[D.Garden,D.Garden4,D.Garden3,D.Garden2,D.Garden1,D.Garden1]);T(this,"endlessMode",!1);T(this,"timer",new Bn({fcn:()=>this.removeParticles(),repeats:!1,interval:200}));T(this,"deathParticles",new Fe({emitterType:Ue.Rectangle,radius:10,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:600,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.fromRGB(139,69,19),isEmitting:!1}));T(this,"upgradeParticles",new Fe({emitterType:Ue.Rectangle,radius:2,minVel:100,maxVel:200,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Green,endColor:ht.Green,isEmitting:!1}));T(this,"impactParticle",new Fe({emitterType:Ue.Rectangle,radius:1,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:50,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.Red,isEmitting:!1}))}onInitialize(d){this.endlessMode=this.engine.endless,this.endlessMode===!1&&(this.waveText=new vt({font:new At({unit:ft.Px,family:"VCR",size:30,color:ht.White,strokeColor:ht.Black})}),this.waveText.text=`${localStorage.getItem("0")}/${this.levels.length}`,this.waveText.pos=new A(20,350),this.waveText.z=99999,this.add(this.waveText)),this.buyMenu=new H,this.buyMenu.graphics.use(D.BuyMenu.toSprite()),this.buyMenu.pos=new A(1400,450),this.buyMenu.scale=new A(3,1),this.buyMenu.z=9999,this.buyMenu.enableCapturePointer=!0,this.buyMenu.pointer.useGraphicsBounds=!0,this.guldenLogo=new H,this.guldenLogo.graphics.use(D.Gulden.toSprite()),this.guldenLogo.scale=new A(.4,.4),this.guldenLogo.pos=new A(120,80),this.guldenLogo.z=99999,this.add(this.guldenLogo),this.guldenDisplay=new ia,this.add(this.guldenDisplay),this.levensLogo=new H,this.levensLogo.graphics.use(D.Health.toSprite()),this.levensLogo.scale=new A(.4,.4),this.levensLogo.pos=new A(120,120),this.levensLogo.z=99999,this.add(this.levensLogo),this.levensDisplay=new sa,this.add(this.levensDisplay),this.placingSprite=new hi,this.engine.input.pointers.primary.on("up",()=>this.mouseInput()),this.engine=d;let m=[1011,854,1184,853,1187,45,1110,45,1143,854,1082,854,1083,45,1017,45,1012,472,753,408,425,325,365,300,258,271,175,192,177,45,115,45,116,211,159,212,162,315,117,180,113,854,165,853,165,445,203,399,259,357,327,362,424,403,1012,551,1011,852,1011,852];for(let b=0;b<m.length;b+=2){let R=0,G=0,z=new ea(m[b]+R,m[b+1]+G,m[b+2]+R,m[b+3]+G);z.on("precollision",Q=>{Q.other instanceof hi&&(this.isLegal=!1)}),z.on("collisionend",Q=>{Q.other instanceof hi&&(this.isLegal=!0)}),this.walls.push(z)}this.garden.sprite=D.Garden.toSprite(),this.garden.graphics.use(this.garden.sprite),this.add(this.garden),this.garden.z=9999,this.garden.pos=new A(1093,796),this.garden.collisionType=ks.Passive,this.garden.on("collisionstart",b=>{b.other instanceof ho&&(this.engine.damage(),this.crunch.play(),this.garden.graphics.use(this.gardenSprites[Math.ceil(this.engine.levens/4)].toSprite()),b.other.explode())});let v=new H;v.graphics.use(D.Map2Ground.toSprite()),v.scale=new A(5.9,5.9),v.pos=new A(750,450),this.add(v);let x=new H;x.graphics.use(D.Map2Top.toSprite()),x.scale=new A(5.9,5.9),x.pos=new A(691,450),x.z=9999,this.add(x),this.settingsButton=new H,this.settingsButton.graphics.use(D.SettingsButton.toSprite()),this.settingsButton.pos=new A(50,105),this.settingsButton.scale=new A(.7,.7),this.settingsButton.z=9999,this.settingsButton.enableCapturePointer=!0,this.settingsButton.pointer.useGraphicsBounds=!0,this.settingsButton.on("pointerup",b=>this.goToSettings()),this.add(this.settingsButton),this.buyMenuButton=new H,this.buyMenuButton.graphics.use(D.BuyButton.toSprite()),this.buyMenuButton.pos=new A(50,195),this.buyMenuButton.scale=new A(.7,.7),this.buyMenuButton.z=9999,this.buyMenuButton.enableCapturePointer=!0,this.buyMenuButton.pointer.useGraphicsBounds=!0,this.buyMenuButton.on("pointerup",b=>this.drawBuyMenu()),this.add(this.buyMenuButton),this.playRoundButton=new H,this.playRoundButton.graphics.use(D.PlayButton.toSprite()),this.playRoundButton.pos=new A(50,285),this.playRoundButton.scale=new A(.7,.7),this.playRoundButton.z=9999,this.playRoundButton.enableCapturePointer=!0,this.playRoundButton.pointer.useGraphicsBounds=!0,this.playRoundButton.on("pointerup",b=>this.startWave()),this.add(this.playRoundButton),this.enemies(),this.koopLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.koopLabel.text="Koop:",this.koopLabel.pos=new A(1350,150),this.koopLabel.z=99999,this.bamiLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamiLabel.text="Pan bami",this.bamiLabel.pos=new A(1350,150),this.bamiLabel.z=99999,this.bamiButton=new H,this.button(this.bamiButton,D.Pan,new A(1350,200),new A(1.5,1.5)),this.bamiButton.on("pointerdown",b=>{this.engine.gulden>=200&&this.buyTower(1)}),this.costlogobami=new H,this.costLogo(this.costlogobami,new A(1350,250)),this.bamicost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamicost.text="200",this.bamicost.pos=new A(1370,250),this.bamicost.z=99999,this.tinyLauLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinyLauLabel.text="Tiny en Lau",this.tinyLauLabel.pos=new A(1350,300),this.tinyLauLabel.z=99999,this.tinyLauButton=new H,this.button(this.tinyLauButton,D.TinyLau,new A(1350,350),new A(2,2)),this.tinyLauButton.on("pointerdown",b=>this.buyTower(2)),this.costlogotiny=new H,this.costLogo(this.costlogotiny,new A(1350,400)),this.tinycost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinycost.text="300",this.tinycost.pos=new A(1370,400),this.tinycost.z=99999,this.endlessMode===!0&&(this.spiderTrikeLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spiderTrikeLabel.text="Spinnenman",this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.z=99999,this.spiderTrikeButton=new H,this.button(this.spiderTrikeButton,D.SpiderMeneer,new A(1350,500),new A(1.5,1.5)),this.spiderTrikeButton.on("pointerdown",b=>this.buyTower(3)),this.enemies(),this.costlogospider=new H,this.costLogo(this.costlogospider,new A(1350,550)),this.spidercost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spidercost.text="800",this.spidercost.pos=new A(1370,550),this.spidercost.z=99999),this.activeWave=new H,this.button(this.activeWave,D.TinyLau,new A(130,350),new A(2,2)),this.activeWave.on("pointerdown",b=>this.startWave())}drawBuyMenu(){this.buyMenuClick++,this.buyMenuClick===1&&(this.buyMenu.pos=new A(1500,450),this.buyMenu.actions.moveTo(1400,450,1100),this.add(this.buyMenu),this.koopLabel.pos=new A(1500,100),this.koopLabel.actions.moveTo(1300,100,1100),this.add(this.koopLabel),this.bamiLabel.pos=new A(1500,150),this.bamiLabel.actions.moveTo(1310,150,1300),this.add(this.bamiLabel),this.bamiButton.pos=new A(1500,180),this.bamiButton.actions.moveTo(1350,180,1300),this.add(this.bamiButton),this.costlogobami.pos=new A(1500,200),this.costlogobami.actions.moveTo(1300,230,1300),this.add(this.costlogobami),this.bamicost.pos=new A(1500,230),this.bamicost.actions.moveTo(1330,230,1300),this.add(this.bamicost),this.tinyLauLabel.pos=new A(1500,270),this.tinyLauLabel.actions.moveTo(1295,270,1300),this.add(this.tinyLauLabel),this.tinyLauButton.pos=new A(1500,300),this.tinyLauButton.actions.moveTo(1350,300,1300),this.add(this.tinyLauButton),this.costlogotiny.pos=new A(1500,350),this.costlogotiny.actions.moveTo(1300,350,1300),this.add(this.costlogotiny),this.tinycost.pos=new A(1500,380),this.tinycost.actions.moveTo(1330,350,1300),this.add(this.tinycost),this.endlessMode===!0&&(this.spiderTrikeLabel.pos=new A(1500,380),this.spiderTrikeLabel.actions.moveTo(1300,390,1300),this.add(this.spiderTrikeLabel),this.spiderTrikeButton.pos=new A(1500,430),this.spiderTrikeButton.actions.moveTo(1350,440,1300),this.add(this.spiderTrikeButton),this.costlogospider.pos=new A(1500,480),this.costlogospider.actions.moveTo(1300,490,1300),this.add(this.costlogospider),this.spidercost.pos=new A(1500,510),this.spidercost.actions.moveTo(1330,490,1300),this.add(this.spidercost))),this.buyMenuClick===2&&(this.buyMenu.kill(),this.koopLabel.pos=new A(1350,50),this.koopLabel.kill(),this.bamiLabel.pos=new A(1350,150),this.bamiLabel.kill(),this.bamiButton.pos=new A(1350,450),this.bamiButton.kill(),this.costlogobami.pos=new A(1350,250),this.costlogobami.kill(),this.bamicost.pos=new A(1350,250),this.bamicost.kill(),this.tinyLauLabel.pos=new A(1350,250),this.tinyLauLabel.kill(),this.tinyLauButton.pos=new A(1350,350),this.tinyLauButton.kill(),this.costlogotiny.pos=new A(1350,350),this.costlogotiny.kill(),this.tinycost.pos=new A(1350,350),this.tinycost.kill(),this.endlessMode===!0&&(this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.kill(),this.spiderTrikeButton.pos=new A(1350,250),this.spiderTrikeButton.kill(),this.costlogospider.pos=new A(1350,350),this.costlogospider.kill(),this.spidercost.pos=new A(1350,350),this.spidercost.kill()),this.buyMenuClick=0)}enemyKilled(d){this.deathParticles.isEmitting=!0,this.deathParticles.pos=d,this.add(this.deathParticles),this.particleCounter=0,this.particleEmitting=!0,console.log("eeee")}impactParticleFunction(d){this.impactParticle.isEmitting=!0,this.impactParticle.pos=d,this.add(this.impactParticle),this.impactParticleCounter=0,console.log("eeee")}removeParticles(){this.upgradeParticles.isEmitting=!1,this.upgradeParticles.kill()}}class Mg extends Fa{constructor(){super();T(this,"levels",["5*0","8*0, 2*2, 2*0","12*0,3*2,5*0,2*2,6*0","8*0, 2*2, 3*0","4*2, 2*3","13*0, 2*2, 7*0","5*0, 3*2, 2*0","2*3, 7*2, 9*0","9*2, 2*1","5*0,1*4","8*0, 7*2, 10*0","12*0,3*2,5*0,2*2,6*0","8*0, 2*2, 2*0","4*2, 2*3","2*2,15*0"]);T(this,"id",2);T(this,"wave",0);T(this,"waveItem",0);T(this,"activeWave");T(this,"activeEnemyObjects",[]);T(this,"order",[]);T(this,"walls",[]);T(this,"garden",new H({width:100,height:100}));T(this,"gardenSprites",[D.Garden,D.Garden4,D.Garden3,D.Garden2,D.Garden1,D.Garden1]);T(this,"endlessMode",!1);T(this,"timer",new Bn({fcn:()=>this.removeParticles(),repeats:!1,interval:200}));T(this,"deathParticles",new Fe({emitterType:Ue.Rectangle,radius:10,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:600,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.fromRGB(139,69,19),isEmitting:!1}));T(this,"upgradeParticles",new Fe({emitterType:Ue.Rectangle,radius:2,minVel:100,maxVel:200,minAngle:0,maxAngle:Math.PI*2,emitRate:300,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Green,endColor:ht.Green,isEmitting:!1}));T(this,"impactParticle",new Fe({emitterType:Ue.Rectangle,radius:1,minVel:50,maxVel:100,minAngle:0,maxAngle:Math.PI*2,emitRate:50,opacity:1,fadeFlag:!0,particleLife:1e3,maxSize:3,minSize:1,beginColor:ht.Red,endColor:ht.Red,isEmitting:!1}))}onInitialize(d){this.endlessMode=this.engine.endless,this.endlessMode===!1&&(this.waveText=new vt({font:new At({unit:ft.Px,family:"VCR",size:30,color:ht.White,strokeColor:ht.Black})}),this.waveText.text=`${localStorage.getItem("0")}/${this.levels.length}`,this.waveText.pos=new A(20,350),this.waveText.z=99999,this.add(this.waveText)),this.buyMenu=new H,this.buyMenu.graphics.use(D.BuyMenu.toSprite()),this.buyMenu.pos=new A(1400,450),this.buyMenu.scale=new A(3,1),this.buyMenu.z=9999,this.buyMenu.enableCapturePointer=!0,this.buyMenu.pointer.useGraphicsBounds=!0,this.guldenLogo=new H,this.guldenLogo.graphics.use(D.Gulden.toSprite()),this.guldenLogo.scale=new A(.4,.4),this.guldenLogo.pos=new A(120,80),this.guldenLogo.z=99999,this.add(this.guldenLogo),this.guldenDisplay=new ia,this.add(this.guldenDisplay),this.levensLogo=new H,this.levensLogo.graphics.use(D.Health.toSprite()),this.levensLogo.scale=new A(.4,.4),this.levensLogo.pos=new A(120,120),this.levensLogo.z=99999,this.add(this.levensLogo),this.levensDisplay=new sa,this.add(this.levensDisplay),this.placingSprite=new hi,this.engine.input.pointers.primary.on("up",()=>this.mouseInput()),this.engine=d;let m=[182,45,184,854,249,853,238,45,309,45,318,846,389,846,382,45,384,854,393,72,1371,74,1371,136,400,140,403,197,1369,188,1371,806,1334,807,1334,72,1281,70,1297,811,1244,811,1236,72,565,73,571,809,506,811,530,72,459,72,496,810,398,813,396,761,1372,761,1373,716,399,711,397,671,1371,679,1373,626,399,629,399,629];for(let b=0;b<m.length;b+=2){let R=0,G=0,z=new ea(m[b]+R,m[b+1]+G,m[b+2]+R,m[b+3]+G);z.on("precollision",Q=>{Q.other instanceof hi&&(this.isLegal=!1)}),z.on("collisionend",Q=>{Q.other instanceof hi&&(this.isLegal=!0)}),this.walls.push(z)}this.garden.sprite=D.Garden.toSprite(),this.garden.graphics.use(this.garden.sprite),this.add(this.garden),this.garden.z=9999,this.garden.pos=new A(900,400),this.garden.collisionType=ks.Passive,this.garden.on("collisionstart",b=>{b.other instanceof ho&&(this.engine.damage(),this.crunch.play(),this.garden.graphics.use(this.gardenSprites[Math.ceil(this.engine.levens/4)].toSprite()),b.other.explode())});let v=new H;v.graphics.use(D.Map3Ground.toSprite()),v.scale=new A(5.9,5.9),v.pos=new A(750,450),this.add(v);let x=new H;x.graphics.use(D.Map3Top.toSprite()),x.scale=new A(5.9,5.9),x.pos=new A(691,450),x.z=9999,this.add(x),this.settingsButton=new H,this.settingsButton.graphics.use(D.SettingsButton.toSprite()),this.settingsButton.pos=new A(50,105),this.settingsButton.scale=new A(.7,.7),this.settingsButton.z=9999,this.settingsButton.enableCapturePointer=!0,this.settingsButton.pointer.useGraphicsBounds=!0,this.settingsButton.on("pointerup",b=>this.goToSettings()),this.add(this.settingsButton),this.buyMenuButton=new H,this.buyMenuButton.graphics.use(D.BuyButton.toSprite()),this.buyMenuButton.pos=new A(50,195),this.buyMenuButton.scale=new A(.7,.7),this.buyMenuButton.z=9999,this.buyMenuButton.enableCapturePointer=!0,this.buyMenuButton.pointer.useGraphicsBounds=!0,this.buyMenuButton.on("pointerup",b=>this.drawBuyMenu()),this.add(this.buyMenuButton),this.playRoundButton=new H,this.playRoundButton.graphics.use(D.PlayButton.toSprite()),this.playRoundButton.pos=new A(50,285),this.playRoundButton.scale=new A(.7,.7),this.playRoundButton.z=9999,this.playRoundButton.enableCapturePointer=!0,this.playRoundButton.pointer.useGraphicsBounds=!0,this.playRoundButton.on("pointerup",b=>this.startWave()),this.add(this.playRoundButton),this.enemies(),this.koopLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:30})}),this.koopLabel.text="Koop:",this.koopLabel.pos=new A(1350,150),this.koopLabel.z=99999,this.bamiLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamiLabel.text="Pan bami",this.bamiLabel.pos=new A(1350,150),this.bamiLabel.z=99999,this.bamiButton=new H,this.button(this.bamiButton,D.Pan,new A(1350,200),new A(1.5,1.5)),this.bamiButton.on("pointerdown",b=>this.buyTower(1)),this.costlogobami=new H,this.costLogo(this.costlogobami,new A(1350,250)),this.bamicost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.bamicost.text="375",this.bamicost.pos=new A(1370,250),this.bamicost.z=99999,this.tinyLauLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinyLauLabel.text="Tiny en Lau",this.tinyLauLabel.pos=new A(1350,300),this.tinyLauLabel.z=99999,this.tinyLauButton=new H,this.button(this.tinyLauButton,D.TinyLau,new A(1350,350),new A(2,2)),this.tinyLauButton.on("pointerdown",b=>this.buyTower(2)),this.costlogotiny=new H,this.costLogo(this.costlogotiny,new A(1350,400)),this.tinycost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.tinycost.text="500",this.tinycost.pos=new A(1370,400),this.tinycost.z=99999,this.spiderTrikeLabel=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spiderTrikeLabel.text="Spinnenman",this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.z=99999,this.spiderTrikeButton=new H,this.button(this.spiderTrikeButton,D.SpiderMeneer,new A(1350,500),new A(1.5,1.5)),this.spiderTrikeButton.on("pointerdown",b=>this.buyTower(3)),this.enemies(),this.costlogospider=new H,this.costLogo(this.costlogospider,new A(1350,550)),this.spidercost=new vt({font:new At({unit:ft.Px,family:"VCR",size:16})}),this.spidercost.text="650",this.spidercost.pos=new A(1370,550),this.spidercost.z=99999,this.activeWave=new H,this.button(this.activeWave,D.TinyLau,new A(130,350),new A(2,2)),this.activeWave.on("pointerdown",b=>this.startWave())}drawBuyMenu(){this.buyMenuClick++,this.buyMenuClick===1&&(this.buyMenu.pos=new A(1500,450),this.buyMenu.actions.moveTo(1400,450,1100),this.add(this.buyMenu),this.koopLabel.pos=new A(1500,100),this.koopLabel.actions.moveTo(1300,100,1100),this.add(this.koopLabel),this.bamiLabel.pos=new A(1500,150),this.bamiLabel.actions.moveTo(1310,150,1300),this.add(this.bamiLabel),this.bamiButton.pos=new A(1500,180),this.bamiButton.actions.moveTo(1350,180,1300),this.add(this.bamiButton),this.costlogobami.pos=new A(1500,200),this.costlogobami.actions.moveTo(1300,230,1300),this.add(this.costlogobami),this.bamicost.pos=new A(1500,230),this.bamicost.actions.moveTo(1330,230,1300),this.add(this.bamicost),this.tinyLauLabel.pos=new A(1500,270),this.tinyLauLabel.actions.moveTo(1295,270,1300),this.add(this.tinyLauLabel),this.tinyLauButton.pos=new A(1500,300),this.tinyLauButton.actions.moveTo(1350,300,1300),this.add(this.tinyLauButton),this.costlogotiny.pos=new A(1500,350),this.costlogotiny.actions.moveTo(1300,350,1300),this.add(this.costlogotiny),this.tinycost.pos=new A(1500,380),this.tinycost.actions.moveTo(1330,350,1300),this.add(this.tinycost),this.spiderTrikeLabel.pos=new A(1500,380),this.spiderTrikeLabel.actions.moveTo(1300,390,1300),this.add(this.spiderTrikeLabel),this.spiderTrikeButton.pos=new A(1500,430),this.spiderTrikeButton.actions.moveTo(1350,440,1300),this.add(this.spiderTrikeButton),this.costlogospider.pos=new A(1500,480),this.costlogospider.actions.moveTo(1300,490,1300),this.add(this.costlogospider),this.spidercost.pos=new A(1500,510),this.spidercost.actions.moveTo(1330,490,1300),this.add(this.spidercost)),this.buyMenuClick===2&&(this.buyMenu.kill(),this.koopLabel.pos=new A(1350,50),this.koopLabel.kill(),this.bamiLabel.pos=new A(1350,150),this.bamiLabel.kill(),this.bamiButton.pos=new A(1350,450),this.bamiButton.kill(),this.costlogobami.pos=new A(1350,250),this.costlogobami.kill(),this.bamicost.pos=new A(1350,250),this.bamicost.kill(),this.tinyLauLabel.pos=new A(1350,250),this.tinyLauLabel.kill(),this.tinyLauButton.pos=new A(1350,350),this.tinyLauButton.kill(),this.costlogotiny.pos=new A(1350,350),this.costlogotiny.kill(),this.tinycost.pos=new A(1350,350),this.tinycost.kill(),this.spiderTrikeLabel.pos=new A(1350,450),this.spiderTrikeLabel.kill(),this.spiderTrikeButton.pos=new A(1350,250),this.spiderTrikeButton.kill(),this.costlogospider.pos=new A(1350,350),this.costlogospider.kill(),this.spidercost.pos=new A(1350,350),this.spidercost.kill(),this.buyMenuClick=0)}enemyKilled(d){this.deathParticles.isEmitting=!0,this.deathParticles.pos=d,this.add(this.deathParticles),this.particleCounter=0,this.particleEmitting=!0,console.log("eeee")}impactParticleFunction(d){this.impactParticle.isEmitting=!0,this.impactParticle.pos=d,this.add(this.impactParticle),this.impactParticleCounter=0,console.log("eeee")}removeParticles(){this.upgradeParticles.isEmitting=!1,this.upgradeParticles.kill()}}class Pg extends Ds{constructor(){super();T(this,"background");T(this,"timer",0)}onActivate(d){this.background.scale=new A(1.15,1.15),this.background.pos=new A(970,500),this.timer=0}onInitialize(d){this.background=new H,this.background.graphics.use(D.CutScene.toSprite()),this.add(this.background)}onPreUpdate(d,m){this.timer++,console.log(this.timer),this.background.pos.x+=-1*(this.timer/1e3),this.background.scale=new A(this.background.scale.x-=this.timer/2e6,this.background.scale.y-=this.timer/2e6),this.timer>800&&this.engine.goToScene("levelselect"),d.input.keyboard.wasPressed(Vt.Keys.Space||Vt.Keys.Escape)&&this.engine.goToScene("levelselect")}}var uo,hr,$o,il;class Sg extends Xa{constructor(){super({width:1440,height:900,displayMode:Wa.FitScreenAndZoom});qo(this,$o);T(this,"game");T(this,"musicVolume",.5);T(this,"gulden",500);T(this,"buyMenu");T(this,"activetower");T(this,"levens",20);T(this,"profanityMode",!0);T(this,"activeScene");T(this,"endless",!1);T(this,"paused",!1);qo(this,uo,void 0);qo(this,hr,void 0);T(this,"cursor");this.start(Ls).then(()=>this.startGame()),this.showDebug(!1),this.debug.motion={accelerationColor:ht.Azure,showAcceleration:!0,showAll:!0,showVelocity:!0,velocityColor:ht.Green},this.add("menu",new rg),this.add("levelselect",new cg),this.add("level1",new Ig),this.add("level2",new Bg),this.add("level3",new Mg),this.add("settings",new hg),this.add("gameover",new dg),this.add("Helper",new lg),this.add("cutscene",new Pg)}onInitialize(d){this.game=d,localStorage.getItem("0")===null&&localStorage.setItem("0","0"),localStorage.getItem("1")===null&&localStorage.setItem("1","0"),localStorage.getItem("2")===null&&localStorage.setItem("2","0")}startGame(d){Ma(this,uo,new wg(this,!1,!1)),Ma(this,hr,m=>Ya(this,$o,il).call(this,m)),document.addEventListener("joystickcreated",Ko(this,hr)),this.goToScene("menu")}onPreUpdate(){console.log(this.paused)}disconnect(){document.removeEventListener("joystickcreated",Ko(this,hr))}damage(){this.levens-=1,this.currentScene.camera.shake(2,2,300)}shake(){this.currentScene.camera.shake(.5,.5,300)}}uo=new WeakMap,hr=new WeakMap,$o=new WeakSet,il=function(d){let m=Ko(this,uo).Joysticks[d.detail];for(const v of m.ButtonEvents)document.addEventListener(v,()=>console.log(v))};new Sg;
